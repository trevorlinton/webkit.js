commit d6263bec89bcd1565fb0f56a9840cd6f7761097f
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 10 17:34:41 2008 -0700

    Increment cairo version to 1.6.0

 configure.in |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 709805c26f567b7fa90d04e701ccbf1cccc34da7
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 10 17:33:51 2008 -0700

    NEWS: Add notes for 1.6.0 release

 NEWS |  198 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++---
 1 files changed, 190 insertions(+), 8 deletions(-)

commit aadbaf7d990d0d5cd7c25cc856dbcfcc357b44f1
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 8 02:45:56 2008 -0700

    Increment version to 1.5.20

 configure.in |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 8f123d035af0c02dc0a668a073410756edafbdd6
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 8 02:45:31 2008 -0700

    NEWS: Add notes for 1.5.20 snapshot

 NEWS |   47 +++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 47 insertions(+), 0 deletions(-)

commit f7dea9a8d3da7f57286db4b1b6300726483a0d76
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 8 02:28:52 2008 -0700

    Fix distcheck by renaming large-source-ref.c to large-source-ref.png (oops!)

 test/large-source-ref.c   |  Bin 137 -> 0 bytes
 test/large-source-ref.png |  Bin 0 -> 137 bytes
 2 files changed, 0 insertions(+), 0 deletions(-)

commit c26a7de9707e26d0552b0fedcd4bf2e0ba6542b2
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 8 01:54:27 2008 -0700

    Prevent potentially infinite wandering through memeory in _cairo_hull_prev_valid
    
    It is possible for _cairo_hull_prev_valid to be called just once
    right before the calling loop is going to terminate. In this
    case we really don't want to walk off the beginning of the
    array and start wandering.
    
    Thanks to Jonathan Watt for noticing this problem:
    
    	https://bugzilla.mozilla.org/show_bug.cgi?id=306649#c21

 src/cairo-hull.c |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

commit c19133eb9ab31bbdc7e82573033e513e9eb867f2
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 8 01:34:37 2008 -0700

    Revert "[test] Repeat tests using cairo_push_group()."
    
    This reverts commit 07122e64fa9529e7ba9323988a5af1d1e7c2c55f.
    
    The extra testing did find a pdf bug, and that should be fixed,
    but the extra maintenance burden of running another iteration
    of all tests does not seem justfied at all---particularly since
    it looks like dozens of new reference images would be needed
    for the svg backend.
    
    Also, the new "failures" of the image backend with this new
    testing look like a misunderstanding of exactly what the new
    testing is actually drawing.

 test/cairo-test.c |  119 +++++++---------------------------------------------
 1 files changed, 16 insertions(+), 103 deletions(-)

commit c1f7655f2fd5373a74d3fbf5977ebbd84e401e25
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 8 00:40:58 2008 -0700

    Check surface->status and finished in cairo_surface_write_to_png
    
    Without these checks, a user could hit an assertion failure
    by passing a finished surface to cairo_surface_write_to_png.
    Now we return a nice CAIRO_STATUS_SURFACE_FINISHED error in
    that case instead.

 src/cairo-png.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 33c54ed240b319acb28ef370eef5188ad42a5737
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 7 22:14:04 2008 +0100

    [test] Add large-source to exercise handling of massive images.
    
    This test exercises https://bugzilla.mozilla.org/show_bug.cgi?id=424333.
    
    The test is expected to fail due to issues with pixman, but cairo
    should fail gracefully and neither crash nor cause XErrors.

 test/.gitignore         |    1 +
 test/Makefile.am        |    3 +
 test/large-source-ref.c |  Bin 0 -> 137 bytes
 test/large-source.c     |  109 +++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 113 insertions(+), 0 deletions(-)

commit 4924d4d928666981f3e64bec685e8f90e524e62e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 7 23:48:36 2008 +0100

    [cairo-xlib] Do not create surface with mismatching Visual and PictFormat.
    
    As identified by Vladimir Vukicevic,
    _cairo_xlib_surface_create_similar_with_format() was erroneously passing
    down the source Visual when creating a surface with a different
    XRenderPictFormat.

 src/cairo-xlib-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 9aac5916bcb4a3e62194315b12961d97f193a585
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 7 23:42:47 2008 +0100

    [test/xlib-surface] Check for mismatching Visuals and XRenderPictFormats
    
    Vladimir Vukicevic reported that surfaces were being created with
    mismatching Visuals and XRenderPictFormats - and demonstated here.

 test/xlib-surface.c |   63 +++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 63 insertions(+), 0 deletions(-)

commit f6afba8f5453b8e3af9101fa2cde4c05a67f6d4b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 7 23:25:57 2008 +0100

    [cairo-xlib] Create Pixmap using depth from xrender_format.
    
    Use the depth as specified by the xrender_format when creating the
    pixmap (as opposed to a guess based on the cairo_format_t).

 src/cairo-xlib-surface.c |   21 ++-------------------
 1 files changed, 2 insertions(+), 19 deletions(-)

commit 922fefdde4af28f9fc1e42fcba1b315980b01dc7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 7 23:06:18 2008 +0100

    [cairo-xlib] Handle missing RENDER during similar surface creation
    
    If the xserver doesn't support the RENDER extension or simply doesn't
    have the matching PictFormat then xrender_format might be NULL. Check
    and fallback in this case.

 src/cairo-xlib-surface.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 07122e64fa9529e7ba9323988a5af1d1e7c2c55f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 7 22:00:51 2008 +0100

    [test] Repeat tests using cairo_push_group().
    
    Test surfaces using similar surfaces with both CONTENT_COLOR and
    CONTENT_COLOR_ALPHA, if applicable. This seems justified by the apparent
    bugs in the pdf backend when going from an ARGB32 similar surface to
    a destination RGB24 surface as well as isolated bugs in the image
    backend.
    
    The original goal was to try and trick the test suite into producing
    a xlib surface with mismatching Visual/XRenderPictFormat. This succeeds,
    although with a little bit of brute force in the xlib backend, but the
    search to reproduce a BadMatch error fruitless.

 test/cairo-test.c |  119 +++++++++++++++++++++++++++++++++++++++++++++-------
 1 files changed, 103 insertions(+), 16 deletions(-)

commit e04e4262386b8735d2ceabbc187405cace89dc80
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 7 10:56:38 2008 +0100

    [test/get-xrender-format] Free static data on exit.
    
    Free the internal caches so that valgrind reports zero leaks.

 test/get-xrender-format.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit e57ef66fab7cb05b84175b3cfb5c032150cfa682
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 7 10:51:27 2008 +0100

    [test/xlib-surface] Zero pixel buffers before use.
    
    As we only use RGB24 surface data the alpha channel is undefined, so
    zero it to prevent valgrind warnings.

 test/xlib-surface.c |   24 ++++++++++++++++++++----
 1 files changed, 20 insertions(+), 4 deletions(-)

commit d0672e85ef120a4e3cd0dfcbdb717afbf9526f17
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 7 10:42:57 2008 +0100

    [test/surface-source] Skip tests if we cannot create the source surface.
    
    Check that the test environment supports the desired source and avoid
    triggering asserts in the test routines.

 test/glitz-surface-source.c |   15 ++++++++++-----
 test/surface-source.c       |    8 ++++++++
 2 files changed, 18 insertions(+), 5 deletions(-)

commit 056d3c853e6660db31ee4a50d0e990a6013aa703
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 7 10:35:04 2008 +0100

    [test/stroke-image] Fix memleak.
    
    Release the temporary image surface after setting it as the source.

 test/stroke-image.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit e460e586d7d093c1e03052efa3bfb45a2d5cf6ef
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 7 22:02:44 2008 -0700

    Update several pdf-specific reference images
    
    I don't know if we made minor changes to the pdf backend, or
    if this was due to a poppler change, (we recently bumped the
    poppler required for testing up to 0.8.0), but any way around
    it these test results look just as good as the reference images
    they are replacing.

 test/Makefile.am                               |    2 ++
 test/clip-operator-pdf-argb32-ref.png          |  Bin 11429 -> 11145 bytes
 test/ft-text-vertical-layout-type1-pdf-ref.png |  Bin 0 -> 3604 bytes
 test/ft-text-vertical-layout-type3-pdf-ref.png |  Bin 0 -> 3634 bytes
 test/push-group-pdf-ref.png                    |  Bin 2694 -> 2807 bytes
 test/push-group-pdf-rgb24-ref.png              |  Bin 2611 -> 2714 bytes
 6 files changed, 2 insertions(+), 0 deletions(-)

commit fdcd1445846b59d2ffd1780dd0f6d70169036ad4
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 7 13:30:59 2008 -0700

    Add filter-bilinear-extents to the XFAIL list
    
    This test case does show a bug, and we have lots of ideas on how
    to fix the bug, but we want to wait until after the 1.6 release
    before we fix it. See:
    
    	http://bugs.freedesktop.org/show_bug.cgi?id=15349

 test/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 36246c51ba720713ebf93573da29b098e87f0bd0
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 7 12:10:24 2008 -0700

    Revert "_cairo_pattern_get_extents: Fix to allow for expansion based on filter"
    
    This reverts commit 731e121c802a7b1c3429d1bde7a93bc471d70880.
    
    This commit introduced various problems, (some likely noticeable
    in the test suite, and others perhaps not). For some details, see
    the latest comments in the original bug report leading to the
    fix now being reverted:
    
    	http://bugs.freedesktop.org/show_bug.cgi?id=15349

 src/cairo-pattern.c |   22 ----------------------
 1 files changed, 0 insertions(+), 22 deletions(-)

commit c88adb6aee650c8c544b212f539bd5da9ed88734
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 7 16:09:03 2008 -0700

    Add svg-specific reference images for smask and smask-mask
    
    The most recent change for the mask_id allocation fixes these
    two test, (it fixes mask-image-mask as well, but it didn't need
    a new reference image).

 test/Makefile.am            |    2 ++
 test/smask-mask-svg-ref.png |  Bin 0 -> 2529 bytes
 test/smask-svg-ref.png      |  Bin 0 -> 3634 bytes
 3 files changed, 2 insertions(+), 0 deletions(-)

commit 164e9c195c16fbed08539b859a06cc6f042fb5d9
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 7 15:50:22 2008 -0700

    SVG: Fix generation of mask_id identifiers
    
    In tests such as smask-mask (and others) the cairo_mask operation
    is used in the construction of a mask. In this case, the single
    document->mask_id value was being incremented at inappropriate
    times.
    
    We fix this by adding a new _cairo_svg_document_allocate_mask_id
    that returns the current value and increments it. That way,
    callers can hold onto this reliable value for the desired lifetime
    that the code needs the identifier.

 src/cairo-svg-surface.c |   18 ++++++++++++++----
 1 files changed, 14 insertions(+), 4 deletions(-)

commit 8aa306ec08dcf0ae8803cdb1bda0fb31658f9e83
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 7 14:17:40 2008 -0700

    Add svg-specific reference images for smask-fill, smask-paint, and smask-text tests

 test/Makefile.am             |    3 +++
 test/smask-fill-svg-ref.png  |  Bin 0 -> 1166 bytes
 test/smask-paint-svg-ref.png |  Bin 0 -> 2612 bytes
 test/smask-text-svg-ref.png  |  Bin 0 -> 1886 bytes
 4 files changed, 3 insertions(+), 0 deletions(-)

commit 3d86023281d7d18ad72be85ad8b53c29f20dfc7e
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 7 14:09:32 2008 -0700

    Add ps-specific reference images for smask and smask-text tests

 test/Makefile.am           |    2 ++
 test/smask-ps-ref.png      |  Bin 0 -> 3669 bytes
 test/smask-text-ps-ref.png |  Bin 0 -> 2023 bytes
 3 files changed, 2 insertions(+), 0 deletions(-)

commit f2a94c84a160f205ee72cc0c538a556d7d611e7b
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 7 13:03:58 2008 -0700

    Add underscore prefix to private _cairo_pdf_surface_set_size_internal

 src/cairo-pdf-surface.c |   48 +++++++++++++++++++++++-----------------------
 1 files changed, 24 insertions(+), 24 deletions(-)

commit 3d22902fa37623a56dee9e4a20d0dc215deabd72
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Apr 6 19:29:25 2008 +0930

    Add PDF ref images for the smask tests
    
    These tests render correctly in acroread 8.1.

 test/Makefile.am                  |    7 +++++++
 test/smask-fill-pdf-ref.png       |  Bin 0 -> 1075 bytes
 test/smask-image-mask-pdf-ref.png |  Bin 0 -> 421 bytes
 test/smask-mask-pdf-ref.png       |  Bin 0 -> 3731 bytes
 test/smask-paint-pdf-ref.png      |  Bin 0 -> 3800 bytes
 test/smask-pdf-ref.png            |  Bin 0 -> 3800 bytes
 test/smask-stroke-pdf-ref.png     |  Bin 0 -> 449 bytes
 test/smask-text-pdf-ref.png       |  Bin 0 -> 1806 bytes
 8 files changed, 7 insertions(+), 0 deletions(-)

commit 688fbc24c38119a505e54a8a2fd0e71e988bf969
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Apr 6 19:04:27 2008 +0930

    PDF: Add a function for changing the surface size
    
    The smask-fill test was failing for PDF output because in some places
    where the surface size is changed (eg when emitting patterns or
    smasks) the cairo_to_pdf matrix was not updated.
    
    Fix this by adding a function to handle the surface size change and
    replace all the duplicated code for changing surface size with a call
    to this function.

 src/cairo-pdf-surface.c |   69 ++++++++++++++++++++++------------------------
 1 files changed, 33 insertions(+), 36 deletions(-)

commit 6e5e852f739b63f0325927c70e4d4456c60d0ba9
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Apr 6 03:25:58 2008 -0700

    Increment cairo version to 1.5.19 after the 1.5.18 snapshot

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 6d6c8aa643603c2b5fd7baedc897d4698ba8bafb
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Apr 6 03:11:04 2008 -0700

    Increment cairo version to 1.5.18 and library versioning to 19:1:17

 configure.in |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 44cd51ada62f831e4fddd363797b3ad4568fb443
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Apr 6 03:10:07 2008 -0700

    NEWS: Add notes for 1.5.18 snapshot

 NEWS |  111 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 111 insertions(+), 0 deletions(-)

commit 3f5ce00e99bcbb17594441301ad0845007d0aedf
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Apr 6 03:09:45 2008 -0700

    Add missing parens() to function name in gtk-doc comment

 src/cairo.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit c08e2ba974ad7f5d9343d0d815a00a8e9ad51f81
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Apr 6 02:56:19 2008 -0700

    Document default opaque black source pattern.

 src/cairo.c |   12 +++++++++---
 1 files changed, 9 insertions(+), 3 deletions(-)

commit e07e1b7bbbac59ae2ea25ed762c017b477e22cc4
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Apr 6 02:47:32 2008 -0700

    Document many more defaults
    
    Including: fallback_resolution, fill_rule, line_cap, line_join,
    miter_limit, font_face, font_size, and operator.

 src/cairo-surface.c |    3 +++
 src/cairo.c         |   30 ++++++++++++++++++++++++++----
 src/cairo.h         |   10 +++++++++-
 3 files changed, 38 insertions(+), 5 deletions(-)

commit a55669c325c341fa6175a193cb0d6fa30b8247c9
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Apr 6 02:17:33 2008 -0700

    Document toy nature of cairo_select_font_face

 src/cairo.c |   32 ++++++++++++++++++++++++++------
 1 files changed, 26 insertions(+), 6 deletions(-)

commit d1fe0084405a49f33d4ab6d80e9398e281483900
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Apr 6 02:17:09 2008 -0700

    Document default extend modes

 src/cairo-pattern.c |    3 +++
 src/cairo.h         |    9 +++++++--
 2 files changed, 10 insertions(+), 2 deletions(-)

commit abe6f9541eb1fe10c063540dbffe3499ec8a9d3e
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Apr 6 02:01:04 2008 -0700

    Document EXTEND_REFLECT and EXTEND_PAD as implemented for surfaces since 1.6

 src/cairo.h |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 657b348e0172f3b5f2c91a406c2eca039a790ca1
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Apr 6 01:57:45 2008 -0700

    README: Update dependencies

 README |  139 +++++++++++++++++++++++++++++++++++++++++-----------------------
 1 files changed, 89 insertions(+), 50 deletions(-)

commit c642a401959c183de2afa3fba2c4206aa0fdbc0c
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Apr 6 01:13:17 2008 -0700

    Revert "[README] Remove the Dependencies section as it falls out of date easily"
    
    This reverts commit 5f38e215ed4ec930492ee373db37a767d85a6ee8.
    
    It's true that the dependencies can fall out of date, but it's really
    unkind to not provide users with this information. I think we can
    compromise by committing to update this information before major
    releases.

 README |   89 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 89 insertions(+), 0 deletions(-)

commit b61d1b01e94b3d8daa288b8d5d183f093d989582
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Apr 6 01:07:32 2008 -0700

    Change default filter from BEST to GOOD
    
    Right now the two filters are implemented identically, so there's
    no real change for now. But in the future, it's conceivable that an
    X server could implement some crazy, high-quality filter for BEST
    without regard to performance, (since that's what BEST means).
    
    Meanwhile, GOOD actually captures what we want by default which is
    a good mix of both quality and performance.

 src/cairoint.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 14b056945cef7e016ec07c87725348f3f0649d9f
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Apr 6 00:34:59 2008 -0700

    Update smask-text reference image
    
    It appears the reference image wasn't generated on a gold-standard
    machine, (and yes, the gold standard is, *ahem* whatever happens
    to match what Carl's machine does---eventually we'll make the test-
    based tests less picky about system configuration like this).

 test/smask-text-ref.png |  Bin 1796 -> 1739 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit 3a89bf4a1dd37852ca603c2ba472de73959dc69a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 5 22:01:24 2008 +0100

    [test] Remove some redundant evals from the summary.
    
    In a couple of places we used eval to execute a simple assignment -
    complete overkill.

 test/Makefile.am |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit fc0a2988cdcbc54292377b00fe9a82b4a7407918
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 5 21:58:10 2008 +0100

    [test] Disable jobserver with make check.
    
    make -j check has the unfortunate side-effect of performing the summary
    before the TESTS have completed, both hiding in the stream of test
    output and making it useless. Forcibly disable the jobserver so that the
    summary is always last at the expense of not compiling the tests in parallel.

 test/Makefile.am |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit ae6fbe9e6e153a917f3ae8d733e88303e2816b2b
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Apr 6 01:08:31 2008 +1030

    scaled-font-subsets: Special case .notdef in a new subset
    
    If the .notdef glyph is the first glyph in the subset to be mapped in
    scaled font, we do not know if the subset will scaled or unscaled. We
    can put it in the unscaled subset as Type1-fallback will embded an
    empty glyph if it can not get the path.

 src/cairo-scaled-font-subsets.c |   20 +++++++++++++++-----
 1 files changed, 15 insertions(+), 5 deletions(-)

commit 0d5902b7167f8cb4bfc96fd813003cd220441151
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Apr 5 23:33:29 2008 +1030

    Type1-fallback: Use correct glyph metrics for .notdef glyph
    
    Bug 15348 references the following PDF that was printing incorrectly
    when running through poppler and cairo to generate PostScript.
    
    http://launchpadlibrarian.net/12921700/UbuntuDesktop.pdf
    
    The PostScript output had too much space between each word causing
    strings of glyphs printed with the TJ operator to overlap.
    
    The original PDF file contains an CFF font with CID Identity-H
    encoding. The PDF file is using character code 0 (glyph 0 due to
    Identity-H encoding) as a space character. The CFF specification
    defines glyph 0 to be the .notdef glyph.
    
    The PS backend subsets CFF fonts as a Type1-fallback
    font. Type1-fallback creates it's own empty .notdef glyph with an
    arbitrary glyph advance of 500. The problem here is the TJ operator
    used to output the glyphs depends on the glyph advance being
    correct. pdf-operators.c uses the glyph advance returned by
    _scaled_glyph_init(). However the PostScript interpreter sees the
    glyph advance of 500 for .notdef. This problem does not occur when
    generating PDF as the PDF font dictionary contains an list of glyph
    advances that override the font metrics.
    
    Fix this by making Type1-fallback not treat .notdef as special and to
    create it the path and metrics obtained from _scaled_glyph_init(). As
    a special case, make it not fail if _scaled_glyph_init() is unable to
    return a path for .notdef. This was probably the reason Type1-fallback
    previously created it's own .notdef glyph as calling
    _scaled_glyph_init(_GLYPH_INFO_PATH) for glyph 0 returns
    CAIRO_INT_STATUS_UNSUPPORTED for some fonts.
    
    This ensures the Type1-fallback font metrics match the metrics used
    by pdf-operators.c to position the glyphs. This also results in the
    removal of some duplicated code.

 src/cairo-type1-fallback.c |   92 ++++++++++++++------------------------------
 1 files changed, 29 insertions(+), 63 deletions(-)

commit 03d2b098ff245ff6724b1d83a121f5ce9dcd0b51
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Apr 5 21:15:15 2008 +1030

    Type1-fallback: Use correct glyph advance in Type 1 charstrings
    
    5050c55f93af fixed type1-fallback to use the glyph advance instead of
    glyph width in the stored glyph metrics in the font. However it did
    not fix the same bug in Type 2 charstrings (used by CFF fallback in
    PDF). This problem was not noticed since the glyph widths in the PDF
    font dictionary overrides these values.
    
    Fix this in case any software reading cairo PDFs uses these values.

 src/cairo-type1-fallback.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 40cee8c57879d37d77c5a93de8f7bdef28851923
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Apr 5 20:53:39 2008 +1030

    Add assert to scaled_glyph_lookup in scaled-font-subsets
    
    If _cairo_scaled_glyph_lookup() returns CAIRO_INT_STATUS_UNSUPPORTED
    it will be caught by the ASSERT_NOT_REACHED in
    _emit_unscaled_font_subset in PS/PDF. It is more useful to catch this
    closer to the source.

 src/cairo-scaled-font-subsets.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 93536bf3ac251d17c4d8630cad93c37b0d4a8326
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 5 09:31:22 2008 +0100

    [test] Summarise failures per backend.
    
    Enhance the test failure summary to list the tests that failed per
    backend.

 test/Makefile.am |   12 ++++++++++--
 1 files changed, 10 insertions(+), 2 deletions(-)

commit 731e121c802a7b1c3429d1bde7a93bc471d70880
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Apr 4 19:00:28 2008 -0700

    _cairo_pattern_get_extents: Fix to allow for expansion based on filter
    
    This fixes the filter-bilinear-extents test case and the
    related bug entry:
    
    	bad clipping with EXTEND_NONE
    	http://bugs.freedesktop.org/show_bug.cgi?id=15349
    
    Though there are still differences in the PDF and PostScript
    backends, (primarily because we can't capture cairo's filter
    modes in those file formats).

 src/cairo-pattern.c |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

commit 04608952e2efb9bffaa131ab39780c3e1a7430ba
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Apr 4 18:56:38 2008 -0700

    Replace open-coded transformation with a call to _cairo_matrix_transform_bounding_box
    
    It's a wonderful feeiling to remove duplicate code.

 src/cairo-pattern.c |   61 ++++++++++++++++++++++----------------------------
 1 files changed, 27 insertions(+), 34 deletions(-)

commit 89567f9278c002ac5e4e25ddccec88b1b1eea420
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Apr 4 18:28:23 2008 -0700

    Add new filter-bilinear-extents test
    
    This test exercises code that computes the extents of a surface
    pattern with CAIRO_FILTER_BILINEAR, (where the filtering
    effectively increases the extents of the pattern).
    
    The original bug was reported by Owen Taylor here:
    
        bad clipping with EXTEND_NONE
        http://bugs.freedesktop.org/show_bug.cgi?id=15349

 test/.gitignore                      |    1 +
 test/Makefile.am                     |    2 +
 test/filter-bilinear-extents-ref.png |  Bin 0 -> 1340 bytes
 test/filter-bilinear-extents.c       |   91 ++++++++++++++++++++++++++++++++++
 4 files changed, 94 insertions(+), 0 deletions(-)

commit 80f7aa03b35921a96683a0442f885c4b8335f3d9
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Apr 4 11:29:47 2008 -0700

    Enable buggy_repeat workaround for X.Org servers < 1.4
    
    This covers the known-to-broken 1.3 servers such as appeared
    in Fedora 8. It also leaves the workaround off, (since it's
    a severe slowdown), for the known-to-be-working 1.4.99.901
    server as appears in Fedora 9 Betas.

 src/cairo-xlib-display.c |   11 +++++++++++
 1 files changed, 11 insertions(+), 0 deletions(-)

commit 2c8ead12a64d0deff4dc9e32c60f2815fe7c4a63
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 4 17:46:54 2008 +0100

    [xlib] Avoiding sending glyphs > XMaxRequestSize.
    
    XRenderAddGlyph() does not split its image data across multiple requests
    and so the glyph surface must be smaller than XMaxRequestSize or else
    the server will disconnect the client, causing "Fatal IO error 104".
    As this will require an extension to the XRender spec, we can work
    around the issue by using our fallbacks if we detect that the glyph will
    be too large for a single request.
    
    See bugs https://bugs.freedesktop.org/show_bug.cgi?id=4339 and
    http://bugs.freedesktop.org/show_bug.cgi?id=13266 for examples.

 src/cairo-xlib-surface.c |   14 ++++++++++++++
 1 files changed, 14 insertions(+), 0 deletions(-)

commit a4f94624b2f4a85bafbc2dc01b08788a7a88deba
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 4 15:56:22 2008 +0100

    [test] Add bilevel image test case.
    
    Add a simple test to exercise the embedding of an image with a bilevel
    alpha channel into a postscript level 3 document.

 test/.gitignore            |    1 +
 test/Makefile.am           |    2 +
 test/bilevel-image-ref.png |  Bin 0 -> 131 bytes
 test/bilevel-image.c       |   68 ++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 71 insertions(+), 0 deletions(-)

commit f72799a2520feb7ed04fd14e53db59fe697a58d1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 4 14:15:58 2008 +0100

    [configure.in] Add a link to the LTP homepage.
    
    If ./configure --enable-gcov fails due to a missing LTP package, then
    include a link to LTP homepage in the error message.

 configure.in |   15 ++++++++-------
 1 files changed, 8 insertions(+), 7 deletions(-)

commit c0593d16c7f2ca9c1ba4d05b6cbf3cf9c2f0524b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 4 12:53:13 2008 +0100

    [pdf] Copy the glyphs for use within an smask group.
    
    When constructing an smask group using PDF_SHOW_GLYPHS, we need a copy
    of the glyphs else they'll be freed be we use them (in _show_page()).

 src/cairo-pdf-surface.c |    9 ++++++++-
 1 files changed, 8 insertions(+), 1 deletions(-)

commit a74db7e7bc092533d244123ea2ae272edf3f5d8f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 4 12:34:40 2008 +0100

    [test] Exercise "soft" masks.
    
    PDF has a concept of "soft" masks, for which it is able to construct a
    mask out of PDF drawing operations. These tests exercise constructing
    various masks using the high level drawing operations.

 test/.gitignore               |    7 ++
 test/Makefile.am              |   14 +++++
 test/smask-fill-ref.png       |  Bin 0 -> 1223 bytes
 test/smask-fill.c             |   83 ++++++++++++++++++++++++++
 test/smask-image-mask-ref.png |  Bin 0 -> 643 bytes
 test/smask-image-mask.c       |   92 +++++++++++++++++++++++++++++
 test/smask-mask-ref.png       |  Bin 0 -> 2523 bytes
 test/smask-mask.c             |  107 +++++++++++++++++++++++++++++++++
 test/smask-paint-ref.png      |  Bin 0 -> 2639 bytes
 test/smask-paint.c            |   90 ++++++++++++++++++++++++++++
 test/smask-ref.png            |  Bin 0 -> 3587 bytes
 test/smask-stroke-ref.png     |  Bin 0 -> 1845 bytes
 test/smask-stroke.c           |   83 ++++++++++++++++++++++++++
 test/smask-text-ref.png       |  Bin 0 -> 1796 bytes
 test/smask-text.c             |   92 +++++++++++++++++++++++++++++
 test/smask.c                  |  130 +++++++++++++++++++++++++++++++++++++++++
 16 files changed, 698 insertions(+), 0 deletions(-)

commit 2d42f5ac27494f2bfd75e7bba42fd36783e053eb
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Apr 4 20:29:12 2008 +1030

    TrueType: Fix buffer check
    
    bb76eb50 added some checks to ensure we do not read past the end of
    the buffer for the loaded glyph. However the checks assumed
    tt_composite_glyph_t has a fixed size. tt_composite_glyph_t has a
    variable size that depends on the values with the struct.

 src/cairo-truetype-subset.c |   16 ++++++++--------
 1 files changed, 8 insertions(+), 8 deletions(-)

commit 7dbb2dec33bb91b3d89a8072283297025817d0c6
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Apr 4 19:48:55 2008 +1030

    TrueType: Remove assert
    
    If the status is UNSUPPORTED we should let type1-fallback subset it.

 src/cairo-truetype-subset.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 6192001816053403b8e51fc2aa44cf6d0a9baece
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Apr 4 19:26:00 2008 +1030

    Add PS reference image for ft-show-glyphs-table

 test/Makefile.am                     |    1 +
 test/ft-show-glyphs-table-ps-ref.png |  Bin 0 -> 5687 bytes
 2 files changed, 1 insertions(+), 0 deletions(-)

commit e50324d3cc66df83120f908845657382e0020868
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Apr 4 19:21:40 2008 +1030

    PS: Fix emulation of 'Td' pdf operator

 src/cairo-ps-surface.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 759793cad1459c2b70daa6adb3deb7af5fe705aa
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 4 09:43:32 2008 +0100

    Add links to the font specifications.
    
    Add links to specifications for the Type1, CFF, and TrueType font file
    formats, provided by Adrian Johnson.

 src/cairo-cff-subset.c      |    5 +++++
 src/cairo-truetype-subset.c |    6 ++++++
 src/cairo-type1-subset.c    |    5 +++++
 3 files changed, 16 insertions(+), 0 deletions(-)

commit 8a78760f15c29c72e6a945b2157fd214e8045e1e
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 3 17:12:14 2008 -0700

    Add new ft-show-glyphs-table test to exercise recent glyph positioning bug fix
    
    Interestingly, this test case does demonstrate that cairo-pdf
    is fixed, (where without commit f6509933a4e0 the Y positions
    of the glyphs were inverted); however, cairo-ps is failing
    with this test, (all the glyphs are ending up on top of each
    other).

 test/.gitignore                   |    1 +
 test/Makefile.am                  |    2 +
 test/ft-show-glyphs-table-ref.png |  Bin 0 -> 11439 bytes
 test/ft-show-glyphs-table.c       |  116 +++++++++++++++++++++++++++++++++++++
 4 files changed, 119 insertions(+), 0 deletions(-)

commit f6509933a4e0abde3b7bca861f65e433b7e8dcf0
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Apr 4 08:41:08 2008 +1030

    PDF: Fix glyph positioning bug

 src/cairo-pdf-operators.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit bb76eb508b2d97a4455393a12540ceb7427bc271
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 3 18:36:16 2008 +0100

    [cairo-truetype-subset] Check reads are within valid data.
    
    Check cairo_truetype_font_remap_composite_glyph() does not read beyond
    the end of the buffer loaded for the glyf.

 src/cairo-truetype-subset.c |   16 ++++++++++++----
 1 files changed, 12 insertions(+), 4 deletions(-)

commit a5e2a2ad2d03c217b9b27c537ee6a945bdc98a44
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 3 18:24:00 2008 +0100

    [cairo-truetype-subset] Prevent accesses beyond the end of the glyph array.
    
    Reject the font if we try to remap a composite glyph that exists outside
    the known set of glyphs.

 src/cairo-truetype-subset.c |   43 ++++++++++++++++++++++++++++++-------------
 1 files changed, 30 insertions(+), 13 deletions(-)

commit 13cdfed894d48b30e28296c3a27c8361bf5506fb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 3 17:43:37 2008 +0100

    [cairo-truetype-subset] Perform a quick sanity check that glyf end >= begin.
    
    Check for a bogus glyf position and prevent an integer overflow.

 src/cairo-truetype-subset.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit cfff3c3bd04df5257176d9e43add52fc6daba329
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 3 17:23:48 2008 +0100

    [cairo-array] Guard against integer overflow whilst growing the array.
    
    Sanity check the arguments to _cairo_array_grow_by() such that the
    array size does not overflow, similar to the defensive checking of
    parameters to malloc.

 src/cairo-array.c |   12 ++++++++----
 src/cairoint.h    |    2 +-
 2 files changed, 9 insertions(+), 5 deletions(-)

commit 6101dc3e93b20294c75734d7f29e55694ed58e74
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 3 14:53:17 2008 +0100

    [cairo-pdf-surface] Do not bitswap big-endian A1 masks.
    
    Pixman stores the bits A1 surfaces in native byte order, PDF stores
    A1 masks in MSb - so only perform swapping for little-endian machines.
    
    Note this also removes the extraneous packing as per the PDF spec 4.8.2:
    "Byte boundaries are ignored, except that each row of sample data must
    begin on a byte boundary. If the number of data bits per row is not a
    multiple of 8, the end of the row is padded with extra bits to fill out
    the last byte."

 src/cairo-pdf-surface.c |   30 +++++++-----------------------
 1 files changed, 7 insertions(+), 23 deletions(-)

commit 7901eb29efb04e469f4bf94e2da6fd6b79b140b0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 3 12:12:25 2008 +0100

    [test] Add a1-mask.
    
    Add a variant of the a8-mask test case that exercises the FORMAT_A1 code
    paths instead.

 test/.gitignore      |    1 +
 test/Makefile.am     |    2 +
 test/a1-mask-ref.png |  Bin 0 -> 131 bytes
 test/a1-mask.c       |  198 ++++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 201 insertions(+), 0 deletions(-)

commit 5aa5aeb1f56493cf7a6bafd22c6921d8415db64e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 3 12:09:03 2008 +0100

    [cairo-font-face] Cleanup up the font_face on the error path.
    
    A missing _cairo_toy_font_face_fini() was leaking the strdup(family).

 src/cairo-font-face.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 048160d44c564b0265b2e740b13d6ed3b367661d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 3 12:11:44 2008 +0100

    [.gitignore] Add test/stroke-image

 test/.gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 9e749d0a287b8038d8a8524ed74626b2d3071538
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Apr 2 23:37:24 2008 -0700

    [cgfont] typo fix

 src/cairo-quartz-font.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3f9b1ceac78976f34a18b551eec376c07db40775
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Apr 2 16:13:53 2008 -0700

    [cgfont] Implement missing scaled font metrics

 src/cairo-quartz-font.c |   74 +++++++++++++++++++++++++++++++++++++++++++++--
 1 files changed, 71 insertions(+), 3 deletions(-)

commit eb3eb0252b13b3d2a3b6acfd13306ff3c6b0506e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 2 14:53:25 2008 +0100

    [cairo-xlib-surface] Avoid writing to the error surface.
    
    Insert status checks during construction of temporary glyph surfaces
    to avoid potentially writing to the inert error object.

 src/cairo-xlib-surface.c |   16 ++++++++--------
 1 files changed, 8 insertions(+), 8 deletions(-)

commit c1062bf20ab60f6335be0814de245616a8d24bd2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 2 10:43:39 2008 +0100

    [cairo-xlib-surface] Preserve Visuals for non-TrueColor similar surfaces.
    
    Previously, given a valid XRenderFormat the Visual was discarded
    when creating similar surfaces. However the original Visual is
    required to support reading back from non-TrueColor surfaces.

 src/cairo-xlib-surface.c |   32 ++++++++++++++++++++------------
 1 files changed, 20 insertions(+), 12 deletions(-)

commit b3a70629f8d1f5d7c23f4369d3395af73318eb28
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 2 09:19:11 2008 +0100

    [test/text-transform] Fix pattern leak.
    
    Add missing cairo_pattern_destroy.

 test/text-transform.c |   10 ++++------
 1 files changed, 4 insertions(+), 6 deletions(-)

commit 37c69c0d54c4b77c96497db4d6633558d4e1300d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 31 21:49:34 2008 +0100

    [cairo-xlib] Handle malloc failures for cairo_xlib_visual_info_t.
    
    Tidy the error paths whilst handling visuals, in particular avoiding a
    couple of potential NULL deferences, missed status checks and fresh
    leaks.

 src/cairo-xlib-private.h |   15 +++++++++---
 src/cairo-xlib-screen.c  |   52 +++++++++++++++++++++++++++++++--------------
 src/cairo-xlib-surface.c |   30 ++++++++++++++++++--------
 src/cairo-xlib-visual.c  |   19 +++++++++++++---
 4 files changed, 83 insertions(+), 33 deletions(-)

commit 0cd42c25a6f4be1ff27ed3a9ba7fa9a91d076e0d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 31 19:15:48 2008 +0100

    [cairo-svg-surface] Check surface status before extracting the svg target.
    
    We need to check and report the existent status, else we may try to
    modify the inert error object.

 src/cairo-svg-surface.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 013bbda6373d84d39e080c5e0b305581a2c6919c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 31 19:15:16 2008 +0100

    [cairo-ps-surface] Check surface status before extracting the ps target.
    
    We need to check and report the existent status, else we may try to
    modify the inert error object.

 src/cairo-ps-surface.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit cebb1eef431a38c7c3a96ae60a5bee188f41dc0b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 31 19:09:21 2008 +0100

    [cairo-svg-surface] Missing status check.
    
    Check and, if necessary, propagate the error status - do not allow the
    status to be overwritten, potentially masking the original error.

 src/cairo-svg-surface.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 94db91b65ef42228c963f2d6d82da085f9148895
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 31 15:47:45 2008 +0100

    [cairo-pdf-surface] Do not mask error during cleanup.
    
    Be careful to preserve the original error status whilst on the common
    cleanup path for _cairo_pdf_surface_emit_meta_surface().

 src/cairo-pdf-surface.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 3580b99a8f99db207b54529f5ac7d0e4325cc123
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 31 14:25:17 2008 +0100

    [cairo-pdf-surface] Check surface status before extracting the pdf target.
    
    We need to check and report the existent status, else we may try to
    modify the inert error object.

 src/cairo-pdf-surface.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 34d734365bdc1c02cf1880804ab15af48c8d03e1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 31 11:27:10 2008 +0100

    [cairo-svg-surface] Release acquired surface on error path.
    
    Ensure the surface returned from _cairo_pattern_acquire_surface() is
    released on the error path.

 src/cairo-svg-surface.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit ba2e82d138eecb451c3d0bf53d9c349fb560f039
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 31 10:55:39 2008 +0100

    [cairo-ps-surface] Check error status before potential illegal dereference.
    
    After acquiring the source image, check for the error status to ensure
    that we do not attempt to deference an invalid surface.

 src/cairo-ps-surface.c |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

commit 767add1ee356660075aaf02283f62a23ef9bcb24
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 28 11:51:13 2008 +0000

    [cairo-pdf-operators] Destroy stream on error.
    
    We cannot guarantee that a newly created error stream is a static error
    object, so we need to always destroy the stream on the error path. (One
    day this may change with the global pool of error objects...)

 src/cairo-pdf-operators.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 2f06284ad6154d1f5fac1a195edbcbc9ed3432cb
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 1 16:07:22 2008 -0700

    Increment cairo version to 1.5.17 after 1.5.16 snapshot

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 5366c8f483dc7bd40b5d0a184c9b16826007c032
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 1 15:52:41 2008 -0700

    Increment version to 1.5.16 and library versioning to 19:0:17

 configure.in |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit eb6721f4ccc6ac861e16ec21c7b420645c4f572b
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 1 15:51:57 2008 -0700

    NEWS: Add notes for the cairo 1.5.16 snapshot

 NEWS |  109 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 109 insertions(+), 0 deletions(-)

commit 8707892b218cb79ef544ba396d4501827b900c32
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 1 15:40:54 2008 -0700

    Doc SGML template churn

 doc/public/tmpl/cairo-ft.sgml   |    7 +++++++
 doc/public/tmpl/cairo-xlib.sgml |    7 +++++++
 2 files changed, 14 insertions(+), 0 deletions(-)

commit 5d0b2ede52eb6d05a7d5579e6bcd1d4d1850300c
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 1 15:24:48 2008 -0700

    Mark cairo-quartz as officially supported
    
    An especial thanks to Vladimir Vukicevic and the Mozilla
    Foundation for a tremendous amount of work on cairo-quartz
    while it has been marked as "experimental"

 configure.in |    6 +-----
 1 files changed, 1 insertions(+), 5 deletions(-)

commit 07130a9061b012bb5c206dc547b4cc0cc69dcbf1
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 1 15:20:42 2008 -0700

    Include cairoint.h first to satisfy the test suite
    
    Forgetting to include cairoint.h (or not including it first) can
    cause some subtle bugs due to specific feature flags not being
    set, etc.

 src/cairo-quartz-font.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 46ea00d829bc50ab5316d2257e0d1ed1d8e3f4b6
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 1 14:53:55 2008 -0700

    More quieting of subtle potentially-uninitialized warnings
    
    The compiler isn't clever enough to notice that these
    variables are always initialized (in either the TrueColor
    or ! TrueColor conditions corresponding to the later
    identical conditions in which the variables are used).

 src/cairo-xlib-surface.c |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit 1489e66d250c070c46cb42a1db9ea9f447f464b9
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 1 14:49:03 2008 -0700

    Quiet a more subtle potentially-uninitialized warning
    
    The compiler isn't clever enough to notice that these
    variables are always initialized.

 src/cairo-rectangle.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit afc6e3b69dcadc63b1dd26a6d67a7da20d7397fe
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 1 14:40:18 2008 -0700

    Quiet some trivial unused and potentially-uninitialized compiler warnings

 src/cairo-gstate.c      |    2 +-
 src/cairo-hull.c        |    2 +-
 src/cairo-ps-surface.c  |    2 +-
 src/cairo-xlib-visual.c |    2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

commit d09b0394d59b50ffd3ea8e58f9f57ea4717de754
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Mar 31 16:50:24 2008 -0700

    Add some reference images that were missing from the distribution list

 test/Makefile.am |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit 56800e6ea0f7153e44f0cba14c89c4239067a60e
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Apr 1 13:28:03 2008 -0700

    [quartz] Remove cairo-atsui-font.c

 src/cairo-atsui-font.c | 1028 ------------------------------------------------
 1 files changed, 0 insertions(+), 1028 deletions(-)

commit 8ddae11b544c35057a96ca0bdea34b4f473ee261
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Apr 1 13:26:00 2008 -0700

    [quartz] Update documentation

 doc/public/tmpl/cairo-ft.sgml           |    8 --------
 doc/public/tmpl/cairo-quartz-fonts.sgml |   25 +++++++++++++++++++++++++
 doc/public/tmpl/cairo-quartz.sgml       |   25 +++++++------------------
 doc/public/tmpl/cairo-xlib.sgml         |    8 --------
 src/cairo-quartz-font.c                 |   14 ++++++++++++--
 src/cairo-quartz-surface.c              |   18 ++++++++----------
 6 files changed, 52 insertions(+), 46 deletions(-)

commit 9a7162cfdf48f47bb8ee0a7c24c55c061e4fbc90
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Apr 1 13:17:14 2008 -0700

    [doc] Add some Quartz/CGFont documentation templates

 doc/public/cairo-docs.xml               |    1 +
 doc/public/cairo-sections.txt           |   14 ++++++++++++++
 doc/public/tmpl/cairo-quartz-fonts.sgml |   23 +++++++++++++++++++++++
 3 files changed, 38 insertions(+), 0 deletions(-)

commit 56cabc352e44ee7cb2989dd81688f6c37c33fc21
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Apr 1 13:01:41 2008 -0700

    [quartz] Update Quartz test reference images

 test/Makefile.am                               |    3 +++
 test/clip-operator-quartz-ref.png              |  Bin 9364 -> 9539 bytes
 test/clip-operator-quartz-rgb24-ref.png        |  Bin 4359 -> 4412 bytes
 test/font-matrix-translation-quartz-ref.png    |  Bin 1041 -> 1090 bytes
 test/glyph-cache-pressure-quartz-ref.png       |  Bin 3491 -> 3654 bytes
 test/linear-gradient-reflect-quartz-ref.png    |  Bin 0 -> 878 bytes
 test/operator-clear-quartz-ref.png             |  Bin 1368 -> 1459 bytes
 test/operator-clear-quartz-rgb24-ref.png       |  Bin 1201 -> 1293 bytes
 test/operator-source-quartz-ref.png            |  Bin 4572 -> 4637 bytes
 test/operator-source-quartz-rgb24-ref.png      |  Bin 3452 -> 3533 bytes
 test/select-font-face-quartz-ref.png           |  Bin 2958 -> 2970 bytes
 test/show-text-current-point-quartz-ref.png    |  Bin 3198 -> 3093 bytes
 test/surface-pattern-scale-down-quartz-ref.png |  Bin 0 -> 3188 bytes
 test/text-antialias-gray-quartz-ref.png        |  Bin 1039 -> 1041 bytes
 test/text-antialias-none-quartz-ref.png        |  Bin 304 -> 300 bytes
 test/text-antialias-subpixel-quartz-ref.png    |  Bin 1100 -> 1065 bytes
 test/text-pattern-quartz-ref.png               |  Bin 0 -> 2158 bytes
 test/text-pattern-quartz-rgb24-ref.png         |  Bin 1867 -> 1874 bytes
 test/text-rotate-quartz-ref.png                |  Bin 17405 -> 17820 bytes
 test/unbounded-operator-quartz-ref.png         |  Bin 4325 -> 4066 bytes
 test/unbounded-operator-quartz-rgb24-ref.png   |  Bin 1972 -> 1918 bytes
 21 files changed, 3 insertions(+), 0 deletions(-)

commit 94b67d13f38d860f1a768f9a088e3b6f5d188f7b
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Apr 1 12:44:32 2008 -0700

    [quartz] Handle further 10.4 vs. 10.5 differences; fix text AA handling

 src/cairo-quartz-surface.c |   74 +++++++++++++++++++++++++------------------
 1 files changed, 43 insertions(+), 31 deletions(-)

commit a1d1be4234f7787c078ff096b4101e300494e7d1
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Thu Mar 27 23:46:53 2008 -0700

    [cgfont] Round surface rectangle outwards to ensure whole-pixel dimensions

 src/cairo-quartz-font.c |   60 +++++++++++++++++++++++++++++++++++++---------
 1 files changed, 48 insertions(+), 12 deletions(-)

commit c064ad1b56d11950786a3fd0363e543f5aec1761
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Thu Mar 27 11:42:53 2008 -0700

    [cgfont] Fix whitespace errors

 src/cairo-quartz-font.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 2be3e67db24ac34f772b5fc1182dfb9b730dce11
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Mar 25 22:44:39 2008 -0700

    [cgfont] Add CGFont backend to replace deprecated ATSUI backend
    
    Create a new font backend that uses the CGFont API on MacOS X
    10.4 and beyond.

 src/cairo-quartz-font.c |  124 ++++++++++++++++++++++++++++++++++++++++------
 1 files changed, 107 insertions(+), 17 deletions(-)

commit 30f7fae6475c36549badf1fcc11ae39d1d79b532
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Thu Mar 20 13:24:48 2008 -0700

    [cgfont] Add start of CGFont font backend to replace ATSUI

 configure.in               |   10 +-
 src/Makefile.am            |    3 +-
 src/cairo-atsui-font.c     |    2 +-
 src/cairo-quartz-font.c    |  590 ++++++++++++++++++++++++++++++++++++++++++++
 src/cairo-quartz-private.h |    5 +
 src/cairo-quartz-surface.c |    1 -
 src/cairo-quartz.h         |    5 +-
 src/cairoint.h             |    4 +-
 8 files changed, 611 insertions(+), 9 deletions(-)

commit 9e6d6798700cf629abbd921cf744babeb49215a1
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Tue Apr 1 16:48:04 2008 +0200

    [SVG] Fix stroke-image test failure.
    
    The pattern transform inherit the object transform matrix, and that was not
    taken into account.

 src/cairo-svg-surface.c |   96 +++++++++++++++++++++++++++++-----------------
 1 files changed, 60 insertions(+), 36 deletions(-)

commit a571cc56a3e708e37fe112212fbd41ae9071a16b
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Mar 31 12:17:39 2008 -0700

    Update pixman dependency to recent 0.10.0 release

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e9adba9a57177a1b5755734db25d08513a30c0b7
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Mar 31 12:15:06 2008 -0700

    Update ps-specifc reference image for ft-text-vertical-layout-type1
    
    Presumably this minor change happened due to a recent fix in
    cairo-ps glyph positioning.

 test/ft-text-vertical-layout-type1-ps-ref.png |  Bin 1911 -> 1910 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit a30ed53a1ce37f68f2ee8abf0f631bcc180e0e57
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Mar 30 00:13:35 2008 +1030

    Add stroke-image PS/PDF ref images

 test/stroke-image-pdf-ref.png |  Bin 0 -> 1554 bytes
 test/stroke-image-ps-ref.png  |  Bin 0 -> 1786 bytes
 2 files changed, 0 insertions(+), 0 deletions(-)

commit a729f27f3c5770277d691257d2355ffb97e3172f
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Mar 30 00:07:05 2008 +1030

    Add clip-operator PS/PDF rgb24 ref images

 test/clip-operator-pdf-rgb24-ref.png |  Bin 0 -> 6530 bytes
 test/clip-operator-ps-rgb24-ref.png  |  Bin 0 -> 4620 bytes
 2 files changed, 0 insertions(+), 0 deletions(-)

commit 9058b9260acce8839263fccf451a982bcb1c54f3
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Mar 29 23:49:51 2008 +1030

    Add operator-source PDF ref images
    
    Required due to gradient rendering differences between poppler and
    cairo.

 test/operator-source-pdf-argb32-ref.png |  Bin 0 -> 4694 bytes
 test/operator-source-pdf-rgb24-ref.png  |  Bin 0 -> 3848 bytes
 2 files changed, 0 insertions(+), 0 deletions(-)

commit 47981226db1650799ddb5efba01df2564aa1a3b5
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Mar 29 23:45:31 2008 +1030

    Fix PDF analysis of OPERATOR_SOURCE surface patterns

 src/cairo-pdf-surface.c |   12 +++++++++---
 1 files changed, 9 insertions(+), 3 deletions(-)

commit 53d1a4b0dcb3a1fa62face9d2b5b086d74b6e397
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Mar 29 23:03:02 2008 +1030

    Update operator-source PS ref images

 test/operator-source-ps-argb32-ref.png |  Bin 3893 -> 3890 bytes
 test/operator-source-ps-rgb24-ref.png  |  Bin 3241 -> 3181 bytes
 2 files changed, 0 insertions(+), 0 deletions(-)

commit b3b3e3810d6ea9e75d5accd8e0d2ad00f664b4a5
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Mar 29 19:14:18 2008 +1030

    PS: Clear pattern background to when using OPERATOR_SOURCE
    
    Set pattern background to white if surface content is COLOR_ALPHA or
    black if surface content is COLOR when operator is SOURCE.

 src/cairo-ps-surface.c |   43 +++++++++++++++++++++++++++----------------
 1 files changed, 27 insertions(+), 16 deletions(-)

commit 5b8b3a9765d292d554b50df0981652d3bb4ec56f
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Mar 29 01:07:30 2008 +1030

    PS/PDF: Save/Restore surface clip when emitting a meta-surface pattern

 src/cairo-pdf-surface.c |    6 ++++++
 src/cairo-ps-surface.c  |    6 ++++++
 src/cairo-surface.c     |    6 ++++++
 src/cairoint.h          |    3 +++
 4 files changed, 21 insertions(+), 0 deletions(-)

commit e4fd9b4ea2e8cc378471c4f536236faa73467977
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Mar 27 09:06:11 2008 +1030

    Bump poppler version required for testing to 0.8.0
    
    The poppler specific reference images are created from the latest
    version of poppler in git. The main reason has been for support for
    knockout groups that had not yet been available in a stable release.
    
    Poppler 0.8.0 is the first stable release to include the support for
    knockout groups.

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit af8928fa8bb8905515f36b4ddc51e665b4b8da56
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Mar 26 14:21:58 2008 -0700

    Add svg-specific reference image for ft-show-glyphs-positioning test
    
    There was no failure here, just minor rasterization differences.

 test/ft-show-glyphs-positioning-svg-ref.png |  Bin 0 -> 6590 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit fbab4bbb06d875313e9cd0dc38673b79b8460edb
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Mar 26 13:47:06 2008 -0700

    Update clip-operator and operator-clear reference images
    
    There were legitimate bugs in the ps and pdf backends for these
    tests, (particularly with the row of glyphs), but these bugs
    were recently fixed with:
    
    commit d89edde84de9cec9ce6f76f4f2c44dd9c1220528
    Author: Vladimir Vukicevic <vladimir@pobox.com>
    Date:   Tue Mar 4 00:15:46 2008 -0800
    
        [meta] always copy glyph array before passing to _cairo_surface_show_glyphs
    
    and we just failed to notice the fix at the time.

 test/clip-operator-pdf-argb32-ref.png |  Bin 11005 -> 11429 bytes
 test/clip-operator-ps-argb32-ref.png  |  Bin 9084 -> 9102 bytes
 test/operator-clear-ps-argb32-ref.png |  Bin 1400 -> 1435 bytes
 3 files changed, 0 insertions(+), 0 deletions(-)

commit 75972167a277687b1434c52e791ffe9c18fa2a7a
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Mar 26 11:31:04 2008 -0700

    Use floating-point offsets for color stops
    
    Previously we were using the cairo_fixed_t type which meant we've
    historically only been using 16 bits of precision for these offsets,
    and recently only 8 bits. Meanwhile, all manipulatons of offsets
    have been in floating-point anyway, so we might as well store them
    that way.
    
    This change also prevents a rendering regression introduced with the
    24.8->16.16 change betwen snapshots 1.5.10 and 1.5.12 .
    
    This change affected gradient-rendering details for the clip-operator
    and operator-source tests, so the corresponding reference images are
    updated here.

 src/cairo-glitz-surface.c          |    2 +-
 src/cairo-pattern.c                |   10 ++++------
 src/cairo-pdf-surface.c            |    6 +++---
 src/cairo-ps-surface.c             |    6 +++---
 src/cairo-quartz-surface.c         |    6 +++---
 src/cairo-svg-surface.c            |   31 ++++++++++++++-----------------
 src/cairo-win32-printing-surface.c |    2 +-
 src/cairoint.h                     |    2 +-
 test/clip-operator-ref.png         |  Bin 8263 -> 8271 bytes
 test/operator-source-ref.png       |  Bin 4422 -> 4420 bytes
 10 files changed, 30 insertions(+), 35 deletions(-)

commit 80dc1714c87c3902e70fa94e4911945986cc7920
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Mar 26 10:31:36 2008 -0700

    Remove unused variable

 src/cairo-image-surface.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit f676f18050383ecf26c36cdbba4ac81d2d45b042
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 26 08:43:23 2008 +0000

    [cairo] Fixup make check.
    
    make check demands that all function references in the docs are suffixed
    with ().

 src/cairo.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 452a1de2a06b57a3ed1b149e152487505dbc04f8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 25 16:50:33 2008 +0000

    [cairo-gstate] Remove dead code.
    
    Eliminate _cairo_gstate_recursive_apply_clip_path, as its last caller
    was removed over 2 years ago.

 src/cairo-gstate.c |   21 ---------------------
 1 files changed, 0 insertions(+), 21 deletions(-)

commit ed42916028e4f51949210de6ecf4ebc5095aa45c
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Mar 26 23:04:35 2008 +1030

    Win32: Fix bug in cairo_win32_font_face_create_for_hfont()
    
    Use GetObjectW for LOGFONTW.

 src/cairo-win32-font.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 6dc75ab0f8370154aae7719ed805c5a8bdf1c9f4
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Mar 25 10:21:50 2008 -0700

    Quiet compiler warnings about unhandled PIXMAN_yuy2 and PIXMAN_yv12
    
    We still don't handle these format codes of course, (they're meaningless
    for the context in which they're used here).
    
    Note that we previously avoided adding these to avoid people being forced
    to upgrade pixman just to get two enum values that cairo doesn't really
    care about. But now we're depending on a new pixman anyway, (for the
    pixman_format_code_to_masks function), so we'll go ahead and do this now.

 src/cairo-image-surface.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 1675713aff7311461e26d7badccb9942573f2bca
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Mar 25 16:45:21 2008 -0700

    Depend on pixman 0.9.7 for new pixman_format_supported_destination function
    
    This allows us to do a much more general and complete implementation of
    _pixman_format_from_masks and _pixman_format_to_masks so that we'll
    even pick up new pixman formats as they get added.

 configure.in              |    2 +-
 src/cairo-image-surface.c |  200 +++++++++++++++++++--------------------------
 2 files changed, 86 insertions(+), 116 deletions(-)

commit d7e5f6b6a00912e22cb5ca837d0a56d30cf59124
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Mar 25 16:32:24 2008 -0700

    Rename _popcount to _cairo_popcount and make it available for internal use
    
    Both cairo-image-surface.c and cairo-xlib-surface.c want to
    use this function now.

 src/cairo-xlib-surface.c |   25 ++-----------------------
 src/cairoint.h           |   21 +++++++++++++++++++++
 2 files changed, 23 insertions(+), 23 deletions(-)

commit 90cf7c2faf167b4b86443eb340af23cf853b146a
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Mar 25 10:40:01 2008 -0700

    Quiet warning about signed vs. unsigned comparison

 src/cairo-surface-fallback.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 770633c05acf12b911cdbdaa94b20ccf34ce742a
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Mar 25 10:27:36 2008 -0700

    Quiet warnings about unhandled enum values in _cairo_surface_create_in_error

 src/cairo-surface.c |   18 ++++++++++++++++++
 1 files changed, 18 insertions(+), 0 deletions(-)

commit d15c7c94bdfc714845bd88f9e3ed5317afcfce72
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Mar 25 12:12:40 2008 -0700

    Document performance advantage of cairo_path_extents
    
    The cairo_path_extents function can perform better than either
    cairo_stroke_extents or cairo_fill_extents, so provide that
    pointer from the documentation of the other two functions.

 src/cairo.c |   14 ++++++++++++--
 1 files changed, 12 insertions(+), 2 deletions(-)

commit 8aba5b802946530ef481f1461f9894529498cd8a
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Mar 25 11:53:52 2008 -0700

    [win32] Prevent crash in create_similar if win32_surface_create fails

 src/cairo-win32-surface.c |   12 +++++++++---
 1 files changed, 9 insertions(+), 3 deletions(-)

commit 49a140b04bda85c03f824dcf565f1fcdd70b8965
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Mar 25 11:22:43 2008 -0700

    [osx] additional fix to configure for multi-arch OSX builds

 configure.in |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit ae143d779ba5765f55754cb89af87b065d84ef04
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Mar 25 11:17:57 2008 -0700

    [quartz] When stroking with an image source, use the right CTM for the image
    
    Since the CTM was modified for the stroke transform, we need to reset
    it before calling ConcatCTM for the source transform.

 src/cairo-quartz-surface.c       |    9 ++++-
 test/Makefile.am                 |    3 +
 test/stroke-image-quartz-ref.png |  Bin 0 -> 1802 bytes
 test/stroke-image-ref.png        |  Bin 0 -> 1866 bytes
 test/stroke-image.c              |   77 ++++++++++++++++++++++++++++++++++++++
 5 files changed, 88 insertions(+), 1 deletions(-)

commit e9906ae2021904c8c3d3a4083786475c102196f7
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Mar 25 21:56:19 2008 +1030

    Win32-Printing: Fix fallback resolution when DC ctm is not identity
    
    And also move the _cairo_surface_set_resolution() into
    _cairo_win32_printing_surface_start_page as the DC ctm may be changed
    between pages.
    
    This bug was found in Inkscape now that they are using the cairo
    win32-printing surface for printing on Windows.

 src/cairo-win32-printing-surface.c |   19 ++++++++++++++-----
 1 files changed, 14 insertions(+), 5 deletions(-)

commit ee3981fb92ee5fa9b049dae32421cc0015fd4bf6
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Mar 24 16:24:36 2008 -0700

    Add new text-transform test
    
    Previously, the test suite wasn't supplying any coverage of transformed
    text rendering.

 test/.gitignore                 |    1 +
 test/Makefile.am                |    1 +
 test/README                     |    1 +
 test/text-transform-pdf-ref.png |  Bin 0 -> 3796 bytes
 test/text-transform-ps-ref.png  |  Bin 0 -> 4154 bytes
 test/text-transform-ref.png     |  Bin 0 -> 6200 bytes
 test/text-transform.c           |  113 +++++++++++++++++++++++++++++++++++++++
 7 files changed, 116 insertions(+), 0 deletions(-)

commit 184d9cbf9c8967b741209b9d891848c9bd37dd60
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Mar 24 12:36:37 2008 +1030

    Update REFERENCE_IMAGES with PS ref images
    
    for finer finer-grained-fallbacks.

 test/Makefile.am |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 2ad39157975d71735da936977dd10e66d055ece7
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Mar 24 12:32:07 2008 +1030

    Add PS reference images for finer-grained-fallbacks test

 test/finer-grained-fallbacks-ps-argb32-ref.png |  Bin 0 -> 1047 bytes
 test/finer-grained-fallbacks-ps-rgb24-ref.png  |  Bin 0 -> 819 bytes
 2 files changed, 0 insertions(+), 0 deletions(-)

commit ae9635bf33cb989f5c525800b82b81daad699e01
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Mar 24 12:16:20 2008 +1030

    Fix assertion in PS/PDF/Win32-print when fallback image is off the page
    
    If during analysis the bounding box of an operation or the number of
    traps is 0, the operation is marked as natively supported. The problem
    here is if the operation is unsupported by the backend, we get an
    assertion when the operation is replayed during
    CAIRO_PAGINATED_MODE_RENDER.
    
    This bug was found in Inkscape when printing to the
    win32_printing_surface a page that has been layed out as landscape but
    landscape paper had not been selected in the print dialog.
    
    Fix this by being careful not to mark unsupported operations as
    supported during analysis even they may not be visible on the page.

 src/cairo-analysis-surface.c |   73 +++++++++++++++++++++++++++++++----------
 1 files changed, 55 insertions(+), 18 deletions(-)

commit 179ab7d2860b8ff94fe491896c50505fde7cf6af
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Mar 24 11:43:29 2008 +1030

    Add finer-grained-fallbacks test
    
    This reproduces the bug in PS/PDF/Win32-printing where an unsupported
    operation that is off the page causes an unsupported operation
    assertion in the backend.

 test/.gitignore                            |    1 +
 test/Makefile.am                           |    3 +
 test/finer-grained-fallbacks-ref.png       |  Bin 0 -> 796 bytes
 test/finer-grained-fallbacks-rgb24-ref.png |  Bin 0 -> 590 bytes
 test/finer-grained-fallbacks.c             |  111 ++++++++++++++++++++++++++++
 5 files changed, 115 insertions(+), 0 deletions(-)

commit 9a1f7bbc357ecce351b459f883b4ebeaa6640b65
Author: Benjamin Otte <otte@gnome.org>
Date:   Sun Mar 23 15:31:24 2008 +0100

    [API] unbreak CAIRO_FONT_TYPE_ATSUI
    
    commit 9d61f7db8082baf3a223c4ea41a53de372676e40 broke API by making the
    CAIRO_FONT_TYPE_ATSUI symbol not work anymore. However, this symbol was part of
    Cairo's public API and should continue working this way.

 src/cairo-deprecated.h |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 104c2825ea66d7d5f405cc8d690d90b45e752c46
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 21 09:11:48 2008 +0000

    [cairo-png] Set bKGD gray value.
    
    For PNG_COLOR_TYPE_GRAY images the bKGD value is read from white.gray
    which was uninitialized, triggering the "PNG warning = Ignoring attempt
    to write bKGD chunk out-of-range for bit_depth" reported by Emmanuel
    Pacaud. This patch sets the background gray value to white, the same as
    for RGB images.

 src/cairo-png.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

commit c4599324820cfb46700bf2f059c46e9245f98ea5
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Mar 21 18:12:03 2008 +1030

    Update PS reference images
    
    Some of the text tests require new PS specific reference images as a
    result of the PS glyph positioning fix.

 test/font-matrix-translation-ps-argb32-ref.png |  Bin 749 -> 748 bytes
 test/font-matrix-translation-ps-rgb24-ref.png  |  Bin 749 -> 748 bytes
 test/glyph-cache-pressure-ps-ref.png           |  Bin 1413 -> 1454 bytes
 test/select-font-face-ps-ref.png               |  Bin 1079 -> 959 bytes
 test/show-text-current-point-ps-ref.png        |  Bin 1454 -> 1356 bytes
 test/text-pattern-ps-argb32-ref.png            |  Bin 984 -> 966 bytes
 test/text-pattern-ps-rgb24-ref.png             |  Bin 936 -> 924 bytes
 7 files changed, 0 insertions(+), 0 deletions(-)

commit f3a5f7570104c8d48c99a2b6bd34f4142e52f099
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Mar 21 16:34:01 2008 +1030

    Add PS/PDF ref images for ft-show-glyphs-positioning

 test/Makefile.am                            |    2 ++
 test/ft-show-glyphs-positioning-pdf-ref.png |  Bin 0 -> 3114 bytes
 test/ft-show-glyphs-positioning-ps-ref.png  |  Bin 0 -> 2269 bytes
 3 files changed, 2 insertions(+), 0 deletions(-)

commit 4f56a6324f16fa58c21180cc362ee18520a59179
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Mar 21 16:30:53 2008 +1030

    Finish the PDF text operator decimal reduction commit
    
    Commit 158b32b60bc7e0f6488383c1d4f83203ffe97c98 reduced excess
    decimals emitted for the TJ operator. However it only fixed the first
    of the two locations in pdf-operators where the TJ position
    adjustments are emitted.

 src/cairo-pdf-operators.c |   12 +++++++++---
 1 files changed, 9 insertions(+), 3 deletions(-)

commit 13e05bffd5cae5690fada24c7a7e2457c39e4dbf
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Mar 21 15:41:31 2008 +1030

    Fix PS glyph positioning bug in PDF operator emulation
    
    The emulation of the PDF 'TJ' operator in the PS prolog was
    incorrectly updating the glyph position between strings. The glyph
    position values are a negative x offset that are in 1/1000 unit of
    text space. We were incorrectly multiplying the number by -0.0001
    instead of -0.001. We also need to transform this to device space
    before calling rmoveto.

 src/cairo-ps-surface.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit 83486684520f3fd27d1118aa23462d013def83df
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Mar 21 16:06:12 2008 +1030

    Add ft-show-glyphs-positioning test
    
    This demonstrates the glyph positioning bug in the PS backend.

 test/.gitignore                         |    1 +
 test/Makefile.am                        |    2 +
 test/ft-show-glyphs-positioning-ref.png |  Bin 0 -> 3444 bytes
 test/ft-show-glyphs-positioning.c       |  167 +++++++++++++++++++++++++++++++
 4 files changed, 170 insertions(+), 0 deletions(-)

commit 37fedd108e3defc10f2f749a3a9971287e41706c
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 20 17:02:01 2008 -0700

    Increment cairo version to 1.5.15 after the 1.5.14 snapshot

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit f4d4d7b3d0bd62af6ffd50ba9cd8df0b9a12be71
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 20 16:13:28 2008 -0700

    Cleanup up png-test.png file in 'make clean'

 test/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 4ad5937648b27cd7a73a6a245ed875de92fa1c07
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 20 15:55:28 2008 -0700

    Enable PLT avoidance for cairo_image_surface_get_data/stride

 src/cairo-image-surface.c |    2 ++
 src/cairoint.h            |    2 ++
 2 files changed, 4 insertions(+), 0 deletions(-)

commit 5d9eefccd6ff4d51e16caa8f3092d3acc33b5549
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 20 15:37:04 2008 -0700

    Disable enum_regexp test in check-doc-syntax.h
    
    It's returning false positives on non-gtk-doc comments with non-public
    enum values. Ick.

 src/check-doc-syntax.sh |   29 +++++++++++++++++++----------
 1 files changed, 19 insertions(+), 10 deletions(-)

commit 0c17ca52aa63a9c77cff47c4ae42bc16e5220552
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 20 15:33:37 2008 -0700

    Mark new cairo_xlib_visual_info functions as private.

 src/cairo-xlib-private.h |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit f32f81fa1badce15403d922002f4fc59fe8b563a
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 20 13:49:29 2008 -0700

    Increment cairo version to 1.5.14 and libtool versioning to 18:1:16

 configure.in |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit ffa50c31d38c761b4bf247d3ac27933974b819d3
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 20 13:49:19 2008 -0700

    Doc template churn

 doc/public/tmpl/cairo-font-face.sgml |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3bb0474ea7d453793199d3ce7674fbe1ee8a324d
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 20 13:48:29 2008 -0700

    NEWS: Add notes for 1.5.14 snapshot

 NEWS |  129 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 128 insertions(+), 1 deletions(-)

commit 191440101e815fe9be23bb6fbb36114de65d8c2d
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 20 12:33:17 2008 -0700

    Fix the REFERENCE_IMAGES list, (like always before a snapshot)

 test/Makefile.am |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 46bbead898186349094ae69d2b16f88b80cb820e
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 20 12:18:39 2008 -0700

    RELEASING: Clarify steps for verifying no unpushed modifications

 RELEASING |    7 +++----
 1 files changed, 3 insertions(+), 4 deletions(-)

commit c91a2a2e80f2172a4174cfc3b5e821cb49633da5
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 20 11:51:31 2008 -0700

    Track minor change in pixman filtering sample location
    
    This change in reference image was triggered by the following commit
    in the pixman library:
    
    	commit f2d8a5caa63596739b4dc47c00daaaafd9f522e2
    	Author: Sren Sandmann <sandmann@redhat.com>
    	Date:   Mon Mar 10 23:41:52 2008 -0400
    
    	Add rounding epsilon for NEAREST filter after transformation, not before.
    
    This hasn't appeared in a pixman release yet. So for now, getting
    correct results is a matter of "use latest pixman". Soon we'll
    have a new pixman release and we'll make cairo depend on that.

 test/rotate-image-surface-paint-ref.png |  Bin 209 -> 232 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit e96f382549eb3411d461162fdd8989f4ade8b448
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Mar 19 13:00:47 2008 -0700

    Add support for 8-bit PseudoColor visuals
    
    This support involves allocating a 16-bit grayscale ramp as well
    as a 5x5x5 RGB color cube. Afterwards, the 256 colors are queried
    and an array is generated mapping from r3g3b3 colors to the closest
    available color. Both the queried colors and the reverse mapping
    are stored in a new visual-specific cairo_xlib_visual_info_t
    structure which hangs off of the cairo_xlib_screen_info_t.
    
    Both the color-cube allocation and the distance metric could be
    improved by someone sufficiently motivated, (for example, allocating
    and matching in a perceptually linear color space rather than just
    in RGB space). Also, making this work well in the face of a changing
    color map, or in the case of GrayScale, StaticGray, or DirectColor
    visuals are left entirely as exercises for the reader. StaticColor
    support should be fine as is, but is entirely untested.

 src/Makefile.am          |    1 +
 src/cairo-xlib-private.h |   15 +++++
 src/cairo-xlib-screen.c  |   49 ++++++++++++++++
 src/cairo-xlib-surface.c |  122 +++++++++++++++++++++++++---------------
 src/cairo-xlib-visual.c  |  137 ++++++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 278 insertions(+), 46 deletions(-)

commit d413c5ab21efb2ccc6a4847ff387f8e39ba2f3e1
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Mar 19 14:23:35 2008 -0700

    xlib: Add support for arbitrary TrueColor visuals
    
    This fixes the following bugs:
    
    	cairo doesn't support 8-bit truecolor visuals
    	https://bugs.freedesktop.org/show_bug.cgi?id=7735
    
    	cairo doesn't support 655 xlib format
    	https://bugs.freedesktop.org/show_bug.cgi?id=9719

 src/cairo-xlib-surface-private.h |    5 +
 src/cairo-xlib-surface.c         |  342 ++++++++++++++++++++++++++++++--------
 2 files changed, 276 insertions(+), 71 deletions(-)

commit aeaec94fd03b9098efce9d7455f813acf22ec026
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Thu Mar 20 16:05:34 2008 +0100

    [SVG] Replace the color property by stroke.
    
    Color property doesn't support URL as value. This pacth fixes
    http://bugs.freedesktop.org/show_bug.cgi?id=14556 .

 src/cairo-svg-surface.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 158b32b60bc7e0f6488383c1d4f83203ffe97c98
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Mar 18 22:29:59 2008 +1030

    PDF: Reduce excess decimals in text position offsets
    
    The numbers output in the TJ array for adjusting the horizontal
    position of the next glyph are in 1/1000 of the text space
    units. Rounding these numbers to an integer should still provide
    sufficient precision.
    
    We use the rounded numbers to update the text position in
    pdf-operators so subsequent numbers in the TJ array will compensate
    for the rounding error.

 src/cairo-pdf-operators.c |   26 ++++++++++++++++++++++----
 1 files changed, 22 insertions(+), 4 deletions(-)

commit 222041530cd5d7f1ef6b41ea1738bf395ef1678a
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Mar 18 22:28:37 2008 +1030

    Use %g for printing path coordinates in pdf-operators
    
    to eliminate unnecessary decimal places in the output.

 src/cairo-pdf-operators.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit d78013470b11677df88f246d893c1f019f4ae228
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Mar 18 22:27:25 2008 +1030

    Add %g conversion specifer to output-stream for limited precision
    
    The %g conversion specifier is for printing numbers that were at some
    time stored in a cairo_fixed_t type and as a result have their
    precision limited by the size of CAIRO_FIXED_FRAC_BITS.
    
    Using %g will limit the number of digits after the decimal point to
    the minimum required to preserve the available precision.

 src/cairo-output-stream.c |   87 +++++++++++++++++++++++++++++----------------
 1 files changed, 56 insertions(+), 31 deletions(-)

commit f3734085a1d1d9b08004a243e28a0233f621847c
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Mar 18 22:25:46 2008 +1030

    Make _cairo_dtostr() static
    
    It is only used in cairo-output-stream.c

 src/cairo-output-stream-private.h |    3 ---
 src/cairo-output-stream.c         |    2 +-
 2 files changed, 1 insertions(+), 4 deletions(-)

commit 4d9e5b51aa4164cf758c6a1f84c7f831becc098b
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Mar 18 22:25:18 2008 +1030

    Rescale CTM used for PS/PDF stroking to reduce rounding error
    
    The PS/PDF CTM is transformed to the user space CTM when emitting
    paths to be stroked to ensure the correct pen shape used. However this
    can result in rounding errors.
    
    For example the device space point (1.234, 3.142) when transformed to
    a user space CTM of [100 0 0 100 0 0] will be emitted as
    (0.012, 0.031).
    
    Fix this by rescaling the user space CTM so that the path coordinates
    emitted to the PDF file stay within the range the maximizes the
    precision. The line width and dashing is also rescaled to be the same
    size in the rescaled CTM.

 src/cairo-pdf-operators.c |   70 ++++++++++++++++++++++++++++++++++++++++----
 1 files changed, 63 insertions(+), 7 deletions(-)

commit 7f4b967c020042779748021fa32fddfc3f0def28
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Mar 14 16:51:24 2008 +0100

    Make CAIRO_FORMAT_STRIDE_FOR_WIDTH_BPP available to the cairo internals.

 src/cairo-image-surface.c |    7 ++-----
 src/cairoint.h            |    5 +++++
 2 files changed, 7 insertions(+), 5 deletions(-)

commit eb31c52febd615a92ef0c7204f9fa056ef01b536
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Mar 14 16:48:41 2008 +0100

    Make _pixman_format_to_masks accept a cairo_format_masks_t structure
    
    This makes it work similarly to _pixman_format_from_masks

 src/cairo-image-surface.c |   48 ++++++++++++++++++++------------------------
 src/cairo-xlib-surface.c  |   12 +++++-----
 src/cairoint.h            |    5 +---
 3 files changed, 29 insertions(+), 36 deletions(-)

commit cdb1ae97f241ec6b24d64b0fa5447d26f6bc5318
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Jan 27 10:31:58 2008 -0800

    Move assertion failure for unsupported masks up one level
    
    We're moving the assertion up from inside _pixman_format_to_mask
    to its callers. This will allow us to selectively eliminate the
    assertion from the supported xlib backend, while leaving it in
    the unsupported glitz and xcb backends for now.

 src/cairo-image-surface.c |   62 ++++++++++++++++++++++++++------------------
 src/cairo-xlib-surface.c  |   20 +++++++++++++-
 src/cairoint.h            |    5 ++-
 3 files changed, 58 insertions(+), 29 deletions(-)

commit b83b8c26f5d64fa07b56a747dec681c6626a0297
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Mar 17 23:38:34 2008 +1030

    Optimize generated PostScript when EXTEND_PAD is used
    
    Allow image patterns with EXTEND_PAD to use the currentfile
    optimization.

 src/cairo-ps-surface.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 1ab804891bb71fd742ccc7a228483c53aee282a4
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Mar 17 17:37:24 2008 -0700

    [quartz] Additional test reference images for quartz

 test/Makefile.am                             |   10 ++++++++++
 test/clip-operator-quartz-ref.png            |  Bin 0 -> 9364 bytes
 test/clip-operator-quartz-rgb24-ref.png      |  Bin 0 -> 4359 bytes
 test/dash-curve-quartz-ref.png               |  Bin 0 -> 47965 bytes
 test/dash-state-quartz-ref.png               |  Bin 0 -> 8698 bytes
 test/degenerate-path-quartz-ref.png          |  Bin 0 -> 232 bytes
 test/degenerate-path-quartz-rgb24-ref.png    |  Bin 0 -> 198 bytes
 test/operator-source-quartz-ref.png          |  Bin 0 -> 4572 bytes
 test/operator-source-quartz-rgb24-ref.png    |  Bin 0 -> 3452 bytes
 test/unbounded-operator-quartz-ref.png       |  Bin 0 -> 4325 bytes
 test/unbounded-operator-quartz-rgb24-ref.png |  Bin 0 -> 1972 bytes
 11 files changed, 10 insertions(+), 0 deletions(-)

commit df5087992be5f0f1e42d968559c47bf43de9cfb7
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Mar 17 17:37:22 2008 -0700

    [quartz] Fix bogus CGContextGetType warning that's printed on the console
    
    This is caused by 0x0 surfaces being special, and not having an
    associated cgContext.

 src/cairo-quartz-surface.c |  106 +++++++++++++++++++++++++++++---------------
 1 files changed, 70 insertions(+), 36 deletions(-)

commit 9d61f7db8082baf3a223c4ea41a53de372676e40
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Mar 17 17:37:19 2008 -0700

    [quartz] Rename ATSUI font to Quartz font

 configure.in               |   35 +++++++-------------------
 src/Makefile.am            |   17 +++++-------
 src/cairo-atsui-font.c     |   39 ++++++++++++-----------------
 src/cairo-atsui.h          |   58 --------------------------------------------
 src/cairo-deprecated.h     |    2 +
 src/cairo-quartz-private.h |   14 ++--------
 src/cairo-quartz-surface.c |   14 +++++-----
 src/cairo-quartz.h         |   15 ++++++++++-
 src/cairo.h                |    4 +-
 src/cairoint.h             |   10 ++++----
 10 files changed, 65 insertions(+), 143 deletions(-)

commit e4f087b8b944a26d688afeef4b9ea7a0d0a6e9ec
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Mar 16 17:29:48 2008 +1030

    Factor out common stroke code in pdf-operators

 src/cairo-pdf-operators.c |   68 +++++++++++++++++++++-----------------------
 1 files changed, 32 insertions(+), 36 deletions(-)

commit 8238a9fd4fa672299fd99aa95f5fcec03647f7c8
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Mar 15 22:08:52 2008 +1030

    Add stroke-ctm-caps to .gitignore

 test/.gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 344af99d356203dce8cb97d3effa380cad0c9238
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Mar 15 22:07:01 2008 +1030

    Improve the PDF operators word wrapping
    
    to correctly count the columns and avoid breaking hex strings
    immediately after the '<' and before any hex digits have been written.

 src/cairo-pdf-operators.c |   34 +++++++++++++++++++++++++---------
 1 files changed, 25 insertions(+), 9 deletions(-)

commit 0a8478ca1aa37695e84b4875e1efb3d93c7b8434
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Fri Mar 14 23:23:16 2008 -0700

    [quartz] don't say we forced subpixel AA when we didn't
    
    Whoops.  Net result was that this was disabling subpixel AA on
    contexts if CAIRO_ANTIALIAS_DEFAULT was being used.

 src/cairo-quartz-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 028d352286991f7ec1da168f7f91bed6449f64e4
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Fri Mar 14 23:22:08 2008 -0700

    [quartz] compare gradient stops as doubles, not as fixed point
    
    We use the floating-point value later, and we can end up with weirdness
    such as negative colors due to the precision mismatch of our fixed
    point vs. floating point type.  So just do everything in floating
    point.

 src/cairo-quartz-surface.c |    5 +----
 1 files changed, 1 insertions(+), 4 deletions(-)

commit 112bbacea3c06f844af400f34a4a2eadf25d13dd
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Mar 15 00:28:21 2008 +1030

    Don't use fill-stroke during analysis
    
    Instead ensure the fill and stroke are each analyzed separately.
    
    This fixes a bug in the PS output where if a fill-stroke with a
    translucent fill resulted in a fallback image with the stroke clipped
    to the fill path.

 src/cairo-meta-surface.c |   14 +++++---------
 1 files changed, 5 insertions(+), 9 deletions(-)

commit 112b43452d302eb4ac62a20bca01bdecbfdcaaf5
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Mar 15 00:18:59 2008 +1030

    Fix bug in _cairo_path_fixed_is_equal
    
    Ensure the entire path is compared.

 src/cairo-path-fixed.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 7e83d6e6fb8c4b11d5d95acac4a35df8969e0944
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Mar 14 21:26:04 2008 +1030

    Do not use PDF fill-stroke operator with transparent fill
    
    because the PDF rendering does not match cairo. See
    PDF Reference 7.6.3.
    
    Bug report at
    https://bugs.launchpad.net/inkscape/+bug/202096

 src/cairo-pdf-surface.c |   15 +++++----------
 1 files changed, 5 insertions(+), 10 deletions(-)

commit 0aef7c1a34b2522d400b5a1a74567a79696216c9
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Mar 10 22:19:52 2008 +1030

    PDF/PS: Optimize away the stroke ctm when not required
    
    The PDF/PS backends change the ctm to user space when emitting and
    stroking a path. When the user space ctm does not alter the pen shape
    we can avoid changing the ctm.
    
    This patch optimizes the most common case where the user ctm is
    [1 0 0 -1 0 y] due to conversion from cairo to PDF coordinates.

 src/cairo-pdf-operators.c |   36 ++++++++++++++++++++++++++++--------
 1 files changed, 28 insertions(+), 8 deletions(-)

commit 2bd15d080c562bfcbced1f6bb586cc1e3cae4555
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Mar 14 19:46:15 2008 +1030

    Add PS reference image for stroke-ctm-caps

 test/stroke-ctm-caps-ps-ref.png |  Bin 0 -> 1079 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit 761b4ce8dd40b8e5536a19018656c2440a61e71a
Author: Jeremy Huddleston <jeremyhu@apple.com>
Date:   Thu Mar 13 17:45:25 2008 -0700

    [mac] Correctly handle endianness in multi-architecture compiles on MacOS X

 configure.in |   18 ++++++++++++++++++
 1 files changed, 18 insertions(+), 0 deletions(-)

commit 4cc93881d9603c90f1318b2eb822cf2c516ecf7d
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Thu Mar 13 17:30:59 2008 -0700

    [test] Add testcase for previous stroker regression fix
    
    Add Adrian's original testcase for reproducing the stroker device
    vector issue.  (b4f518f917f5062537ee3c6a7a54180017b2c588)

 test/Makefile.am                    |    3 +
 test/stroke-ctm-caps-quartz-ref.png |  Bin 0 -> 1109 bytes
 test/stroke-ctm-caps-ref.png        |  Bin 0 -> 1057 bytes
 test/stroke-ctm-caps.c              |   86 +++++++++++++++++++++++++++++++++++
 4 files changed, 89 insertions(+), 0 deletions(-)

commit a33351f9c677144437bef25a794b97f2ac4bb17a
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Thu Mar 13 15:37:26 2008 -0700

    [quartz] remove some compiler warnings

 src/cairo-atsui-font.c           |    2 +-
 src/cairo-quartz-image-surface.c |    4 ----
 2 files changed, 1 insertions(+), 5 deletions(-)

commit b4f518f917f5062537ee3c6a7a54180017b2c588
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Thu Mar 13 15:36:30 2008 -0700

    Correctly pass the device-space vector through to stroker
    
    Part of the earlier optimization caused the wrong slope to be used for
    some computations; this passes the correct slope vector down to
    _compute_face.

 src/cairo-path-stroke.c       |   37 +++++++++++++++++++++++--------------
 test/dash-scale-ref.png       |  Bin 8035 -> 8058 bytes
 test/reflected-stroke-ref.png |  Bin 4802 -> 5704 bytes
 3 files changed, 23 insertions(+), 14 deletions(-)

commit 5050c55f93afef9b0d0651a78f2c99e06e19b55a
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Mar 13 21:35:12 2008 +1030

    Use the correct glyph metrics in Type1 fallback
    
    Now that the PS backend is using PDF operators, it uses the glyph
    metrics in the font to position each glyph in a string. This exposed a
    bug in Type 1 fallback where the glyph width and height was used in
    the charstrings instead of x_advance/y_advance. This was causing
    strings to print diagonally due to the no zero y_advance.

 src/cairo-type1-fallback.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit ed452713cfa16e5facca8f918ef4ee4fe2ec41c3
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Mar 12 18:33:05 2008 -0700

    [win32] Use a DIB when cloning a surface for a WIN32_PRINTING dest
    
    In some cases we were creating a 1bpp temporary surface, losing all
    color/grayscale data while printing.
    
    Ref: https://bugzilla.mozilla.org/show_bug.cgi?id=399388

 src/cairo-win32-surface.c |   16 +++++++++++++---
 1 files changed, 13 insertions(+), 3 deletions(-)

commit 6ac3eb487cf0de0d28bf6b14852de91b09fecb05
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Mar 12 18:19:59 2008 -0700

    [quartz] correctly force subpixel AA on a context, even if defaults say otherwise
    
    In some cases (in my case, having an external monitor attached to my
    MBP), Quartz seems to default to grayscale AA even when it should be
    using subpixel AA.  CGContextGetAllowsFontSmoothing returns FALSE in
    this case (pretty sure this is a Quartz bug).  We can force subpixel
    AA in this case by setting CGContextSetAllowsFontSmoothing.

 src/cairo-quartz-surface.c |   22 +++++++++++++++++++---
 1 files changed, 19 insertions(+), 3 deletions(-)

commit 5d11b937f1b769355a3dc7971ded40f60b001630
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Mar 12 18:11:57 2008 -0700

    [quartz] Apply fixup to unbounded operators to clear area outside of mask

 src/cairo-quartz-surface.c |  249 +++++++++++++++++++++++++++++++++++++++++---
 1 files changed, 236 insertions(+), 13 deletions(-)

commit c86cbcdd644e043dc5ae2eabf5dd6afa020e2358
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 12 17:54:54 2008 +0000

    [cairoint.h] Mark _cairo_image_analyze_transparency as private.
    
    Add the required cairo_private markup for make check.

 src/cairoint.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 222eb6f1400ab7a51632cbc18b1526664e50c2e4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 12 17:52:16 2008 +0000

    Define _BSD_SOURCE to enable prototypes for strdup, snprintf.
    
    strdup() and friends require at least _BSD_SOURCE or
    _XOPEN_SOURCE >= 500 to be defined for the prototypes to be included.
    For the time being, add the define to each source file that requires one
    of the BSD functions.

 src/cairo-cff-subset.c          |    1 +
 src/cairo-font-face.c           |    1 +
 src/cairo-ft-font.c             |    1 +
 src/cairo-output-stream.c       |    1 +
 src/cairo-pdf-surface.c         |    1 +
 src/cairo-ps-surface.c          |    1 +
 src/cairo-scaled-font-subsets.c |    1 +
 src/cairo-svg-surface.c         |    3 ++-
 src/cairo-truetype-subset.c     |    1 +
 src/cairo-type1-fallback.c      |    1 +
 src/cairo-type1-subset.c        |    1 +
 11 files changed, 12 insertions(+), 1 deletions(-)

commit 2d9203c349ffba863368e85567b2e89443d51746
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Mar 10 22:30:16 2008 +1030

    win32-printing: Don't scale the miter limit
    
    since the miter is a ratio it should not be scaled like the other
    stroke parameters when the user ctm is scaled.

 src/cairo-win32-printing-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit f534fe434db38c2c24605bdfc251e0186dc7cafc
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Mar 10 17:18:07 2008 +1030

    PDF: Use cairo_image_analyse_transparency during analysis
    
    OPERATOR_SOURCE is only supported for opaque images. Check if and ARGB
    image really contains transparency before returing unsupported.

 src/cairo-pdf-surface.c |   38 +++++++++++++++++++++++++++++++++++++-
 1 files changed, 37 insertions(+), 1 deletions(-)

commit 61d45c9d1f2322c7c2ee7a58e7b3d5ccfac92db2
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Feb 16 22:34:39 2008 +1030

    Remember the results of _cairo_image_analyze_transparency
    
    As _cairo_image_analyze_transparency() is only used on images in the
    meta surface, we can store the results of the image analysis and
    return the saved value on second and subsequent calls to analyze the
    same image.
    
    Previously each image was analyzed twice - once during
    CAIRO_PAGINATED_MODE_ANALYZE and once during
    CAIRO_PAGINATED_MODE_RENDER.

 src/cairo-image-surface.c |   21 +++++++++++++++------
 src/cairo-ps-surface.c    |    3 +++
 src/cairo-types-private.h |    3 ++-
 src/cairoint.h            |    1 +
 4 files changed, 21 insertions(+), 7 deletions(-)

commit 7eb8f497d8ac8ee76809f958170f1e5370744ba8
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Feb 16 22:13:43 2008 +1030

    Move analyze_image_transparency in to cairo-image-surface.c

 src/cairo-image-surface.c |   29 +++++++++++++++++++++++++++++
 src/cairo-ps-surface.c    |   44 ++------------------------------------------
 src/cairo-types-private.h |    6 ++++++
 src/cairoint.h            |    3 +++
 4 files changed, 40 insertions(+), 42 deletions(-)

commit 00091d50a6187acd0fd35aef16a4fa5fab3c8aa9
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Mar 9 16:44:18 2008 +1030

    Add fallback image comment to PS output
    
    To help better understand when fallback images are used, a comment
    similiar to the following is included with each fallback image in the
    PS output.
    
    % Fallback Image: x=101, y=478, w=50, h=10 res=300dpi size=31500

 src/cairo-ps-surface.c |   14 ++++++++++++++
 1 files changed, 14 insertions(+), 0 deletions(-)

commit 95acec69d8ee4fd37937f5b466c2baf612e9113a
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Mar 9 16:40:25 2008 +1030

    Round fallback image size up instead of down
    
    to ensure the fallback image completely covers the fallback region.

 src/cairo-paginated-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 94e41d5565ef72a0ef6e0235545c660aaf92b825
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Sat Mar 8 17:45:47 2008 -0800

    [quartz] Don't force interpolation off for images
    
    Creating a CGImage with interpolation set to FALSE means that
    it will never be interpolated; otherwise the interoplation
    is controlled by the destination context's interpolation
    quality setting.

 src/cairo-quartz-image-surface.c |    4 ++--
 src/cairo-quartz-surface.c       |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 08e38d3f204911a793d3aa24bf2636caf3e58e20
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Sat Mar 8 16:06:01 2008 -0800

    [quartz] align strides to 16 bytes, as per apple docs
    
    The docs indicate that doing so can yield a peformance win, so we align
    ARGB32/RGB24 surface strides to 16 bytes.

 src/cairo-quartz-surface.c |   21 ++++++++++++++-------
 1 files changed, 14 insertions(+), 7 deletions(-)

commit 73444f16fa82b63a19aa938eb42001b5731326da
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Sat Mar 8 15:31:15 2008 -0800

    [quartz] Don't try to call CGBitmapContextCreateImage on non-bitmap contexts

 src/cairo-quartz-surface.c |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit 091df2c59b6dbd53a748955db359443d5d445ba4
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Sat Mar 8 15:16:05 2008 -0800

    [quartz] properly honor text antialiasing modes in show_glyphs

 src/cairo-quartz-surface.c                  |   35 +++++++++++++++++++++++----
 test/Makefile.am                            |    2 +
 test/text-antialias-none-quartz-ref.png     |  Bin 0 -> 304 bytes
 test/text-antialias-subpixel-quartz-ref.png |  Bin 0 -> 1100 bytes
 4 files changed, 32 insertions(+), 5 deletions(-)

commit 4f7ac14b8fdafd9fa85e797fb6e4c974788f70fc
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Sat Mar 8 19:22:13 2008 -0800

    [quartz] implement REPEAT/REFLECT for gradients
    
    Implement REPEAT/REFLECT for gradients in Quartz: for linear gradients,
    they're implemented natively (by extending the gradient region); for
    radial gradients, we generate a fallback image using pixman and render
    that.

 src/cairo-quartz-surface.c |  203 ++++++++++++++++++++++++++++++++++++++-----
 1 files changed, 179 insertions(+), 24 deletions(-)

commit 869942a97e34b09a7bd5b8cfc54832ce9dbd08b6
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Fri Mar 7 16:55:47 2008 -0800

    [quartz] some more quartz ref images

 test/Makefile.am                   |    2 ++
 test/big-line-quartz-ref.png       |  Bin 0 -> 1075 bytes
 test/big-line-quartz-rgb24-ref.png |  Bin 0 -> 941 bytes
 3 files changed, 2 insertions(+), 0 deletions(-)

commit 2e33d5f57bde82b953ebc5f9c1355327a7ac4967
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Fri Mar 7 16:46:53 2008 -0800

    [quartz] Update a bunch of reference images
    
    Generated with Bitstream Vera font family installed, using ATSUI
    font backend.

 test/Makefile.am                               |   14 ++++++++++++++
 test/font-matrix-translation-quartz-ref.png    |  Bin 0 -> 1041 bytes
 test/glyph-cache-pressure-quartz-ref.png       |  Bin 0 -> 3491 bytes
 test/linear-gradient-quartz-ref.png            |  Bin 0 -> 1164 bytes
 test/long-dashed-lines-quartz-ref.png          |  Bin 0 -> 2313 bytes
 test/mask-quartz-ref.png                       |  Bin 10657 -> 10682 bytes
 test/operator-clear-quartz-ref.png             |  Bin 1195 -> 1368 bytes
 test/operator-clear-quartz-rgb24-ref.png       |  Bin 1244 -> 1201 bytes
 test/radial-gradient-quartz-ref.png            |  Bin 0 -> 92334 bytes
 test/random-intersections-quartz-ref.png       |  Bin 0 -> 197778 bytes
 test/reflected-stroke-quartz-ref.png           |  Bin 0 -> 5293 bytes
 test/rotate-image-surface-paint-quartz-ref.png |  Bin 257 -> 257 bytes
 test/select-font-face-quartz-ref.png           |  Bin 0 -> 2958 bytes
 test/show-text-current-point-quartz-ref.png    |  Bin 0 -> 3198 bytes
 test/text-antialias-gray-quartz-ref.png        |  Bin 0 -> 1039 bytes
 test/text-pattern-quartz-rgb24-ref.png         |  Bin 0 -> 1867 bytes
 test/text-rotate-quartz-ref.png                |  Bin 0 -> 17405 bytes
 test/trap-clip-quartz-ref.png                  |  Bin 6171 -> 6041 bytes
 test/unantialiased-shapes-quartz-ref.png       |  Bin 0 -> 4394 bytes
 19 files changed, 14 insertions(+), 0 deletions(-)

commit fb1378a24b5c6cd65b73aa611bb049ebb6f2b57a
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Fri Mar 7 16:46:15 2008 -0800

    [quartz] Correctly handle gradients with non-identity pattern transform
    
    Fixes http://bugs.freedesktop.org/show_bug.cgi?id=14248

 src/cairo-quartz-private.h |    3 +-
 src/cairo-quartz-surface.c |   68 ++++++++++++++++++-------------------------
 2 files changed, 31 insertions(+), 40 deletions(-)

commit 6c7610067f8a131a4fbba8d2b6a88c27ef229bbe
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Fri Mar 7 15:35:31 2008 -0800

    [quartz] handle antialiasing correctly in stroke() and clip()
    
    A CoreGraphics bug was fixed so strokes are no longer incorrectly
    drawn with antialiasing disabled; we no longer have to ignore
    antialiasing for stroke().  Also, antialiasing was not being
    correctly set for clip().  This fixes both issues.

 src/cairo-quartz-surface.c |    9 ++++++---
 1 files changed, 6 insertions(+), 3 deletions(-)

commit 21dab3c5e9fe1ff344ff809053618c2c8f0710f3
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Fri Mar 7 14:49:46 2008 -0800

    [quartz] look up the right symbol name for CGContextGetType

 src/cairo-quartz-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e52bad5e33e0b69b868525056c95ebd473fd6b10
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Fri Mar 7 14:49:15 2008 -0800

    [quartz] split out (experimental) quartz-image into separate file

 configure.in                     |   15 +++++++++
 src/Makefile.am                  |    5 +++
 src/cairo-quartz-image-surface.c |   21 +++++++++----
 src/cairo-quartz-image.h         |   59 ++++++++++++++++++++++++++++++++++++++
 src/cairo-quartz-surface.c       |   10 ++----
 src/cairo-quartz.h               |    6 ----
 6 files changed, 97 insertions(+), 19 deletions(-)

commit b52f127c12fd7ee2b4f532954cb1e9e4eb8561b4
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Thu Mar 6 16:52:54 2008 -0800

    [quartz] fix text rendering with gradient or image source
    
    A quirk in how CGContextShowGlyphsWithAdvances works was causing all
    non-solid glyphs to be rendered on top of eachother.  This fixes the problem.

 src/cairo-quartz-surface.c |   65 ++++++++++++++++++++++++-------------------
 1 files changed, 36 insertions(+), 29 deletions(-)

commit de515e0f9a46162dcdef3bce81702a56ac6f29bf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 6 08:10:16 2008 +0000

    [cairo-png] Revert accidental chunk from FORMAT_A1 support.
    
    Whilst splitting the patches, I left in this line which would preserve
    1-bit grayscale unexpanded, but without any of the other FORMAT_A1
    support.

 src/cairo-png.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 8ba8a1192497ff89215f8a1657cbe88609083fb1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 4 13:59:57 2008 +0000

    [win32] make check doc fixup.
    
    Add the missing '%' to the macro as demanded by make check.

 src/cairo-win32-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 1dd894115e03aa202941ecebe9fd3420c73645ef
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 4 09:04:17 2008 +0000

    [cairo-pattern] Raise an error for _cairo_pattern_create_solid() failure.
    
    Add a missing _cairo_error() for the malloc failure in
    _cairo_pattern_create_solid().

 src/cairo-pattern.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit 5efc5238d548599a90a02d922d031a899424d1c1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 29 17:06:30 2008 +0000

    [cairo-hull] Propagate error during hull computation.
    
    Propagate the original error status instead of returning a new NO_MEMORY
    error.

 src/cairo-hull.c |   22 ++++++++++++----------
 1 files changed, 12 insertions(+), 10 deletions(-)

commit 11a2444ec875aaaed12c1f1cfed5eb8e139c306d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 18 14:53:50 2008 +0000

    [cairo-png] Support generating CAIRO_FORMAT_RGB24 from PNGs.
    
    If the PNG does not have an alpha channel, then create an opaque image.

 src/cairo-png.c  |   69 +++++++++++++++++++------
 test/.gitignore  |    1 +
 test/Makefile.am |    2 +
 test/png.c       |  149 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 204 insertions(+), 17 deletions(-)

commit 06b375aee999220ce294c22fa50a3040c19d5492
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 29 11:55:01 2008 +0000

    [cairo-png] Use cairo_format_stride_for_width()
    
    Use cairo_format_stride_for_width() instead of assuming the pixel size
    and manually calculating the row stride. This should make it easier to
    support loading multiple image formats in future.

 src/cairo-image-surface.c |    1 +
 src/cairo-png.c           |   16 ++++++++++------
 src/cairoint.h            |    1 +
 3 files changed, 12 insertions(+), 6 deletions(-)

commit b181f40949a855c957dc6e7a1033981a2ed7d05a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 28 16:04:08 2008 +0000

    [test/a8-mask] Check negative strides as well.
    
    Check that we also allow surfaces to be created using a negative stride.

 test/a8-mask.c |   19 ++++++++++++++++++-
 1 files changed, 18 insertions(+), 1 deletions(-)

commit b6eb1c5c92321849661198facd53510366050d45
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 29 11:49:14 2008 +0000

    [cairo-image-surface] Harden cairo_format_stride_for_width().
    
    Check the user supplied values for validity and potential overflow,
    returning -1 in such cases, and update the documentation to warn of the
    new error return.

 src/cairo-image-surface.c |   14 ++++++++++++--
 1 files changed, 12 insertions(+), 2 deletions(-)

commit c06d929325710c1a2cbecb8a64803ca8e1ffbec0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 28 16:07:57 2008 +0000

    [cairo-png] Further hardening against malloc failures.
    
    On some OOM paths, libpng raises a warning as opposed to an error,
    these were not being propagated back to the caller. We were also not
    checking that we did not overwrite a pre-existing error status when
    raising an error whilst performing I/O.

 src/cairo-png.c |   38 +++++++++++++++++++++++++++++---------
 1 files changed, 29 insertions(+), 9 deletions(-)

commit c985096e6d7c04a780c055387e17ec4bb9334db3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 29 11:16:39 2008 +0000

    [cairo-xlib] Tidy usage of _cairo_error().
    
    Avoid a duplicate call to _cairo_error() and add a missing one.

 src/cairo-xlib-display.c |    1 +
 src/cairo-xlib-surface.c |   12 ++++++------
 2 files changed, 7 insertions(+), 6 deletions(-)

commit 914f4a3ec5a310c823558c27e500a23be808b9fe
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 29 11:15:26 2008 +0000

    [cairo-pattern] Tidy usage of _cairo_error().
    
    Remove the duplicate calls to _cairo_error() along the constructor
    error paths and a missing call to _cairo_error().

 src/cairo-pattern.c |   20 +++++---------------
 1 files changed, 5 insertions(+), 15 deletions(-)

commit d9fb4d4bc55eae42f6348b142e667be454064e2c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 29 11:12:57 2008 +0000

    [cairo-ft-font] Simplify return of the nil font face during construction.
    
    Simply return the nil font face from the internal constructor rather
    than returning NULL and repeating the same fixup in the callers.

 src/cairo-ft-font.c |   12 +++---------
 1 files changed, 3 insertions(+), 9 deletions(-)

commit fd7d5d6e1dbad6c44a607d91ee59361ee19d32f9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 29 11:11:47 2008 +0000

    [cairo-clip] Raise _cairo_error() at original error site.
    
    In a couple of places where we detect an error and return an error
    object to the user, we did not throw a _cairo_error().

 src/cairo-clip.c |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

commit 1654510a349d99167247d1004a481a95388cf0be
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 29 11:10:34 2008 +0000

    [cairo-cff-subset] Propagate error status.
    
    Remove duplicate _cairo_error() by ensuring that the error status is
    always propagated from the original error site. Note that in one case
    this eliminates a potential _cairo_error(CAIRO_INT_STATUS_UNSUPPORTED)!

 src/cairo-cff-subset.c |   47 +++++++++++++++++++++++++----------------------
 1 files changed, 25 insertions(+), 22 deletions(-)

commit 3b93d90edde7c065c6484e03e056b8605af85c4d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 29 10:16:05 2008 +0000

    [cairo-type1-fallback] Propagate original error status.
    
    _cairo_error() has already been called at the originating error site, so
    remove the duplicate (hard-coded!) call at the return statement.

 src/cairo-type1-fallback.c |   10 ++++++----
 1 files changed, 6 insertions(+), 4 deletions(-)

commit 141c54cd276ae86f6677fa8f66a118264d4287bf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 29 08:54:33 2008 +0000

    [cairo-truetype-subset] Remove duplicate _cairo_error().
    
    _cairo_error() has already been called at the originating error site, so
    remove the duplicate call at the return statement.

 src/cairo-truetype-subset.c |    7 ++-----
 1 files changed, 2 insertions(+), 5 deletions(-)

commit d89edde84de9cec9ce6f76f4f2c44dd9c1220528
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Mar 4 00:15:46 2008 -0800

    [meta] always copy glyph array before passing to _cairo_surface_show_glyphs
    
    _cairo_surface_show_glyphs is allowed to mutate the glyph array; if it's
    handed the internal array that the meta surface holds, then any subsequent
    playback (such as for fine-grained fallbacks) will result in incorrect
    glyph rendering.
    
    Ref: https://bugzilla.mozilla.org/show_bug.cgi?id=419917
    (I was unable to create a simple cairo testcase to demonstrate the problem.)

 src/cairo-meta-surface.c |   24 +++++++++++++++---------
 1 files changed, 15 insertions(+), 9 deletions(-)

commit 4a1f65b63e891436f5896b1ccb0af26dd4b9cfe1
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Mar 3 21:16:12 2008 -0800

    Fix msvc compilation issue in cairo-compiler-private.h
    
    __WIN32__ is not a standard define set by MSVC; we have to check for
    __WIN32__ (for mingw/gcc) and for _MSC_VER, for MSVC.

 src/cairo-compiler-private.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 4588b016d389bb678ab55f7dbbf2bf8cdf597bc1
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Mar 3 20:00:08 2008 -0800

    [quartz] compilation fix
    
    I'm an idiot and forgot to stg refresh, apparently.

 src/cairo-quartz-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 2f9350424fd7eb03ecbdbdee2831944d4e9c35af
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Mar 3 17:43:41 2008 -0800

    [win32] Treat all incoming HDCs as RGB24, regardless of depth
    
    Assuming A8/A1 doesn't really make sense in any case, and doing
    this allows for rendering to 8bpp displays.

 src/cairo-win32-surface.c |   28 ++++++----------------------
 1 files changed, 6 insertions(+), 22 deletions(-)

commit 9dd55f6fe854ec2365a5c1d264e39ca03f6eceb5
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Mar 3 17:40:21 2008 -0800

    [quartz] use CGContextGetType API if available
    
    We need to have a way to figure out if a context is a bitmap context;
    the current method works, but it prints a warning to the system console
    if called on a non-bitmap context.  There's a private CGContextGetType
    API that seems to let us get this information.

 src/cairo-quartz-surface.c |   17 ++++++++++++++++-
 1 files changed, 16 insertions(+), 1 deletions(-)

commit 5b334b274778f588c997d674c111a8bbf91be1df
Author: Antoine Azar <cairo@antoineazar.com>
Date:   Fri Feb 29 03:49:55 2008 -0500

    fixed compilation typo on win32

 src/cairo-win32-surface.c |   10 +++++-----
 1 files changed, 5 insertions(+), 5 deletions(-)

commit 39d18ecbfda6b3c1234c5ef4a4723099990b3502
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Mar 1 11:07:47 2008 +0100

    [cairo-directfb] Fixed bug in clone_similar() (src_x added twice).

 src/cairo-directfb-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 6295c46569de13a96816ed8e30dcefd73af1eb18
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 17:08:40 2008 -0800

    INSTALL: Add notes on running autogen.sh if there is no configure script

 INSTALL |   71 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++-----
 1 files changed, 65 insertions(+), 6 deletions(-)

commit e7e4a03dd387d264226105dc29c8541f0528fd2c
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 16:39:42 2008 -0800

    get-path-extents: Fix APPROX_EQUALS to round values on both sides of the comparison

 test/get-path-extents.c |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

commit 602489b150e879bc5cab6b1ad37c107799bf05ae
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 16:33:51 2008 -0800

    get-path-extents: Use APPROX_EQUALS instead of EQUALS for text path tests
    
    This is done grudgingly due to freetype rounding the coordinates
    of the extents when hinting is enabled.

 test/get-path-extents.c |   12 +++++++++---
 1 files changed, 9 insertions(+), 3 deletions(-)

commit 50a6fe1a2aa88e1f5ba40eda21142319f98f3d0d
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 16:32:55 2008 -0800

    Remove unnecessary cairo_set_tolerance call from get-path-extents test

 test/get-path-extents.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 4a73471087f42baf07988e0f2de323ed3b18dac9
Merge: 54a6191 523c7db
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 16:21:11 2008 -0800

    Merge branch 'master' of git.cairographics.org:/git/cairo

commit 54a61911f26b46b6d9b7335ac7dda746081261d9
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 16:20:56 2008 -0800

    Increment version to 1.5.13 after the 1.5.12 snapshot

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 523c7dbf6db85e75624ae111179dedb570212bb2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Feb 28 18:53:08 2008 -0500

    [cairo-scaled-font] Pedantic check for zero-area glyphs

 src/cairo-scaled-font.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 3ec4b9a4fc96572f099d0e9679fec9e5eb97a32e
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 15:46:22 2008 -0800

    Increment cairo version to 1.5.12 and libtool versioning to 18:0:16

 configure.in |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit bf99e355d9d24a4820dc93b49321b15318501b61
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 15:45:11 2008 -0800

    Clarify that 16-bit limit still exists in pixman

 NEWS |   19 ++++++++++---------
 1 files changed, 10 insertions(+), 9 deletions(-)

commit 4cc174f72f635e885b5f5fdc3d67789d3952cd2e
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 15:41:36 2008 -0800

    Mark the big-line test as XFAIL

 test/Makefile.am |    1 +
 test/big-line.c  |    3 ++-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 5d0bc97b2000a7b7e40a7a3918f09d90bdf5376a
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 15:35:46 2008 -0800

    Fix incorrect reference images for big-line test
    
    I mistakenly generated the original reference images with
    a 16.16 version of cairo, (which manifests a different
    buggy behavior than does the current 24.8 cairo).

 test/big-line-ps-ref.png       |  Bin 1161 -> 1148 bytes
 test/big-line-ps-rgb24-ref.png |  Bin 809 -> 830 bytes
 test/big-line-ref.png          |  Bin 1421 -> 1486 bytes
 test/big-line-rgb24-ref.png    |  Bin 1231 -> 1308 bytes
 4 files changed, 0 insertions(+), 0 deletions(-)

commit 4c7784e91eb953b905f187dda2a76dc102d73d01
Author: Jody Goldberg <jody@gnome.org>
Date:   Thu Feb 28 15:23:53 2008 -0800

    Fix PDF ouput when cross-compiling with mingw
    
    Need to use __WIN32__ instead of _MSC_VER to select _snprintf in
    place of snprintf when cross compiling. Otherwise all all %ld
    arguments get misprinted resulting in broken PDF output.

 src/cairo-compiler-private.h |    5 ++++-
 src/cairo-output-stream.c    |    5 +----
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 3d9db511c6990481add24f14225e36ea4d3f62d5
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 15:07:50 2008 -0800

    Remove references to PIXMAN_yuy2 and PIXMAN_yv12 enum values
    
    These were added in cb5ea8abfdf2c92241d4dea8bb827648697fd8e9 to
    quiet a compiler warning. We're reverting them now to avoid
    gratuitously requiring a new pixman version just to pick up two
    enum values that we aren't actually using.

 src/cairo-image-surface.c |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

commit a8e5c6b924447bb1303589cc31792a6c4bcc27ec
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 15:05:12 2008 -0800

    Fix typo in comment

 src/cairo-fixed-private.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 307a7448ea89c5cf2805bc3a8da31c5ea77e4542
Author: Larry Ewing <lewing@novell.com>
Date:   Thu Feb 28 15:02:23 2008 -0800

    Add big-line test showing a 24.8 failure

 test/.gitignore                |    1 +
 test/Makefile.am               |    5 +++
 test/big-line-ps-ref.png       |  Bin 0 -> 1161 bytes
 test/big-line-ps-rgb24-ref.png |  Bin 0 -> 809 bytes
 test/big-line-ref.png          |  Bin 0 -> 1421 bytes
 test/big-line-rgb24-ref.png    |  Bin 0 -> 1231 bytes
 test/big-line.c                |   69 ++++++++++++++++++++++++++++++++++++++++
 7 files changed, 75 insertions(+), 0 deletions(-)

commit 81175110ab44e74fe04f2bc8ed3c9983e23a82c6
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 14:36:47 2008 -0800

    NEWS: Add notes for cairo 1.5.12

 NEWS |   94 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 94 insertions(+), 0 deletions(-)

commit fbd29a4025fc3bca3812d205230151e8c6e80f49
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 14:36:32 2008 -0800

    Fix 'make doc-publish' for when run twice on the same day

 Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 8d515344c4ecded58566b704a740766f85359876
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 14:35:57 2008 -0800

    Add cairo-quartz to the manual

 doc/public/Makefile.am             |    1 -
 doc/public/cairo-docs.xml          |    2 +-
 doc/public/cairo-sections.txt      |   11 ++++++++
 doc/public/tmpl/cairo-quartz.sgml  |   49 ++++++++++++++++++++++++++++++++++++
 doc/public/tmpl/cairo-surface.sgml |    1 +
 5 files changed, 62 insertions(+), 2 deletions(-)

commit c8c77f01f7429b43dba4840698497187ff4d5779
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 13:02:27 2008 -0800

    Fix typo in documentation

 src/cairo-quartz-image-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit fa4b91fcac9b83cb66ac98dbcb395bd7b75c7560
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 12:56:31 2008 -0800

    Add missing reference images to make distcheck happily

 test/Makefile.am |   28 ++++++++++++++++++++++------
 1 files changed, 22 insertions(+), 6 deletions(-)

commit a95b22858fa5d65600faf5163966e18760a3cf35
Merge: c84ec58 67d5437
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 28 12:30:13 2008 -0800

    Merge branch '24.8'

commit 67d543716e294f4af330c52dcc9597e16267425e
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 27 20:39:53 2008 -0800

    PS: Fix to never break the final ~> that terminates a base85 stream.
    
    This was recently broken in commit 40d5082c24819968a5ee5a8f72e3b9cd61cb6105
    which uses a base85-stream but without strings for encapsulating image
    data. The bug was that the protection for ~> was only being applied
    to the string encodings rather than all base85 streams.
    
    We got lucky recently that the 24.8 change just happened to put the ~>
    sequence on the line-wrap boundary so the test suite tripped up the
    bug. Otherwise, we could have missed this for quite some time.

 src/cairo-ps-surface.c |   16 ++++++++--------
 1 files changed, 8 insertions(+), 8 deletions(-)

commit c84ec585123be1802b50665e192b80daf14fdd2b
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 27 16:24:10 2008 -0800

    Add some missing .gitignore entries

 test/.gitignore |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit 1df0b001b5b3e1062fa3c3a9070391105fe3d4ba
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 27 15:08:18 2008 -0800

    Change cairo's fixed-point format from 16.16 to 24.8
    
    The additional 8 bits of integer allows device space to be 256
    times larger before applications need to start worrying about
    any issues with overflow. So this should help in many cases.
    And the loss of 8 bits of sub-pixel precision shouldn't cause
    any harm at all---16 was really much more than necessary.
    
    With this change the details of rasterization for several tests
    are changed slightly, (particularly on arcs, for example), so
    many reference images are updated here.
    
    NOTE: This change is currently breaking get-path-extents for
    ps/pdf/svg as well as push-group for ps. We do not yet know
    the reasons for these new failures.

 src/cairo-fixed-type-private.h               |    2 +-
 test/clip-operator-ref.png                   |  Bin 8262 -> 8263 bytes
 test/clip-twice-ref.png                      |  Bin 1191 -> 1362 bytes
 test/clip-twice-rgb24-ref.png                |  Bin 1120 -> 1198 bytes
 test/copy-path-ps-argb32-ref.png             |  Bin 442 -> 0 bytes
 test/copy-path-ps-ref.png                    |  Bin 0 -> 474 bytes
 test/copy-path-ps-rgb24-ref.png              |  Bin 440 -> 0 bytes
 test/linear-gradient-ps-ref.png              |  Bin 718 -> 779 bytes
 test/mask-ref.png                            |  Bin 8381 -> 8476 bytes
 test/mask-svg-argb32-ref.png                 |  Bin 8389 -> 8527 bytes
 test/meta-surface-pattern-svg-argb32-ref.png |  Bin 3896 -> 3924 bytes
 test/operator-clear-ps-argb32-ref.png        |  Bin 1437 -> 1400 bytes
 test/operator-source-ref.png                 |  Bin 4422 -> 4422 bytes
 test/push-group-ref.png                      |  Bin 3005 -> 3126 bytes
 test/push-group-rgb24-ref.png                |  Bin 2849 -> 2961 bytes
 test/random-intersections-ps-ref.png         |  Bin 89253 -> 89253 bytes
 test/random-intersections-ref.png            |  Bin 132210 -> 148722 bytes
 test/text-pattern-svg-argb32-ref.png         |  Bin 1749 -> 1733 bytes
 test/text-rotate-ps-ref.png                  |  Bin 6859 -> 6878 bytes
 test/trap-clip-ref.png                       |  Bin 5723 -> 5772 bytes
 test/unantialiased-shapes-ref.png            |  Bin 3968 -> 4459 bytes
 21 files changed, 1 insertions(+), 1 deletions(-)

commit 0532cb5c03bac394e22ac4200e8bebc3d959b21c
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 27 13:18:39 2008 -0800

    Remove reference images for text-zero-len
    
    This test isn't generating any image output, so it's silly to
    have a 60x60 reference image for that. Not only that, but the
    rgb24 cases have always been failing due to a missing rgb24-
    specific reference image, (but pdiff had been hiding that).

 test/Makefile.am           |    1 +
 test/text-zero-len-ref.png |  Bin 130 -> 0 bytes
 test/text-zero-len.c       |    4 +---
 3 files changed, 2 insertions(+), 3 deletions(-)

commit 427a73ab31e2dce9d98820ba921b216176cde182
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 27 12:43:37 2008 -0800

    Add ps-specific reference images for two recently-added tests

 test/Makefile.am                  |    2 ++
 test/long-dashed-lines-ps-ref.png |  Bin 0 -> 1516 bytes
 test/reflected-stroke-ps-ref.png  |  Bin 0 -> 3898 bytes
 3 files changed, 2 insertions(+), 0 deletions(-)

commit 676c869d794f824b6e624d0b9b5c960870102406
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 27 11:24:59 2008 -0800

    Add some new ps-specific reference images
    
    These are necessary now due to the recent change to use pdiff
    only when the differences are less than a particular threshold.

 test/Makefile.am                        |    8 ++++++++
 test/caps-joins-ps-ref.png              |  Bin 0 -> 1459 bytes
 test/close-path-ps-ref.png              |  Bin 0 -> 309 bytes
 test/infinite-join-ps-ref.png           |  Bin 0 -> 218 bytes
 test/leaky-polygon-ps-ref.png           |  Bin 0 -> 354 bytes
 test/rectilinear-miter-limit-ps-ref.png |  Bin 0 -> 221 bytes
 test/self-copy-ps-ref.png               |  Bin 0 -> 335 bytes
 test/skew-extreme-ps-ref.png            |  Bin 0 -> 1048 bytes
 test/text-rotate-ps-ref.png             |  Bin 0 -> 6859 bytes
 test/transforms-ps-ref.png              |  Bin 0 -> 418 bytes
 10 files changed, 8 insertions(+), 0 deletions(-)

commit 1889427e78f2501df78a42c5e75c696745b517a7
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Feb 27 12:35:56 2008 -0500

    Fix usage of rectangle_int16_t in ps surface, and rename types
    
    The rectangle_int16_t usage was causing failures on 24.8 (due to a wrong
    pointer used to get_extents); I removed all the specific int16/int32 typedefs
    to avoid this situation in the future.

 src/cairo-ps-surface.c    |    2 +-
 src/cairo-types-private.h |   47 ++++++++++++++++++++------------------------
 2 files changed, 22 insertions(+), 27 deletions(-)

commit 4f7d3063520b987d3df3bcebfaeed9489b16b12d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Feb 27 10:11:08 2008 +0000

    [cairo-paginated-surface] Fix enum compiler warning.
    
    Add a CAIRO_SURFACE_TYPE_QUARTZ_IMAGE to the switch to suppress a
    compiler warning.

 src/cairo-paginated-surface.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit cb5ea8abfdf2c92241d4dea8bb827648697fd8e9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 21 16:03:42 2008 +0000

    [cairo-image-surface] Compiler warnings and whitespace.
    
    Silence a couple of enum compiler warnings and tweak the whitespace.

 src/cairo-image-surface.c |   45 ++++++++++++++++++++++++---------------------
 1 files changed, 24 insertions(+), 21 deletions(-)

commit 22600e2393f2ec5ebe40213c49599167523ddf20
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 22 17:07:45 2008 +0000

    [cairo-gstate] Remove a couple of impossible guards.
    
    Delete a couple of superfluous gstate != NULL guards.

 src/cairo-gstate.c |    6 ------
 1 files changed, 0 insertions(+), 6 deletions(-)

commit 37e597f1e553a98d06c5334aa95b918ed303e89e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 22 17:03:51 2008 +0000

    [cairo-gstate] Propagate the error from _cairo_gstate_clone().
    
    Propagate the true status value back from the _cairo_gstate_init_copy()
    instead of assuming that is a NO_MEMORY and re-raising the error in the
    caller.

 src/cairo-gstate.c |   22 +++++++++++-----------
 1 files changed, 11 insertions(+), 11 deletions(-)

commit 127d7f43ea7043bba1d276d9721e80a702d9fd46
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 21 15:56:34 2008 +0000

    [cairo-path-bounds] _cairo_path_fixed_bounds() can fail...
    
    I was wrong in my assertion that the call to
    _cairo_path_fixed_interpret_flat() could not possibly fail with the
    given _cairo_path_bounder_* callbacks - as I had missed the implicit
    spline decomposition. (An interesting exercise would be to avoid the
    spline allocation...) As a result we do have to check and propagate the
    status return through the call stack.

 src/cairo-analysis-surface.c |    8 ++++++--
 src/cairo-gstate.c           |   12 +++++++++---
 src/cairo-path-bounds.c      |   10 +++++-----
 src/cairo.c                  |   10 +++++++---
 src/cairoint.h               |    4 ++--
 5 files changed, 29 insertions(+), 15 deletions(-)

commit 65a8a279430a08e6f28b1e0354e9f18fda1a0ad7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 26 14:14:38 2008 +0000

    [test] Add reflected-stroke to exercise stroking with a reflected ctm.
    
    Parts of the stroker depend upon whether we have in effect a reflection
    matrix (one whose determinant < 0). This test incopororates the same
    drawing under the a couple of reflections to exercise stroking under
    matrices with both positive and negative determinants.

 test/.gitignore               |    1 +
 test/Makefile.am              |    2 +
 test/reflected-stroke-ref.png |  Bin 0 -> 4802 bytes
 test/reflected-stroke.c       |  100 +++++++++++++++++++++++++++++++++++++++++
 4 files changed, 103 insertions(+), 0 deletions(-)

commit 76f0613e5f1244557eab31945d7e7c757d987304
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 26 09:50:51 2008 +0000

    [test] Add long-dashed-lines to exercise _cairo_box_intersects_line_segment().
    
    Draw a few rectangles whose vertices are outside the bounds of the
    surface, but whose segments cross the surface. This exercises the new
    dashed stroker optimisation which tries to determine whether the line
    segment is visible.

 test/.gitignore                |    1 +
 test/Makefile.am               |    2 +
 test/long-dashed-lines-ref.png |  Bin 0 -> 2116 bytes
 test/long-dashed-lines.c       |   75 ++++++++++++++++++++++++++++++++++++++++
 4 files changed, 78 insertions(+), 0 deletions(-)

commit cdeffc69d9daa931c3c4ffcbb9e093180da45fe5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 26 13:04:33 2008 +0000

    [cairo-quartz-surface] Make check fixup.
    
    A couple of minor corrections to satisfy make check.

 src/cairo-quartz-surface.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 40f4750f5ec53ca9ca6e3d621fefb2bd1687909e
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Feb 26 23:17:04 2008 +1030

    Use PDF 're' operator for rectangle paths
    
    Modify cairo-pdf-operators.c to emit to 're' path operator when the
    path contains only a rectangle. This can only be done when the path is
    logically equivilent to the the path drawn by the 're'
    operator. Otherwise dashed strokes may start on the wrong line.
    
    ie the path must be equivalent to:
    
      cairo_move_to (cr, x, y);
      cairo_rel_line_to (cr, width, 0);
      cairo_rel_line_to (cr, 0, height);
      cairo_rel_line_to (cr, -width, 0);
      cairo_close_path (cr);
    
    which is also equivilent to cairo_rectangle().

 src/cairo-path-fixed.c    |   24 ++++++++++++++++++++++++
 src/cairo-pdf-operators.c |   36 +++++++++++++++++++++++++++++-------
 src/cairo-ps-surface.c    |    2 ++
 src/cairoint.h            |    4 ++++
 4 files changed, 59 insertions(+), 7 deletions(-)

commit 7acfee38b1ac6ef2292d754c7103bd65d58f72d8
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Feb 25 21:44:04 2008 -0500

    [atsui] Make default font 'Helvetica'
    
    The previous default font was Monaco, which is a fixed-pitch font; Helvetica
    is more inline with the other platform defaults.

 src/cairoint.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 9979f786acaf0ebba1bf97e40aeba66287a3c743
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Feb 25 21:27:33 2008 -0500

    [test] update degenerate-pen test
    
    pdiff was hiding a rgb24 failure here, as the test was drawing using
    black ink on the default black background.  Instead, explicitly fill
    the surface with white first.

 test/degenerate-pen-ps-argb32-ref.png |  Bin 795 -> 0 bytes
 test/degenerate-pen-ps-ref.png        |  Bin 0 -> 865 bytes
 test/degenerate-pen-quartz-ref.png    |  Bin 0 -> 1144 bytes
 test/degenerate-pen-ref.png           |  Bin 788 -> 1139 bytes
 test/degenerate-pen.c                 |    4 ++++
 5 files changed, 4 insertions(+), 0 deletions(-)

commit baec928a69b5b763b30766cddfb1473e4e05fc3c
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Feb 25 21:06:36 2008 -0500

    [quartz] More mask fixes -- handle all types via fallback mask image

 src/cairo-quartz-surface.c     |   79 +++++++++++++++++++++++++++++++---------
 test/mask-quartz-ref.png       |  Bin 0 -> 10657 bytes
 test/mask-quartz-rgb24-ref.png |  Bin 0 -> 8418 bytes
 3 files changed, 62 insertions(+), 17 deletions(-)

commit 3fcd0be52215e1d8a59560d6b0919fb3f53b7a28
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Feb 25 21:06:35 2008 -0500

    Use pdiff only if the pixel difference is less than a limit

 test/buffer-diff.c |   24 +++++++++++++++++-------
 1 files changed, 17 insertions(+), 7 deletions(-)

commit 1dfb1bd45fbe08392e233af67f464b2776de9f19
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Feb 25 21:06:28 2008 -0500

    [quartz] update test suite images for quartz

 test/dash-scale-quartz-ref.png                 |  Bin 0 -> 8079 bytes
 test/leaky-dash-quartz-ref.png                 |  Bin 0 -> 241 bytes
 test/line-width-scale-quartz-ref.png           |  Bin 0 -> 6434 bytes
 test/mask-alpha-quartz-argb32-ref.png          |  Bin 0 -> 641 bytes
 test/meta-surface-pattern-quartz-ref.png       |  Bin 0 -> 4572 bytes
 test/meta-surface-pattern-quartz-rgb24-ref.png |  Bin 0 -> 4063 bytes
 test/new-sub-path-quartz-ref.png               |  Bin 386 -> 383 bytes
 test/over-above-source-quartz-ref.png          |  Bin 0 -> 530 bytes
 test/over-above-source-quartz-rgb24-ref.png    |  Bin 0 -> 456 bytes
 test/over-around-source-quartz-ref.png         |  Bin 0 -> 612 bytes
 test/over-around-source-quartz-rgb24-ref.png   |  Bin 0 -> 491 bytes
 test/over-between-source-quartz-ref.png        |  Bin 0 -> 570 bytes
 test/over-between-source-quartz-rgb24-ref.png  |  Bin 0 -> 467 bytes
 test/rotate-image-surface-paint-quartz-ref.png |  Bin 0 -> 257 bytes
 test/trap-clip-quartz-ref.png                  |  Bin 5814 -> 6171 bytes
 15 files changed, 0 insertions(+), 0 deletions(-)

commit b439e638087d6e76d14ca42cd59dba3915dcc8e8
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Feb 25 21:06:25 2008 -0500

    [quartz] fix mask to correctly take CTM into account

 src/cairo-quartz-surface.c |   40 ++++++++--------------------------------
 1 files changed, 8 insertions(+), 32 deletions(-)

commit a4975ab1173957a293aad8ccac51d1e43cab86da
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Feb 25 21:06:23 2008 -0500

    [quartz] Optimize path handling where possible

 src/cairo-path-fill.c      |   66 +----------------------------------
 src/cairo-path-fixed.c     |   81 ++++++++++++++++++++++++++++++++++++++++++++
 src/cairo-quartz-surface.c |   11 ++++++
 src/cairoint.h             |    7 ++++
 4 files changed, 101 insertions(+), 64 deletions(-)

commit 63711b1d4a61f21db070f30b9c153d0923cc24bb
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Feb 25 21:06:21 2008 -0500

    [quartz] Add quartz-image-surface type

 src/Makefile.am                  |    2 +-
 src/cairo-quartz-image-surface.c |  370 +++++++++++++++++++++++++++++
 src/cairo-quartz-private.h       |   31 +++-
 src/cairo-quartz-surface.c       |  476 ++++++++++++++++++--------------------
 src/cairo-quartz.h               |    6 +
 src/cairo.h                      |    4 +-
 6 files changed, 634 insertions(+), 255 deletions(-)

commit ecb54b96967ae0d1b5ec3a4d0955f46dd68f2b8b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Feb 25 19:48:58 2008 -0500

    [test/get-path-extents] Don't use short-circuit && operators
    
    That causes some tests to be skipped if the preceding test failed.

 test/get-path-extents.c |  143 ++++++++++++++++++++--------------------------
 1 files changed, 62 insertions(+), 81 deletions(-)

commit be316b7cfae90878d05869329c85c9617019bbec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Feb 25 19:36:22 2008 -0500

    [test]/get-path-extents] Use %g instead of %f to print doubles

 test/get-path-extents.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 7c8c9cf334b8687ffe2d6f614e234bd1662689e6
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Feb 25 21:50:37 2008 +1030

    PDF: Support OPERATOR_SOURCE when pattern is opaque

 src/cairo-pdf-surface.c |   12 ++++++++----
 1 files changed, 8 insertions(+), 4 deletions(-)

commit 35295546ef63821c5eee5336ec73eef2e03a035d
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Feb 22 22:06:25 2008 +1030

    Add mask pdf ref images
    
    The mask test pdf output is now correct. Poppler ref images
    are required due to minor gradient rendering differences.

 test/mask-pdf-argb32-ref.png |  Bin 0 -> 7834 bytes
 test/mask-pdf-rgb24-ref.png  |  Bin 0 -> 7383 bytes
 2 files changed, 0 insertions(+), 0 deletions(-)

commit 1df969158c83b31acbcf0963913bc4d4a9d20730
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Feb 22 21:59:47 2008 +1030

    Refresh clip-operator ps/pdf ref images
    
    Because the meta surface analysis fix increased the size of some of
    the fallback images.

 test/clip-operator-pdf-argb32-ref.png |  Bin 9096 -> 11005 bytes
 test/clip-operator-ps-argb32-ref.png  |  Bin 9062 -> 9084 bytes
 2 files changed, 0 insertions(+), 0 deletions(-)

commit eae259168fc4318f2a67f3107f953648e7ab925e
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Feb 22 21:07:31 2008 +1030

    Using correct surface size and clip when analyzing meta surface patterns
    
    The surface size and clip needs to be saved before and restored after
    replaying meta surface patterns back to the analysis surface. The clip
    is reset and the correct surface size is set before replaying the meta
    surface.

 src/cairo-analysis-surface.c |   20 ++++++++++++++++++++
 1 files changed, 20 insertions(+), 0 deletions(-)

commit 0db2c67cc5b29623070465f2cf6eafbff174ed30
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Feb 21 20:51:20 2008 +1030

    PS: Replace gsave/grestore with q/Q

 src/cairo-ps-surface.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 187ace8024ffadc3ee0b69bbd99c52d189cb7be2
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Feb 22 19:36:11 2008 +1030

    PS: Make debug code compile

 src/cairo-ps-surface.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 8f0ec1174ad3c7a59ecdcf7724b8e8b96801b3e0
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 21 08:05:27 2008 -0800

    Patch hole in fabric of time-space continuum

 NEWS |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 70bb2abed04ed25abccbb2d6a5bdc58136701b0a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Feb 20 20:54:01 2008 -0500

    [cairo-ft] Handle font sizes smaller than 1px correctly
    
    The FT_Set_Char_Size() docs say it replaces sizes smaller than 1.0 with 1.0.
    So, we can't use x_scale and y_scale values less than one.  The fix is easy thouh,
    cap them to 1.0 and let the FT transform do the scaling down.

 src/cairo-ft-font.c |   36 ++++++++++++++++++++++--------------
 1 files changed, 22 insertions(+), 14 deletions(-)

commit dcab5019d5d9cb70aed0f473642ee840b785c4af
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 17:35:48 2008 -0800

    Add poppler-specific reference image for radial-gradient
    
    This is justified by the previously mentioned bug on poppler
    gradients. Note that this test only passes with a patch
    to fix a bug in poppler (not yet upstream). Here it is:
    
    	PATCH: Keep 'cairo_shape' and 'cairo' consistent
    	https://bugs.freedesktop.org/show_bug.cgi?id=14593

 test/Makefile.am                 |    1 +
 test/README                      |    1 +
 test/radial-gradient-pdf-ref.png |  Bin 0 -> 79490 bytes
 3 files changed, 2 insertions(+), 0 deletions(-)

commit 70b683363f6e37d8952c8f857dd687022a02ada5
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Wed Feb 20 23:46:27 2008 +0100

    [SVG] Fix a8-mask test failure.
    
    For A8 and A1 masks, the embedded mask image doesn't have an alpha channel.
    In this case, the feColorMatrix should not be used, since it's goal is to
    discard the color channels and to only keep the alpha one (which is what
    we want when we have an ARGB32 mask image, since SVG uses all the channels
    for the mask operation, where cairo only use the alpha channel).

 src/cairo-svg-surface.c |   21 ++++++++++++++++-----
 1 files changed, 16 insertions(+), 5 deletions(-)

commit c5d056aaebe51d2c3430807de559b0d8ab3431d5
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Wed Feb 20 21:42:24 2008 +0100

    [SVG] Fix the extend-reflect-similar test failure.
    
    SVG doesn't support extend reflect for image pattern, and there isn't
    any trivial way to emulate this feature. So we use the image fallback
    for now. This fix also forces an image fallback for extend-reflect, but
    in the end, it generates more or less the same file (one big image for
    the pattern). No other test is forced to use an image fallback by this
    patch.

 src/cairo-svg-surface.c |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

commit 1d236521a527d8b07962d1d671daff35134f4d31
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 10:00:41 2008 -0800

    Increment cairo version to 1.5.11 after the 1.5.10 snapshot

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 83489f623f1239a731c5377d634ea8e9b782d448
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 10:00:31 2008 -0800

    SGML churn

 doc/public/tmpl/cairo-paths.sgml |   10 +++++++++-
 1 files changed, 9 insertions(+), 1 deletions(-)

commit 0f2ecb5ec65ff13c3aafbe57600c1906f3fe7978
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 08:24:32 2008 -0800

    Update REFERENCE_IMAGES for distcheck

 test/Makefile.am |   64 +++++++++++++++++++++++++++++++++++++++--------------
 1 files changed, 47 insertions(+), 17 deletions(-)

commit ee62a5fad6a32a6997600caac8b292aef4e2fe54
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 08:08:52 2008 -0800

    Mention that cairo_get_current_point is void again

 NEWS |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 118657136d3323f4769bee28ec2435a61540f0eb
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 08:06:39 2008 -0800

    Increment cairo version to 1.5.10 and libtool versioning to 17:0:15

 configure.in |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 5aacc54c430a982b51992d6fac186b955e478045
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 08:02:45 2008 -0800

    NEWS: Add notes for cairo 1.5.10

 NEWS |   99 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++---
 1 files changed, 94 insertions(+), 5 deletions(-)

commit f954db72dd33de837296ede353ad9823b0e32fcd
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 06:24:48 2008 -0800

    Add svg-specific reference image for mask-alpha
    
    There's no apparent bug here.

 test/mask-alpha-svg-argb32-ref.png |  Bin 0 -> 615 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit c197c684a6b002ad8549d92f15d7f68b7c0068bd
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 05:58:42 2008 -0800

    Update ps-specific reference images for ghostscript 8.61
    
    I was wrong in the previous message where I said I had ghostscript 8.61
    installed. I do now, (and "gs --version" says the same thing), and
    here are the new reference images.

 test/clip-fill-rule-ps-argb32-ref.png          |  Bin 322 -> 310 bytes
 test/clip-fill-rule-ps-rgb24-ref.png           |  Bin 309 -> 302 bytes
 test/dash-caps-joins-ps-argb32-ref.png         |  Bin 3854 -> 3870 bytes
 test/dash-caps-joins-ps-rgb24-ref.png          |  Bin 3852 -> 3870 bytes
 test/dash-curve-ps-ref.png                     |  Bin 27206 -> 27293 bytes
 test/dash-state-ps-argb32-ref.png              |  Bin 8652 -> 0 bytes
 test/dash-state-ps-ref.png                     |  Bin 0 -> 10219 bytes
 test/dash-state-ps-rgb24-ref.png               |  Bin 8650 -> 0 bytes
 test/dash-zero-length-ps-argb32-ref.png        |  Bin 319 -> 0 bytes
 test/dash-zero-length-ps-ref.png               |  Bin 0 -> 319 bytes
 test/dash-zero-length-ps-rgb24-ref.png         |  Bin 0 -> 304 bytes
 test/degenerate-pen-ps-argb32-ref.png          |  Bin 771 -> 795 bytes
 test/font-matrix-translation-ps-argb32-ref.png |  Bin 785 -> 749 bytes
 test/font-matrix-translation-ps-rgb24-ref.png  |  Bin 783 -> 749 bytes
 test/ft-text-vertical-layout-type1-ps-ref.png  |  Bin 1894 -> 1911 bytes
 test/ft-text-vertical-layout-type3-ps-ref.png  |  Bin 1879 -> 1867 bytes
 test/glyph-cache-pressure-ps-ref.png           |  Bin 1667 -> 1413 bytes
 test/gradient-alpha-ps-argb32-ref.png          |  Bin 179 -> 189 bytes
 test/line-width-scale-ps-argb32-ref.png        |  Bin 3903 -> 0 bytes
 test/line-width-scale-ps-ref.png               |  Bin 0 -> 3911 bytes
 test/line-width-scale-ps-rgb24-ref.png         |  Bin 3901 -> 0 bytes
 test/linear-gradient-ps-argb32-ref.png         |  Bin 613 -> 0 bytes
 test/linear-gradient-ps-ref.png                |  Bin 0 -> 718 bytes
 test/linear-gradient-ps-rgb24-ref.png          |  Bin 613 -> 0 bytes
 test/linear-gradient-reflect-ps-ref.png        |  Bin 315 -> 314 bytes
 test/meta-surface-pattern-ps-argb32-ref.png    |  Bin 3246 -> 3257 bytes
 test/meta-surface-pattern-ps-rgb24-ref.png     |  Bin 3823 -> 3873 bytes
 test/new-sub-path-ps-argb32-ref.png            |  Bin 559 -> 556 bytes
 test/operator-clear-ps-argb32-ref.png          |  Bin 1409 -> 1437 bytes
 test/operator-source-ps-argb32-ref.png         |  Bin 4026 -> 3893 bytes
 test/operator-source-ps-rgb24-ref.png          |  Bin 3366 -> 3241 bytes
 test/pixman-rotate-ps-argb32-ref.png           |  Bin 411 -> 0 bytes
 test/pixman-rotate-ps-rgb24-ref.png            |  Bin 392 -> 0 bytes
 test/random-intersections-ps-argb32-ref.png    |  Bin 89733 -> 0 bytes
 test/random-intersections-ps-ref.png           |  Bin 0 -> 89253 bytes
 test/random-intersections-ps-rgb24-ref.png     |  Bin 89733 -> 0 bytes
 test/select-font-face-ps-ref.png               |  Bin 1352 -> 1079 bytes
 test/show-text-current-point-ps-ref.png        |  Bin 1475 -> 1454 bytes
 test/text-pattern-ps-argb32-ref.png            |  Bin 998 -> 984 bytes
 test/text-pattern-ps-rgb24-ref.png             |  Bin 969 -> 936 bytes
 test/text-rotate-ps-argb32-ref.png             |  Bin 7156 -> 0 bytes
 test/text-rotate-ps-rgb24-ref.png              |  Bin 7156 -> 0 bytes
 test/trap-clip-ps-argb32-ref.png               |  Bin 5715 -> 5591 bytes
 test/trap-clip-ps-rgb24-ref.png                |  Bin 5630 -> 5512 bytes
 44 files changed, 0 insertions(+), 0 deletions(-)

commit 8d2d4130146d16676c9ed6cf7d82d6aeaadf1c56
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 05:11:53 2008 -0800

    Expand the documentation of cairo/test/README
    
    Add notes on CAIRO_REF_DIR and the version requirements of
    poppler and ghostscript necessary for getting no failures.

 test/README |   99 +++++++++++++++++++++++++++++++++++++++++++++++++++-------
 1 files changed, 87 insertions(+), 12 deletions(-)

commit 4d42f569007f23e4cf9713c14f8c3dc640cf0f2c
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 04:22:58 2008 -0800

    Update ps-specific reference images
    
    Presumably these are due to ghostscript version churn. I don't
    know what version was used in the past, but we're going to be
    more careful about documenting versions now.
    
    The ghostscript package I used here advertises itself as "8.61"
    and "gs --version" reports 8.15.3.

 ...ft-text-vertical-layout-type1-ps-argb32-ref.png |  Bin 1879 -> 0 bytes
 test/ft-text-vertical-layout-type1-ps-ref.png      |  Bin 0 -> 1894 bytes
 ...ft-text-vertical-layout-type3-ps-argb32-ref.png |  Bin 1882 -> 0 bytes
 test/ft-text-vertical-layout-type3-ps-ref.png      |  Bin 0 -> 1879 bytes
 test/text-pattern-ps-rgb24-ref.png                 |  Bin 969 -> 969 bytes
 5 files changed, 0 insertions(+), 0 deletions(-)

commit 78b270601ce54545a0c68075a60a3b85a2f37adb
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 03:49:16 2008 -0800

    Add poppler-specific reference image for source-clip-scale
    
    This one doesn't have any associated poppler bug report. The
    rendering by poppler is totally reasonable, and not problematic
    at all with respect to what the test is actually testing for.

 test/source-clip-scale-pdf-ref.png |  Bin 0 -> 113 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit 64b7489a50808bd660a47615d0775842c77dd0f2
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 03:47:34 2008 -0800

    Add poppler-specific reference image for push-group
    
    This is justified by the following new bug report:
    
    	Incorrect clipping of group object (regression?)
    	https://bugs.freedesktop.org/show_bug.cgi?id=14580

 test/README                       |    5 +++++
 test/push-group-pdf-ref.png       |  Bin 0 -> 2694 bytes
 test/push-group-pdf-rgb24-ref.png |  Bin 0 -> 2611 bytes
 3 files changed, 5 insertions(+), 0 deletions(-)

commit 7aaa3e67c5016357e28476b10d768101e1e5bd41
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 03:38:07 2008 -0800

    Add poppler-specific reference images for tests needing EXTEND_PAD
    
    This is justified by the following new bug report:
    
    	Poppler should paint images with CAIRO_EXTEND_PAD
    	https://bugs.freedesktop.org/show_bug.cgi?id=14578
    
    The four affected tests are:
    
    	paint-source-alpha
    	paint-with-alpha
    	rotate-image-surface-paint
    	scale-source-surface-paint

 test/README                                       |    9 +++++++--
 test/paint-source-alpha-pdf-ref.png               |  Bin 0 -> 473 bytes
 test/paint-with-alpha-pdf-ref.png                 |  Bin 0 -> 466 bytes
 test/rotate-image-surface-paint-pdf-rgb24-ref.png |  Bin 0 -> 207 bytes
 test/scale-source-surface-paint-pdf-rgb24-ref.png |  Bin 0 -> 198 bytes
 5 files changed, 7 insertions(+), 2 deletions(-)

commit fdd046edccf283bfedb59733516f6110cc96ea82
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 03:23:38 2008 -0800

    Add poppler-specific reference image for text-pattern
    
    This is justified with the following new bug report:
    
    	Poppler renders patterned text as black
    	https://bugs.freedesktop.org/show_bug.cgi?id=14577

 test/README                          |    6 ++++++
 test/text-pattern-pdf-argb32-ref.png |  Bin 0 -> 1823 bytes
 test/text-pattern-pdf-rgb24-ref.png  |  Bin 0 -> 508 bytes
 3 files changed, 6 insertions(+), 0 deletions(-)

commit 43302f0408d92138ac12afcd855d44c430074859
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 03:15:17 2008 -0800

    Re-enable pdf tests with gradients and add poppler-based reference images
    
    This freezes the current (buggy) poppler result in the test suite
    so that we will notice any future regressions.

 boilerplate/cairo-boilerplate-pdf.c             |   42 --------------------
 test/README                                     |   47 +++++++++++++++++++++++
 test/gradient-alpha-pdf-argb32-ref.png          |  Bin 0 -> 126 bytes
 test/gradient-alpha-pdf-rgb24-ref.png           |  Bin 0 -> 121 bytes
 test/gradient-alpha.c                           |    3 +-
 test/linear-gradient-pdf-ref.png                |  Bin 0 -> 935 bytes
 test/linear-gradient-reflect-pdf-argb32-ref.png |  Bin 0 -> 248 bytes
 test/linear-gradient-reflect-pdf-rgb24-ref.png  |  Bin 0 -> 248 bytes
 test/linear-gradient.c                          |    3 +-
 test/text-pattern.c                             |    3 +-
 test/trap-clip-pdf-argb32-ref.png               |  Bin 0 -> 5809 bytes
 test/trap-clip-pdf-rgb24-ref.png                |  Bin 0 -> 5768 bytes
 test/trap-clip.c                                |    3 +-
 13 files changed, 51 insertions(+), 50 deletions(-)

commit 635fed77676f2446cbedfcf52a85f96e32c3a241
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 02:24:28 2008 -0800

    Re-enable some pdf tests now that poppler has knockout support
    
    We had several pdf tests disabled waiting for this bug fix:
    
    	Poppler does not correctly handle knockout groups
    	https://bugs.freedesktop.org/show_bug.cgi?id=12185
    
    That's in place for poppler now, so we're turning the tests
    back on. Some of the affected tests now pass perfectly:
    
    	over-above-source
    	over-around-source
    	over-below-source
    	over-between-source
    
    Some just needed new reference images:
    
    	operator-clear
    	clip-operator-pdf-argb32
    
    The remaining tests still fail, but none of the failures can
    obviously be ascribed to just poppler problems:
    
    	clip-operator-pdf-rgb24
    	operator-source
    	unbounded-operator
    
    The first two have some serious problems, while in the case
    of unbounded-operator the problem is extremely minor (a white
    grid appears in the background where the reference image is
    all black).

 boilerplate/cairo-boilerplate-pdf.c    |   13 -------------
 test/clip-operator-pdf-argb32-ref.png  |  Bin 0 -> 9096 bytes
 test/operator-clear-pdf-argb32-ref.png |  Bin 0 -> 1438 bytes
 test/operator-clear-pdf-rgb24-ref.png  |  Bin 0 -> 1170 bytes
 4 files changed, 0 insertions(+), 13 deletions(-)

commit 98189d860e2c4219f994dd19fb199fcf4b457852
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 01:43:51 2008 -0800

    svg: Add support for flattening SOURCE painting when there's nothing beneath it
    
    This avoids unnecessary rasterization in many cases when using
    cairo_surface_create_similar with an SVG surface. Because of that
    it eliminates test-suite failures for the -similar cases where we
    have svg-specific reference images. Namely:
    
    	font-matrix-translation, ft-text-vertical-layout-type1,
    	ft-text-vertical-layout-type3, mask, meta-surface-pattern,
    	paint-source-alpha, paint-with-alpha, rotate-image-surface-paint,
    	scale-source-surface-paint, source-clip-scale, text-pattern,
    	text-rotate
    
    In all of these cases the test suite was kindly noticing that we
    weren't getting the same 'native' SVG output that was desired.

 src/cairo-svg-surface.c |   15 +++++++++++----
 1 files changed, 11 insertions(+), 4 deletions(-)

commit e7c6e291a64391004ae7bafc4d69830af5b0c8b1
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 01:43:22 2008 -0800

    Add svg-specific reference images for meta-surface-pattern test

 test/meta-surface-pattern-svg-argb32-ref.png |  Bin 0 -> 3896 bytes
 test/meta-surface-pattern-svg-rgb24-ref.png  |  Bin 0 -> 4593 bytes
 2 files changed, 0 insertions(+), 0 deletions(-)

commit a1867412210db667a02e7b656729e2cf6a64a2d7
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 20 01:38:59 2008 -0800

    cairo-svg: Make operation_supported depend on analyze_operation instead of the other way around.
    
    This prepares for analyze_operation to be able to return more than
    just two values, (which will allow the svg backend to take advantage
    of CAIRO_INT_STATUS_FLATTEN_TRANSPARENCY).

 src/cairo-svg-surface.c |   27 +++++++++++++++------------
 1 files changed, 15 insertions(+), 12 deletions(-)

commit 8f11c4583f58f97c348aafcd71db059ac7791fe7
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Feb 18 17:32:35 2008 -0800

    Revert "[meta-surface] Adjust tolerance when replaying to surfaces with device scale"
    
    This reverts commit 7f21bfb0a8265095d68bb5ff6afae7553683a776.
    
    We don't yet have consensus on whether this is a good change or not.
    So for now, we're favoring the existing behavior until we can work
    that out.

 src/cairo-meta-surface.c |   11 +++++------
 1 files changed, 5 insertions(+), 6 deletions(-)

commit 1747718406b3450bc8869f0e050f9a18b3036030
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 14 12:27:47 2008 -0800

    Add a spline to the degenerate-pen test case
    
    This was triggering an infinite loop (with 24.8 fixed-point) just before
    the previous fix.
    
    NOTE: I usually put bug demonstrations just before the fixes, but this
    one was quite harsh---not only was cairo looping infinitely, but it
    was appending to an array on each iteration---so not kind at all.

 test/degenerate-pen-ps-argb32-ref.png |  Bin 374 -> 771 bytes
 test/degenerate-pen-ref.png           |  Bin 278 -> 788 bytes
 test/degenerate-pen.c                 |    3 +++
 3 files changed, 3 insertions(+), 0 deletions(-)

commit d6d81c92b501b32be6c48d134683ebd51f63c134
Author: Carl Worth <cworth@cworth.org>
Date:   Sat Feb 16 13:27:02 2008 -0800

    Eliminate a potential infinite loop in spline stroking
    
    Sometimes > rather than >= can make a bug difference. The infinite loop
    was noticed here:
    
    	Infinite loop when scaling very small values using 24.8
    	http://bugs.freedesktop.org/show_bug.cgi?id=14280
    
    Note that that particular test case only exposes the infinite
    loop when using 24.8 instead of 16.16 fixed-point values by
    setting CAIRO_FIXED_FRAC_BITS to 8.

 src/cairo-pen.c |   13 ++++++++++++-
 1 files changed, 12 insertions(+), 1 deletions(-)

commit 770b058c9e53c6d0e3a3f600cd5a9631eee39dff
Author: Carl Worth <cworth@cworth.org>
Date:   Sat Feb 16 13:17:49 2008 -0800

    Remove _cairo_slope_[counter_]clockwise
    
    These two functions were hiding away some important details
    about strictness of inequalities. Also, the callers differ
    on the strictness they need. Everything is cleaner and more
    flexible by making the callers just call _cairo_slope_compare
    directly.

 src/cairo-path-stroke.c |    2 +-
 src/cairo-pen.c         |   30 ++++++++++++++++--------------
 src/cairo-slope.c       |   23 -----------------------
 src/cairoint.h          |    6 ------
 4 files changed, 17 insertions(+), 44 deletions(-)

commit 2d22d698d32575fd883d2be072c041709254c86d
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Feb 14 11:50:26 2008 -0800

    Make _cairo_slope_compare return a non-zero result for slopes that differ by pi
    
    This was an initial attempt to fix the infinite loop bug
    described here:
    
    	Infinite loop when scaling very small values using 24.8
    	http://bugs.freedesktop.org/show_bug.cgi?id=14280
    
    This doesn't actually fix that bug, but having a more robust
    comparison function can only be a good thing.

 src/cairo-slope.c |   30 ++++++++++++++++++++++++++++--
 1 files changed, 28 insertions(+), 2 deletions(-)

commit 9292c0a1b509ecea8415cdbc21415d9ce7615e04
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Feb 20 10:54:14 2008 +0000

    [gitignore] Ignore cairo-no-features.h
    
    Add the autogenerated header to the ignore list.

 src/.gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit e6a8768a0446b9e537bb77bd309ad5719fe74451
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Feb 20 10:53:15 2008 +0000

    [cairo-scaled-font-subsets] Fix memleak on failure to reserve .notdef glyph.
    
    Remember to destroy the sub_font if we fail to reserve the .notdef glyph
    during construction.
    
    Whilst in the vicinity, adjust the function prototype to remove
    duplicated calls to _cairo_error().

 src/cairo-scaled-font-subsets.c |   57 ++++++++++++++++++++------------------
 1 files changed, 30 insertions(+), 27 deletions(-)

commit e208f31236af6b2012d725696485f96fe4acd863
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 19 15:14:37 2008 +0000

    [cairo-surface] Check surface status on internal paths as well.
    
    Return any error status on the surface to the caller.

 src/cairo-surface.c |   50 +++++++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 49 insertions(+), 1 deletions(-)

commit 1d59daecfe1078ba2ad56f80b35c934312dc4f6b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 19 15:13:53 2008 +0000

    [cairo-pdf-operators] Cleanup word_wrap_stream
    
    Ensure that the stream is destroyed on the error paths.

 src/cairo-pdf-operators.c |   10 +++++++---
 1 files changed, 7 insertions(+), 3 deletions(-)

commit aac5650beebb40068767a7d3ffedf634a3da5002
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 19 14:39:13 2008 +0000

    [pdf-operators] Missing private markup.
    
    Fixup make check by adding the required cairo_private markup.

 src/cairo-pdf-operators-private.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit eaaa1415a9becb8f11ddde4094fcf0aec6d1458f
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Feb 20 21:05:23 2008 +1030

    Change PDF newline characters from \r\n to \n
    
    The PDF backend has always used "\r\n" for the newline character.
    There was no particular reason for this choice. PDF allows "\n", "\r",
    or "\r\n" as the end of line marker.
    
    Since the PS backend (which uses "\n") has started sharing
    cairo-pdf-operators.c with the PDF backend, the PS output has been
    getting mixed "\n" and "\r\n" newlines.
    
    Fix this by changing the PDF backend to use "\n".

 src/cairo-pdf-operators.c |   40 +-
 src/cairo-pdf-surface.c   |  878 ++++++++++++++++++++++----------------------
 2 files changed, 459 insertions(+), 459 deletions(-)

commit 24c319fbae9ea4a43bf4e1fdf94d069b4ad78904
Author: Bertram Felgenhauer <int-e@gmx.de>
Date:   Sat Feb 16 09:22:01 2008 +0100

    [perf] add tests for magnified and minified image sources.
    With this change, cairo's performance testsuite will catch performance
    regressions in pixman's fbFetchTransformed path.

 perf/cairo-perf-cover.c |   34 ++++++++++++++++++++++++++++++++++
 1 files changed, 34 insertions(+), 0 deletions(-)

commit 21049a9a5eb7ba0873771428bde0db8f8b1ece08
Author: Antoine Azar <cairo@antoineazar.com>
Date:   Mon Feb 18 23:57:38 2008 -0500

    Added cairo-misc.c to makefile

 src/Makefile.win32 |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit f2d21e73827d81da559ee4cd046bfb02dfd66a83
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Feb 18 17:18:51 2008 -0800

    [stroker] fix _compute_normalized_device_slope to return correct sign
    
    The optimization to avoid sqrt() for horizontal/vertical lines in
    _compute_normalized_device_slope was causing us to return a negative
    magnitude with a positive slope for left-to-right and bottom-to-top
    lines, instead of always returning a positive magnitude and a slope
    with an appropriate sign.

 src/cairo-path-stroke.c |   18 ++++++++++++++----
 1 files changed, 14 insertions(+), 4 deletions(-)

commit 8fb624dbf2c660fbbf6d6964f7876656e1b62e41
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Feb 17 19:49:39 2008 +1030

    Use correct prefix for _cairo_pdf_operators_stroke
    
    s/operator/operators/

 src/cairo-pdf-operators-private.h |   10 +++++-----
 src/cairo-pdf-operators.c         |   10 +++++-----
 src/cairo-pdf-surface.c           |   20 ++++++++++----------
 src/cairo-ps-surface.c            |   10 +++++-----
 4 files changed, 25 insertions(+), 25 deletions(-)

commit d2a1576941e46fb71eda8b27bd3df4de691df6ff
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Feb 17 19:48:01 2008 +1030

    PDF/PS: Fix mismatched save restore when using fill-stroke

 src/cairo-pdf-surface.c |   11 +++++++++--
 1 files changed, 9 insertions(+), 2 deletions(-)

commit 3a05b5d2d5989386e1500ffcf8738ca89ef8457d
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Feb 17 19:45:45 2008 +1030

    PDF/PS: No need to use save/restore for solid colors

 src/cairo-pdf-surface-private.h |    1 +
 src/cairo-pdf-surface.c         |    7 +++++--
 2 files changed, 6 insertions(+), 2 deletions(-)

commit c7204adcf3ff6614aae75c4c1c5ef0fc5269d834
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Feb 17 02:32:00 2008 -0500

    [cairo-misc.c] Add misc functions to this file
    
    Anything functions that doesn't group with other functions enough to
    justify its own file should go here now.

 src/Makefile.am    |    1 +
 src/cairo-gstate.c |   79 ----------
 src/cairo-misc.c   |  407 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/cairo.c        |  287 ------------------------------------
 4 files changed, 408 insertions(+), 366 deletions(-)

commit a1360322c4e2867d7060a7f65bf0d96d9af36174
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Feb 17 17:16:53 2008 +1030

    PS: Remove unused code

 src/cairo-ps-surface.c |    9 ---------
 1 files changed, 0 insertions(+), 9 deletions(-)

commit 2dfe32a0ff9272ade481796f0f25fd83863c7600
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Feb 17 16:45:15 2008 +1030

    Implement PDF fill-stroke

 src/cairo-meta-surface.c          |   15 ++++++-
 src/cairo-pdf-operators-private.h |    8 +++
 src/cairo-pdf-operators.c         |   51 ++++++++++++++++++++-
 src/cairo-pdf-surface.c           |   92 +++++++++++++++++++++++++++++++++++++
 4 files changed, 164 insertions(+), 2 deletions(-)

commit 1e7fa4b9f5c478bcb7c49667192f239c2bd1d03e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Feb 16 22:47:31 2008 -0500

    [cairo-pdf-operators] Pass matrix by reference, not by value

 src/cairo-pdf-operators-private.h |    4 ++--
 src/cairo-pdf-operators.c         |    8 ++++----
 src/cairo-pdf-surface.c           |   12 ++++++------
 src/cairo-ps-surface.c            |    9 +++++----
 4 files changed, 17 insertions(+), 16 deletions(-)

commit 357f2334f0bd518815c80905e451b6ac1ba43553
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Feb 16 20:37:16 2008 +1030

    PDF: Allow word_wrap_stream to split hex strings

 src/cairo-pdf-operators.c |   50 +++++++++++++++++++++++++++++++++++++++-----
 1 files changed, 44 insertions(+), 6 deletions(-)

commit 204a27aadb2390b62bd75857d8736b34870f79b1
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Feb 16 20:35:42 2008 +1030

    PDF: Word wrap _cairo_pdf_operators_show_glyphs output

 src/cairo-pdf-operators.c |   38 ++++++++++++++++++++++++--------------
 1 files changed, 24 insertions(+), 14 deletions(-)

commit bcb0395288128da7dd8f24c503b8badacc806720
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Feb 15 15:56:29 2008 -0500

    [docs] Fix typo

 src/cairo-font-options.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 536e1963b774038d9afc7fbf63303e118b0250a2
Author: Shailendra Jain <shailen.n.jain@gmail.com>
Date:   Fri Feb 15 13:21:29 2008 +0000

    Compile fix for AIX.
    
    Minor correction for a build failure on AIX:
    "mozilla/gfx/cairo/cairo/src/cairo-gstate.c", line 45.43: 1506-294 (S)
    Syntax error in expression on #if directive.
    
    (Fixes https://bugzilla.mozilla.org/show_bug.cgi?id=415867.)

 src/cairo-gstate.c    |    2 +-
 src/cairo-matrix.c    |    2 +-
 test/invalid-matrix.c |    2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 31a67c5f22eb2cbb94878d47be19b32ff319c5b3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 15 13:16:58 2008 +0000

    [pdf] Minor make check fix.
    
    Add a missing '%' in the documentation.

 src/cairo-pdf-operators.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 9e9fda047879f0336c2627483c78499af8ef5458
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 12 11:16:37 2008 +0000

    [test/bitmap-font] Destroy the font options after use.
    
    Fix the leak of the font options.

 test/bitmap-font.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 92970ec83687435e75e60110cb7434670515ae57
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Feb 11 17:00:30 2008 +0000

    [test/invalid-matrix] Test detection of infinities.
    
    Feed infinities into the API and check that we correctly return
    INVALID_MATRIX.

 test/invalid-matrix.c |  123 ++++++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 122 insertions(+), 1 deletions(-)

commit 012f68e043d3594fa6cb5235eafb1ca1bfe2d099
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Feb 11 16:48:24 2008 +0000

    [test/invalid-matrix] Check scale(0,0)
    
    Test that INVALID_MATRIX is returned if the user calls cairo_scale(0,0)
    or a variant thereof.

 test/invalid-matrix.c |   16 ++++++++++++++++
 1 files changed, 16 insertions(+), 0 deletions(-)

commit eb7488e1e67b872d29d1bd459bb7994ad3789576
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Feb 11 16:45:18 2008 +0000

    [test/invalid-matrix] Promote incorrect status warning to an error.
    
    As the last warning for an incorrect status has been resolved, throw an
    error if we regress and no longer report an INVALID_MATRIX under testing.

 test/invalid-matrix.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit fc732c3aaa53d8abcea46ad28da696ad08d09b63
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Feb 11 16:17:34 2008 +0000

    [cairo-scaled-font] Create error objects on demand.
    
    In order to correctly report the error back to the user during the
    creation of a scaled font, we need to support a nil object per error.
    Instead of statically allocating all possible errors, lazily allocate
    the nil object the first time we need to report a particular error.
    
    This fixes the misreporting of an INVALID_MATRIX or NULL_POINTER that
    are common user errors during the construction of a scaled font.

 src/cairo-debug.c              |    2 +
 src/cairo-mutex-list-private.h |    1 +
 src/cairo-scaled-font.c        |   65 +++++++++++++++++++++++++++++++++++----
 src/cairo.c                    |   10 +-----
 src/cairo.h                    |    2 +-
 src/cairoint.h                 |   15 ++++++++-
 test/font-options.c            |    2 +-
 7 files changed, 79 insertions(+), 18 deletions(-)

commit 38fcc015a5106e5007035c22355da863b3bc9def
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Feb 11 16:14:40 2008 +0000

    [cairo-ft-font] Propagate error detected during determination of scale factors.
    
    Ensure that if an invalid matrix is detected when creating the toy font,
    the error is propagated to the caller.

 src/cairo-ft-font.c |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit ad265cc9f26a20f2336747d69b28bc6ca0d91f4b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Feb 11 14:58:21 2008 +0000

    [cairo-font-options] Disallow use of NULL font-options.
    
    Partial revert of commit 0086db893cba90dc73824d77c661d2965ad48112.
    
    This is a follow to the earlier commit that allowed creation of scaled
    fonts using a NULL font options (by interpreting the NULL as meaning
    use the default options) to reflect the comments made by Behdad
    (http://lists.cairographics.org/archives/cairo/2008-January/012714.html).
    
    The intent is that the public font options getter/setter API has similar
    defensive behaviour to that of the core objects - i.e. do not overwrite
    the nil object and if the object is in error then return the default
    value. For the indirect use of a NULL/nil font options (e.g. creation of
    scaled fonts), then an error should be returned rather than crashing.

 src/cairo-font-face.c    |    8 ++----
 src/cairo-font-options.c |   36 ++++++++++++-------------------
 src/cairo-ft-font.c      |    8 ++----
 src/cairo-scaled-font.c  |   13 +++--------
 src/cairo-win32-font.c   |    4 +-
 src/cairo.c              |   10 +++-----
 test/font-options.c      |   51 ++++++++++++++++++++++++++-------------------
 7 files changed, 59 insertions(+), 71 deletions(-)

commit 790eaef71cbd30e1994c9499ab553f2ef5e5d620
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Feb 11 10:31:33 2008 +0000

    [boilerplage] Add getopts to the boilerplate library.
    
    Remember to compile the _cairo_getopts() function into the boilerplate
    convenience library for cairo-perf.

 boilerplate/Makefile.am |   14 ++++++++------
 1 files changed, 8 insertions(+), 6 deletions(-)

commit fe93038ef343c769b38b9e7f15c1be415e6bcdd9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 8 08:36:34 2008 +0000

    [test/font-options] Check for HAVE_FCFINI
    
    Only pull in the fontconfig headers if we actually use FcFini().

 test/font-options.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 2eb03b8cf2b2c0520d018127b377071a8a63799d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 7 17:07:43 2008 +0000

    [cairo-ps-surface] Tidy return from _analyze_image_transparency().
    
    _analyze_image_transparency() only returned SUCCESS, so use the return
    parameter to pass back the transparency type instead of using an out
    parameter.

 src/cairo-ps-surface.c |   37 +++++++++++++------------------------
 1 files changed, 13 insertions(+), 24 deletions(-)

commit bc83e028b8d12223164263a9f9cfc822ed40f8c8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 7 11:47:11 2008 +0000

    [cairo-output-stream] Add format(printf) markup.
    
    Add CAIRO_PRINTF_FORMAT attribute to the printf-esque output stream
    functions, and fixup the one warning caught by the compiler.

 src/cairo-output-stream-private.h |    6 ++++--
 src/cairo-pdf-surface.c           |    4 ++--
 2 files changed, 6 insertions(+), 4 deletions(-)

commit 4430157841d4b55061c6af58576cfe6ec66fcfe5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Feb 6 11:37:13 2008 +0000

    [test] Summarise the tests failures per backend.
    
    After the summary, show the total number of failures per backend.

 test/Makefile.am |   15 +++++++++++++++
 1 files changed, 15 insertions(+), 0 deletions(-)

commit af88d4d9ae66152ac885531bfc73a47eb78d1d03
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 30 15:20:50 2008 +0000

    [test/a8-mask] Fix memleak.
    
    Destroy the auxiallary surfaces and contexts.

 test/a8-mask.c |   14 ++++++++------
 1 files changed, 8 insertions(+), 6 deletions(-)

commit a3f071aee707e66e637587f1e9ae327b21243a60
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 30 15:19:49 2008 +0000

    [cairo-ft-font] Tidy usage of cairo_error().
    
    Remove a redundant use of cairo_error(NO_MEMORY).

 src/cairo-ft-font.c |    7 +++----
 1 files changed, 3 insertions(+), 4 deletions(-)

commit a4c960a93cf5f37819b933d19f92e17e6c047c66
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 18 17:14:17 2008 +0000

    [test] Add tests using each backend as a source.
    
    Inspired by bug 7362 (painting a glitz surface onto an xlib surface
    crashes cairo) and the lack of coverage for
    _cairo_paginated_surface_acquire_source_image(), these tests attempt
    to use each backend as a source surface for all the other backends.
    For example, this checks that one can construct a PS file ready for
    printing and then copy that surface to an image/xlib for previewing.

 test/.gitignore                   |    6 +
 test/Makefile.am                  |   19 +++-
 test/glitz-surface-source-ref.png |  Bin 0 -> 268 bytes
 test/glitz-surface-source.c       |  196 +++++++++++++++++++++++++++++++++++++
 test/image-surface-source-ref.png |  Bin 0 -> 268 bytes
 test/image-surface-source.c       |   35 +++++++
 test/pdf-surface-source-ref.png   |  Bin 0 -> 268 bytes
 test/pdf-surface-source.c         |   41 ++++++++
 test/ps-surface-source-ref.png    |  Bin 0 -> 268 bytes
 test/ps-surface-source.c          |   41 ++++++++
 test/surface-source.c             |   93 +++++++++++++++++
 test/svg-surface-source-ref.png   |  Bin 0 -> 268 bytes
 test/svg-surface-source.c         |   41 ++++++++
 test/xlib-surface-source-ref.png  |  Bin 0 -> 268 bytes
 test/xlib-surface-source.c        |   76 ++++++++++++++
 15 files changed, 544 insertions(+), 4 deletions(-)

commit f59f22eecba7cbf2151e01533ba936ca94d25056
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 29 09:29:10 2008 +0000

    [check] Only build documents during make check if we have GTK_DOC
    
    Check that gtk-doc has been enabled before running attempting to build
    the docs during make check.

 doc/public/Makefile.am |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit e5f0253b67801ad79eb881e189b9835aea0fcf57
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 29 09:07:14 2008 +0000

    [cairo-surface] Hide the compiler warnings.
    
    Assign the return value from _cairo_surface_set_error() to hide the
    compiler warnings.

 src/cairo-surface.c |   18 ++++++++++++------
 1 files changed, 12 insertions(+), 6 deletions(-)

commit 53c1ed25abb7e8e22b24aa64fcd29d210c6b7903
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 29 08:52:28 2008 +0000

    [test/a1-sample-image] Fix the memleak.
    
    Destroy the surface after use.

 test/a1-image-sample.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 5efc88e9108df2331772cc22dc52ef0a9cc93869
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 29 08:50:25 2008 +0000

    [xmalloc] Hide valgrind warning.
    
    Allocate the string to the next integer boundary to hide a valgrind
    warning.

 boilerplate/xmalloc.c |   27 +++++++++++++++++++--------
 1 files changed, 19 insertions(+), 8 deletions(-)

commit 1faf208093a8cce77d2f7d6b248bc1eb1bd19a8a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 18 14:41:03 2008 +0000

    [cairo-png] Improve error return for invalid parameters.
    
    Only translate an UNSUPPORTED error into a SURFACE_TYPE_MISMATCH, all
    others can be returned to the user unadulterated.
    
    PNG doesn't support width==0 or height==0 and generates an error
    whilst writing - which without further information is assumed to be
    a NO_MEMORY error. So check the image size at the start and return a
    WRITE_ERROR for a zero sized image.

 src/cairo-png.c |   24 +++++++++++++-----------
 1 files changed, 13 insertions(+), 11 deletions(-)

commit d0cc1d929119d2e05578a60af3b873af1d7f6b13
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 18 14:34:41 2008 +0000

    [cairo-pdf-surface] Minor code tidy.
    
    Remove code duplication.

 src/cairo-pdf-surface.c |    6 ++----
 1 files changed, 2 insertions(+), 4 deletions(-)

commit d7ce0582f1eb86b2af5964820378b75297822dd1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 23:18:46 2008 +0000

    [test/font-options] Check the defaults values.
    
    Exercise the getters by checking that a fresh cairo_font_options_t has
    the default values.

 test/font-options.c |   24 ++++++++++++++++++++----
 1 files changed, 20 insertions(+), 4 deletions(-)

commit f40f24e272cf05a7a727217ae7a35844bf95f5d2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 23:05:53 2008 +0000

    [test/invalid] Test cairo_translate() and friends for NaN safety.
    
    Pass NaNs to cairo_translate() and friends and check that they raise
    an INVALID_MATRIX error.

 test/invalid-matrix.c |   37 +++++++++++++++++++++++++++++++++++++
 1 files changed, 37 insertions(+), 0 deletions(-)

commit 896da0305a09e53518d6d1af6f58bbfaf3ddc89c
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Feb 15 23:54:55 2008 +1030

    Win32-printing: Fix meta surface patterns
    
    Ensure the win32-printing surface has the same fixes for meta surface
    patterns with more than one level of push/pop group that PS/PDF
    received in 060f384310e887f7f431a98e847b8a36fc303a0c

 src/cairo-win32-printing-surface.c |   28 ++++++++++++++++------------
 1 files changed, 16 insertions(+), 12 deletions(-)

commit fbde0fb872a3af78236f4cbc8024d4df245de9c8
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Feb 15 08:17:25 2008 +1030

    Update PS ref images

 test/degenerate-pen-ps-argb32-ref.png       |  Bin 390 -> 374 bytes
 test/extend-reflect-ps-ref.png              |  Bin 0 -> 153322 bytes
 test/extend-reflect-similar-ps-ref.png      |  Bin 0 -> 153322 bytes
 test/glyph-cache-pressure-ps-ref.png        |  Bin 0 -> 1667 bytes
 test/meta-surface-pattern-ps-argb32-ref.png |  Bin 0 -> 3246 bytes
 test/meta-surface-pattern-ps-rgb24-ref.png  |  Bin 0 -> 3823 bytes
 test/random-intersections-ps-argb32-ref.png |  Bin 89416 -> 89733 bytes
 test/random-intersections-ps-rgb24-ref.png  |  Bin 89414 -> 89733 bytes
 test/select-font-face-ps-ref.png            |  Bin 0 -> 1352 bytes
 test/show-text-current-point-ps-ref.png     |  Bin 0 -> 1475 bytes
 test/text-pattern-ps-argb32-ref.png         |  Bin 997 -> 998 bytes
 test/text-rotate-ps-argb32-ref.png          |  Bin 7198 -> 7156 bytes
 test/text-rotate-ps-rgb24-ref.png           |  Bin 7196 -> 7156 bytes
 test/trap-clip-ps-argb32-ref.png            |  Bin 5700 -> 5715 bytes
 test/trap-clip-ps-rgb24-ref.png             |  Bin 5616 -> 5630 bytes
 15 files changed, 0 insertions(+), 0 deletions(-)

commit 40d5082c24819968a5ee5a8f72e3b9cd61cb6105
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Feb 10 14:53:17 2008 +1030

    PS: Use currentfile as the image data source
    
    When the emitted image is not inside a PS procedure we can use the
    currentfile operator as the datasource instead of an array of strings.
    This avoids having to read to entire image data into printer memory
    before the image can be decoded. This improves the performance and
    reduces the chance of running out of memory on printers with limited
    memory.

 src/cairo-ps-surface-private.h |    1 +
 src/cairo-ps-surface.c         |  268 +++++++++++++++++++++++++---------------
 2 files changed, 168 insertions(+), 101 deletions(-)

commit fe334bb476bb1d7496b197b47ac60167e3fb10bd
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Feb 10 14:52:39 2008 +1030

    PS: Use InterleaveType 2 for image and mask
    
    To be able to use the currentfile operator we need to combine the
    image data and mask data into the one data source. InterleaveType 2
    scan line interleaves the image and data.

 src/cairo-ps-surface.c |  129 +++++++++++++++++------------------------------
 1 files changed, 47 insertions(+), 82 deletions(-)

commit b053aaba80e1118ddd7f9c695f6491458f4f5794
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Feb 5 22:46:01 2008 +1030

    PS: Don't use patterns for fill surface extend none
    
    _ps_surface_fill() can also avoid using PS patterns for EXTEND_NONE
    surface patterns. A clip path is set around the fill path then the
    surface is painted.

 src/cairo-ps-surface.c |   38 ++++++++++++++++++++++++++++++--------
 1 files changed, 30 insertions(+), 8 deletions(-)

commit 2324a48c95d88ae0b6a066bfc9b6722f42945efa
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Feb 5 22:35:06 2008 +1030

    Update rotate-image-surface-paint ps ref image

 test/rotate-image-surface-paint-ps-argb32-ref.png |  Bin 276 -> 0 bytes
 test/rotate-image-surface-paint-ps-ref.png        |  Bin 0 -> 275 bytes
 test/rotate-image-surface-paint-ps-rgb24-ref.png  |  Bin 274 -> 0 bytes
 3 files changed, 0 insertions(+), 0 deletions(-)

commit 67374af22fe60c27517dd3bef2c8f3cc2f683b12
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Feb 5 22:31:58 2008 +1030

    PS: Don't use patterns for paint surface extend none
    
    This is the first of four patches intended to fix the bug reported in
    
    http://lists.cairographics.org/archives/cairo/2007-December/012226.html
    
    Previously the PS backend would draw all cairo patterns (except solid
    colors) by emitting a PS pattern. As PS does not support non repeating
    patterns, the PS backend would set a large repeat step to ensure that
    only one copy of the pattern is on the page.
    
    Some printers with limited memory are unable to print large images
    inside a pattern. This was probably because when using patterns the
    printer tries to keep the uncompressed image in memory so it can tile
    the pattern.
    
    When painting surface patterns with the extend mode EXTEND_NONE we do
    not need to use PS patterns. The image or meta surface commands can be
    emitted directly.

 src/cairo-ps-surface-private.h |    2 +
 src/cairo-ps-surface.c         |  234 +++++++++++++++++++++++++++-------------
 2 files changed, 162 insertions(+), 74 deletions(-)

commit 6f9d71c10bf3e38c88378950037d1c81a2413617
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Feb 7 00:28:19 2008 +1030

    Make PS backend use cairo-pdf-operators.c
    
    Changes include:
    - Replace PS prolog with new prolog that emulates PDF operators
    - Remove the [1 0 0 -1 0 height] ctm on each page. PS and PDF surfaces
      now both transform all output to PS/PDF coordinates.
    - Invert images to match PDF images where (0,0) is top left
    - emit_surface_pattern now uses the same transform as PDF
    - move the special dash handling into cairo-pdf-operators.c

 src/cairo-pdf-operators.c      |   82 ++++-
 src/cairo-ps-surface-private.h |    4 +
 src/cairo-ps-surface.c         |  767 +++++++--------------------------------
 3 files changed, 219 insertions(+), 634 deletions(-)

commit 49f755ed2d517adabcdbe9f3834ff18b220dfa7f
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Jan 30 20:42:28 2008 +1100

    PS: Remove the Type 3 outline glyph code
    
    This code is never used because outline glyphs that go through the
    fallback path are always embedded with Type 1 fallback. The only fonts
    that are embedded as Type 3 are bitmap fonts.

 src/cairo-ps-surface.c |   54 ++++-------------------------------------------
 1 files changed, 5 insertions(+), 49 deletions(-)

commit 0c6a362122657d5c9804fa7f45c3404aef052688
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Jan 30 20:38:17 2008 +1100

    pdf-operators: only one path matrix is required
    
    The PDF emit path orginally had two matrix transforms in the path
    struct. One for strokes and one for fill/clip. As only one transform
    at a time is ever used this can be simplified.

 src/cairo-pdf-operators.c |   41 ++++++++---------------------------------
 1 files changed, 8 insertions(+), 33 deletions(-)

commit 5639643efe12bee4252e8cb433d343999e34ec32
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Jan 30 20:16:08 2008 +1100

    Add PS linecap path workarounds to pdf_operators
    
    So that pdf_operators can be used by the PS backend. PDF also needs
    this workaround.

 src/cairo-pdf-operators.c |  123 +++++++++++++++++++++++++++++++-------------
 1 files changed, 86 insertions(+), 37 deletions(-)

commit 0987fdee24d60573249a7fa3acc15e67454bd8b3
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Jan 30 17:22:52 2008 +1100

    Add word_wrap stream to pdf-operators
    
    The word_wrap stream in ps-surface will be removed in a later commit.

 src/cairo-pdf-operators.c |  114 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 114 insertions(+), 0 deletions(-)

commit d05f08bceebe832844ab97a5660af4fa1452697d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Feb 12 15:44:21 2008 -0500

    [configure.in] Make PS/PDF/SVG default enabled
    
    Previously they were default auto-detected.  We really want people
    have to go out of their way to not build them, hence the change.

 configure.in |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit fd3181c7bfdb468557d8c845a016b19c5a897955
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Feb 12 20:22:38 2008 +1030

    PDF: Remove stale comments

 src/cairo-pdf-surface.c |   23 -----------------------
 1 files changed, 0 insertions(+), 23 deletions(-)

commit bdb857a78b41d926b1c239cf988539842a72130b
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Feb 12 20:19:03 2008 +1030

    PDF: Fix uninitialized variable in previous commit

 src/cairo-pdf-surface.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit ba6788fc968477cfae6ed76414dd91b21671d028
Author: Kristian Hgsberg <krh@redhat.com>
Date:   Mon Feb 11 13:44:48 2008 -0500

    [pdf] Use compressed PDF stream instead of compress_dup()
    
    The deflate stream has bounded (constant) memory overhead, whereas
    compress_dup() allocates memory proportional to the uncompressed data.
    
    This replaces compress_dup() usage with a compressed PDF stream for
    emitting images, alpha masks and font subsets, and eliminates the
    compress_dup() function.

 src/cairo-pdf-surface.c |  204 +++++++++++++----------------------------------
 1 files changed, 55 insertions(+), 149 deletions(-)

commit e68584d3a16da7db30bc53a42fa8367c8356bd7e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Feb 8 17:36:59 2008 -0500

    [xlib] Move multiple CAIRO_MUTEX_INITIALIZE into one place they all end up anyway

 src/cairo-xlib-surface.c |    8 ++------
 1 files changed, 2 insertions(+), 6 deletions(-)

commit 0626cac6dba91d0ee20458858275745b7c6a1bfd
Author: Peter Weilbacher <mozilla@weilbacher.org>
Date:   Fri Feb 8 15:09:19 2008 +0100

    [os2] fix typo in comment

 src/cairo-os2-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b4fe25d9afff5d5b0ebaa315ad0e42f36853d5d1
Author: Peter Weilbacher <mozilla@weilbacher.org>
Date:   Fri Feb 8 15:04:49 2008 +0100

    [os2] only call FcInit/Fini when compiled with FT font backend

 src/cairo-os2-surface.c |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit 5e9cdcca00a490f3a36b4229f5353d795ca53a5d
Author: Antoine Azar <cairo@antoineazar.com>
Date:   Thu Feb 7 17:09:41 2008 -0500

    Fixed rounding function call

 test/get-path-extents.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 80e11a85a95c5f2c814eef90a8e6ab60c8835104
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Thu Feb 7 14:36:39 2008 -0800

    [pdf] restore alpha_size back to correct bit size

 src/cairo-pdf-surface.c |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit 95db215cc15d228fcb38bc43d2d918fccec0a9cd
Author: Azar@.(none) <Azar@.(none)>
Date:   Fri Feb 1 18:45:59 2008 -0800

    Some fixes and improvements to the Win32 build

 Makefile.win32                         |   32 ++++-
 boilerplate/Makefile.win32             |   25 +++-
 boilerplate/cairo-boilerplate-getopt.c |  250 ++++++++++++++++++++++++++++++++
 boilerplate/cairo-boilerplate-getopt.h |   63 ++++++++
 boilerplate/cairo-boilerplate.h        |    4 +
 perf/Makefile.win32                    |   54 ++++++-
 perf/cairo-perf.c                      |    7 +-
 perf/cairo-perf.h                      |    2 +-
 perf/world-map.c                       |    2 +
 src/Makefile.win32                     |   36 ++++-
 test/Makefile.win32                    |   25 +++-
 test/font-matrix-translation.c         |    2 +-
 test/pdiff/Makefile.win32              |    3 +
 13 files changed, 470 insertions(+), 35 deletions(-)

commit 7800cfd7de347bb8c54fc36ed886018a2d9ec503
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Feb 6 17:00:29 2008 -0800

    Add several Makefile.win32 files to EXTRA_DIST
    
    Otherwise, these files were being omitted from the tar files.

 Makefile.am             |    2 ++
 boilerplate/Makefile.am |    2 ++
 perf/Makefile.am        |    2 ++
 src/Makefile.am         |    2 ++
 test/Makefile.am        |    2 ++
 5 files changed, 10 insertions(+), 0 deletions(-)

commit ac743e25fa7f8bd720219a5c909fe8bbd20b11b2
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Jan 31 16:13:44 2008 +1100

    cairo_xlib_surface_create_similar: Pass the original drawable to XCreatePixmap
    
    Previously we were passing the root window of the same screen.
    Letting the X server know the actual Drawable for which we're
    trying to be similar allows the X server to be more efficient.

 src/cairo-xlib-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit cb9f9086a1c8ad312cfc5314fc8e352a6046d75e
Merge: c11b036 a9b0e54
Author: Peter Weilbacher <mozilla@weilbacher.org>
Date:   Thu Feb 7 00:07:20 2008 +0100

    Merge branch 'master' of ssh://pmw@git.freedesktop.org/git/cairo

commit c11b036b75f3c71ff57ff4578b388bf5e35b2057
Author: Peter Weilbacher <mozilla@weilbacher.org>
Date:   Thu Feb 7 00:03:33 2008 +0100

    [os2] Improve documentation
    
    Move the API documentation for the OS/2 backend from the .h file to the .c file and use the correct format.

 src/cairo-os2-surface.c |  139 +++++++++++++++++++++++++++++++++++++++++++++++
 src/cairo-os2.h         |  115 ---------------------------------------
 2 files changed, 139 insertions(+), 115 deletions(-)

commit a9b0e54d386811dc750b5e676a0dfd84c32f4625
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Feb 6 13:52:33 2008 -0800

    Avoid buffer overflow in ps/pdf surface
    
    A few places weren't using _cairo_malloc_*; fixed.

 src/cairo-pdf-surface.c |   22 ++++++++++++++++------
 src/cairo-ps-surface.c  |    4 ++--
 2 files changed, 18 insertions(+), 8 deletions(-)

commit bf1f7f70b61b5bb657b2531dab63c541ac8fb59d
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Feb 6 13:01:52 2008 -0800

    Do correct calculation of pen dimensions for stroke optimization

 src/cairo-path-stroke.c  |   33 +++++++++++++--------------------
 src/cairo-rectangle.c    |    2 +-
 src/cairo-stroke-style.c |   17 +++++++++++++++++
 src/cairoint.h           |   11 ++++++++++-
 4 files changed, 41 insertions(+), 22 deletions(-)

commit e104fcab1c8c8d9a7a7962a1dbea0c87867c8f9a
Author: Alp Toker <alp@atoker.com>
Date:   Thu Jan 31 01:33:50 2008 +0000

    Introduce cairo_has_current_point()
    
    cairo_has_current_point() can be used to determine whether a current
    point is defined. We introduce this new symbol with a boolean return
    value to avoid the versioning ambiguity of modifying
    cairo_get_current_point(). This way we also don't have to map what
    should be a routine operation to an error condition as was previously
    proposed.

 doc/public/cairo-sections.txt |    1 +
 src/cairo.c                   |   25 +++++++++++++++++++++++--
 src/cairo.h                   |    3 +++
 3 files changed, 27 insertions(+), 2 deletions(-)

commit 1f0c3d06895ebcbfbae252e6b7298da0b64b37a9
Author: Alp Toker <alp@atoker.com>
Date:   Thu Jan 31 00:54:52 2008 +0000

    Revert "Change cairo_get_current_point() to return cairo_status_t instead of void"
    
    This reverts commit b3eea75d1f7b56c2046b5387a5eb186d8f154184.
    
    Reverted in favour of an alternative approach.
    
    Conflicts:
    
    	src/cairo.c

 src/cairo.c |   22 ++++------------------
 src/cairo.h |    2 +-
 2 files changed, 5 insertions(+), 19 deletions(-)

commit 4c005f7ce385f3f8b161cffac11bb9766f4ef9a9
Author: Azar@.(none) <Azar@.(none)>
Date:   Fri Feb 1 14:29:24 2008 -0800

    replaced round with _cairo_lround. Round doesn't compile on Win32

 test/get-path-extents.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 1d93e148766ded8f3105277f944849f6297974fb
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Feb 5 16:14:51 2008 -0800

    Followup patch to dashed stroke optimization
    
    Make sure that we don't test lines that start or end inside the box,
    since our algorithm will find intersections on the wrong ends on the
    line, and not count them.

 src/cairo-rectangle.c |   10 ++++++++--
 1 files changed, 8 insertions(+), 2 deletions(-)

commit 7b788ce7cace4fd24c568248c22b4ec6c88b563b
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Feb 5 15:04:38 2008 -0800

    Update test ref images that changed with stroking changes

 test/dash-scale-ref.png |  Bin 7908 -> 8035 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit 4471e58c12c20723f1ddac3d0284239be6eb27a8
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Feb 4 03:55:55 2008 -0800

    Optimize dashed strokes, part 2
    
    Pass down the bounding box to the stroker, and avoid doing expensive
    calculations for dash segments that are outside the box.

 src/cairo-path-stroke.c |  122 ++++++++++++++++++++++++++++++++---------------
 src/cairo-rectangle.c   |   94 ++++++++++++++++++++++++++++++++++++
 src/cairo-traps.c       |    8 +++
 src/cairoint.h          |   10 ++++
 4 files changed, 195 insertions(+), 39 deletions(-)

commit afbd82671fe5ebebe5d58bef3d372312be1c5aeb
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Sat Feb 2 23:48:16 2008 -0800

    Optimize stroker by hoisting some calculations out of loops
    
    sqrt and a few other floating-point operations were being done
    repeatedly within a loop; those are now precalculated and passed
    down where needed.

 src/cairo-path-stroke.c |  142 +++++++++++++++++++++++++++++------------------
 1 files changed, 87 insertions(+), 55 deletions(-)

commit bda0baa255801dbc21b63b364eff32de98dd6c7f
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Feb 5 15:04:15 2008 -0800

    Fix text-zero-len on ATSUI to not infinite loop

 src/cairo-atsui-font.c |   11 +++++++++++
 1 files changed, 11 insertions(+), 0 deletions(-)

commit 03256d0f2be15e7ba57bc041f8cdfc1c3e718660
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Feb 5 15:04:11 2008 -0800

    Remove get-xrender-format from list of tests to be run on all platforms

 test/Makefile.am |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 6140776b4e7d5787467606fbe8a961dbee6bd9fb
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Feb 5 00:22:26 2008 +1030

    Update operator-source ps ref images

 test/operator-source-ps-argb32-ref.png |  Bin 4053 -> 4026 bytes
 test/operator-source-ps-rgb24-ref.png  |  Bin 2567 -> 3366 bytes
 2 files changed, 0 insertions(+), 0 deletions(-)

commit dee6e27537a26e93266c0a2d2071ad8d4ed2c9ee
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Feb 5 00:12:48 2008 +1030

    Add dash-curve ps ref image

 test/dash-curve-ps-ref.png |  Bin 0 -> 27206 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit 2b0da0503baba111085a23e5e5e5feb8788d6650
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Feb 5 00:02:17 2008 +1030

    Ensure PS/PDF miter is >= 1.0
    
    The PS Language Reference requires the PS miter to be >= 1.
    
    The PDF Reference does not specify miter limits however acroread fails
    to display pages when the miter is < 1. Older versions of ghostscript
    crash when the PDF miter is < 1.

 src/cairo-pdf-operators.c |    2 +-
 src/cairo-ps-surface.c    |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 381fcf01d71d6c83183f9764507ebbafd783d18a
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Feb 3 20:05:41 2008 +1030

    Update over-around-source ps ref image

 test/over-around-source-ps-argb32-ref.png |  Bin 637 -> 632 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit 9dda017af9bffeda59756cb3b15028ae83ed19ef
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Feb 3 19:53:35 2008 +1030

    Update gradient-alpha ps ref images

 test/gradient-alpha-ps-argb32-ref.png |  Bin 187 -> 179 bytes
 test/gradient-alpha-ps-rgb24-ref.png  |  Bin 184 -> 179 bytes
 2 files changed, 0 insertions(+), 0 deletions(-)

commit 3f943a98f69b90b066217b19c47851ce03e50551
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Feb 3 19:49:23 2008 +1030

    Add linear-gradient-reflect ps ref image

 test/linear-gradient-reflect-ps-ref.png |  Bin 0 -> 315 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit a74e6692341daeff9ab266b3b29fcc8b8e917d88
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Feb 3 19:34:53 2008 +1030

    PS: Implement reflected surface patterns
    
    The image/meta-pattern is written once. A PS pattern twice the size of
    the cairo pattern is created and the surface drawn four times in a
    reflect pattern inside the PS pattern.
    
    This fixes the extend-reflect and extend-reflect-similar PS test
    failures.

 src/cairo-ps-surface.c |   41 +++++++++++++++++++++++++++++++++--------
 1 files changed, 33 insertions(+), 8 deletions(-)

commit 7c5bc5fde819014f62ebb9bac86d4529f056956d
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Feb 3 18:58:02 2008 +1030

    Add operator-clear ps ref image

 test/operator-clear-ps-argb32-ref.png |  Bin 0 -> 1409 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit 06b2d009ba50a2908fd9c93ff3e467f511b233cf
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Feb 3 18:50:14 2008 +1030

    Update clip-operator ps ref image

 test/clip-operator-ps-argb32-ref.png |  Bin 8594 -> 9062 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit 13663d1d500a6c2254097011e66199d6dd81c62d
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Feb 3 17:10:56 2008 +1030

    PS: Implement linear gradient repeat and reflect

 src/cairo-ps-surface.c |  250 +++++++++++++++++++++++++++++++++++++-----------
 1 files changed, 196 insertions(+), 54 deletions(-)

commit 92a2e851df6668f60c63165466d2ee85dd600f47
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Feb 2 23:00:30 2008 +1030

    Update operator-source PS ref images

 test/operator-source-ps-argb32-ref.png |  Bin 3885 -> 4053 bytes
 test/operator-source-ps-rgb24-ref.png  |  Bin 3548 -> 2567 bytes
 2 files changed, 0 insertions(+), 0 deletions(-)

commit 367e50137eb1b2b3952a87c580eed08a79fd211f
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Feb 2 20:59:56 2008 +1030

    PDF: Use correct surface size when emitting patterns
    
    Store the surface size in each pattern and smask group and use this
    size when the pattern/group is emitted. This is required as a pattern
    or group may be used from a meta surface with a different size to the
    PDF surface. However the pattern or group is emitted after the the meta
    surface content has been emitted and the surface size has been
    restored to the the page size.
    
    This fixes the following pdf test failures:
      extend-reflect-similar
      extend-repeat-similar
      mask

 src/cairo-pdf-surface-private.h |    4 +++
 src/cairo-pdf-surface.c         |   53 ++++++++++++++++++++++++++++++++++----
 2 files changed, 51 insertions(+), 6 deletions(-)

commit d08d5c421a45c4e5f30b308823e90a86f1ec2052
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jan 30 05:35:50 2008 -0800

    Increment cairo version to 1.5.9 after the 1.5.8 snapshot

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 4ccb8cb29546432858e778e1b88cada1327f6f45
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jan 30 05:16:26 2008 -0800

    Add some more reference images to REFERENCE_IMAGES

 test/Makefile.am |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit b31a7a904f8413c34970beabce6fecf6e1fdc925
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jan 30 05:13:53 2008 -0800

    Increment cairo version to 1.5.8 and libtool version to 16:0:14

 configure.in |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit ca10920cc9f3a673e2199112541d5a1472423c47
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jan 30 05:07:20 2008 -0800

    Add a1-image-sample and a1-traps-sample reference images to the dist list

 test/Makefile.am |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 2fee01e2d40715defe9143456101533c1f1aafcf
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jan 30 04:54:39 2008 -0800

    check-doc-syntax.sh: Fix for non-srcdir builds (such as make distcheck)

 src/check-doc-syntax.sh |    5 +----
 1 files changed, 1 insertions(+), 4 deletions(-)

commit 78022f3aa16cf8a629aec4595c5a542ca68a78cc
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jan 30 04:54:05 2008 -0800

    Add doc/public test scripts to EXTRA_DIST
    
    This prevents failures of make distcheck

 doc/public/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit d49b1220b2feeca82050de05c9c01012e8420acb
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jan 30 04:52:23 2008 -0800

    Remove extend-pad-similar test case
    
    This seems redundant with the recent testing of all test cases
    against similar surfaces. Plus, it hasn't had a reference image
    anyway which was causing problems with the recent extra checks
    for missing reference images.

 test/Makefile.am          |    3 -
 test/extend-pad-similar.c |  105 ---------------------------------------------
 2 files changed, 0 insertions(+), 108 deletions(-)

commit 7d2fda54f9bf6ae48cf8048b4836dea7f20cccee
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jan 30 04:23:19 2008 -0800

    NEWS: Add notes for the 1.5.8 snapshot

 NEWS |  103 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 103 insertions(+), 0 deletions(-)

commit 3b0adf4f5ac78e3f19b4e19267da2aa1b3c7d57b
Author: Jeff Muizelaar <jeff@infidigm.net>
Date:   Tue Jan 29 09:07:54 2008 -0800

    Use ADD instead of IN for clipping.
    
    ADD is already special-cased by pixman, so using it instead avoids hitting
    the slower general path.

 src/cairo-clip.c |   34 ++++++++++++++++++++++++++++++++--
 1 files changed, 32 insertions(+), 2 deletions(-)

commit fa6aedf2d68941bf8532bf487d5412cfc508e0a9
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Jan 29 09:01:47 2008 -0800

    Fix typo in printf arguments in error message

 test/font-matrix-translation.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e2bb36fe08546e6461fcbd40f5f3f81e5efc7686
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Jan 29 08:41:21 2008 -0800

    wAdd proper error propagation to _cairo_matrix_compute_scale_factors
    
    Before there was just an assert statement here that the
    determinant of the matrix was not infinite. That was bogus
    since a user-provided can end up here. So instead, do the
    correct error propagation of any CAIRO_STATUS_INVALID_MATRIX
    error as necessary.
    
    This eliminates the current failure of the invalid-matrix
    test case.

 src/cairo-atsui-font.c  |   56 ++++++++++++++++++++++++++++++++++------------
 src/cairo-ft-font.c     |   20 +++++++++++-----
 src/cairo-matrix.c      |    7 ++++-
 src/cairo-scaled-font.c |   13 +++++++---
 src/cairo-win32-font.c  |   20 ++++++++++------
 src/cairoint.h          |    4 +-
 6 files changed, 83 insertions(+), 37 deletions(-)

commit 849322235764f570a4a3a1217960d096d16165cf
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Jan 29 05:40:39 2008 -0800

    Initialize return values for cairo_*_extents in case of error
    
    Previously we left the return values alone, which set the
    user up for a nasty trap, (using potentially uninitialized
    values with no indication that there was an error). So now
    we initialize these values to 0.0 if the cairo_t is in error.
    
    The fixed functions include:
    
    	cairo_path_extents
    	cairo_stroke_extents
    	cairo_fill_extents
    	cairo_clip_extents
    	cairo_font_extents

 src/cairo.c |   54 ++++++++++++++++++++++++++++++++++++++++++++++++++----
 1 files changed, 50 insertions(+), 4 deletions(-)

commit 6bdba4b4be5e66ffa61e164f8098b76d848e8f32
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Jan 29 05:27:10 2008 -0800

    Add missing libcairo_font_subset_sources to fix the build

 src/Makefile.am |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 3d82056cee0ba960ebb61877fec8aa646e60e990
Author: Nis Martensen <nis.martensen@web.de>
Date:   Tue Jan 29 05:32:24 2008 -0500

    Fix typos

 src/cairo.h             |    4 ++--
 src/check-doc-syntax.sh |    4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit b28f4f57f21ac4091c9457873abe1465ec3f7fed
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Jan 29 04:32:39 2008 -0500

    [src/Makefile.am] Reorganize
    
    Main goal was to be able to pass list of all cairo sources, enabled or
    not, to check-doc-syntax.sh such that it doesn't check *.h, *.c, *.cpp
    because that can be annoying when bisecting.

 src/Makefile.am         |  352 +++++++++++++++++++++++++---------------------
 src/check-doc-syntax.sh |    5 +-
 2 files changed, 195 insertions(+), 162 deletions(-)

commit 41a57007939a3e206647fda1b6e5a554ca125c5f
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Jan 29 20:27:06 2008 +1100

    Fix undefined macro that was preventing the tests from compiling

 test/pattern-getters.c |   28 ++++++++++++++--------------
 1 files changed, 14 insertions(+), 14 deletions(-)

commit cfce362375963502c4d29089b369d8e5ce2b7dcb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Jan 29 01:27:47 2008 -0500

    [cairo_operator_t] Mark DestAtop unbounded and document boundedness

 src/cairo.h |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

commit f9b90e475ed6009e58e5f11ac713f9ea639a6900
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Jan 29 01:20:03 2008 -0500

    [doc] Fix cairo_operator_t docs to make Carl (and Keith) happy

 src/cairo.h |   17 ++++++++++++-----
 1 files changed, 12 insertions(+), 5 deletions(-)

commit 9ee7a48b33f11a42b0ffd12a9192a328e35233f3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Jan 29 00:50:48 2008 -0500

    [Makefile.am] Minor wording change

 Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 013781137ff4940d0b9e04b656c20af37bbd5333
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Jan 29 00:42:51 2008 -0500

    [cairo-image-surface.c] Cleanup stride checking and improve docs

 src/cairo-image-surface.c |   16 ++++++++--------
 1 files changed, 8 insertions(+), 8 deletions(-)

commit 8e3250b8564a346c61e926a6aa61f18ae3f60c93
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Jan 29 00:36:38 2008 -0500

    [Makefile.am] Remove ROADMAP and TODO from dist files

 Makefile.am |    4 +---
 1 files changed, 1 insertions(+), 3 deletions(-)

commit 81e4cc3bd7d1fec659a19f8b37253aaebe12c99b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Jan 29 00:36:16 2008 -0500

    [cairo_image_surface_create_for_data] Document stride error status

 src/cairo-image-surface.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 6153a3b620641b1fb7b64a050a168482d2a42f2c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Jan 29 00:34:00 2008 -0500

    [doc] Run check-doc-syntax.sh for SGML docs too

 doc/public/Makefile.am         |    4 ++--
 doc/public/check-doc-syntax.sh |   11 +++++++++++
 src/check-doc-syntax.sh        |   33 ++++++++++++++++++++++++---------
 3 files changed, 37 insertions(+), 11 deletions(-)

commit 3f7d301786ce345cc4221f434bda6751e9b97ad1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 23:56:23 2008 -0500

    [src/check-doc-syntax.sh] Skip test if GNU grep is not available

 src/check-doc-syntax.sh |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

commit 247e1011995b0241526262cc36eb34c7e5edd47c
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 28 21:24:56 2008 -0800

    Fix bitmap-font test by using near-equality for double comparison

 test/bitmap-font.c     |   11 ++++++-----
 test/cairo-test.h      |    2 ++
 test/pattern-getters.c |    4 +---
 3 files changed, 9 insertions(+), 8 deletions(-)

commit 468caac068d3d25507d901f069e3e55731a27ae9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 23:30:09 2008 -0500

    [configure.in] Minor change to cairo-features.h comments to make tests pass

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b4c7a0dc6e996e47390ae544f82024afbb7859ed
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 23:27:10 2008 -0500

    [doc] Document CAIRO_HAS_* macros.  We now finally have real 100% coverage.

 doc/public/Makefile.am                  |    2 ++
 doc/public/cairo-sections.txt           |    9 +++++++++
 doc/public/tmpl/cairo-ft.sgml           |    8 ++++++++
 doc/public/tmpl/cairo-pdf.sgml          |    8 ++++++++
 doc/public/tmpl/cairo-png.sgml          |    9 +++++++++
 doc/public/tmpl/cairo-ps.sgml           |    8 ++++++++
 doc/public/tmpl/cairo-svg.sgml          |    8 ++++++++
 doc/public/tmpl/cairo-win32-fonts.sgml  |    8 ++++++++
 doc/public/tmpl/cairo-win32.sgml        |    8 ++++++++
 doc/public/tmpl/cairo-xlib-xrender.sgml |    8 ++++++++
 doc/public/tmpl/cairo-xlib.sgml         |    8 ++++++++
 11 files changed, 84 insertions(+), 0 deletions(-)

commit 47e0ecbea51cae73a85db277972b80eff0c4b9f6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 23:26:35 2008 -0500

    [configure.in] Generate a cairo-no-features.h with macros for disabled supported backends
    to trick gtk-doc with it.

 configure.in         |   33 ++++++++++++++++++++++++++++++++-
 src/Makefile.am      |    6 +++---
 src/check-headers.sh |    2 +-
 3 files changed, 36 insertions(+), 5 deletions(-)

commit 9d8990b6bdec8e574e37346c363b3a850a246452
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 23:23:00 2008 -0500

    [doc] Remove excess paranthesis

 src/cairo-xlib-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 6e495e94886dfa80f11f675a4b7fa3a767671cc0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 23:10:28 2008 -0500

    [doc] More syntax fixes

 doc/public/tmpl/cairo-version.sgml |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit a00d71968285fc8c49903c1c84835a8be32cfbd3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 23:05:00 2008 -0500

    [configure.in] Add commented-out #undef's for disable stable backends in cairo-features.h

 configure.in |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit 6a089247a180cbc85e222520d2d93914434027be
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 22:45:06 2008 -0500

    [doc] Rename cairo-font.sgml to cairo-font-face.sgml

 doc/public/cairo-docs.xml            |    2 +-
 doc/public/cairo-sections.txt        |    2 +-
 doc/public/tmpl/cairo-font-face.sgml |  112 ++++++++++++++++++++++++++++++++++
 doc/public/tmpl/cairo-font.sgml      |  112 ----------------------------------
 4 files changed, 114 insertions(+), 114 deletions(-)

commit 1d17a7f7811b15c72a4091663e01a448f538bc68
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 22:42:46 2008 -0500

    [doc] Document the surface type of win32-printing surface being different

 doc/public/tmpl/cairo-win32.sgml |   11 ++++++++++-
 1 files changed, 10 insertions(+), 1 deletions(-)

commit a55f65b5d29060a7f8033ceea211252431d20b77
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 22:25:37 2008 -0500

    [doc] Fix typo

 src/cairo-pattern.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 52cc603db1a805a0b3a8d7eba3171cd2785f10a7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 22:10:20 2008 -0500

    [doc] Stricter syntax check for type names, update test

 src/cairo-array.c                       |    2 +-
 src/cairo-cache-private.h               |    2 +-
 src/cairo-font-face.c                   |    4 ++--
 src/cairo-ft-font.c                     |    4 ++--
 src/cairo-image-surface.c               |    2 +-
 src/cairo-paginated-private.h           |    8 ++++----
 src/cairo-ps-surface.c                  |    2 +-
 src/cairo-ps.h                          |    2 +-
 src/cairo-region-private.h              |    2 +-
 src/cairo-scaled-font-subsets-private.h |   16 ++++++++--------
 src/cairo-scaled-font.c                 |    2 +-
 src/cairo-svg.h                         |    2 +-
 src/cairo-types-private.h               |    2 +-
 src/cairo-win32-font.c                  |    2 +-
 src/cairo.c                             |    2 +-
 src/cairo.h                             |   24 ++++++++++++------------
 src/cairoint.h                          |    2 +-
 src/check-doc-syntax.sh                 |    9 +++++----
 18 files changed, 45 insertions(+), 44 deletions(-)

commit b790c5a6bcdd890c16d21753407188ed200ce445
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 21:53:44 2008 -0500

    [doc] Replace 'NOTE' by 'Note' and add it to test

 src/cairo-bentley-ottmann.c       |    2 +-
 src/cairo-cache.c                 |    4 ++--
 src/cairo-ft-font.c               |    4 ++--
 src/cairo-lzw.c                   |    4 ++--
 src/cairo-output-stream-private.h |    2 +-
 src/cairo-paginated-private.h     |    4 ++--
 src/cairo-path.c                  |    2 +-
 src/cairo-pen.c                   |    4 ++--
 src/cairo-scaled-font.c           |    4 ++--
 src/cairo-slope.c                 |    2 +-
 src/cairo-surface.c               |    4 ++--
 src/cairo-win32-surface.c         |    4 ++--
 src/cairo-xcb-surface.c           |    4 ++--
 src/cairo-xlib-surface.c          |    4 ++--
 src/cairo.c                       |    4 ++--
 src/check-doc-syntax.sh           |    7 +++++++
 16 files changed, 33 insertions(+), 26 deletions(-)

commit f0633f4449c39a8f78c582790fb5dc85899b5d82
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 21:49:57 2008 -0500

    [doc] Make sure all function names in docs are followed by ()

 src/cairo-array.c                       |    2 +-
 src/cairo-base85-stream.c               |    3 +--
 src/cairo-beos-surface.cpp              |    2 +-
 src/cairo-cache-private.h               |    4 ++--
 src/cairo-debug.c                       |    4 ++--
 src/cairo-deflate-stream.c              |    3 +--
 src/cairo-ft-font.c                     |    4 ++--
 src/cairo-image-surface.c               |    4 ++--
 src/cairo-output-stream-private.h       |    3 +--
 src/cairo-output-stream.c               |    3 +--
 src/cairo-paginated-private.h           |    2 +-
 src/cairo-path-fixed-private.h          |    2 +-
 src/cairo-path.c                        |    6 +++---
 src/cairo-pdf-surface.c                 |    4 ++--
 src/cairo-ps-surface.c                  |    6 +++---
 src/cairo-quartz-surface.c              |    2 +-
 src/cairo-scaled-font-subsets-private.h |    2 +-
 src/cairo-scaled-font.c                 |    8 ++++----
 src/cairo-surface.c                     |    6 +++---
 src/cairo-svg-surface.c                 |    4 ++--
 src/cairo-traps.c                       |    2 +-
 src/cairo-types-private.h               |    4 ++--
 src/cairo-unicode.c                     |    3 +--
 src/cairo.c                             |   30 ++++++++++++++----------------
 src/cairo.h                             |   22 +++++++++++-----------
 src/cairoint.h                          |    8 ++++----
 26 files changed, 68 insertions(+), 75 deletions(-)

commit 9ba8f6b1b0a4fbf2407e0dbd767f043c6920344c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 21:49:26 2008 -0500

    [src/check-doc-syntax.sh] Check for various doc syntax consistency rules

 src/Makefile.am         |    2 +-
 src/check-doc-syntax.sh |   36 ++++++++++++++++++++++++++++++++++++
 2 files changed, 37 insertions(+), 1 deletions(-)

commit e15fcdd74734e922183afd4732ec4ba090f313c9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 21:48:23 2008 -0500

    [doc] Improve syntax

 doc/public/tmpl/cairo-font.sgml         |    7 +++++--
 doc/public/tmpl/cairo-matrix.sgml       |    2 +-
 doc/public/tmpl/cairo-pattern.sgml      |   12 +++++++++---
 doc/public/tmpl/cairo-status.sgml       |    5 +++--
 doc/public/tmpl/cairo-surface.sgml      |    8 +++++++-
 doc/public/tmpl/cairo-xcb-xrender.sgml  |    3 ++-
 doc/public/tmpl/cairo-xcb.sgml          |    3 ++-
 doc/public/tmpl/cairo-xlib-xrender.sgml |    3 ++-
 doc/public/tmpl/cairo-xlib.sgml         |    3 ++-
 9 files changed, 33 insertions(+), 13 deletions(-)

commit 587508528c4a318649ecb347b96fbc89a40175ea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 21:12:16 2008 -0500

    [doc] Minor improvement

 doc/public/tmpl/cairo-beos.sgml |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit fd5dfedbb75593539eeda92013042ce5423a65c4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 21:02:44 2008 -0500

    [doc/public/check-doc-coverage.sh] Test that doc coverage is 100%
    
    Yay!

 doc/public/Makefile.am           |    2 +
 doc/public/check-doc-coverage.sh |   43 ++++++++++++++++++++++++++++++++++++++
 2 files changed, 45 insertions(+), 0 deletions(-)

commit c133ee5acc7c97fcd43d61f5aad160ca96c47941
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 21:00:21 2008 -0500

    [doc] Improve docs for new API

 src/cairo-image-surface.c |    8 ++++----
 src/cairo-xlib-surface.c  |   20 +++++++++++++-------
 2 files changed, 17 insertions(+), 11 deletions(-)

commit 0d898f2badf41d3b0ae5ee88943c44cf49690f5d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 20:49:44 2008 -0500

    [doc] Make sure all type names in docs are prefixed by #

 src/cairo-array.c                       |    2 +-
 src/cairo-bentley-ottmann.c             |    4 ++--
 src/cairo-cache-private.h               |    4 ++--
 src/cairo-cache.c                       |    2 +-
 src/cairo-fixed-type-private.h          |    2 +-
 src/cairo-font-face.c                   |   12 ++++++------
 src/cairo-font-options.c                |    2 +-
 src/cairo-ft-font.c                     |   12 ++++++------
 src/cairo-gstate.c                      |    8 ++++----
 src/cairo-hash.c                        |    2 +-
 src/cairo-image-surface.c               |    4 ++--
 src/cairo-matrix.c                      |   10 +++++-----
 src/cairo-mutex-type-private.h          |    6 +++---
 src/cairo-pattern.c                     |   10 +++++-----
 src/cairo-pdf-surface.c                 |    2 +-
 src/cairo-png.c                         |    2 +-
 src/cairo-ps-surface.c                  |   12 ++++++------
 src/cairo-quartz-surface.c              |    2 +-
 src/cairo-rectangle.c                   |    8 ++++----
 src/cairo-region.c                      |    2 +-
 src/cairo-scaled-font-subsets-private.h |    8 ++++----
 src/cairo-scaled-font.c                 |    8 ++++----
 src/cairo-traps.c                       |    2 +-
 src/cairo-types-private.h               |    2 +-
 src/cairo-win32-surface.c               |    2 +-
 src/cairo-xlib-surface.c                |    4 ++--
 src/cairo.c                             |    4 ++--
 src/cairo.h                             |   16 ++++++++--------
 src/cairoint.h                          |    4 ++--
 29 files changed, 79 insertions(+), 79 deletions(-)

commit 9ecde82d35ead4975ce110bb2012264e3ca9d2e1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 20:48:48 2008 -0500

    [doc] Make sure all macro names in docs are prefixed by %

 src/cairo-array.c                       |    6 ++--
 src/cairo-bentley-ottmann.c             |    8 +++---
 src/cairo-cache.c                       |    6 ++--
 src/cairo-deprecated.h                  |    2 +-
 src/cairo-directfb.h                    |    4 +-
 src/cairo-fixed-type-private.h          |    2 +-
 src/cairo-freelist-private.h            |    4 +-
 src/cairo-ft-font.c                     |    6 ++--
 src/cairo-gstate.c                      |   14 +++++-----
 src/cairo-hash.c                        |   36 +++++++++++++-------------
 src/cairo-image-surface.c               |    4 +-
 src/cairo-lzw.c                         |   14 +++++-----
 src/cairo-meta-surface.c                |    6 ++--
 src/cairo-mutex-private.h               |    4 +-
 src/cairo-mutex-type-private.h          |   24 +++++++++---------
 src/cairo-os2.h                         |    6 ++--
 src/cairo-output-stream-private.h       |    6 ++--
 src/cairo-paginated-private.h           |    4 +-
 src/cairo-path-fill.c                   |    2 +-
 src/cairo-path.c                        |   12 ++++----
 src/cairo-pattern.c                     |    2 +-
 src/cairo-pdf-surface.c                 |    2 +-
 src/cairo-png.c                         |   10 +++---
 src/cairo-ps-surface.c                  |   12 ++++----
 src/cairo-scaled-font-subsets-private.h |   42 +++++++++++++++---------------
 src/cairo-scaled-font.c                 |    4 +-
 src/cairo-surface-fallback.c            |    6 ++--
 src/cairo-surface.c                     |   10 +++---
 src/cairo-svg-surface.c                 |    4 +-
 src/cairo-types-private.h               |    4 +-
 src/cairo-win32-font.c                  |    4 +-
 src/cairo-win32-surface.c               |   10 +++---
 src/cairo-xcb-surface.c                 |    2 +-
 src/cairo-xlib-surface.c                |    4 +-
 src/cairo.c                             |   26 +++++++++---------
 src/cairo.h                             |   10 +++---
 src/cairoint.h                          |    6 ++--
 src/test-fallback-surface.c             |    4 +-
 38 files changed, 166 insertions(+), 166 deletions(-)

commit 099c3c2602b59fbf9424044caa1fec7eb92f71df
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 20:32:35 2008 -0500

    [doc] Another enum nick expansion

 src/cairo-scaled-font.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 72feed5b54e1aa725c3c5238b21946b6250503fe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 20:16:01 2008 -0500

    [doc] Update templates for recently added APIs

 doc/public/cairo-sections.txt           |    2 ++
 doc/public/tmpl/cairo-image.sgml        |   10 ++++++++++
 doc/public/tmpl/cairo-paths.sgml        |    2 +-
 doc/public/tmpl/cairo-status.sgml       |    1 +
 doc/public/tmpl/cairo-xlib-xrender.sgml |    9 +++++++++
 5 files changed, 23 insertions(+), 1 deletions(-)

commit b7d43d235c01480b5a5a34db6fea8a3d86161d91
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 20:14:52 2008 -0500

    [src/check-*] Shut make up

 src/check-def.sh |    4 ++--
 src/check-plt.sh |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit dd7ce762946ec03fc115310c7e295b3327d7e805
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 19:54:27 2008 -0500

    [doc] Expand a couple nicks to full enum names

 src/cairo.h |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit c624ff46541b311c226ad7a026db3495b59dee41
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 19:45:10 2008 -0500

    [cairo_operator_t] Improve docs

 src/cairo.h |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit f1271babcd4df1140019b258ca0af0d7da0d1328
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 19:37:46 2008 -0500

    [doc] Add Long_Description and some See_Also for all chapters

 doc/public/tmpl/cairo-atsui.sgml        |    6 +++-
 doc/public/tmpl/cairo-beos.sgml         |    7 ++++-
 doc/public/tmpl/cairo-font-options.sgml |   11 +++++++--
 doc/public/tmpl/cairo-font.sgml         |   12 +++++++++-
 doc/public/tmpl/cairo-ft.sgml           |    7 ++++-
 doc/public/tmpl/cairo-glitz.sgml        |    7 ++++-
 doc/public/tmpl/cairo-image.sgml        |   15 +++++++------
 doc/public/tmpl/cairo-matrix.sgml       |    5 ++-
 doc/public/tmpl/cairo-paths.sgml        |    4 ++-
 doc/public/tmpl/cairo-pattern.sgml      |   13 ++++++++---
 doc/public/tmpl/cairo-pdf.sgml          |    7 ++++-
 doc/public/tmpl/cairo-png.sgml          |    7 ++++-
 doc/public/tmpl/cairo-ps.sgml           |    7 ++++-
 doc/public/tmpl/cairo-quartz.sgml       |    7 ++++-
 doc/public/tmpl/cairo-scaled-font.sgml  |   13 ++++++++---
 doc/public/tmpl/cairo-status.sgml       |   17 ++++++++++++++-
 doc/public/tmpl/cairo-surface.sgml      |    8 +++++-
 doc/public/tmpl/cairo-svg.sgml          |    7 ++++-
 doc/public/tmpl/cairo-text.sgml         |   34 ++++++++++++++++++++++++++++--
 doc/public/tmpl/cairo-transforms.sgml   |   10 +++++++-
 doc/public/tmpl/cairo-types.sgml        |    4 +-
 doc/public/tmpl/cairo-win32-fonts.sgml  |    7 ++++-
 doc/public/tmpl/cairo-win32.sgml        |    7 ++++-
 doc/public/tmpl/cairo-xcb-xrender.sgml  |   10 +++++++-
 doc/public/tmpl/cairo-xcb.sgml          |    8 ++++++-
 doc/public/tmpl/cairo-xlib-xrender.sgml |   12 ++++++++--
 doc/public/tmpl/cairo-xlib.sgml         |    8 ++++++-
 doc/public/tmpl/cairo.sgml              |    4 ++-
 28 files changed, 201 insertions(+), 63 deletions(-)

commit 73b184fb9c41f26365c99dbb5f81aa5166632722
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 19:19:27 2008 -0500

    [src] Fix gtk-doc warnings

 src/cairo-scaled-font.c |    2 +-
 src/cairo-surface.c     |    2 +-
 src/cairo.c             |    6 +++---
 3 files changed, 5 insertions(+), 5 deletions(-)

commit 8709b943c6f0025c65081b23ea24ce606150cf49
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 28 16:15:28 2008 -0800

    Fix some documentation typos

 src/cairo.h |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit e48d7ca802acba300aee99def0eb01727fe2f58a
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 28 16:11:39 2008 -0800

    Add example to documentation of cairo_pattern_set_filter
    
    It's helpful to let the reade know about cairo_get_source here.

 src/cairo-pattern.c |   11 +++++++++++
 1 files changed, 11 insertions(+), 0 deletions(-)

commit cd26fa266b51ffd91aa9f2c60dd353c53729291e
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 28 16:10:10 2008 -0800

    Add documentation for cairo_filter_t

 src/cairo.h |   18 ++++++++++++++++++
 1 files changed, 18 insertions(+), 0 deletions(-)

commit 7c00269e00332974c3a2843272f84960a90b9fb7
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Jan 27 12:36:19 2008 -0800

    Add pdf-specific reference images for meta-surface-pattern
    
    This test has been "failing" ever since we had native
    replay of metasurfaces to pdf. But looking at the results,
    they are actually superior to the image-backend reference
    images.

 test/meta-surface-pattern-pdf-ref.png       |  Bin 0 -> 4111 bytes
 test/meta-surface-pattern-pdf-rgb24-ref.png |  Bin 0 -> 4009 bytes
 2 files changed, 0 insertions(+), 0 deletions(-)

commit 9cd198d200e4470d3451581b9e672a87d5d91719
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 28 15:37:22 2008 -0800

    Test the no-Render-extension-available case in get-xrender-format

 test/get-xrender-format.c |   13 ++++++++++++-
 1 files changed, 12 insertions(+), 1 deletions(-)

commit d7fd3bd536465881446686305622d31fdc6fd48f
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Jan 27 12:14:51 2008 -0800

    Add get-xrender-format test to test cairo_xlib_surface_get_xrender_format

 test/.gitignore           |    1 +
 test/Makefile.am          |    5 ++
 test/get-xrender-format.c |  104 +++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 110 insertions(+), 0 deletions(-)

commit cc94dce25085fef936b7cb36cf9fc41569668eba
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 28 15:26:15 2008 -0800

    Return NULL from cairo_xlib_surface_get_xrender_format without an error
    
    The NULL return value will only happen if the X Render extension
    is not available. We've already got that NULL return value
    documented, so it's not an error if the user asks for it. In
    particular, it's definitely not a surface-type mismatch.

 src/cairo-xlib-surface.c |    6 +-----
 1 files changed, 1 insertions(+), 5 deletions(-)

commit 3c018a6e5abe099fa916f45ecf0c8e9dd5771fae
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Jan 27 12:13:13 2008 -0800

    Add new API cairo_xlib_surface_get_render_format

 src/cairo-xlib-surface.c |   27 +++++++++++++++++++++++++++
 src/cairo-xlib-xrender.h |    3 +++
 2 files changed, 30 insertions(+), 0 deletions(-)

commit 88811540722d891b987efa6fa8edcbab7e10feeb
Author: Carl Worth <cworth@cworth.org>
Date:   Sun Jan 27 11:12:14 2008 -0800

    Add missing cairo_private (for _pixman_format_to_masks)

 src/cairoint.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3841cc0932ac77540c306c1c70a6171d7d00cf3e
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 28 15:12:38 2008 -0800

    Clarify the documentation of stride within cairo_image_surface_create_for_data

 src/cairo-image-surface.c |   23 +++++++++++++++--------
 1 files changed, 15 insertions(+), 8 deletions(-)

commit 13a5624277adf7e87f66d674ce8073013b53bece
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 28 14:29:36 2008 -0800

    Rename cairo_image_surface_stride_for_width to cairo_format_stride_for_width
    
    Thanks for Behdad for the suggested name improvement. Also, make
    it more clear that the stride passed to cairo_image_surface_create_for_data
    should come from calling cairo_format_stride_for_width with the
    same width.

 src/cairo-image-surface.c |   21 +++++++++++----------
 src/cairo.h               |    4 ++--
 test/a8-mask.c            |   11 ++++++-----
 3 files changed, 19 insertions(+), 17 deletions(-)

commit dc67de3d8b6154b74a243cd7b63e45f343520256
Author: Carl Worth <cworth@cworth.org>
Date:   Sat Jan 26 23:12:14 2008 -0800

    Add cairo_image_surface_stride_for_width
    
    Document this function as a required call to get the correct
    stride value before calling cairo_image_surface_create_for_data.
    This means that previously-failing calls with non-multiple-of-4
    stride values are now documented as errors. Also, we now have
    the possibility of moving to more stringent alignment constraints,
    (one can imagine doing 64-bit or 128-bit boundaries for example).

 src/cairo-image-surface.c |   60 +++++++++++++++++----
 src/cairo-surface.c       |    3 +
 src/cairo.c               |    4 +-
 src/cairo.h               |    8 +++-
 test/Makefile.am          |    4 --
 test/a8-mask.c            |  132 +++++++++++++++++++++++++++++++++++++++------
 6 files changed, 179 insertions(+), 32 deletions(-)

commit b151cb0709364bed03e4918b79f26ef3243948ca
Author: Carl Worth <cworth@cworth.org>
Date:   Sat Jan 26 16:42:26 2008 -0800

    Rename cairo_format_width to cairo_format_bits_per_pixel and correct its logic

 src/cairo-image-surface.c |    6 +++---
 src/cairo-scaled-font.c   |    3 ++-
 src/cairoint.h            |    4 ++--
 3 files changed, 7 insertions(+), 6 deletions(-)

commit 538ace5b51c968a81ea1d4c8d7538f0a227661c6
Author: Nis Martensen <nis.martensen@web.de>
Date:   Sat Jan 26 19:11:26 2008 +0100

    re-indent xml after removal of structuring level

 doc/public/cairo-docs.xml |   76 ++++++++++++++++++++++----------------------
 1 files changed, 38 insertions(+), 38 deletions(-)

commit 642e1af892353d55edd6ebe71720fb541c9deb22
Author: Nis Martensen <nis.martensen@web.de>
Date:   Sat Jan 26 19:05:16 2008 +0100

    remove empty tutorial stub and one level of structuring

 doc/public/cairo-docs.xml |    6 ------
 1 files changed, 0 insertions(+), 6 deletions(-)

commit be93e61d70f4e32069448b79cca7eacab6035c6c
Author: Nis Martensen <nis.martensen@web.de>
Date:   Sat Jan 26 18:44:32 2008 +0100

    Add index of new symbols in 1.6

 doc/public/cairo-docs.xml |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 0874834ec4606c5ff960588077d5310927d560ba
Author: Nis Martensen <nis.martensen@web.de>
Date:   Sat Jan 26 16:59:21 2008 +0100

    Describe cairo_operator_t, add link to operators/ wiki page

 src/cairo.h |   28 ++++++++++++++++++++++++++++
 1 files changed, 28 insertions(+), 0 deletions(-)

commit b18bc660c6d5d5018b4cfaf0eaf0278669cac1ac
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 28 02:33:58 2008 -0500

    [test/font-matrix-translation] Fix function signature

 test/font-matrix-translation.c |   13 ++++++++++---
 1 files changed, 10 insertions(+), 3 deletions(-)

commit 936edecb35b94213997fdb172f0256c658f416aa
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Sun Jan 27 16:52:39 2008 -0800

    [quartz] only use DrawTiledImage if transformed image is integer aligned
    
    This Quartz API seems to only tile at integer coordinates; if the source image is
    scaled to anything less than integer-aligned, seams appear between tiles.  Detect
    this and fall back to slower but more general CGPattern path.

 src/cairo-quartz-surface.c |  144 +++++++++++++++++++++++--------------------
 1 files changed, 77 insertions(+), 67 deletions(-)

commit 182b02240192c03b1fae5367573962d527f8aad4
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Sat Jan 26 10:57:20 2008 -0800

    [win32] Fix initial clip region test
    
    I misread the docs; GetClipBox's return value doesn't necessarily correspond to
    GetClipRgn's region type.

 src/cairo-win32-surface.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 0e737632905e61f4d76b6b2c4e5908d75a5cddda
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Jan 27 02:19:47 2008 -0500

    [src] Fix make check

 src/cairo-quartz-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit b3eea75d1f7b56c2046b5387a5eb186d8f154184
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Jan 26 13:56:08 2008 -0500

    Change cairo_get_current_point() to return cairo_status_t instead of void
    
    So we can return CAIRO_STATUS_NO_CURRENT_POINT.  Previously it wasn't easy
    to fetch that information.

 src/cairo.c |   22 ++++++++++++++++++----
 src/cairo.h |    2 +-
 2 files changed, 19 insertions(+), 5 deletions(-)

commit 79383841520af3a7de3018befca37be6a037f9ba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Jan 25 19:48:36 2008 -0500

    [doc] Update list of private header files

 doc/public/Headers.mk |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit 58f6aed93d137b77a2550bcace16f8d5573d45ef
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Jan 25 19:47:07 2008 -0500

    [doc] Update for recent API changes

 doc/public/tmpl/cairo-paths.sgml   |    2 ++
 doc/public/tmpl/cairo-status.sgml  |    1 +
 doc/public/tmpl/cairo-surface.sgml |    2 --
 3 files changed, 3 insertions(+), 2 deletions(-)

commit 45e7ba356d308f67f674a20484a55d41fe922d13
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Jan 25 19:46:43 2008 -0500

    [cairo-pdf-operators] Reformat typedef to not confuse gtk-doc

 src/cairo-pdf-operators-private.h |    7 +++----
 1 files changed, 3 insertions(+), 4 deletions(-)

commit 756420a780e870bed6f174ca7f3f14421d1ff7d2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Jan 25 19:38:27 2008 -0500

    [cairo_surface_show/copy_page()] Make them return void, like cairo_show/copy_page() do

 src/cairo-gstate.c            |    6 ++++--
 src/cairo-paginated-surface.c |   12 ++++++++----
 src/cairo-surface.c           |   33 ++++++++++++++++++---------------
 src/cairo-svg-surface.c       |    5 +++--
 src/cairo.h                   |    4 ++--
 5 files changed, 35 insertions(+), 25 deletions(-)

commit c4ec5539ca7380dccf1a2f797e536c7273b5c2b5
Author: Nis Martensen <nis.martensen@web.de>
Date:   Fri Jan 25 19:13:13 2008 -0500

    [cairo-surface] Fix doc typo

 src/cairo-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ab188f2e90b49fc4e07f04dc512f9fb9864efa0b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Jan 25 17:44:26 2008 -0500

    [cairo-ft] Disable embedded bitmaps if hinting style NONE is requested

 src/cairo-ft-font.c |   11 ++++++++---
 1 files changed, 8 insertions(+), 3 deletions(-)

commit 2df9944a8ac48cb43845e56c5483bf77dafda584
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Jan 25 17:12:34 2008 -0500

    [.gitignore] Add check-has-hidden-symbols.i

 src/.gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 3d2144b6af07ca44b6fbf1c96080b7e2b7c0285c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Jan 25 17:06:11 2008 -0500

    [cairo-ft] Fix font metrics computation for bitmap fonts and no metrics-hinting
    
    Preivously we were returning NAN font metrics.  Fixed now.  Makes bitmap-font
    test pass again.

 src/cairo-ft-font.c |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

commit c621d8d7191bfa8c1bca533bf9d53d514d01f529
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Fri Jan 25 15:01:44 2008 -0800

    [ps] Pad image mask lines out to full lines
    
    The PostScript backend was generating image masks with packed mask
    bits, when PS seems to expect each line of the mask to be padded out
    to 8 bytes.
    
    Ref: https://bugzilla.mozilla.org/show_bug.cgi?id=407360

 src/cairo-ps-surface.c |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

commit bae496df11247a1e4aff8b0df3356701f8a11792
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Jan 25 08:03:32 2008 -0500

    [test/bitmap-font] Test under all combinations of hinting, test font metrics too
    
    This is now failing as we compute NAN font metrics for bitmap-only fonts under
    disabled metrics hinting.  A very infamous bug excercised with PangoCairo's PDF
    output.

 test/bitmap-font.c |  102 +++++++++++++++++++++++++++++++++++++++++++++++----
 1 files changed, 94 insertions(+), 8 deletions(-)

commit 20c8531243c2f2ee220bd1f234cdba6fc3d6d4c7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Jan 25 07:14:07 2008 -0500

    [test/text-zero-len] Test text and font extents for font size 0

 test/text-zero-len.c |   52 ++++++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 50 insertions(+), 2 deletions(-)

commit 83bd590760629b61898ed403e273046545f26767
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Jan 25 07:02:25 2008 -0500

    [test] Test that cairo_text_extents() and cairo_scaled_font_text_extents() match
    in results.

 test/font-matrix-translation.c |   31 ++++++++++++++++++++++++++++++-
 1 files changed, 30 insertions(+), 1 deletions(-)

commit 4c432b09557f52fa35be981743272b33baca6232
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Jan 25 04:16:44 2008 -0500

    [cairo-scaled-font] Fix bug in glyphs bounding box computation
    
    In 02970ac8cf27bc9d42cf27848a97019d9dd13b6d Vlad introduced the following
    innocent-looking change:
    
    -    short min_x = INT16_MAX, max_x = INT16_MIN;
    -    short min_y = INT16_MAX, max_y = INT16_MIN;
    +    cairo_point_int_t min = { CAIRO_RECT_INT_MIN, CAIRO_RECT_INT_MIN };
    +    cairo_point_int_t max = { CAIRO_RECT_INT_MAX, CAIRO_RECT_INT_MAX };
    
    Well, read it carefully... yeah.  That caused each show glyph operation
    upload a mask the size of the surface.  With evince/poppler and certain
    PDF files that each glyph is rendered in its own cairo_show_glyphs()
    call, that meant a 20x slowdown in rendering a page of PDF.
    
    If still wondering what's wrong with that change, here is the answer:
    
    -    cairo_point_int_t min = { CAIRO_RECT_INT_MIN, CAIRO_RECT_INT_MIN };
    -    cairo_point_int_t max = { CAIRO_RECT_INT_MAX, CAIRO_RECT_INT_MAX };
    +    cairo_point_int_t min = { CAIRO_RECT_INT_MAX, CAIRO_RECT_INT_MAX };
    +    cairo_point_int_t max = { CAIRO_RECT_INT_MIN, CAIRO_RECT_INT_MIN };
    
    Yay for git-bisect.

 src/cairo-scaled-font.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 8983208f456c6f570698df46174faa0208d6de5f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Jan 25 01:00:21 2008 -0500

    [configure.in] Require pixman >= 0.9.6
    
    I was experiencing very weird rendering problems and crashes in evince with
    pixman 0.9.4.  Upgrading to pixman 0.9.6 fixed the all.  Lets just require it.

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 5dfe47a3f14ee8597395dc53ff57fd429e9804cd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Jan 25 00:35:11 2008 -0500

    [cairo-scaled-font] Unbreak it after my recent commit
    
    Sigh.

 src/cairo-scaled-font.c |   41 +++++++++++++++++++----------------------
 1 files changed, 19 insertions(+), 22 deletions(-)

commit efd3a965244305a069ec231b7ec28cff8d6c67c8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Jan 24 23:35:06 2008 -0500

    [cairo-scaled-font] Don't err on font size 0, really
    
    First, seems like we were rejecting degenerate font matrix right away
    at the constructor.  Don't do that.
    
    Next, PS/PDF were inverting the font scale matrix, assuming that it's
    invertible.  We now keep the inverse too, so they can use it.  For the
    case of a size 0 font, both the scale matrix and its invert are set to
    0,0,0,0.  That's safe, even if slightly inconsistent.

 src/cairo-pdf-surface.c         |    5 +----
 src/cairo-ps-surface.c          |    5 +----
 src/cairo-scaled-font-private.h |    1 +
 src/cairo-scaled-font.c         |   19 ++++++++-----------
 4 files changed, 11 insertions(+), 19 deletions(-)

commit 45f269e33020d8d7cf247926712b9c64c1fb8959
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Jan 24 22:39:28 2008 -0500

    [cairo-scaled-font] Oops, return err if not handling it

 src/cairo-scaled-font.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 6d0dc3e0760e6bc6b0eceab48674410b4e865287
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Jan 24 22:24:23 2008 -0500

    [cairo-scaled-font] Don't err on font size 0

 src/cairo-scaled-font.c |   18 ++++++++++++++++--
 1 files changed, 16 insertions(+), 2 deletions(-)

commit ea9afecc9aaa87c2df14dc9126c75ac0e3e5b13f
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Thu Jan 24 11:48:02 2008 -0800

    [quartz] Do dynamic symbol lookups for 10.4/10.5 optimization symbols
    
    The gcc-__attribute-__ based weak linking was causing all sorts of problems;
    do dlsym lookups at runtime instead.

 src/cairo-quartz-surface.c |   39 ++++++++++++++++++++++++++++-----------
 1 files changed, 28 insertions(+), 11 deletions(-)

commit 287de2ce5883daa4238c534e0d4890cb640d7fb7
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Jan 23 21:30:42 2008 -0800

    [quartz] Clean up unused APIs a bit
    
    The data parameter from get_image was never really used; get rid of it and clean up
    callers.  Also get rid of a chunk of dead code in release_dest_image.

 src/cairo-quartz-surface.c |   76 +++++++------------------------------------
 1 files changed, 13 insertions(+), 63 deletions(-)

commit b96c6c26c2d6b0b5f79ee569ece602338c4146b2
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Thu Jan 24 11:04:26 2008 -0800

    [win32] Print non-black/white text correctly in show_glyphs

 src/cairo-win32-printing-surface.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 8e7c0db8018b258fc367da1e5502e9e13bad098c
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Thu Jan 24 11:01:55 2008 -0800

    [win32] Better tracking of initial clip
    
    There were a few corner cases that the win32 surface was failing
    at when there was an initial clip set; the win32-printing surface
    had more serious problems when painting meta surface patterns.
    This cleans up the initial DC clip tracking for both surfaces.

 src/cairo-win32-printing-surface.c |   69 +++++-------
 src/cairo-win32-private.h          |   23 +++-
 src/cairo-win32-surface.c          |  221 +++++++++++++++++++++++++-----------
 3 files changed, 197 insertions(+), 116 deletions(-)

commit c05e3b08b4cfa820a18e33b5012a6138b931788f
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Jan 24 09:51:58 2008 -0800

    Remove ROADMAP and TODO, mentioning their URLs in README
    
    We're maintaining these as part of cairo's website now,
    rather than as part of the source code.

 README  |   18 +++----
 ROADMAP |  149 ---------------------------------------------------------------
 TODO    |  111 -----------------------------------------------
 3 files changed, 8 insertions(+), 270 deletions(-)

commit 21823842775988c0b58e3868dce053544ed246e2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Jan 23 15:06:52 2008 -0500

    [test] Minor fix for check-ref-dups rule

 test/Makefile.am |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit e7c0a69dcb627abb677f84473a9e3857b2d89a69
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Jan 23 14:57:42 2008 -0500

    [test] Also check for reference images listed in Makefile.am but missing
    in git, and if this is not a git checkout, in source directory.

 test/Makefile.am |   36 +++++++++++++++++++++++++++---------
 1 files changed, 27 insertions(+), 9 deletions(-)

commit 188765c8e857c88a66656a454a3dbd27c32170f7
Author: Bertram Felgenhauer <int-e@gmx.de>
Date:   Wed Jan 23 19:22:18 2008 +0100

    improve comments for the pixman transformation anchoring math.

 src/cairo-matrix.c |   14 +++++++++++++-
 1 files changed, 13 insertions(+), 1 deletions(-)

commit b6c723644302c43b7aae098338092e578fe2f007
Author: Bertram Felgenhauer <int-e@gmx.de>
Date:   Wed Jan 23 18:09:20 2008 +0100

    update reference images for some non-aa testcases

 test/rectangle-rounding-error-ref.png   |  Bin 298 -> 231 bytes
 test/rotate-image-surface-paint-ref.png |  Bin 232 -> 209 bytes
 test/unantialiased-shapes-ref.png       |  Bin 4449 -> 3968 bytes
 3 files changed, 0 insertions(+), 0 deletions(-)

commit 5a0b15d2c9b5e9ef3aed1f01e8ea28a3f2c36216
Author: Bertram Felgenhauer <int-e@gmx.de>
Date:   Wed Jan 23 18:02:02 2008 +0100

    anchor pattern transformations at the pattern origin
    This keeps the rounding errors due to the conversion to 16.16 fixed point
    numbers small and improves cairo's translation invariance.

 src/cairo-matrix.c |   23 +++++++++++++++++++++++
 1 files changed, 23 insertions(+), 0 deletions(-)

commit 431e846c03b39495ac57834a8b65b7499472ef1b
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Jan 22 16:30:37 2008 -0800

    cairo_point_int32_t is really int32_t, not int16_t
    
    Oops.

 src/cairo-types-private.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 02970ac8cf27bc9d42cf27848a97019d9dd13b6d
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Jan 22 15:32:11 2008 -0800

    Fix usage of cairo_rectangle_int16_t leading to memory corruption
    
    cairo_rectangle_int16_t was being used in a number of places instead
    of cairo_rectangle_int_t, which led to memory corruption when cairo was
    using a fixed point format with a bigger space than 16.16 (such as 24.8).

 src/cairo-analysis-surface.c |    3 +++
 src/cairo-pdf-surface.c      |    6 +++---
 src/cairo-scaled-font.c      |   24 ++++++++++++------------
 src/cairo-surface-fallback.c |    9 ++-------
 src/cairo-win32-private.h    |    2 +-
 src/cairo-xcb-surface.c      |    4 ++--
 src/cairo-xlib-surface.c     |    4 ++--
 src/cairoint.h               |    2 +-
 8 files changed, 26 insertions(+), 28 deletions(-)

commit 1109ccfb4e5b078581a3b4a7e2d152681fa863ec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Jan 22 17:44:47 2008 -0500

    [ROADMAP] Add item: Make cairo-ft respect FC_FT_FACE pattern element

 ROADMAP |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 5024650d4d8d4fa890a531d9e54fed7beef8e2c1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Jan 22 12:45:50 2008 -0500

    [test] Only summarize check results for the tests tested!

 test/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 18181f12ae6c412fea984484355ff8bc1dfccb54
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Jan 22 06:25:19 2008 -0800

    Make Carl return from his time-traveling expedition

 test/rectilinear-miter-limit.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 95f3b425e6fb31b364b08e53e072fac4f5ed0733
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Jan 22 01:03:02 2008 -0500

    [cairo-path-stroke] Use M_SQRT2 for constant value

 src/cairo-path-stroke.c |    8 ++++----
 src/cairoint.h          |    4 ++++
 2 files changed, 8 insertions(+), 4 deletions(-)

commit 1931ce1b3d491afe4f23670c82e428f95eb25e6d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Jan 22 00:36:25 2008 -0500

    [cairo-operator] Remove unused cairo-operator.c

 src/Makefile.am      |    1 -
 src/cairo-operator.c |  119 --------------------------------------------------
 src/cairoint.h       |    7 ---
 3 files changed, 0 insertions(+), 127 deletions(-)

commit 47cf7ed769891b00abf96d14de6e79c0fa893cf9
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 21 16:45:41 2008 -0800

    Test and document that fill rule has no effect on cairo_path_extents

 src/cairo.c             |    4 +-
 test/get-path-extents.c |   49 +++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 51 insertions(+), 2 deletions(-)

commit 1ca186f51134e7d5969937760b068caba0070d31
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 21 16:34:24 2008 -0800

    Disable rectilinear stroke optimization for small miter limit values
    
    This fixes the bug that was causing the recently added
    rectilinear-miter-limit test case to fail. It passes
    quite happily now.

 src/cairo-path-stroke.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 32efcc94627e8890969c4b36a78c831ced6f8d62
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 21 16:32:48 2008 -0800

    Add new rectilinear-miter-limit test to demonstrate bug
    
    We're failing to respect the miter limit in the rectilinear
    stroke optimization code.

 test/.gitignore                      |    1 +
 test/Makefile.am                     |    2 +
 test/rectilinear-miter-limit-ref.png |  Bin 0 -> 177 bytes
 test/rectilinear-miter-limit.c       |   80 ++++++++++++++++++++++++++++++++++
 4 files changed, 83 insertions(+), 0 deletions(-)

commit 326342962daa694d876c03194e8a6c1b13f9a8d2
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 21 15:20:07 2008 -0800

    Rename trailing_move_to_point to move_to_point
    
    And prefer TRUE and FALSE literals over 1 and 0.

 src/cairo-path-bounds.c |   24 +++++++++++++-----------
 1 files changed, 13 insertions(+), 11 deletions(-)

commit c480eedbb58dd03dd4b9b87b3985758ffbce7113
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 21 14:56:21 2008 -0800

    Test and document extents of degenerate "dots"
    
    It's a common idiom to stroke degenerate sub-paths made with
    cairo_move_to(x,y);cairo_rel_line_to(0,0) to draw dots. Test
    that we get the desired extents from cairo_fill_extents,
    cairo_stroke_extents, and cairo_path_extents for these cases.
    
    Also document that the cairo_path_extents result is equivalent
    to the limit of stroking with CAIRO_LINE_CAP_ROUND, (so that
    these "dot" points are included), as the line width
    approaches 0.0 .

 src/cairo.c             |    6 +++---
 test/get-path-extents.c |   28 ++++++++++++++++++++++++++++
 2 files changed, 31 insertions(+), 3 deletions(-)

commit 55e0dddf0408046ea0ded419ebe45099a4eb563e
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 21 14:45:06 2008 -0800

    Add cairo_path_extents testing to several cases missing it
    
    With these degenerate shapes, cairo_path_extents still returns
    a zero-area rectangle, but with a non-zero offset.

 test/get-path-extents.c |   12 ++++++++----
 1 files changed, 8 insertions(+), 4 deletions(-)

commit 63df3a82a3a4a035edf89152995a324449616059
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 21 13:47:05 2008 -0800

    Fix cairo_path_extents to ignore lone cairo_move_to points.
    
    Update the documentation as well.

 src/cairo-path-bounds.c |   11 ++++++++++-
 src/cairo.c             |   40 +++++++++++++++++++++++++---------------
 2 files changed, 35 insertions(+), 16 deletions(-)

commit c15cab8b6855540436e457465c4766812c6def55
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 21 13:34:53 2008 -0800

    Correct near-pangram to be an actual pangram
    
    This wasn't affecting the test quality at all, but it did annoy
    me to see this mistake.

 test/get-path-extents.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ed695bdb9b1e4500f796c7f07a7cc2f3832b2a39
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 21 13:33:46 2008 -0800

    Define repeated string literal once

 test/get-path-extents.c |   10 ++++++----
 1 files changed, 6 insertions(+), 4 deletions(-)

commit 80df194b77a4caac1d58132341f034596e500bda
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jan 21 12:14:49 2008 -0800

    Clarify documentation of cairo_{fill,stroke,path}_extents
    
    Mostly just adding more cross-references between the documentation
    of these three similar functions.

 src/cairo.c |   36 +++++++++++++++++++++++++-----------
 1 files changed, 25 insertions(+), 11 deletions(-)

commit eba04b7fbcc7fdbf075ad1372208908634459178
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sun Jan 20 03:22:12 2008 +0000

    [path] use new interpret_flat infrastructure for path_populate
    
    refactor to reduce duplication of flattening code.

 src/cairo-path.c |   50 +++++++++++++-------------------------------------
 1 files changed, 13 insertions(+), 37 deletions(-)

commit 3270ae6a65105787942da8309fa874ee65bc79fe
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sun Jan 20 03:21:41 2008 +0000

    [path] Use new interpret_flat infrastructure for path_count.
    
    Refactor to reduce duplication of path flattening code.

 src/cairo-path-bounds.c |    6 ----
 src/cairo-path.c        |   62 +++++++++++++---------------------------------
 2 files changed, 18 insertions(+), 50 deletions(-)

commit 4177208be63caa3128eaf07428f3d4617fcd18e0
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Fri Nov 16 22:43:43 2007 +0000

    [cairo] Add cairo_path_extents()
    
    This new function gets the extents of the current path, whether
    or not they would be inked by a 'fill'. It differs from
    cairo_fill_extents() when the area enclosed by the path is 0.
    
    Includes documentation and updated test.

 doc/public/cairo-sections.txt    |    1 +
 doc/public/tmpl/cairo-paths.sgml |   10 ++++++++++
 src/cairo-gstate.c               |   11 +++++++++++
 src/cairo.c                      |   30 ++++++++++++++++++++++++++++++
 src/cairo.h                      |    5 +++++
 src/cairoint.h                   |    7 +++++++
 test/get-path-extents.c          |   33 +++++++++++++++++++++++----------
 7 files changed, 87 insertions(+), 10 deletions(-)

commit d923457c0f40c9b34ee75d4d47b9bd0c3edfe669
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sat Jan 19 22:31:49 2008 +0000

    [path-fixed] make _cairo_path_fixed_bounds use _cairo_path_fixed_interpret_flat
    
    _cairo_path_fixed_bounds can use the new _interpret_flat mechanism; this
    results in tighter bounds; previously the bounds followed the control
    points of the beziers, whereas now they are the bounds of the curve.

 src/cairo-analysis-surface.c |    2 +-
 src/cairo-path-bounds.c      |   39 ++++++++++++++-------------------------
 src/cairoint.h               |    3 ++-
 3 files changed, 17 insertions(+), 27 deletions(-)

commit 1471b3f00acddecdfc2617a62ab0e584f319dc1c
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sat Jan 19 22:31:10 2008 +0000

    [path-fixed] add _cairo_path_fixed_interpret_flat
    
    _cairo_path_fixed_interpret_flat flattens the path as it
    interprets it, meaning that a curve_to callback is not
    required.

 src/cairo-path-fixed.c |   99 ++++++++++++++++++++++++++++++++++++++++++++++++
 src/cairoint.h         |    9 ++++
 2 files changed, 108 insertions(+), 0 deletions(-)

commit 3339c32b0aa44c4bae6e534f90d26aa342e3d717
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Jan 20 02:56:26 2008 -0500

    [cairoint.h] Move MSC inline macros into cairo-compiler-private.h
    where they belong

 src/cairo-compiler-private.h |   10 ++++++++++
 src/cairoint.h               |   11 -----------
 2 files changed, 10 insertions(+), 11 deletions(-)

commit ac17ce0f89b494a404756c8d24b21a7fb354218e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Jan 20 02:54:16 2008 -0500

    [cairo-fixed/wideint-private.h] Split out typedefs from prototypes
    such that the type definitions can be used from boilerplate without exposing
    the prototypes.

 src/Makefile.am                  |    2 +
 src/cairo-fixed-private.h        |   34 +---------
 src/cairo-fixed-type-private.h   |   70 ++++++++++++++++++++
 src/cairo-types-private.h        |    2 +-
 src/cairo-wideint-private.h      |   71 +--------------------
 src/cairo-wideint-type-private.h |  130 ++++++++++++++++++++++++++++++++++++++
 src/cairoint.h                   |    1 +
 7 files changed, 208 insertions(+), 102 deletions(-)

commit f072d815d40e6fd44369424b68d54cea22da3a26
Author: Peter Weilbacher <mozilla@weilbacher.org>
Date:   Sat Jan 19 20:48:39 2008 -0500

    [cairo-ft] Fix typo in comment

 src/cairo-ft-font.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0fb800ff2258d4642a2188a7f219db9620450bc2
Author: Peter Weilbacher <mozilla@weilbacher.org>
Date:   Sat Jan 19 20:47:59 2008 -0500

    [cairo-ft] Add FC_PIXEL_SIZE as double, not int

 src/cairo-ft-font.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 8887fb35936bb48acadc19a0c71d1b81ec8b481d
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Jan 20 01:14:19 2008 +1030

    Fix PS/PDF Type 1 font embedding when glyph 0 is used
    
    cairo-scaled-fonts-subsets.c reserves position 0 in each subset for
    glyph 0 (.notdef) as the font embedding of each font type requires
    .notdef as the first glyph. For some reason this was done by reserving
    the position then inserting glyph 0 in the collect function instead of
    just adding the glyph to the hash table when the subset is
    created. The problem this caused was that when an application called
    show_glyphs() with glyph 0, the glyph was added to the hash table
    (because it was not already there) resulting in two .notdef glyphs in
    the subset. This resulted in breakage in the Type 1 subsetting where
    the second .notdef was not emitted and all subsequent glyphs were
    moved up one place resulting in incorrect font encoding in the PS/PDF
    output.
    
    Fix this by adding .notdef to the subset hash table when the subset is
    created.
    
    This fixes #13841.

 src/cairo-scaled-font-subsets.c |   36 +++++++++++++++++++-----------------
 1 files changed, 19 insertions(+), 17 deletions(-)

commit 574bdd01fd5df8f378c901de5cd9b24bd720ad37
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Jan 20 00:26:09 2008 +1030

    Type1-subset: Add newline to the end of the font
    
    as some fonts do not have a newline at the end of the last line

 src/cairo-type1-subset.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit ec272fbd0980e8124d87ff5c17a5b751876fc9e2
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Jan 19 12:46:24 2008 +1030

    Fix PDF extend-reflect test failure
    
    Previously, when emitting image patterns the PDF backend used
    _cairo_pattern_acquire_surface to get the image. For reflected images
    this would return an image containing four images in a reflect
    pattern.  When drawn in a PDF pattern (which only does repeating
    patterns) this would create the reflected pattern in PDF.
    
    For some reason _cairo_pattern_acquire_surface is no longer returning
    a reflected image pattern.
    
    This is fixed by only using _cairo_surface_acquire_source_image to get
    the image and using the same code as is used for reflected
    meta-surface patterns to created a reflected pattern by drawing four
    transformed copies of the image inside the PDF patten.
    
    This is the better way to implement reflected images as we are no
    longer embedding an image four times larger than the original.

 src/cairo-pdf-surface.c |   67 ++++++++++++++++++++++------------------------
 1 files changed, 32 insertions(+), 35 deletions(-)

commit 50d0767c8bf4c738b86e10be09d5c4fd7e14a05f
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Jan 18 12:41:57 2008 -0800

    Add a1-image-sample and a1-traps-sample tests
    
    Both of these currently fail due to bugs in the way pixman does
    its sampling.

 test/.gitignore              |    2 +
 test/Makefile.am             |    2 +
 test/a1-image-sample-ref.png |  Bin 0 -> 148 bytes
 test/a1-image-sample.c       |   83 ++++++++++++++++++++++++++++++++++++++++++
 test/a1-traps-sample-ref.png |  Bin 0 -> 148 bytes
 test/a1-traps-sample.c       |   72 ++++++++++++++++++++++++++++++++++++
 test/cairo-test.c            |    2 +
 7 files changed, 161 insertions(+), 0 deletions(-)

commit c11790fded69ed476e7740ed86e4a66bf878d2d3
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jan 16 16:32:36 2008 -0800

    Quiet a warning about switch without some cairo_surface_type_t enum values

 src/cairo-paginated-surface.c |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit 1d6c2d578fa717906ba8fd0a897c52033179e938
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jan 16 16:19:40 2008 -0800

    Remove some gratuitous assert statements
    
    Calling assert immediately after assigning a literal value is
    very bad form.

 src/cairo-image-surface.c |    5 +----
 1 files changed, 1 insertions(+), 4 deletions(-)

commit eabd28a655f8ddc73ff71583bb658db796e932cd
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Jan 18 21:53:04 2008 +1030

    win32-printing: define GRADIENT_FILL_RECT_H  bug #14107
    
    Older versions of mingw do not define this.

 src/cairo-win32-printing-surface.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 0086db893cba90dc73824d77c661d2965ad48112
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 22:31:05 2008 +0000

    [cairo-font-options] Treat NULL as a default cairo_font_options_t
    
    Interpret a NULL cairo_font_options_t as the default values - i.e
    as if it were a fresh pointer returned by cairo_font_options_create().

 src/cairo-font-face.c    |    8 +++--
 src/cairo-font-options.c |   51 +++++++++++++++++++++-----
 src/cairo-ft-font.c      |   16 +++++---
 src/cairo-gstate.c       |    2 +-
 src/cairo-scaled-font.c  |   18 ++++++---
 src/cairo-win32-font.c   |    4 +-
 src/cairo.c              |   10 +++--
 test/.gitignore          |    1 +
 test/Makefile.am         |   12 ++++---
 test/font-options.c      |   91 ++++++++++++++++++++++++++++++++++++++++++++++
 10 files changed, 177 insertions(+), 36 deletions(-)

commit 02d0e070638f668bf50a8ce2174c21e5614dd6c4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 21:39:31 2008 +0000

    [cairo-font-options] Use cairo_font_options_status() rather open-coding.
    
    By switching to cairo_font_options_status() instead of checking against
    the _cairo_font_options_nil error object, the API is protected from NULL
    dereferences.

 src/cairo-font-options.c |   16 ++++++++--------
 1 files changed, 8 insertions(+), 8 deletions(-)

commit b15e91d2b6c229dfe3da4a354306915cc42f75bd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 21:11:00 2008 +0000

    [cairo-font-options] Check for a NULL cairo_font_options_t
    
    On IRC Drakou reported a user error whereby cairo_scaled_font_create()
    was called with a NULL cairo_font_options_t. However, instead of
    reporting the error back to the user, cairo instead segfaulted trying
    to dereference the NULL pointer!
    
    Add a guard to check that the options is not NULL.

 src/cairo-font-options.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 630536f17681b083db658414d68db2c0eb167af3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 17:44:57 2008 +0000

    [test/extend-*] Add various cairo_pattern_set_extend() test cases.
    
    Add various test cases to exercise
    _cairo_pattern_acquire_surface_for_surface(), most notably using similar
    source surfaces to provide coverage of the non-image surface branch.

 test/.gitignore                     |    4 +
 test/Makefile.am                    |   11 +++-
 test/cairo-test.c                   |    2 -
 test/extend-pad-similar.c           |  105 +++++++++++++++++++++++++++++++++++
 test/extend-reflect-similar-ref.png |  Bin 0 -> 153571 bytes
 test/extend-reflect-similar.c       |   56 ++++++++++++++++++
 test/extend-reflect.c               |    2 +
 test/extend-repeat-ref.png          |  Bin 0 -> 108622 bytes
 test/extend-repeat-similar-ref.png  |  Bin 0 -> 108622 bytes
 test/extend-repeat-similar.c        |   56 ++++++++++++++++++
 test/extend-repeat.c                |   34 +++++++++++
 11 files changed, 267 insertions(+), 3 deletions(-)

commit dec2daeaf396be9dc6e8952417cc615d3a607926
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 15:34:51 2008 +0000

    [cairo-{ps,pdf}-surface] Assert the font is supported during emission.
    
    Add an ASSERT_NOT_REACHED to the tail of the font subset emission
    functions - as they should always, at least, be supported by the
    fallbacks.

 src/cairo-pdf-surface.c |    2 ++
 src/cairo-ps-surface.c  |    2 ++
 2 files changed, 4 insertions(+), 0 deletions(-)

commit bde68fd4d6271daf8ca374e472deab95a9a7acff
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 15:06:13 2008 +0000

    [cairo-scaled-font] Propagate the error to the font.
    
    If we encounter an error whilst using the font backend to convert the
    text to the glyphs, flag the scaled font with that error.

 src/cairo-scaled-font.c |    7 +++----
 1 files changed, 3 insertions(+), 4 deletions(-)

commit d664e3253e3c310c34264eb0070c2c3c309e071b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 15:05:10 2008 +0000

    [cairo-scaled-font] Typo.
    
    s/ZERO_EXENTS/ZERO_EXTENTS/

 src/cairo-scaled-font.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit fcdc525dde52c3bf7124d00a98b6be64ca522cb9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 14:47:43 2008 +0000

    [cairo-xlib] Remove the NULL safeguards.
    
    No need to guarding against the pointer being NULL on internal functions
    as no path can call the function will a NULL pointer and no path should
    ever try, which in any case it would be better to crash immediately.

 src/cairo-xlib-display.c |    7 +------
 src/cairo-xlib-screen.c  |    6 ------
 2 files changed, 1 insertions(+), 12 deletions(-)

commit 7b1a0eddacb290ae0d67fa974da1697b2c9ce38c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 13:51:21 2008 +0000

    [test/get-path-extents] Exercise cairo_scaled_font_text_extents()
    
    Compare cairo_scaled_font_text_extents() to cairo_text_extents() in
    order to provide test coverage of cairo_scaled_font_text_extents().

 test/get-path-extents.c |   19 ++++++++++++++++++-
 1 files changed, 18 insertions(+), 1 deletions(-)

commit dbc97c2576320126e0cddd833ac88320af995d77
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 13:41:19 2008 +0000

    [text] Set the extents on the error paths.
    
    Ensure the text extents are initialized (zeroed) if we encounter an
    error along for any of the text extents functions.

 src/cairo-scaled-font.c |   19 ++++++++++++++++---
 src/cairo.c             |   35 +++++++++++++++++++----------------
 2 files changed, 35 insertions(+), 19 deletions(-)

commit aec7ae67aa72f3105232fa7a66c1ea013c840da1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 13:28:55 2008 +0000

    [test/text-zero-len] Test the public cairo_scaled_font_* with NULLs.
    
    Pass NULL to cairo_scaled_font_(text|glyph)_extents() to test the
    consistency of the extents API.

 test/text-zero-len.c |   33 +++++++++++++++++++++++++++++++++
 1 files changed, 33 insertions(+), 0 deletions(-)

commit 390e22894b093184e489ea762ffc29eeb1c81d2b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 13:13:40 2008 +0000

    [test/in-fill-trapezoid] Add a few holes.
    
    Complete the coverage of _cairo_trap_contains() by cutting holes out of
    the simple shapes.

 test/in-fill-trapezoid.c |   20 ++++++++++++++++++++
 1 files changed, 20 insertions(+), 0 deletions(-)

commit da9c43329ad09ccf48f8a71d28848f111af7ecb5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 11:22:19 2008 +0000

    [test/in-fill-trapezoid] Add test to exercise _cairo_trap_contains().
    
    A simple test to provide coverage of _cairo_trap_contains(), though
    not yet seeking boundary conditions.

 test/.gitignore          |    1 +
 test/Makefile.am         |    1 +
 test/in-fill-trapezoid.c |   66 ++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 68 insertions(+), 0 deletions(-)

commit f638e5ea355cf0268a4b099ce7b8b98c69df6b67
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 11:03:50 2008 +0000

    [cairo-region] Review status propagation.
    
    Check that the error status is propagated from _cairo_region_*.

 src/cairo-clip.c          |    2 +-
 src/cairo-glitz-surface.c |   50 ++++++++++++++++++++++++--------------------
 src/cairo-surface.c       |    7 +----
 3 files changed, 30 insertions(+), 29 deletions(-)

commit 248f0060e5317f53a688ea0e0aea2997824fa996
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 10:10:55 2008 +0000

    [cairo-analysis-surface] Return the nil surface rather than NULL.
    
    On error return a nil surface that represents the error rather than
    making the assumption of a NO_MEMORY error in the caller.

 src/cairo-analysis-surface.c  |    5 +----
 src/cairo-paginated-surface.c |    5 ++---
 2 files changed, 3 insertions(+), 7 deletions(-)

commit dd13a00541ebd85bb7687add8b76fa3fb1d82b95
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 10:09:22 2008 +0000

    [test/get-path-extents] Check extents of degenerate paths.
    
    Ensure that degenerate paths have zero extents.

 test/get-path-extents.c |   35 +++++++++++++++++++++++++++++++++++
 1 files changed, 35 insertions(+), 0 deletions(-)

commit 3f202c081d211d5ac6c28ce96cd0f57f8bb26aac
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 16 23:42:24 2008 +0000

    [Makefile.am] Another path massage for lcov.
    
    Beware the inline functions in the headers that are now being pulled
    into the boilerplate code.

 Makefile.am |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit 9ebfa8b5fb82596341b9ca0f19c362f24a7ff782
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 16 20:35:41 2008 +0000

    [Makefile.am] Couple check-ref-missing into release-check
    
    Verify that all the reference images checked into git will be included
    within the distribution tarball as early as possible in the release
    process.

 Makefile.am      |    6 +++++-
 test/Makefile.am |   16 ++++++++++++----
 2 files changed, 17 insertions(+), 5 deletions(-)

commit f9a80c06b40634ffef00770731d3b433e465a1b9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 16 23:28:27 2008 +0000

    [cairo-path-stroke] Convert degenerate splines into lines.
    
    This fixes a discrepancy in the stoker between splines and lines,
    whereby the stroker failed to add a dash for a zero length spline.

 src/cairo-path-stroke.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 2621a323a0ccfe33ff42ed17536db0dc89473a9f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 16 23:24:41 2008 +0000

    [test/dash-curve] Add a new test case for dashes along splines.
    
    Modify the dash-state test case and use curves instead of lines -
    exercises _cairo_stroker_curve_to_dashed() and degenerate splines.

 test/.gitignore         |    1 +
 test/Makefile.am        |    2 +
 test/dash-curve-ref.png |  Bin 0 -> 39642 bytes
 test/dash-curve.c       |   74 +++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 77 insertions(+), 0 deletions(-)

commit bb41fa22e3d3b1fe4b3e802ecf7d8041eacda3fd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 16 23:21:53 2008 +0000

    [Makefile.am] Further massage lcov paths for srcdir != builddir.
    
    The lcov scripts generate incorrect absolute paths to the builddir for
    source files - so convert them to srcdir using sed.

 Makefile.am |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 0a4ced5a2659b168fe8d1a6e3917f79fd5c66ae5
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jan 16 10:47:46 2008 -0800

    Increment version to 1.5.7 after the 1.5.6 snapshot

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d2a02d4f5ccb1c6dc7f8cca0c322b72f1638d25b
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jan 16 10:34:17 2008 -0800

    Remove check-has-hidden-symbols.i on 'make distclean'
    
    Without this, 'make distcheck' fails so releases don't happen.

 src/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 5c3a0b5c0044bff1262d583e38f84d48d407f0d9
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jan 16 10:22:44 2008 -0800

    Add miter-precision-ref.png tothe distribution.

 test/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit cb1ddc4e475ff783960925139e85f6fada56213a
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jan 16 10:10:39 2008 -0800

    Replace -I($builddir) with -I. to avoid breaking non-srcdir builds.
    
    This variable was expanding to an empty string, so the next -I flag
    was getting completely swallowed. Let's avoid being clever and just
    use . which is what we want in the expansion anyway.

 src/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ad8d03967a2b68ab88a428df6b9d68e76002a88f
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Jan 15 15:50:54 2008 -0800

    Increment version to 1.5.6 and to 15:0:13

 configure.in |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit fe27f4b9a34946b121b4259f057fdf3c52d1371b
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Jan 15 15:47:48 2008 -0800

    NEWS: Add notes for cairo 1.5.6

 NEWS |  100 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++---
 1 files changed, 95 insertions(+), 5 deletions(-)

commit 1bccbd88c38c4438e94cf8936228c75e47be0af4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 16 16:33:22 2008 +0000

    [cairo-pdf-surface] Review error propagation from output stream.
    
    Ensure that errors encountered whilst processing the output stream are
    propagated back to the surface (and the user).

 src/cairo-pdf-surface.c |  291 ++++++++++++++++++++++++-----------------------
 1 files changed, 147 insertions(+), 144 deletions(-)

commit 20151fc53401dcc53ef3ab6a78c91a0a02afe497
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 16 16:33:22 2008 +0000

    [cairo-ps-surface] Review error propagation during surface creation.
    
    Track the error during surface creation so that it can be returned to
    the user via _cairo_surface_create_in_error().

 src/cairo-ps-surface.c |   36 +++++++++++++++++-------------------
 1 files changed, 17 insertions(+), 19 deletions(-)

commit 3daa63693c2f8f9cc3c7fa41ef1e4d69bd67b3cc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 16 16:33:22 2008 +0000

    [cairo-svg-surface] Review error propagation during surface creation.
    
    Track the error during surface creation so that it can be returned to
    the user via _cairo_surface_create_in_error().

 src/cairo-svg-surface.c |  124 +++++++++++++++++++++++++----------------------
 1 files changed, 66 insertions(+), 58 deletions(-)

commit 7111b18c27d7ee0439339a6aa72f0e4244f883f9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 16 16:23:23 2008 +0000

    [cairo-surface] Introduce _cairo_surface_create_in_error().
    
    Unexport all the static error surfaces and use a function to select
    the appropriate error surface for the status.

 src/cairo-array.c                  |    3 +-
 src/cairo-glitz-surface.c          |   20 ++----
 src/cairo-image-surface.c          |  136 ++++--------------------------------
 src/cairo-meta-surface.c           |   12 +--
 src/cairo-os2-surface.c            |   22 +++----
 src/cairo-paginated-surface.c      |    8 ++-
 src/cairo-pdf-surface.c            |   11 +--
 src/cairo-png.c                    |   38 ++++++----
 src/cairo-ps-surface.c             |    9 +--
 src/cairo-quartz-surface.c         |   32 +++-----
 src/cairo-surface-fallback.c       |    6 +-
 src/cairo-surface.c                |   62 +++++++++++-----
 src/cairo-svg-surface.c            |   20 ++----
 src/cairo-win32-printing-surface.c |   10 +--
 src/cairo-win32-surface.c          |   37 ++++------
 src/cairo-xcb-surface.c            |   18 ++---
 src/cairo-xlib-surface.c           |   26 +++-----
 src/cairo.c                        |    4 +-
 src/cairoint.h                     |    6 +-
 src/test-fallback-surface.c        |    5 +-
 src/test-meta-surface.c            |   18 +++--
 src/test-paginated-surface.c       |    5 +-
 22 files changed, 185 insertions(+), 323 deletions(-)

commit 5cbc45488e276cb6e6ecfa7bc7dd4fae342de85e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 16 16:29:19 2008 +0000

    [cairo-output-stream] Introduce _cairo_output_stream_create_in_error()
    
    Use a utility function to wrap an incoming error status into a new
    error stream. As a side-effect, all error streams must be destroyed as
    in the general case the caller can not distinguish between a static
    error object and one allocated to hold an unusual error status.

 src/cairo-base85-stream.c         |    3 +++
 src/cairo-deflate-stream.c        |    7 ++-----
 src/cairo-output-stream-private.h |    3 +++
 src/cairo-output-stream.c         |   26 ++++++++++++++++++++++++--
 src/cairo-ps-surface.c            |   10 +++++++---
 src/cairo-type1-fallback.c        |    8 ++++----
 src/cairo-type1-subset.c          |    5 +++--
 7 files changed, 46 insertions(+), 16 deletions(-)

commit 2c10c7559db11ccf511e119f4d4fb2da97508786
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 16 13:37:48 2008 +0000

    [Makefile.am] Add -I$(builddir) for .c.i target
    
    Updated the CPP command so that it can find <cairo-features.h> in the
    local build directory.

 src/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e49db8ed3ea5727e00e2734a8877af860371be69
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jan 16 08:11:51 2008 -0800

    Fix create-for-stream test to log its failure properly
    
    Without this, a failure of this test won't be nicely reported
    in the post-make-check summary. (Also fix a silly little typo
    in the svg-clip test.)

 test/Makefile.am         |    1 -
 test/create-for-stream.c |   13 +++++++++++--
 test/svg-clip.c          |    2 +-
 3 files changed, 12 insertions(+), 4 deletions(-)

commit 57c2b75c229ac7811c573548ae50e6b0e4ecf862
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Jan 15 14:27:14 2008 -0800

    [quartz] Store the CGFontRef and reuse it for rendering
    
    Previously the CGFontRef was recreated each time in show_glyphs; this
    caused the font to get re-embedded in any PDF files that were being
    generated through Quartz.

 src/cairo-atsui-font.c     |   18 ++++++++++++++++++
 src/cairo-quartz-private.h |    3 +++
 src/cairo-quartz-surface.c |   10 ++--------
 3 files changed, 23 insertions(+), 8 deletions(-)

commit 968eaf3c44f37ada9c1d7005fc84ead797e11b58
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jan 14 18:09:32 2008 +0000

    [cairo-xlib] Fixup --disable-xlib-xrender
    
    Fixup the headers and boilerplate to compile and run correctly when
    configured with --disable-xlib-xrender.

 boilerplate/Makefile.am                      |    2 +-
 boilerplate/cairo-boilerplate-xlib-private.h |    2 +
 boilerplate/cairo-boilerplate-xlib.c         |   29 +++++++++++++++----------
 boilerplate/cairo-boilerplate.c              |    2 +-
 src/Makefile.am                              |    2 +-
 src/cairo-freelist-private.h                 |    3 +-
 src/cairo-xlib-display.c                     |    1 +
 src/cairo-xlib-private.h                     |    6 +----
 src/cairo-xlib-screen.c                      |    1 +
 src/cairo-xlib-surface-private.h             |    2 +
 src/cairo-xlib-surface.c                     |    6 +++++
 src/cairo-xlib-xrender-private.h             |    3 --
 src/cairo-xlib-xrender.h                     |    8 +++---
 test/xlib-surface.c                          |    1 -
 14 files changed, 38 insertions(+), 30 deletions(-)

commit 22d7f311f7733a57ece5d91708b2b5da9b71de86
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jan 14 16:14:02 2008 -0500

    [scaled-font] Upgrade glyph mask as needed in case of mixed-format glyphs
    
    In ecb895803b9d2a3fd142f4a2c694ca08c5581f0e Carl made fallback show_glyphs
    always use a A8 mask in case of mixed-format glyphs.  That's suboptimal if
    there are ARGB32 glyphs.  Using masks smartly we can implement the desired
    behavior.  Done now.

 src/cairo-image-surface.c |   18 +++++++++++++++
 src/cairo-scaled-font.c   |   54 +++++++++++++++++++++++++--------------------
 src/cairoint.h            |    3 ++
 3 files changed, 51 insertions(+), 24 deletions(-)

commit a5e5c1b5b04dd1d1138e96b7f4c097f14a1cd2cd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jan 13 15:00:58 2008 +0000

    [test] Add a custom hook to summarise the failures.
    
    Add a check-local hook that scans the log fails and displays a list
    of failed tests (and the failing targets).

 test/Makefile.am |   18 ++++++++++++++++++
 1 files changed, 18 insertions(+), 0 deletions(-)

commit 8d6249b2c1200dfaf3e98c40e82ab2796e9ef28c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jan 13 11:40:53 2008 +0000

    [cairo-scaled-font] Add missing matrix guard to cairo_scaled_font_create().
    
    cairo_scaled_font_create() did not check the user supplied ctm was valid,
    triggering an assertion later when computing the scale factors.

 src/cairo-scaled-font.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 3f59ef95482db478230bb7634209bb826b6a06d0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jan 13 11:21:39 2008 +0000

    [cairo-matrix] Tidy usage of HAVE_ISFINITE.
    
    Use a macro to switch between isfinite() and its fallback in order to
    avoid using an #ifdef from within a function.

 src/cairo-gstate.c |   25 ++++++-------------------
 src/cairo-matrix.c |   25 ++++++-------------------
 2 files changed, 12 insertions(+), 38 deletions(-)

commit 5e32dcf863cc8f40e2679c8c8c42e3ac927ab3c9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jan 13 11:10:28 2008 +0000

    [cairo-gstate] Check that the matrix remains invertible.
    
    Ensure that the ctm remains invertible after multiplying the user
    supplied matrices. Although the arguments are checked so that they are
    valid per se, we double check that the result after multiplication is
    still a valid invertible matrix. This should catch pathological cases
    where the user concatenates a long series of matrix operations, which
    either exceed our numerical limits or become degenerate through rounding
    errors.

 src/cairo-gstate.c |   16 ++++++++++++++++
 1 files changed, 16 insertions(+), 0 deletions(-)

commit 2f600affaa9ac3537013c69643878731a2f4389e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jan 13 11:02:55 2008 +0000

    [cairo-gstate] Add isfinite guards to the transformation ops.
    
    If we have isfinite() available use it to check that the user supplied
    arguments are valid.

 src/cairo-gstate.c |   21 +++++++++++++++++++++
 1 files changed, 21 insertions(+), 0 deletions(-)

commit 3fed79d1c24f07618243bb197b44a9fd106aebbc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jan 13 10:28:11 2008 +0000

    [cairo-paginated-surface] Set error on surface for operations done its behalf.
    
    Ensure that the error is propagated to the target surface if we fail
    whilst performing an operation on its behalf, for example set the size
    of the paginated surface.

 src/cairo-paginated-surface.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit 481b88dd6b19c267feaf05652974225e86aa8007
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 12 20:35:56 2008 +0000

    [cairo-pattern] Add an ASSERT_NOT_REACHED
    
    On the default case for an unknown pattern type, add an assert that the
    code is never reached, and just in case upgrade the error to a fatal
    PATTERN_TYPE_MISMATCH.

 src/cairo-pattern.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 973d5fa8a50fbb0fb760f2e32a227a6238d074da
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 12 11:04:03 2008 +0000

    [test] Sort TESTS
    
    A couple of tests were out of order, causing a bit of confusion in the
    user.

 test/.gitignore  |    2 +-
 test/Makefile.am |    6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

commit ac98c9e572135f5f46303ce49e6a04f86efe2676
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 12 10:49:48 2008 +0000

    [test/rel-path] Check that invalid relative paths raise an error.
    
    Check that NO_CURRENT_PATH is raised if a relative path op is used
    on a new path.

 test/rel-path.c |   66 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 66 insertions(+), 0 deletions(-)

commit 6cc75cfe5b962566938189b5a7dd63135e981300
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 12 10:30:15 2008 +0000

    [cairo] Harden the text API against NULL strings.
    
    Handle NULL strings in cairo_show_(text|glyph),
    cairo_(text|glyph)_(extents|path) without crashing.

 src/cairo.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 864dab828b4c860668adb48ff9361e9969b5259f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 12 10:01:36 2008 +0000

    [test/text-zero-len] Test passing NULLs to the API.
    
    Check that the public API handles NULL - at the moment the code
    is a little inconsistent and crashes!

 test/text-zero-len.c |   45 ++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 44 insertions(+), 1 deletions(-)

commit ae1e044e328deec7a430de3724a7ae0ad958d22d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 12 00:31:42 2008 +0000

    [cairo-matrix] Use isfinite() to check matrix determinant.
    
    The current NaN check is insufficient as it classifies inf as a valid
    determinant. We can improve the test by using isfinite() - but only
    when it is available. We use the feature test macros as being the
    simplest way of determining the presence of isfinite() as it may be
    implemented as a macro, making checking for its usability troublesome
    during configure.

 src/cairo-matrix.c |   20 ++++++++++++++++++++
 1 files changed, 20 insertions(+), 0 deletions(-)

commit 3610841910714f0bca07caeb606be9c69fd9d4c8
Author: Kouhei Sutou <kou@cozmixng.org>
Date:   Fri Jan 11 14:36:05 2008 -0800

    Fix typo in comment.

 src/cairo-quartz-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0b9124069271593be390d9835fcd1527b20770e3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 11 21:55:52 2008 +0000

    [check-plt.sh] Ensure that $MAKE is defined.
    
    Copy the check from check-def.sh now that $MAKE is also used in
    check-plt.sh

 src/check-plt.sh |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 92c744978f0c08456cf0ec8dca87abebf6a6d150
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 11 21:54:58 2008 +0000

    [Makefile.am] Tweak the flags passed to CPP.
    
    Adjust the flags passed to $(CPP) to match those used in the
    surrounding targets (splint and sparse), which should improve their
    reliability.

 src/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 36f5d69a1165f81e97b50c64dde33fa19db36326
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Jan 11 16:48:55 2008 -0500

    [src/Makefile.am] Tweak includes a bit

 src/Makefile.am |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit ed113ef4229e23d137b2673f233a23064f51ff24
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 11 21:13:05 2008 +0000

    [check] Move the hidden symbol check into check-{def,plt}.sh
    
    Behdad, once again the arbiter of good taste, objected to the use of
    the dotfile within the Makefile, and suggested that one calls $MAKE to
    pre-process the source file from within the check scripts.
    
    Doing so removes the ugly wart added to Makefile.am...

 src/Makefile.am                |   14 +++++---------
 src/check-def.sh               |    4 ++--
 src/check-has-hidden-symbols.c |   11 +----------
 src/check-plt.sh               |    4 ++--
 4 files changed, 10 insertions(+), 23 deletions(-)

commit bcf0c442b91b553b226c78d254906f7127013391
Merge: ecb8958 8a6a0b4
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Jan 11 12:30:15 2008 -0800

    Merge branch 'master' of git.cairographics.org:/git/cairo into cairo

commit ecb895803b9d2a3fd142f4a2c694ca08c5581f0e
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Jan 11 12:28:49 2008 -0800

    Migrate glyph mask to A8 in case of mixed-format glyphs.
    
    This fixes the remaining image-backend problems with bug 13479:
    
    	Ugly Courier New font with cairo 1.4.12
    	https://bugs.freedesktop.org/show_bug.cgi?id=13479
    
    although the xlib-backend had been fixed previously.
    
    Specifically, if an A1 glyph is first encountered, then subsequent
    glyphs will still be rendered with antialiasing, (previously they
    would be rendered very poorly without antialiasing).
    
    Similarly, if the first glyph encountered has component-alpha
    sub-pixel antialiasing and then an A1 or A8 glyph is encountered
    then all glyphs will rendered in A8 (grayscale antialiasing).
    Previously, the non-subpixel-antialiased glyphs would not appear
    at all.

 src/cairo-scaled-font.c |   50 ++++++++++++++++++++++++++++++++++++++++++++--
 1 files changed, 47 insertions(+), 3 deletions(-)

commit 8a6a0b43dc249acb0ad8cb9c6f16360294bcfdc3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 11 18:47:19 2008 +0000

    [check] Replace compiled symbol visibility checker with shell script.
    
    Behdad Esfahbod objected to the execution of a compiled program to check
    symbol visibility as it makes cross-compilation more difficult.
    
    Instead of executing the program, this method conditionally exports
    a variable if cairo uses symbol hiding and scans the executable for
    that symbol in a similar manner to check-def.sh. This has the slight
    advantage of using the Makefile for performing the compilation, rather
    than attempting to invoke $(CPP) from a shell script within the test
    environment.

 src/Makefile.am                    |   12 ++++++++----
 src/cairo-compiler-private.h       |    5 ++---
 src/check-def.sh                   |   11 ++++++-----
 src/check-has-hidden-symbols.c     |   12 ++++++++++++
 src/check-plt.sh                   |   14 ++++++++------
 src/compiler-supports-visibility.c |    6 ------
 6 files changed, 36 insertions(+), 24 deletions(-)

commit 982f65081f987e2c44f05942411c031bd32fd968
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 11 17:25:33 2008 +0000

    [cairoint.h] Compile time check for a font backend.
    
    Add a paranoid check that at least one font backend is available - this
    should have been already caught by configure, but it should help if a new
    font backend is ever added.

 src/cairoint.h |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 6d3ed950ea075ff2a5a569365b46c3cfc4152787
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 11 16:16:20 2008 +0000

    [check] Skip def/plt tests if the compiler doesn't support symbol hiding.
    
    Compile a trivial program such that it reports whether cairo is hiding
    its internal symbols and skip the tests that depend upon it.
    
    This prevents false errors, such as bug 12726, where the user is
    presented with a scary make check failure.

 src/Makefile.am                    |    5 +++++
 src/cairo-compiler-private.h       |    3 +++
 src/check-def.sh                   |    5 +++++
 src/check-plt.sh                   |    5 +++++
 src/compiler-supports-visibility.c |    6 ++++++
 5 files changed, 24 insertions(+), 0 deletions(-)

commit be146f02e0e220aa70217bf348beef301a56f898
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 11 15:28:52 2008 +0000

    [Makefile.am] Update cairo.def after the set of enabled features is modified.
    
    Bug 13342 corresponds with a rebuild of cairo after removing
    --enable-glitz from the configure line. Under these circumstances,
    the remaining installable headers are not modified and therefore
    cairo.def is not rebuilt and still expects to find a reference to
    cairo_glitz_surface_create. The solution is to rebuild cairo.def after
    any modification to the 'public' headers (installable or otherwise).

 src/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit c26784dbb6d3c90f9e3fa722efa0f9f4fd59bd4c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 11 14:04:56 2008 +0000

    [configure] Version bump for $(EXEEXT)
    
    Adrian Johnson found that adding $(EXEEXT) to TESTS broke the build
    under mingw. After a bit of investigation, the issue was tracked down
    to being caused by automake-1.7. Bump the autotools version
    requirements to avoid the breakage.

 configure.in |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 2574cc35b3478e7333bd4953e90a3edc5f7c4f16
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Jan 11 22:07:26 2008 +1030

    win32-printing: Do not clip and paint with an empty path
    
    For non solid patterns _fill and _show_glyphs sets a clip
    path then paints the pattern. Previously if the path is empty
    SelectClipPath did not set clip. This was probably the cause
    of bug 13657 where the entire page was black.
    
    Fix this by not painting anything if the path is empty.

 src/cairo-win32-printing-surface.c |    8 ++++++--
 src/cairo-win32-private.h          |    1 +
 2 files changed, 7 insertions(+), 2 deletions(-)

commit 7ef4caaf11379cb50a08520f729552553de60660
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Jan 11 22:06:51 2008 +1030

    win32-printing: use fill instead of clip for non win32 fonts
    
    Non Windows fonts are drawn by getting the outline path, setting
    this is the clip path, and painting the source pattern. For
    solid colors this can avoid the clip and just do a fill.

 src/cairo-win32-printing-surface.c |   14 ++++++++++++--
 1 files changed, 12 insertions(+), 2 deletions(-)

commit ef56a6fd93d6192ee1f1948d11c75878aea40f4e
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Jan 11 22:05:54 2008 +1030

    PS: Don't use language level check in EPS
    
    As 'showpage' and 'quit' can not be used in EPS.

 src/cairo-ps-surface.c |   16 ++++++++--------
 1 files changed, 8 insertions(+), 8 deletions(-)

commit b703199525ca02274ef5a8474cdae0cb70705964
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Jan 11 22:05:13 2008 +1030

    Type1-subset: Font name may be NULL
    
    If the FreeType face->family_name is NULL use a CairoFont-x-y name.

 src/cairo-type1-subset.c |   37 ++++++++++++++++++++++++-------------
 1 files changed, 24 insertions(+), 13 deletions(-)

commit 6418a8be8719c9a969d9ec1f8624c841db9d2b90
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 21:35:05 2008 +0000

    [test/.valgrind-suppressions] Update for amd64/sid
    
    Update the valgrind suppressions for the libz and Xrm spam.

 test/.valgrind-suppressions |   20 +++++++++++++++++---
 1 files changed, 17 insertions(+), 3 deletions(-)

commit 2e5f278da11369073eefeeedff7211bacb31ace1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 22:11:42 2008 +0000

    [cairo-pattern] Free the copied pattern on error.
    
    Free the locally allocated pattern if the copy fails.

 src/cairo-pattern.c |   10 +++++++++-
 1 files changed, 9 insertions(+), 1 deletions(-)

commit db246f2fa22920a996a32f11233228e9af1d1abb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 21:32:47 2008 +0000

    [cairo-traps] Typo caught by valgrind.
    
    ==3429== Conditional jump or move depends on uninitialised value(s)
    ==3429==    at 0x4E3FB0F: _cairo_box_round_to_rectangle (cairo-fixed-private.h:196)
    ==3429==    by 0x4E34B29: _cairo_clip_intersect_to_rectangle (cairo-clip.c:162)
    ==3429==    by 0x4E31943: cairo_push_group_with_content (cairo.c:495)
    ==3429==    by 0x403044: draw (clip-zero.c:48)
    ==3429==    by 0x404221: cairo_test_expecting (cairo-test.c:377)
    ==3429==    by 0x64701C3: (below main) (libc-start.c:222)
    
    Caused by setting extents->p2.y to zero twice.

 src/cairo-traps.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 10f6ef98f645d9f9f54d88fcf18683771258d36f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 17:50:45 2008 +0000

    [gitignore] Add mkinstalldirs.
    
    Ignore another autoconf utility script.

 .gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit da769b53e89b1f1ff91886a12a388e5fadec47bb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 17:23:56 2008 +0000

    [configure.in] Fixup usage of _CHECK_FUNCS_WITH_FLAGS within PKG_CHECK_MODULE.
    
    An unwanted side-effect of the recent fix for the paranoid extra check
    for a usable library was that it broke the logic for the absence of the
    module.

 configure.in |   11 ++++++-----
 1 files changed, 6 insertions(+), 5 deletions(-)

commit 409e91b576ad992b41c66c952931c4a3e652dbf9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 15:53:54 2008 +0000

    [cairo-pdf-surface] Review error handling.
    
    Ensure all errors are propagated back to the caller with locally
    allocated resources destroy as required.

 src/cairo-pdf-surface.c |  261 ++++++++++++++++++++++++++++++++---------------
 1 files changed, 177 insertions(+), 84 deletions(-)

commit 6134600988a6b5fcbc72f7897bfc83b37949b677
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 8 14:14:33 2008 +0000

    [cairo-pdf-surface] Skip emitting the font subset if not among resources.
    
    Do not emit the font_subset if we did not successfully add it to the list
    of font resources - can only happen after an error

 src/cairo-pdf-surface.c |   35 +++++++++++++++++++++++------------
 1 files changed, 23 insertions(+), 12 deletions(-)

commit 755a4bb51b458fbc059b6306e371d9dc1c906b04
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 15:30:42 2008 +0000

    [test] Win32 printing backend testing depends upon ghostscript
    
    Using the Win32 printing backend requires ghostscript, so only enable
    those tests if we detect 'gs' during configure.

 boilerplate/cairo-boilerplate.c |    2 ++
 configure.in                    |   17 +++++++++++++++++
 2 files changed, 19 insertions(+), 0 deletions(-)

commit 02b0743458655f44ffc4d429b4ac355df42071f1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 15:22:16 2008 +0000

    [cairo-pattern] Rearrange CAIRO_MUTEX_INITIALIZE.
    
    test/pattern-get-type exposes a bug whereby we try to acquire the
    _cairo_pattern_solid_pattern_cache_lock before initializing the
    mutexes. To fix this move the CAIRO_MUTEX_INITIALIZE() from the
    depths of _cairo_pattern_init() and perform it at the public entry
    points.

 src/cairo-pattern.c |   14 ++++++++++++--
 1 files changed, 12 insertions(+), 2 deletions(-)

commit cbe8d3855efd1254089c1c855c337df326ea52d7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 15:14:15 2008 +0000

    [test] Fixup make check for mingw
    
    Add EXEEXT to TESTS so that mingw builds the correct target.

 perf/Makefile.am |    8 +-
 test/Makefile.am |  313 +++++++++++++++++++++++++++---------------------------
 2 files changed, 161 insertions(+), 160 deletions(-)

commit 9ae4b219e1c5b7a8c139b004a97d86a1ce1d408c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 14:47:16 2008 +0000

    [test/solid-pattern-cache-stress] Check for drand48().
    
    Apply an alternative rand() function if drand48() is not available for
    the platform.

 configure.in                      |    2 +-
 test/solid-pattern-cache-stress.c |   12 ++++++++++--
 2 files changed, 11 insertions(+), 3 deletions(-)

commit 648289c639618cc31394f889f6e329ddcaca41ee
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 14:36:57 2008 +0000

    [configure.in] Add paranoid double checking for (svg|pdf)2png
    
    Due to my incomplete cross-build environment, configure detects the
    presence of rsvg and poppler, but they cannot be used. To make my life
    easier, add a check similar to that used for fontconfig to ensure the
    libraries are usable before compiling the optional test utilites.

 configure.in |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 909c57ce158e41bf2761f82b2678dc1f390051d2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 12:45:58 2008 +0000

    [cairo-pdf-operators] Be consistent in error checks.
    
    Consistently check the output status at the end of each function -
    helps with early error detection and even improves test code coverage!

 src/cairo-pdf-operators.c |   39 ++++++++++++++++++++-------------------
 1 files changed, 20 insertions(+), 19 deletions(-)

commit 4ffb0a80b3aa9e54804082a24c58db0d2527073d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 12:51:07 2008 +0000

    [cairo-paginated-surface] Call the abstract cairo_surface_show_page ().
    
    Use the generic surface layer cairo_surface_show_page() instead of
    directly calling cairo_paginated_surface_show_page(), as the higher
    level performs more error checking.

 src/cairo-paginated-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 9d49c4b10e636c0868d15c50cb1d2a724000fc07
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 14:18:25 2008 +0000

    [configure] Print version info in summary.
    
    Add the cairo version to the configure summary.

 configure.in |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit ea4dec08f7c62ad3c3e81aa06ce0dd5a08936c45
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 13:50:42 2008 +0000

    [configure.in] Fixup fontconfig check.
    
    Correct the check for FcFini() so that the result is actually used.

 configure.in |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit f4e7e7d6b4bb8e96dc8aef1ac673b8d64f65634c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 13:08:23 2008 +0000

    [cairo-path-bounds] _cairo_path_fixed_bounds() should never fail.
    
    _cairo_path_fixed_bounds() should never fail so change return type
    to void and update caller.

 src/cairo-analysis-surface.c |   12 ++++--------
 src/cairo-path-bounds.c      |    8 ++++----
 2 files changed, 8 insertions(+), 12 deletions(-)

commit 5fad969317186520ebbe09f3767907fb3bfd6164
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jan 7 10:03:51 2008 +0000

    [cairo-ft-font] Destroy unscaled font ref on error.
    
    Destroy the local reference taken to the unscaled font if we encounter
    an error whilst creating the derived scaled font.

 src/cairo-ft-font.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 3b1411167c7d9fd94536c69de54dacfaf820e916
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 10 12:55:08 2008 +0000

    [headers] Brute force fixup of including cairoint.h from boilerplate.
    
    More the majority of the typedefs from cairoint.h to
    cairo-types-private.h and fixup cairo-pdf-operators-private.h to
    avoid including cairoint.h.
    
    A better approach would seem to be to rationalise cairoint.h so that it
    only provides the symbol aliasing, moving the types and functions to
    more appropriate private headers. However, this fixes the immediate
    problem of running make check!

 src/cairo-pdf-operators-private.h |    3 +-
 src/cairo-types-private.h         |  169 ++++++++++++++++++++++++++++++++++++
 src/cairoint.h                    |  170 +------------------------------------
 3 files changed, 172 insertions(+), 170 deletions(-)

commit 40142d4bf4184dcae21c85d909d33ddaa4822636
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Jan 10 02:57:30 2008 +1030

    Set the PS level to to minimum required
    
    A problem with the previous commit for checking the PS level is that
    with the default PS level of 3 it prevents PS files from printing on
    Level 2 printers even if no Level 3 operators are used.
    
    As the PS header is created after the page content has been generated,
    it is easy to check the PS Level actually required and set this in the
    header and PS level check code.

 src/cairo-ps-surface-private.h |    1 +
 src/cairo-ps-surface.c         |   10 +++++++---
 2 files changed, 8 insertions(+), 3 deletions(-)

commit 9bccc968466e6b83ceccb76680d5f54912424e8e
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Jan 10 02:34:02 2008 +1030

    Add PS Level check to PS output
    
    http://bugzilla.mozilla.org/show_bug.cgi?id=406376
    
    reported problems with cairo PostScipt output printing black boxes
    instead of images. This was found to caused by printing Level 3
    PostScript to a Level 2 printer.
    
    Add some PostScript code to to the cairo PS prolog to check the
    language level of the printer. If the printer can not print the job, a
    message stating the required language level is printed and the job is
    aborted.

 src/cairo-ps-surface.c |   16 ++++++++++++----
 1 files changed, 12 insertions(+), 4 deletions(-)

commit f20a1a40c3f6d95b4dc89ae4198ad81b7092450c
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Jan 9 01:20:34 2008 +1030

    Fix MSVC 2008 compiler warnings - bug 13698

 src/cairo-win32-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 47bebc8f1d0b6524f8d1eff1fa3f981f1e4c4c33
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Jan 9 01:18:44 2008 +1030

    Fix win32-font problems with Type 1 fonts
    
    This should fix the problems reported in
    
    http://lists.cairographics.org/archives/cairo/2007-November/012172.html
    
    The problem is that GetCharacterPlacement() used in
    _win32_scaled_font_text_to_glyphs returns utf16 instead of glyph
    indices when Type 1 fonts are used.
    
    This has been fixed by using GetGlyphIndices instead of
    GetCharacterPlacement if the font is a Type 1.
    
    _win32_scaled_font_map_glyphs_to_unicode has been fixed work with Type 1
    glyph indices. It now uses GetFontUnicodeRanges and GetGlyphIndices
    to do the reverse lookup.

 src/cairo-win32-font.c |  261 ++++++++++++++++++++++++++++++++++++++++--------
 1 files changed, 218 insertions(+), 43 deletions(-)

commit 25f24e79f84e0c04a8c6944cc6e018e9eb2df997
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Jan 7 21:19:35 2008 +1030

    PDF: Update the PDF page structure comment

 src/cairo-pdf-surface.c |   68 +++++-----------------------------------------
 1 files changed, 8 insertions(+), 60 deletions(-)

commit 21f842f0dfd5dd3cc1fd3b56db034fc4e209adaa
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Jan 7 21:17:26 2008 +1030

    PDF: Remove copy_page
    
    Now that the content stream is no longer split into multiple streams
    it is not possible to implement a copy_page function that shares the
    common content between pages.
    
    Remove this function so the paginated surface will rewrite the
    content from the meta surface.

 src/cairo-pdf-surface.c |   15 +--------------
 1 files changed, 1 insertions(+), 14 deletions(-)

commit e2adb921f8b7619410db971d1524cbeab2dd6102
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Jan 7 21:15:18 2008 +1030

    PDF: Put each fallback image in a separate group
    
    Each fallback image needs to be in a separate group in the knockout
    group. Otherwise transparent edges of adjacent fallback images will
    composite with each other creating visible seams between the images.

 src/cairo-pdf-surface-private.h |    2 +-
 src/cairo-pdf-surface.c         |   26 ++++++++++++++++++++------
 2 files changed, 21 insertions(+), 7 deletions(-)

commit d6a84302a07d2b7e67584029fdb7a882ad246a09
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Jan 7 21:11:46 2008 +1030

    Fix analysis of transformed meta surfaces

 src/cairo-analysis-surface.c |   11 ++++++++---
 1 files changed, 8 insertions(+), 3 deletions(-)

commit 3c725d50db43b848b4ad8f35bcabd5b1d0395924
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Jan 7 21:09:04 2008 +1030

    PDF: Make _SOURCE operator work inside meta surface patterns

 src/cairo-pdf-surface.c |   16 +++++++++++++---
 1 files changed, 13 insertions(+), 3 deletions(-)

commit 6d6b74ac4ce3a9bcab45c338fc31e5a83823cde6
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Jan 7 21:08:09 2008 +1030

    PDF: Support _OPERATOR_SOURCE when nothing under the operation
    
    CAIRO_OPERATOR_SOURCE operations on the PDF backend are now natively
    supported when there is nothing already underneath the operation.

 src/cairo-pdf-surface.c |   64 +++++++++++++++++++++-------------------------
 1 files changed, 29 insertions(+), 35 deletions(-)

commit e195cb551caa40f309127ac7a39e4a17653966c8
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Jan 7 21:05:36 2008 +1030

    Add FALLBACK mode to paginated surface
    
    The PDF surface needs to know when the fallback images start so it can
    close off the content stream and create a knockout transparency group
    for the fallback images. Currently it does this by looking for
    operations with CAIRO_OPERATOR_SOURCE. PDF returns unsupported for
    _SOURCE during the analysis phase so _SOURCE will never appear during
    native operations. However this prevents the PDF surface from
    supporting _SOURCE operations that can be natively supported. For
    example a _SOURCE operation with nothing painting under it can be
    converted to _OVER and natively supported.
    
    A third mode, CAIRO_PAGINATED_MODE_FALLBACK, has been added. The
    paginated surface will set this mode before it paints finer-grained
    fallback images.

 src/cairo-paginated-private.h |   22 +++++++++++++---------
 src/cairo-paginated-surface.c |    4 +++-
 src/cairo-pdf-surface.c       |    2 +-
 src/cairo-types-private.h     |    3 ++-
 4 files changed, 19 insertions(+), 12 deletions(-)

commit d2a5d1ace64cb9efabcb065e7fc28667dd8f779d
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Jan 7 21:04:06 2008 +1030

    PDF: Remove the remaining code for splitting the content
    
    across multiple streams. This fixes the problem reported here
    
    http://lists.cairographics.org/archives/cairo/2007-December/012197.html

 src/cairo-pdf-surface-private.h |   20 +--
 src/cairo-pdf-surface.c         |  429 +++++++++++----------------------------
 2 files changed, 123 insertions(+), 326 deletions(-)

commit 099810b6c39cc6b5529f740282b64185cf56c8d7
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Jan 7 20:59:22 2008 +1030

    PDF: Perform all clipping in the content stream
    
    Previously this was done in a separate group. Now that the PDF backend
    has been re-organized to not interrupt the content stream the clipping
    can be done in the same stream.

 src/cairo-pdf-surface.c |  104 +++++-----------------------------------------
 1 files changed, 12 insertions(+), 92 deletions(-)

commit 83630b1c70b24035b333ccfbbda8b67bd5fdd32e
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Jan 7 20:55:56 2008 +1030

    PDF: Emit all patterns after content stream
    
    To fix this performance issue
    
    http://lists.cairographics.org/archives/cairo/2007-December/012197.html
    
    the PDF surface needs to avoid starting and stopping the content
    stream every time it emits a pattern. This patch makes the PDF surface
    store a list of all patterns used while the content stream is written
    out then write out all the patterns after the content stream is
    closed.

 src/cairo-pdf-surface-private.h |   48 ++-
 src/cairo-pdf-surface.c         | 1128 ++++++++++++++++++++++-----------------
 2 files changed, 687 insertions(+), 489 deletions(-)

commit b4e0864b960887fd71de85d514cb3e855c276080
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Jan 7 20:42:15 2008 +1030

    Use _cairo_pattern_create_copy() in cairo-surface.c
    
    Use _cairo_pattern_create_copy()/cairo_pattern_destroy() instead of
    _cairo_pattern_init_copy()/_cairo_pattern_fini() so the PDF backend
    can reference the patterns and destroy them later.

 src/cairo-surface.c |   84 +++++++++++++++++++++++++-------------------------
 1 files changed, 42 insertions(+), 42 deletions(-)

commit 6ead8feaf3f87e12e686092386dddcc2faa62b7f
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Jan 7 20:41:43 2008 +1030

    Add _cairo_pattern_create_copy()

 src/cairo-pattern.c |   28 ++++++++++++++++++++++++++++
 src/cairoint.h      |    4 ++++
 2 files changed, 32 insertions(+), 0 deletions(-)

commit 26c6159b1e2f5481fb18f5f06f01063002dd6c98
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Jan 7 20:36:32 2008 +1030

    Move the PDF drawing operators into cairo-pdf-operators.c
    
    By defining PostScript functions the same as the PDF drawing
    operators, this code can be shared by both the PDF and PS backends.

 src/Makefile.am                   |    1 +
 src/cairo-pdf-operators-private.h |  106 ++++++++
 src/cairo-pdf-operators.c         |  531 +++++++++++++++++++++++++++++++++++++
 src/cairo-pdf-surface-private.h   |    3 +-
 src/cairo-pdf-surface.c           |  442 ++++---------------------------
 5 files changed, 687 insertions(+), 396 deletions(-)

commit a0e0aae32dfe44cca088736d10d208f328d50a34
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Jan 7 20:34:55 2008 +1030

    PDF: Remove the Type 3 outline glyph code
    
    This code is never used because outline glyphs that go through the
    fallback path are always embedded with Type 1 fallback. The only fonts
    that are embedded as Type 3 are bitmap fonts.

 src/cairo-pdf-surface.c |   90 +++-------------------------------------------
 1 files changed, 6 insertions(+), 84 deletions(-)

commit 5b3f6405d8045d73d31d7e2e30db08e81e9e2360
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Jan 6 16:15:32 2008 +1030

    PDF: Fix gradient-zero-stops test failure

 src/cairo-pdf-surface.c |   24 ++++++++++++++++++++++++
 1 files changed, 24 insertions(+), 0 deletions(-)

commit fb7407c9c4548fc033164790759c4e480b9d8fa0
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Jan 6 15:58:46 2008 +1030

    PS: Fix gradient-zero-stops test failure

 src/cairo-ps-surface.c |   18 ++++++++++++++++++
 1 files changed, 18 insertions(+), 0 deletions(-)

commit f440d894e668994721248dc6c95a936a839870db
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 5 21:20:45 2008 +0000

    Check errno for appropriate error return.
    
    After using fopen() and friends check the global errno to determine the
    most  appropriate error return - especially important when running
    memfault, where correct reporting of NO_MEMORY errors is required.

 src/cairo-output-stream.c |   12 ++++++++++--
 src/cairo-png.c           |   10 ++++++++--
 src/cairo-ps-surface.c    |   11 ++++++++++-
 3 files changed, 28 insertions(+), 5 deletions(-)

commit 68a441e582c6c887e65800302906ddd35cb0291e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 5 19:34:42 2008 +0000

    [cairo-analysis-surface] Return early if the traps is empty.
    
    If the mask is empty, there is nothing to do, so return an early SUCCESS.

 src/cairo-analysis-surface.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 481fd3b4c8d3972ce21399f81b2021a57ed58f00
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 5 19:33:21 2008 +0000

    [cairo-traps] Return zero extents if it contains no traps.
    
    Previously, _cairo_traps_extents () returned the extents
    p1={INT_MAX, INT_MAX} p2={INT_MIN, INT_MIN} for an empty traps leading
    to integer overflow when computing the width using p2-p1 and causing
    further overflows within libpixman. [For example this caused the
    allocation of massive regions with test/mask and the PS backend.]

 src/cairo-gstate.c |    6 +++---
 src/cairo-traps.c  |    6 +++++-
 2 files changed, 8 insertions(+), 4 deletions(-)

commit be126b6842e979dbcb306b2f9f41a2114a149b9a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 5 19:22:57 2008 +0000

    [cairo-analysis-surface] Check for an empty transformed bbox.
    
    After transforming the bbox, check that it has not been projected into
    an empty box.

 src/cairo-analysis-surface.c |   10 ++++++++--
 1 files changed, 8 insertions(+), 2 deletions(-)

commit d9461733af36f2960525a9b33accf500447f5c64
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 4 16:43:54 2008 +0000

    [cairo-ps-surface] Use ctime_r when available.
    
    Use the thread-safe (and non-allocating) ctime_r() instead of ctime()
    if supported by the platform.

 configure.in           |    2 +-
 src/cairo-ps-surface.c |    7 ++++++-
 2 files changed, 7 insertions(+), 2 deletions(-)

commit 7cf9a6e4e39b18f4967afdb7c3c71eca5f4ba8c7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 3 18:37:53 2008 -0800

    Directly check the miter corner to detect wild miters.
    
    The original test for wild miters would only work with a square transform
    (and, in fact, the original code required an identity transform). Instead of
    fixing that, I replaced it with a more obvious test which makes sure the
    miter corner lies between the two faces and not out in space somewhere.

 src/cairo-path-stroke.c |  139 +++++++++++++++++++----------------------------
 1 files changed, 57 insertions(+), 82 deletions(-)

commit 552cf1dbd32eb5933bc93bb3c1ef0fca9d4066aa
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Fri Jan 4 16:19:14 2008 -0800

    Fix cairo_surface_fallback_snapshot's use of release_source_image
    
    &image_extra was being passed instead of image_extra to release; the
    bug only manifested itself when the particular backend did something
    with image_extra.

 src/cairo-surface-fallback.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 81e029edda8c0404c6f0bd1b618e77fb55777c64
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 3 18:17:24 2008 -0800

    Add new miter-precision test. Checks miter joins at many scales.
    
    This demonstrates an error in cairo where miter joins are replaced with
    bevels at high scale factors due to a test added to eliminate wild miters
    drawn when the line faces are nearly parallel.

 test/.gitignore              |    1 +
 test/Makefile.am             |    1 +
 test/miter-precision-ref.png |  Bin 0 -> 931 bytes
 test/miter-precision.c       |   80 ++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 82 insertions(+), 0 deletions(-)

commit b796a2f69d043f6884f42befdc156cb1c527d217
Author: Chris Wilson <ickle@cube.(none)>
Date:   Thu Jan 3 23:00:27 2008 +0000

    [cairo] Update CAIRO_STATUS_LAST_STATUS
    
    A couple of new errors have been added without updating the LAST_STATUS
    value...

 src/cairo.c |    2 +-
 src/cairo.h |    1 +
 2 files changed, 2 insertions(+), 1 deletions(-)

commit c67d99787cb75cd4d773871675b4201b3bf3d5bf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 3 17:33:33 2008 +0000

    [test/surface-pattern-big-scaled-down] Kill the surface leaks.
    
    Destroy the surface and pattern after use.

 test/Makefile.am                            |    1 +
 test/surface-pattern-big-scale-down-ref.png |  Bin 0 -> 226 bytes
 test/surface-pattern-big-scale-down.c       |   11 ++++++++---
 3 files changed, 9 insertions(+), 3 deletions(-)

commit 6a7a07adf98729fc054ea9e7727c5b3c099ae7ee
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 3 16:37:17 2008 +0000

    [test] Update distribution list of ref images.
    
    Add missing *-ps-rgb24-ref.png images, and a couple of tests to .gitignore.

 test/.gitignore  |    3 +++
 test/Makefile.am |   34 ++++++++++++++++++++++++++++++++++
 2 files changed, 37 insertions(+), 0 deletions(-)

commit 399f7c24e31a802e623cf9d63311f3ed7f3a3659
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 23:24:35 2007 +0100

    [cairo-pdf-surface] Continue to close streams even after error.
    
    Do not return after encountering the first error whilst closing streams,
    but continue to close any auxiliary streams before finally reporting the
    error. Also during finalize check that we have closed any streams that
    may have been left open after encountering an error.

 src/cairo-pdf-surface.c |   54 ++++++++++++++++++++++++++++++++++++++--------
 1 files changed, 44 insertions(+), 10 deletions(-)

commit 42e77c1077f389357faab214d7ad8bc18709cb31
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 16:59:45 2007 +0100

    [cairo-pdf-surface] Destroy closed streams.
    
    Destroy the streams when closing groups in order to free the associated
    resources.

 src/cairo-pdf-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 42bfe370f8df800419c1c7acbec1a7e51077d462
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 3 14:46:40 2008 +0000

    [cairo-pdf-surface] Propagate error from emit_glyph().
    
    Propagate the error and return early rather than setting the error on
    the surface and continuing.

 src/cairo-pdf-surface.c |   31 ++++++++++++++++++++-----------
 1 files changed, 20 insertions(+), 11 deletions(-)

commit 2a8e80f59ef61cff30d643bdd6ad2306d6068c5c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 3 10:34:37 2008 +0000

    [cairo-gstate] Rearrange invalid-matrix guards.
    
    Test for an invalid matrix before use. Whilst this has no effect on the
    result, an INVALID_MATRIX error will be raised on the context, placing
    the guards first makes the code obviously safe and avoids manipulation
    of invalid matrices.

 src/cairo-gstate.c |   15 ++++++++-------
 1 files changed, 8 insertions(+), 7 deletions(-)

commit e89cc8fa15ac418175e58ee41359a923bbc26f73
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Dec 18 09:23:29 2007 +0000

    [cairo-scaled-fonts-subsets] Memleak and error reporting.
    
    Fix leaks of strings and hash table from
    _cairo_scaled_font_subset_create_glyph_names().
    
    Whilst we are in the vicinity, review the error handling.

 src/cairo-ft-font.c             |    8 ++-
 src/cairo-pdf-surface.c         |   12 ++++-
 src/cairo-scaled-font-subsets.c |   94 ++++++++++++++++++++-------------------
 src/cairo-win32-font.c          |    6 ++-
 src/cairoint.h                  |    2 +-
 5 files changed, 68 insertions(+), 54 deletions(-)

commit 51f37995c9cb5efa22a36a0199e24a684fa61279
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 2 11:06:03 2008 +0000

    Remove cairo_private from *.c files.
    
    The cairo_private markup is only required in the headers, so cleanup the
    couple of remaining occurrences in the source files.

 src/cairo-clip.c                |    2 +-
 src/cairo-scaled-font-subsets.c |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 48fd65cdb50cd1fa0a6ada5edf7ef307586eb5fd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 2 10:59:44 2008 +0000

    [cairo-svg-surface] Propagate the original error status.
    
    Return the error status from the paginated surface instead of
    hard-coding a bare CAIRO_STATUS_NO_MEMORY.

 src/cairo-svg-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ba392488cb926c2697b8ccfa7337da1e66d78baa
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 2 10:58:13 2008 +0000

    [cairo-ps-surface] Wrap error site with _cairo_error().
    
    Wrap the original allocation error site with _cairo_error().

 src/cairo-ps-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 4442acc96601db21a788e088040cb1f2fccdf400
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 2 10:54:30 2008 +0000

    [cairo-atsui-font] Minor _cairo_error() tidy.
    
    Inline the use of _cairo_error() for slightly improved readability.

 src/cairo-atsui-font.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 2a0267639a39cacada89c59451faa8051041e436
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 2 10:52:28 2008 +0000

    [cairo-ps-surface] Wrap error site with _cairo_error().
    
    Markup the original error site for CAIRO_STATUS_TEMP_FILE_ERROR with
    _cairo_error().

 src/cairo-ps-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit cc5bd4725564d0add79c764b35acff78e43d0c00
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 2 10:50:55 2008 +0000

    [cairo-svg-surface] Wrap a couple of error sites with _cairo_error().
    
    Wrap a couple of bare CAIRO_STATUS_NO_MEMORY with a call to
    _cairo_error().

 src/cairo-svg-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit daf77ed3cb0d24f35ebb43760d6ba6de639d4636
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 2 10:41:06 2008 +0000

    [cairo-type1-subset] Remove the unused return value.
    
    Nobody actually used the index returned by
    cairo_type1_font_subset_use_glyph(), so remove it.

 src/cairo-type1-subset.c |    9 +++------
 1 files changed, 3 insertions(+), 6 deletions(-)

commit fd8bf678536877d9b016264d40a101a1fd2d9e25
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 2 10:37:58 2008 +0000

    [cairo-truetype-subset] Propagate error from failing to allocate padding.
    
    Before filling the padding, check that we have successfully allocated
    the buffer - otherwise propagate the failure.

 src/cairo-truetype-subset.c |   51 +++++++++++++++++++++++++++----------------
 1 files changed, 32 insertions(+), 19 deletions(-)

commit ad0a2524ffdc9cc949d11de3aa51c429f13e12b7
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jan 2 15:09:58 2008 +0100

    [cairo-directfb] Optimize blend functions in fill_rectangles(), too.

 src/cairo-directfb-surface.c |   25 ++++++++++++++++++++++++-
 1 files changed, 24 insertions(+), 1 deletions(-)

commit 060f384310e887f7f431a98e847b8a36fc303a0c
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Dec 29 00:26:11 2007 +1030

    Fix PS/PDF meta surface patterns
    
    This was failing with more than one level of push/pop group.  The
    problem was that the meta surface replay in PS/PDF emit_meta_surface
    was replaying all the meta surface commands insteads of only the
    natively supported commands. The analysis surface has also been
    changed to replay meta surface patterns back to the one analysis
    surface instead of creating a separate analysis surface for each
    pattern. The analysis surface now transforms bounding boxes with the
    meta surface pattern matrix so that fallback regions are correctly
    tracked.

 src/cairo-analysis-surface.c  |   44 +++++++++++++++++++++++++++++++---------
 src/cairo-meta-surface.c      |   18 +---------------
 src/cairo-paginated-surface.c |    1 +
 src/cairo-pdf-surface.c       |    4 ++-
 src/cairo-ps-surface.c        |   20 ++++++++++++------
 5 files changed, 52 insertions(+), 35 deletions(-)

commit 4fa46e3caaffb54f4419887418d8d0ea39816092
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Dec 29 00:15:03 2007 +1030

    Implement a win32 tmpfile() function
    
    Bug report and proposed patch at:
    http://lists.cairographics.org/archives/cairo/2007-December/012529.html
    
    On Windows the tmpfile() function creates the file in the root
    directory. This will fail if the user does not have write access to the
    root directory.
    
    Implement _cairo_win32_tmpfile() that is #defined as tmpfile() on
    Windows. This function uses GetTempPath() and GetTempFileName() to
    create the temporary file. CreateFile() is used to open the file so
    the DELETE_ON_CLOSE flag can be set.

 src/Makefile.am   |    3 +-
 src/cairo-win32.c |   98 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/cairoint.h    |    6 +++
 3 files changed, 106 insertions(+), 1 deletions(-)

commit dcacad932334bbcc3cf6b1df3b37412db5017116
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Dec 29 00:13:24 2007 +1030

    PS: Use _TEMP_FILE_ERROR for temp file errors

 src/cairo-ps-surface.c |   18 +++++++++++++++---
 1 files changed, 15 insertions(+), 3 deletions(-)

commit bd44d114a6d4271a4a15cf7d70a996e73a86751c
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Dec 29 00:12:44 2007 +1030

    Add CAIRO_STATUS_TEMP_FILE_ERROR

 src/cairo.c |    2 ++
 src/cairo.h |    4 +++-
 2 files changed, 5 insertions(+), 1 deletions(-)

commit e82b0f46b2ea6ebcee5ea5cc09e9ab5c6cc383fb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Nov 14 00:45:24 2007 +0000

    [cairo-path-fixed] Consolidate cairo_path_buf_t when copying.
    
    When copying the cairo_path_fixed_t, consolidate the list of
    dynamically allocated cairo_path_buf_t into a single buffer.

 src/cairo-path-fixed.c |   33 +++++++++++++++++++++++++--------
 1 files changed, 25 insertions(+), 8 deletions(-)

commit e0187ad49b754c4024f1999155ed248616028582
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 27 12:46:13 2007 +0000

    [cairo-path-fixed] Ensure the points array is naturally aligned, take 2.
    
    By enlarging buf_size to ensure the correct alignment of the points
    array with the cairo_path_buf_t block, we can efficiently use the
    padding bytes to store more ops.

 src/cairo-path-fixed.c |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

commit d8169b8cef041b4dbcea44e050df28659f4846aa
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 27 10:45:25 2007 +0000

    [cairo-path-fixed] Ensure the array of points is correctly aligned.
    
    In http://bugs.gentoo.org/show_bug.cgi?id=203282, it was identified that
    the cairo_path_buf was causing unaligned accesses (thus generating SIGBUS
    on architectures like the SPARC) to its array of points. As we manually
    allocate a single block of memory for the cairo_path_buf_t and its
    arrays, we must also manually ensure correct alignment - as opposed to
    cairo_path_buf_fixed_t for which the compiler automatically aligns the
    embedded arrays.

 src/cairo-path-fixed.c |    9 ++++++---
 1 files changed, 6 insertions(+), 3 deletions(-)

commit 7f69c2588b33d415f544c2ee24d85c83a8d7cd69
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 20 21:15:41 2007 +0000

    [cairo-ps-surface] Missing status checks.
    
    Check and propagate the error status.

 src/cairo-ps-surface.c |   53 +++++++++++++++++++++++++++++------------------
 1 files changed, 33 insertions(+), 20 deletions(-)

commit 51523aec8177224d3f64f55ca2e61c64fe801a56
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 20 21:15:08 2007 +0000

    [cairo-meta-surface] Remove redundant _cairo_error().
    
    Remove the _cairo_error() from the return, as it has already been called
    immediately after the error was first detected.

 src/cairo-meta-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 146484e3122958212d4a69fff97d392451dcbeaa
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 20 21:13:31 2007 +0000

    [valgrind] Update zlib suppressions.
    
    Match the zlib library as found on hardy+dbgsym.

 test/.valgrind-suppressions |   37 +++++++++++++++++++++++++++++++++++++
 1 files changed, 37 insertions(+), 0 deletions(-)

commit d4d3873bccea82bb3ae20bfcbab3158fa5df41b3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 20 18:21:46 2007 +0000

    [cairo] Correct the documentation for cairo_get_group_target().
    
    cairo_get_group_target() can never return NULL, but will always
    return the current destination surface.

 src/cairo.c |   20 +++++++++++---------
 1 files changed, 11 insertions(+), 9 deletions(-)

commit 3bf06c336629d9a485fdb150058897e5a6a30b45
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 20 18:15:48 2007 +0000

    [test/*] Create new surfaces using the group target.
    
    cairo_get_target() returns the original surface passed to
    cairo_create(), and not the current destination as required when
    testing drawing to the same surface using multiple contexts.
    
    For completeness we also use the group target when creating similar
    surfaces within the tests (to check that similar surfaces of similar
    surfaces also work).

 perf/cairo-perf-cover.c       |    4 ++--
 test/cairo-test.c             |    2 +-
 test/clip-nesting.c           |    2 +-
 test/clip-operator.c          |    2 +-
 test/clip-zero.c              |    2 +-
 test/device-offset-positive.c |    2 +-
 test/device-offset.c          |    2 +-
 test/get-clip.c               |    2 +-
 test/get-path-extents.c       |    2 +-
 test/invalid-matrix.c         |    2 +-
 test/mask.c                   |    4 ++--
 test/meta-surface-pattern.c   |    2 +-
 test/operator-clear.c         |    2 +-
 test/operator-source.c        |    4 ++--
 test/pixman-rotate.c          |    2 +-
 test/self-copy.c              |    2 +-
 test/source-clip-scale.c      |    2 +-
 test/source-clip.c            |    2 +-
 test/svg-clip.c               |    2 +-
 test/unbounded-operator.c     |    2 +-
 20 files changed, 23 insertions(+), 23 deletions(-)

commit 643834e7aa3e90678276453439017359ef942c9e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 20 17:51:48 2007 +0000

    [cairo-surface] Return UNSUPPORTED for acquire_(dest|source)_image.
    
    If the backend does not support fallbacks ie backend->acquire_dest_image
    or backend->acquire_source_image is NULL, then return
    CAIRO_INT_STATUS_UNSUPPORTED rather than attempt to jump to the NULL
    hooks.

 src/cairo-surface.c |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

commit 14454e12d8df606ed4b79c6e7cda4071b00ee581
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 20 17:49:06 2007 +0000

    [cairo-test] Wrap test function with cairo_save/restore().
    
    Restore the context to the original state before blitting the
    group surface in order to remove any residual state such as a clip path.

 test/cairo-test.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit d0119a5aa24a8b426ec64bb2eaa205b7f08ae58a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Dec 20 12:30:35 2007 -0500

    [cairo-unicode] Don't compile _cairo_utf8_to_utf16 on Linux
    
    The _cairo_utf8_to_utf16() is only used in win32 and atsui font backends.
    Don't build it if none of those two are available.

 src/cairo-unicode.c |    2 ++
 src/cairoint.h      |    5 +++++
 2 files changed, 7 insertions(+), 0 deletions(-)

commit 281b11aef14f04b12639028e2a76bbdc7a1a32bf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 20 17:11:03 2007 +0000

    [cairo-test] Use CAIRO_OPERATOR_SOURCE when painting the group surface.
    
    To correctly copy a surface onto the destination irrespective of its
    content requires the SOURCE operator. Forgetting to do so here causes
    uninitialized pixels to be mixed into the result and the failure of
    many tests for the similar surface. Oops...

 test/cairo-test.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit ed3fccec01257a7c52694150cda9ea1059c33585
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Dec 17 22:37:31 2007 +0000

    [pdiff] Avoid the memleak for small surfaces.
    
    Allocate the arrays after the guard against small surfaces to avoid
    leaking them.

 test/pdiff/pdiff.c |   40 +++++++++++++++++++++++++++-------------
 1 files changed, 27 insertions(+), 13 deletions(-)

commit df938a515bd59138421b6ab4419966805d027b52
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Dec 17 21:39:25 2007 +0000

    [cairo-path-bounds] Check for the empty path.
    
    Avoid returning uninitialized variables if we're asked to find the
    bounds of an empty path - in which case we just return a rectangle
    of zero width and height similar to the empty clip region.

 src/cairo-path-bounds.c |   18 ++++++++----------
 1 files changed, 8 insertions(+), 10 deletions(-)

commit c2adfb4052f72e1e6e6d283de3428b5453dac537
Author: Jim Meyering <jim@meyering.net>
Date:   Sat Dec 15 16:42:25 2007 +0100

    Don't leak memory upon failed realloc.
    
    * cairo-glitz-surface.c (_cairo_glitz_surface_composite_trapezoids):
    
    Signed-off-by: Jim Meyering <meyering@redhat.com>

 src/cairo-glitz-surface.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 45951345983f100e935af2fe2f5397d64c195f98
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Dec 18 16:00:21 2007 -0500

    [directfb] Fix header include order to include cairoint.h first

 src/cairo-directfb-surface.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

commit 18f4f02f723cd005c159c8a0044dd385d551f022
Author: Nis Martensen <nis.martensen@web.de>
Date:   Tue Dec 18 15:59:19 2007 -0500

    [src/check-cairoint.sh] Fix typo in shell script

 src/check-cairoint.sh |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 8343d6cc2a5e9198e1205e431de018f74107d9d8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Dec 17 13:42:07 2007 +0000

    Replace various uses of CAIRO_STACK_BUF_SIZE with a single macro.
    
    In http://bugs.freedesktop.org/show_bug.cgi?id=13699, Pavel Vozenilek
    reports a duplicate define for computing the appropriate length for an
    on-stack array. The macro in question, and a few other places, was
    performing CAIRO_STACK_BUF_SIZE/sizeof(stack[0]) so we can simplify
    them slightly by using a common macro.

 src/cairo-bentley-ottmann.c |    2 +-
 src/cairo-gstate.c          |   10 ++++------
 src/cairo-image-surface.c   |   12 ++----------
 src/cairo-region.c          |    4 +---
 src/cairo-surface.c         |    2 +-
 src/cairo-traps.c           |    4 +---
 src/cairo-xlib-surface.c    |    7 ++-----
 src/cairoint.h              |    2 ++
 8 files changed, 14 insertions(+), 29 deletions(-)

commit 627a8b4a2f2824f156893382561f563d0aa9e90d
Author: Benjamin Otte <otte@gnome.org>
Date:   Mon Dec 17 12:42:14 2007 +0100

    [directfb] replace u32 with uint32_t
    
    This fix makes it compile for me again

 src/cairo-directfb-surface.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 9637ffc62fab1b42ceb764d1b42e70654e0cbe2b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Dec 17 01:55:15 2007 -0500

    [cairo-xlib] Minor cleanup and add comment

 src/cairo-xlib-surface.c |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

commit 83963d2a9ec445e23cfbe692b877177a9d9d135e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Dec 17 01:19:53 2007 -0500

    [cairo-ft] Revert "Force non-AA text when using a bitmap strike with only scaling transform." (#13479)
    
    The reasoning for that commit was that fonts with bitmap strikes should be
    rendered with antialiasing off for those (hopefully) few glyphs that don't
    have a bitmap.
    
    However, it turns out, there are fonts that have some, but very few, bitmaps,
    and this changed forces non-AA rendering on them.  We now support multiple
    glyph formats per font in the Xlib backend, so backing this out to let every
    glyph render as is.  Fontconfig rules can be used to force AA off on a per-font
    basis.
    
    This reverts commit 06af5c2891b89da28581c30afcde06c5442884db.

 src/cairo-ft-font.c |   24 ------------------------
 1 files changed, 0 insertions(+), 24 deletions(-)

commit 805b668260c47e6d3d854361fcc53f12bd2a57e1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Dec 17 01:14:27 2007 -0500

    [cairo-xlib] Support scale fonts with glyphs of multiple formats (#13479)
    
    We maintain three Xrender glyphsets per scaled font, one for each of A1, A8,
    and ARGB32.  This is required to correctly support fonts with bitmaps for
    some glyphs but not all.

 src/cairo-xlib-surface.c |  179 +++++++++++++++++++++++++++++++++++-----------
 1 files changed, 136 insertions(+), 43 deletions(-)

commit f6dd037cf3231c2dd0550b0f2e6f3179202c299f
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Dec 14 14:02:43 2007 -0800

    Remove rasterization when a paginated surace is used as a source
    
    This was an old workaround for a bug that seems to no longer
    exist. Thanks to Donn Ingle for pointing out the problem.

 src/cairo-paginated-surface.c |   34 ----------------------------------
 1 files changed, 0 insertions(+), 34 deletions(-)

commit 9b3ce8b17ab8179131ae45a227d76241916f42e8
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Dec 12 23:41:53 2007 +1030

    PS: Use the correct bounding box in Type 3 fonts
    
    Previously this was a fixed size.

 src/cairo-ps-surface.c |   44 +++++++++++++++++++++++++++++++++++++-------
 1 files changed, 37 insertions(+), 7 deletions(-)

commit afdd53d35f53cfe3440c38531c112a586d3d7486
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Dec 12 23:35:56 2007 +1030

    PS: Return the status for emit_image and gradients

 src/cairo-ps-surface.c |   21 +++++++++++++++------
 1 files changed, 15 insertions(+), 6 deletions(-)

commit 55f5c4ffda5df9064bd0a5a6a2cf1a09b058afbb
Author: Boying Lu <brian.lu@sun.com>
Date:   Wed Dec 12 21:05:57 2007 +1030

    Remove cairo_private from static declaration

 src/cairo-paginated-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 942e3d53088a4d2b05c86d3f82b76cfbe707b3b5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Dec 11 15:50:05 2007 +0100

    [cairo-directfb] Support some environment variables
    
    Added a couple of (boolean) env. vars affecting the backend:
    CAIRO_DIRECTFB_NO_ACCEL, disables acceleration
    CAIRO_DIRECTFB_ARGB_FONT, enables using ARGB fonts instead of A8

 src/cairo-directfb-surface.c |   99 ++++++++++++++++++++++++++++++++---------
 src/cairo-directfb.h         |   12 +++++-
 2 files changed, 88 insertions(+), 23 deletions(-)

commit f3cec9d1c2a4d43cd734aae4bc7f8e7410a5e89a
Merge: 08516d9 c26084a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Dec 10 22:58:06 2007 +0100

    Merge branch 'master' of git+ssh://klan@git.freedesktop.org/git/cairo

commit c26084a45fcb6ac467cad8bdcedfb2f524b857fc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Dec 10 14:38:09 2007 -0500

    Pass $(MAKE) to test shell scripts (#13591)

 src/Makefile.am  |    2 +-
 src/check-def.sh |    3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)

commit 78dac47399038cc9a05b82b01c4e4b35132f0784
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Dec 3 02:31:40 2007 -0500

    [util/malloc-stats.c] Add a public function malloc_stats()
    
    Apparently glibc already provides the function:
    
      void malloc_stats (void);
    
    So, like we do for backtrace_symbols(), override the public symbol.
    It still is defined as __destructor__ and runs at program finalization.

 util/malloc-stats.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

commit 08516d97a1b34cbb119d6d842ae31e4cb4e08740
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Dec 10 18:54:01 2007 +0100

    [cairo-directfb] Merging from directfb.org
    
    - Improved performance in case of surface conversion: allocate a shadow buffer that can only grow
    - Fixed support for small surfaces (less than 8x8)
    - Optimize the blending function according to the surface format
    - Added _directfb_categorize_operation(): selects the blitting function according to the transform matrix
    - Avoid inverting the matrix when doing a simple StretchBlit()
    - Use TextureTriangles() instead of StretchBlit() when scale factors are negative
    - Added support for ARGB32 fonts (converted to A8 internally)
    - Removed unused functions (flush() and mark_dirty_rectangle())
    - Code cosmetics

 src/cairo-directfb-surface.c |  847 +++++++++++++++++++++++-------------------
 1 files changed, 466 insertions(+), 381 deletions(-)

commit dd71ac910c3c176687fe4da582876bf46becf6d5
Author: Benjamin Otte <otte@gnome.org>
Date:   Mon Dec 10 13:17:09 2007 +0100

    typo

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 1f1f96d6459014a236611edf811a60225a652044
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Sat Dec 8 22:32:16 2007 +0100

    [SVG] Fix a minor issue when emitting a radial gradient with r1 == r2.
    
    Minor because I don't know how the output is supposed to look in this case.

 src/cairo-svg-surface.c |   15 ++++++++-------
 1 files changed, 8 insertions(+), 7 deletions(-)

commit 19680f545a1620d944322775c1b85b0e5f93fa0f
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Thu Dec 6 21:31:15 2007 +0000

    [quartz] fix gradient-zero-stops crash (moz#407104)
    
    Fixes failure in gradient-zero-stops test, reported
    by Boris Zbarsky (thanks!) as Mozill a bug#407104.

 src/cairo-quartz-surface.c |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

commit e6c34bb6912d2801ee6c0d56ec0e98739c786e9f
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Thu Dec 6 21:31:14 2007 +0000

    [quartz] refactor gradient handling
    
    Avoid checking the gradient type twice. This refactor
    also makes it easier to check when the gradient has no stops,
    and will make it easier to separate out the different
    implementations of EXTEND_REPEAT, REFLECT for linear and
    radial gradients.

 src/cairo-quartz-surface.c |  206 +++++++++++++++++++++++---------------------
 1 files changed, 107 insertions(+), 99 deletions(-)

commit b81c8473bd0b8b829dc7eba9a105890f0c2f1158
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Thu Dec 6 21:31:10 2007 +0000

    [test] add test for gradient with no stops
    
    Boris Zbarsky reported a bug where having zero stops in a
    gradient pattern would crash in the quartz surface. This
    test checks for that case. Mozilla bug#407104.
    
    This also crashes testing pdf; and the ps, svg surfaces
    look suspicious (they reference stops[0]) but I havent
    been able to test them yet.

 test/Makefile.am                       |    3 +
 test/gradient-zero-stops-ref.png       |  Bin 0 -> 105 bytes
 test/gradient-zero-stops-rgb24-ref.png |  Bin 0 -> 105 bytes
 test/gradient-zero-stops.c             |   66 ++++++++++++++++++++++++++++++++
 4 files changed, 69 insertions(+), 0 deletions(-)

commit a7ae9c45d924effdd61390267eb216302a270d8e
Author: Peter Weilbacher <mozilla@weilbacher.org>
Date:   Thu Dec 6 16:46:28 2007 +0100

    [os2] add memory allocation wrappers for pixel buffers
    
    Add ability to use OS/2 APIs instead of C library functions to manage
    pixel buffer allocations. This is to work around heap fragmentation.
    This implements two wrapper functions which replace _cairo_alloc_abc and
    free and when compiled with OS2_USE_PLATFORM_ALLOC the OS/2 functions
    DosAllocMem and DosFreeMem will be used for allocation/deallocation.
    
    Also try to minimize the heap when shutting down the cairo library.

 src/cairo-os2-surface.c |  108 +++++++++++++++++++++++++++++++++++------------
 1 files changed, 81 insertions(+), 27 deletions(-)

commit be79779331ee29c0bfb74b728227719bb5dead6e
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Dec 5 09:24:17 2007 -0800

    Restrict initial buggy version to X.Org 6.7 rather than 6.0
    
    Also add some comments describing the test.

 src/cairo-xlib-display.c |    9 ++++++++-
 1 files changed, 8 insertions(+), 1 deletions(-)

commit d4138d1161c6b683fd0ef62a8d49ccf4ec4674bc
Author: Bernardo Innocenti <bernie@codewiz.org>
Date:   Wed Dec 5 07:04:09 2007 -0500

    Fix version check for buggy_repeat on modular Xserver 1.x
    
    The versioning of the X server has restarted from 1.0 in the
    modular build.  So we adjust the text to avoid considering
    the new servers buggy.

 src/cairo-xlib-display.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 946b8fedb57fc0c70e4f82b2151433768479a11c
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Dec 5 02:30:58 2007 -0800

    Fix misspellings

 NEWS |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 94a35c7b71b2219d68e81272ce6328e46ae0e91e
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Dec 5 02:28:20 2007 -0800

    Fix version number typo

 NEWS |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 6f2ec12b882e49b425b22145592243b8ce75b6a4
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Dec 5 02:26:05 2007 -0800

    Increment version to 1.5.5 after the 1.5.4 snapshot

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e0c0275e1764502cfd1d0e93e374b4ed396f0073
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Dec 5 02:06:33 2007 -0800

    Increment version to 1.5.4 and to 14:1:12

 configure.in |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 11aaf992fb5d3d86f261ba48306adfaace9f96ea
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Dec 5 01:52:03 2007 -0800

    NEWS: Add notes for 1.5.4

 NEWS |   57 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 57 insertions(+), 0 deletions(-)

commit 150564c7f8792fa2217fc2574e9e1925c9cd500f
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Dec 4 14:05:47 2007 -0800

    [quartz] use rectangle_int_t, not rectangle_int16_t

 src/cairo-quartz-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e8574022f949559c069da30f11dee8680fc59586
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Dec 4 13:54:32 2007 -0800

    [quartz] cleanup: remove trailing whitespace

 src/cairo-quartz-surface.c |   22 +++++++++++-----------
 1 files changed, 11 insertions(+), 11 deletions(-)

commit ee01a94726b3c0782fa182c9e874b2ed57e71aca
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Dec 4 13:53:03 2007 -0800

    [quartz] Use CGContextDrawTiledImage if available
    
    Use this 10.5-only method if available, as it greatly speeds up
    tiled image rendering (EXTEND_REPEAT).

 src/cairo-quartz-surface.c |   96 +++++++++++++++++++++++++++++---------------
 1 files changed, 64 insertions(+), 32 deletions(-)

commit 2c25033e14d7d9f705c27683dfb093318d67910b
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Dec 4 13:49:59 2007 -0800

    [quartz] Handle creating 0x0 surfaces
    
    Make all 0x0 surfaces be no-ops when used in a rendering operation.

 src/cairo-quartz-surface.c |  109 ++++++++++++++++++++++++++++++++++---------
 test/.gitignore            |    1 +
 test/Makefile.am           |    1 +
 test/clip-zero.c           |   80 ++++++++++++++++++++++++++++++++
 4 files changed, 168 insertions(+), 23 deletions(-)

commit 407ed0a6e7183c4fc6da1e988fada19c82ccef8a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Dec 3 09:59:52 2007 +0000

    [Makefile.am] Add lcov-clean to distclean.
    
    Clean the gcov temporary files when doing a full clean - spotted in a
    patch by Patrick Hulin to adapt cairo's lcov targets to glib.

 Makefile.am |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 9c732594039b164a1e08125c35ec9d04278f0cbf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Dec 2 17:55:35 2007 +0000

    [Makefile.am] Wrap lcov make targets within an AM_CONDITIONAL.
    
    Hide 'make lcov' and friends unless the user has actually enabled lcov
    supported during configure.

 Makefile.am  |   17 ++++++++++++-----
 configure.in |    4 ++++
 2 files changed, 16 insertions(+), 5 deletions(-)

commit 5f38e215ed4ec930492ee373db37a767d85a6ee8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Dec 1 22:44:54 2007 -0500

    [README] Remove the Dependencies section as it falls out of date easily

 README |   89 ----------------------------------------------------------------
 1 files changed, 0 insertions(+), 89 deletions(-)

commit b46bb58e11f9d7b7fa68a64ca887c9b996b8f6f2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Dec 1 20:41:55 2007 -0500

    [configure.in] Bump freetype required version to 2.1.9 (#13482)

 configure.in |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit b701b4263048c3641f77796b9ea7bdc60b9815f7
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Dec 2 01:36:43 2007 +1030

    win32: Implement _cairo_win32_scaled_font_init_glyph_surface()
    
    This is required when using win32 bitmap fonts with PS/PDF surfaces.

 src/cairo-win32-font.c |   63 ++++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 61 insertions(+), 2 deletions(-)

commit 1441e165f2338bc6a8e2945baca77611ff417b2f
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Dec 2 00:50:28 2007 +1030

    Fix regression in Type1 Fallback
    
    As a result of the changes to improve the status checking,
    _cairo_type2_charstrings_init() was failing due to the failure
    status returned when the font->output stream is destroyed.
    This is because _cairo_type2_charstrings_init() does not
    create an output stream.
    
    Fix this by initializing font->output to NULL and only
    destroy it if not NULL.

 src/cairo-type1-fallback.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit e6166f7b442ae55128b417559e48250c287e49b6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Dec 1 04:19:39 2007 -0500

    Convert bash scripts to regular sh ones for greater portability

 perf/cairo-perf-diff |   31 ++++++++++++++++---------------
 src/check-def.sh     |   12 ++++++------
 src/check-plt.sh     |    6 +++---
 3 files changed, 25 insertions(+), 24 deletions(-)

commit 0d932f43fe17b2b65d9e52ff8f9c16122b525223
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Nov 30 16:19:45 2007 -0800

    Explicitly call bash for bash-specific scripts
    
    Thanks to Solaris-using Brian Cameron for pointing out that our
    shell scripts are bash-specific. We'd be glad if someone cared to
    rewrite them to not require bash, but for now let's have truth in
    advertising at least.

 perf/cairo-perf-diff |    2 +-
 src/check-def.sh     |    2 +-
 src/check-plt.sh     |    2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit f4b93cceb7fb83de558ed058915f92d4f75c1a6a
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Nov 29 23:18:45 2007 +1030

    PS: Use correct glyphs widths for Type 3 fonts
    
    Previously the widths were set to 0.

 src/cairo-ps-surface.c |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

commit 2729af6c123983c1599fae9f7a0fac88ad320d7c
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Nov 29 23:07:47 2007 +1030

    PS: Fix the Type 3 FontBBox
    
    This was previously a fixed size. Make it [0 0 0 0] the same as the
    other fonts.

 src/cairo-ps-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 77aab8fdbb62e4e0ec0260651db7255d168cb25e
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Nov 29 23:03:40 2007 +1030

    PS: Don't emit an image for Type 3 .notdef glyph
    
    Make the .notdef procedure an empty procedure instead
    of creating an empty image mask. This reduced the size
    of the PS file.

 src/cairo-ps-surface.c |   18 ++++++++++--------
 1 files changed, 10 insertions(+), 8 deletions(-)

commit 78e8d3d9bd2d4652f636a668a3fa53ef9edfd9ae
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Nov 29 22:54:54 2007 +1030

    PS: Fix the bounding boxes of Type 3 glyphs
    
    When viewing with ghostscript the glyphs were clipped

 src/cairo-ps-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 97b0d8b3c376f7848514debbe0697a2159a26eb9
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Nov 29 22:36:07 2007 +1030

    PS: Make Type 3 fonts text selectable
    
    Put the glyph names in the Encoding array the same as is done for
    Type 1 and Type42 fonts.
    
    Acroread and Evince are still unable to correctly extract the text
    after conversion with ps2pdf. However examining the pdf file shows
    the glyph names are correct so this is probably a limitation of
    Acroread and Evince.

 src/cairo-ps-surface.c |   46 ++++++++++++++++++++++++++++++----------------
 1 files changed, 30 insertions(+), 16 deletions(-)

commit 5e8f60531a09f357db38c4b646b1bbd29b97a891
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Nov 29 09:20:01 2007 +1030

    PS: Ensure that xyshow operator has a pair of offsets for each glyph
    
    The last entry should have been "0 0" instead of "0".

 src/cairo-ps-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ba239a474a5cab36098b8f4a98f36aa6281f7da9
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sun Nov 18 20:30:49 2007 +0000

    [quartz] zero memory on bitmap creation
    
    7 quartz/argb32/similar tests were showing failures due to
    random bits being set. The problem turned out to be that the
    initial test surface was not cleared before the similar surface
    was created by push_group. The problem behaviour is more obvious
    if you run the tests with MallocScribble=1.
    
    Fix this by calling memset after bitmap allocation; the multiplication
    here cannot overflow since we already checked that in malloc_ab.

 src/cairo-quartz-surface.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 58e828a9a31b91c80336fc4ce323b061226dde2b
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sun Jul 1 16:11:07 2007 +0100

    [quartz] fill with alpha for EXTEND_NONE
    
    The implementation of EXTEND_NONE was not filling areas outside
    the image with rgba(0,0,0,0). This showed up on the operator-source
    test, the fix makes the quartz and image renderings identical.

 src/cairo-quartz-surface.c |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

commit 39b8ddf07994747c039ee74c64a0cc97a4c7776a
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Thu Nov 15 11:57:40 2007 -0800

    [win32] Remove double-free in win32 font code in init_glyph_path
    
    Fixes bug #13243.

 src/cairo-win32-font.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 50d5f5a4e6d7424694b0b27fc0c3a00c9eb203bb
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Thu Nov 15 11:56:56 2007 -0800

    [quartz] Fix gradients; the wrong color field was being used
    
    The wrong color field was being used, effectively making gradients always
    have transparent black as their color stops.

 src/cairo-quartz-surface.c |   24 ++++++++++++------------
 1 files changed, 12 insertions(+), 12 deletions(-)

commit bcb0f57e5eca58480e24251777f0b967e1aadefe
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Wed Nov 14 01:50:34 2007 +0000

    [quartz] remove double malloc in dashing code.
    
    fdash is reallocated without being released, and is
    allocated at the wrong size too.

 src/cairo-quartz-surface.c |    5 +----
 1 files changed, 1 insertions(+), 4 deletions(-)

commit e6bc049465730a9640a1038104210d14aad4b3cb
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Tue Nov 13 00:43:59 2007 +0000

    [quartz] typo checking for malloc failure
    
    The check after the malloc of cg_advances looked at the wrong
    variable.

 src/cairo-quartz-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit bb2674207cf01386c6338511d2462694187fff36
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Mon Nov 12 23:56:01 2007 +0000

    [quartz] fix leak in show_glyphs
    
    In cairo_quartz_show_glyphs we may leak the source if
    there is a failure to malloc the glyph arrays. Fix this.

 src/cairo-quartz-surface.c |   30 ++++++++++++++++++------------
 1 files changed, 18 insertions(+), 12 deletions(-)

commit 7ad34c1bdc6417ca0e2e1075b67ca09c5318db75
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Mon Nov 12 23:52:52 2007 +0000

    [quartz] fix for cairo_reset_clip()

 src/cairo-quartz-surface.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 717ccbcf0c12fcfa840396378812919c9e151d57
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Mon Nov 12 23:51:39 2007 +0000

    Revert "[quartz] handle 0x0 surfaces."
    
    This reverts commit 2fd50a7897efaed4dabaf75a6ed8828f16c14d36.
    Spoke too soon, quartz doesn't like creating those 0x0
    images; while the tests pass, its putting warnings in the logs.
    Reverting to make a better fix.

 src/cairo-quartz-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 2fd50a7897efaed4dabaf75a6ed8828f16c14d36
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sun Nov 11 01:29:00 2007 +0000

    [quartz] handle 0x0 surfaces.
    
    Some tests, like invalid-matrix, generate a 0x0 bitmap; in
    the quartz backend this caused a nil surface to be returned,
    whereas the tests expect a quartz surface. Other surfaces
    return a backend-specific surface with a zero-sized bitmap,
    quartz should do the same.
    
    Fixes the tests ft-font-create-for-ft-face, get-and-set,
    get-clip, invalid-matrix, line-width-zero,
    select-font-no-show-text, solid-pattern-cache-stress,
    surface-finish-twice, and text-cache-crash.

 src/cairo-quartz-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0359ad6c8da56a44697498bd8b74fbc029cbe930
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Sun Nov 11 00:18:19 2007 +0100

    Compilation warning suppression (char as array subscript).
    
    cairo_path_op_t is a char, and can't be directly used as array subscript.

 src/cairo-path-fixed.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 1b71af7e61bd6c55b78e1a9a4c56b93d0b1134ed
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Sun Nov 11 00:14:34 2007 +0100

    Fix _cairo_path_fixed_init_copy.
    
    All the copied data buffers except the first one weren't completely
    initialized (num_ops and num_points). That was the cause of the failure
    of some vector surface tests, like random-intersections.

 src/cairo-path-fixed.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 3554c31e3d28ad5aad35c8fe4c6bb8ce7d297dde
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Sat Nov 10 10:43:43 2007 +0100

    [SVG] Add missing image to REFERENCE_IMAGES list.

 test/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 916d82586ec196bfb3124850e68ef66a63464e72
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Sat Nov 10 10:24:21 2007 +0100

    [SVG] Indentation fixes.

 src/cairo-svg-surface.c |  130 +++++++++++++++++++++++-----------------------
 1 files changed, 65 insertions(+), 65 deletions(-)

commit 8edc3ed4857795387007e7c4997f30d7ceec57ac
Merge: 3bc8a8d 77e9b05
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Sat Nov 10 10:10:50 2007 +0100

    Merge branch 'master' of git+ssh://emmanuel@git.cairographics.org/git/cairo

commit 3bc8a8d1d0e07e857b203a7872862437b8333b25
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Sat Nov 10 10:10:03 2007 +0100

    [SVG] Remove spurious semicolon when emitting mask url.

 src/cairo-svg-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b68968ffd1864d591e4fc08fed55c12ece95ec55
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Sat Nov 10 10:07:12 2007 +0100

    [SVG] Fix opacity of combined stroke and fill.
    
    When emitting combined stroke and fill, cairo SVG backend was using the opacity
    two times, instead of using fill-opacity and stroke-opacity, leading to
    incorrect output.
    
    I've updated the mask test reference images for the SVG output, since it seems
    there's a bug in librsvg when fill-opacity is used in the mask image.
    I've checked the SVG output with batik, and it looks fine.

 src/cairo-svg-surface.c      |   25 +++++++++++++------------
 test/mask-svg-argb32-ref.png |  Bin 8405 -> 8389 bytes
 test/mask-svg-rgb24-ref.png  |  Bin 0 -> 7935 bytes
 3 files changed, 13 insertions(+), 12 deletions(-)

commit 77e9b05b2b011ce964287ff493c2b421977107ee
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sat Nov 10 01:34:03 2007 +0000

    [test] support using a previous build as a reference
    
    Allow using a previous test output directory as a source of
    reference images. To make use of this, set the environment
    variable 'CAIRO_REF_DIR' to point at an old test directory,
    relative to the current test directory.
    
    This is useful for testing backends when reference images haven't
    been created yet, or which the current reference image structure
    can't accomodate, like multiple font backends.

 test/README       |    8 ++++++++
 test/cairo-test.c |   17 ++++++++++++++++-
 2 files changed, 24 insertions(+), 1 deletions(-)

commit f8ee0cdf186bfb30bdeb487b63d42f274c1073ce
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sat Nov 10 01:34:01 2007 +0000

    [test] Link to the correct reference image.
    
    The generated test html guesses the names of the reference
    images used in the tests. This is quite often wrong, and
    makes it harder to change policy in cairo-test. Teach
    make-html.pl to parse the log for the path to the reference image.

 test/make-html.pl |  102 +++++++++++++++++++++++-----------------------------
 1 files changed, 45 insertions(+), 57 deletions(-)

commit 15fc1bbefb49fefedca53c47ccfc7edace0acbfe
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sat Nov 10 01:33:47 2007 +0000

    [test] log tested paths so that they can be parsed.
    
    The test logs currently do not record the paths of
    image output, the reference images tested against, and
    the diffs created. This means that make-html.pl has to
    duplicate the policy in cairo-test.c. Fix this by teaching
    cairo-test.c to log the paths.

 test/cairo-test.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 28412f780ebf52914aa374bb2bdd3d539bd29241
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Nov 6 16:11:06 2007 -0800

    [win32-printing] bail out early if we don't have anything to do in paint_surf

 src/cairo-win32-printing-surface.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit d72bb8c12efcffe7c576afe63212b2fe47e8154c
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Nov 6 16:08:59 2007 -0800

    [win32] Fix FIXED_to_fixed when cairo's fixed format isn't 16.16

 src/cairo-win32-font.c |   10 ++++------
 1 files changed, 4 insertions(+), 6 deletions(-)

commit 0901b83ca56e197d5c96d71ab8cfe53f21b4c8bb
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Nov 6 15:49:57 2007 -0800

    [win32] Don't use GetGlyphOutline on non-TrueType fonts
    
    win32-glyph-metrics.patch: GetGlyphOutline only works on Truetype fonts,
    so for non-Truetype fonts, assume no left or right bearing and use the
    font ascent and descent for the glyph extents.

 src/cairo-win32-font.c |   44 +++++++++++++++++++++++++++++++-------------
 1 files changed, 31 insertions(+), 13 deletions(-)

commit f11f7524b62df29aa377382f5ceeda8c3beb2d54
Author: Vladimir Vukicevic <vladimir@h-232.office.mozilla.org>
Date:   Tue Nov 6 15:40:30 2007 -0800

    [quartz] work around Quartz bugs with images bigger than a certain size
    
    Quartz has a bug with images greater than (signed) 16 bits in height; avoid
    creating or working with those.  Also fixes some memory leaks.
    
    Patch from John Daggett.

 src/cairo-quartz-surface.c |   61 ++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 59 insertions(+), 2 deletions(-)

commit 95ede9ea59eb1e2d7fe10fbc698f3f9fff192e79
Author: Vladimir Vukicevic <vladimir@h-232.office.mozilla.org>
Date:   Tue Nov 6 15:06:06 2007 -0800

    Use correct surface resolution when creating paginated fallback image
    
    If a surface resolution is set via _cairo_surface_set_resolution, it
    needs to be used when the fallback image is created.  The user sets
    the fallback resolution on the paginated surface, so we need
    to divide that by the resolution of the actual (target) surface, not
    the paginated surface.

 src/cairo-paginated-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 9b8d9f2859ce66b742c887eb673407a84095f488
Author: Vladimir Vukicevic <vladimir@h-232.office.mozilla.org>
Date:   Tue Nov 6 14:54:59 2007 -0800

    [win32] Skip doing some work if we can't call StretchDIBits

 src/cairo-win32-printing-surface.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit fa7e36669ae24fdbb5bd89a9fc1b6906408a5823
Author: Vladimir Vukicevic <vladimir@h-232.office.mozilla.org>
Date:   Tue Nov 6 14:53:09 2007 -0800

    [quartz] Fix for 10.5 SDK; the FloatToFixed macro started doing strange things

 src/cairo-quartz-surface.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit 236c52b095661be395021d511d2dca0b532f83e9
Author: Vladimir Vukicevic <vladimir@h-232.office.mozilla.org>
Date:   Tue Nov 6 14:52:24 2007 -0800

    Handle overflow/underflow gracefully when converting to 16.16 fixed

 src/cairo-fixed-private.h |   22 +++++++++++++++++++---
 1 files changed, 19 insertions(+), 3 deletions(-)

commit 5b0a0fe7a230f99a43916a16bfd2d26882bad46b
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Nov 7 11:17:59 2007 -0800

    Mention cairo_new_sub_path in documentation of cairo_arc

 src/cairo.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 62d64e12aa9264a17c9bb7d6ae154a1778f0c7e1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 6 14:24:52 2007 +0000

    [cairo-pdf-surface] Create a new path for an empty clip.
    
    If the clip path is empty, then we need to start a new path otherwise
    the clip is ineffective.

 src/cairo-pdf-surface.c |   36 ++++++++++++++++++++++--------------
 1 files changed, 22 insertions(+), 14 deletions(-)

commit b4057b8643cf02439b6033d7443d0d4c42220a62
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 6 09:45:54 2007 +0000

    [cairo-clip] Special case using an empty clip path.
    
    Detect when the user calls cairo_clip() with an empty clip path and
    mark the clip as all_clipped.

 src/cairo-clip.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 2f0867b43fbc9a385a32a2a39895f4c3559f6ddf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 6 09:44:03 2007 +0000

    [cairo-surface] Handle the all clipped out case.
    
    Explicitly handle a clip which represents that the entire surface is
    clipped out.
    
    Fixes https://bugs.freedesktop.org/show_bug.cgi?id=13084.

 src/cairo-surface.c |   61 +++++++++++++++++++++++++++++++++++++++++++-------
 1 files changed, 52 insertions(+), 9 deletions(-)

commit 641215b2b018e98b298db5042360e2e22ab5a0aa
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Nov 5 22:22:42 2007 +0000

    [test/clip-all] Combine text and everything clipped out.
    
    https://bugs.freedesktop.org/show_bug.cgi?id=13084 demonstrates a
    regression where the clip is ignored by the xlib backend whilst
    rendering text. Therefore we extend the current test cases to combine
    a clip that represents everything clipped out with the rendering of
    text. For completeness, we add a new test case that exactly mimics the
    sequence of cairo operations that lead to the discovery of this bug -
    namely the rendering of text with an empty clip path.

 test/Makefile.am        |    2 +
 test/clip-all.c         |   10 ++++++
 test/clip-empty-ref.png |  Bin 0 -> 118 bytes
 test/clip-empty.c       |   72 +++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 84 insertions(+), 0 deletions(-)

commit 55b530ffef2bce96d57919563c6c9b58f02f8fb8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Nov 5 14:47:27 2007 -0500

    [PS] Fix compiler warnings

 src/cairo-ps-surface.c |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit 570714b2b4e0b7aea58142bcba37a9eb7945cf09
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Aug 14 21:34:40 2006 -0400

    [test/fallback-resolution] set tolerance to a large value to see how it performs
    in different fallback resolutions.

 test/fallback-resolution.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 5acbef20213ad354cc835f6d15811e333ee38e74
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Aug 14 21:34:03 2006 -0400

    [test] fallback-resolution: center text

 test/fallback-resolution.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit 7f21bfb0a8265095d68bb5ff6afae7553683a776
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Aug 14 21:33:13 2006 -0400

    [meta-surface] Adjust tolerance when replaying to surfaces with device scale
    
    such that we get a consistent look with different fallback resolutions.

 src/cairo-meta-surface.c |   11 ++++++-----
 1 files changed, 6 insertions(+), 5 deletions(-)

commit 4270cd3358fabf0d3e6ac4e866099b172082b592
Author: Richard Hult <richard@imendio.com>
Date:   Mon Nov 5 10:05:07 2007 +0000

    [atsui] Use ascent+descent+leading to get the distance between baselines
    
    The height is currently mapped to the atsui metrics property capHeight, which
    is documented as "The height of a capital letter in the font from the baseline
    to the top of the letter".
    
    That doesn't match what height is in cairo, it should be the disctance between
    baselines. This patch that fixes that (and makes webkit on GTK+ OS X
    layout nicely).

 src/cairo-atsui-font.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3141b21c0c581dabc09a6ec9cdf0a071701b0e42
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Mon Nov 5 10:05:04 2007 +0000

    [configure.in] fix atsui experimental warning
    
    The 'experimental' warning for atsui was appearing
    for --enable-quartz not --enable-atsui as it should.

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b3ef306f84944a45b389c1f4bfeae910baf5bcb0
Author: Chris Wilson <ickle@cube.localdomain>
Date:   Mon Nov 5 09:09:14 2007 +0000

    [cairo-atomic] Add a few more cpus that are known to have atomic access.
    
    Add x86_64 and arm to the list of cpus which do not require memory
    barriers for reading and writing integers/pointers atomically.

 configure.in |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit bd5ed9a3988910a41748b7d78a265a2968a48f23
Author: Chris Wilson <ickle@cube.localdomain>
Date:   Mon Nov 5 09:05:25 2007 +0000

    [cairo-atomic] Declare the mutex for NEEDS_MEMORY_BARRIER.
    
    Whilst NEED_MEMORY_BARRIER should be a subset of ! HAS_ATOMIC_OPS,
    until we have accurate configure tests NEED_MEMORY_BARRIER may be
    invoked independently.

 src/cairo-mutex-list-private.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 901b0c97523a2da00ccf91cf4cee3bf55ce989b5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Nov 4 11:55:25 2007 +0000

    [cairo-path-fixed] Exponentially enlarge cairo_path_buf_t.
    
    Allocate subsequent path bufs twice as large as the previous buf,
    whilst still embedding a small initial buf into cairo_path_fixed_t
    that handles the most frequent usage.

 src/cairo-path-fill.c          |    2 +-
 src/cairo-path-fixed-private.h |   20 ++++++---
 src/cairo-path-fixed.c         |   89 ++++++++++++++++++++++++----------------
 3 files changed, 68 insertions(+), 43 deletions(-)

commit 92a18464bae40b19a26402eb2aa4950cac04c3a0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Nov 3 10:41:55 2007 +0000

    [cairo-surface] Avoid allocation for common case of 1 box.
    
    _cairo_surface_fill_region(): avoid allocating the array of boxes if we
    know that the region only contains one box and is therefore defined by its
    extents.

 src/cairo-surface.c |   48 ++++++++++++++++++++++++++++--------------------
 1 files changed, 28 insertions(+), 20 deletions(-)

commit e60a7c39cdcdfd474c4f6cc3b4612870726f55dc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 25 10:24:01 2007 +0100

    [cairo-atomic] Check whether we can access int/pointers atomically.
    
    Add a configure check to determine whether the host cpu can read/write
    cairo_atomic_t without an explicit memory barrier, and update the macros
    within cairo-atomic-private.h to reflect this knowledge.

 configure.in               |   15 +++++++++++++++
 src/cairo-atomic-private.h |   20 +++++++++++++++-----
 2 files changed, 30 insertions(+), 5 deletions(-)

commit 76667b4c2a4243a52ab0dbe372151a9ca7dfe931
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Nov 3 16:53:54 2007 +1030

    ROADMAP: Mark set PS level complete

 ROADMAP |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 6d2615d449a9df6a8a7e3b5e5370b06dc14912f5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Nov 2 09:17:59 2007 +0000

    [test/degenerate-pen] Add missing return value.
    
    Carl - he likes to test us occasionally to make sure we're paying
    attention. Well, that's the excuse I use...

 test/degenerate-pen.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit eb0b16837b7cbf63e4b49fb5c22cd392658033d8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Nov 1 22:11:01 2007 +0000

    [cairo-spline] Eliminate redundant _cairo_fixed_to_double().
    
    Inline and unroll PointDistanceSquaredToSegment() and eliminate the
    multiple conversions between fixed point and doubles. This simple
    transformation both shrinks the code and wins a few percent in path
    intensive benchmarks such as fuckhergently.swf

 src/cairo-spline.c |  107 +++++++++++++++++++++++++--------------------------
 1 files changed, 52 insertions(+), 55 deletions(-)

commit 2a25e226588404da2970f473bdeb0d2ce106ce58
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Nov 1 19:49:19 2007 +0000

    [cairo-spline] Reduce stack requirements during recursive refinement.
    
    By splitting out the knot vectors into a smaller, separate structure, we
    can dramatically reduce the stack allocation for each level of recursion.
    Secondly we can have the storage requirements by modifying the first set
    of knots in-place, thus we need only allocate stack space for the knots
    covering the deferred half of the spline.

 src/cairo-spline.c |   94 ++++++++++++++++++++++++++--------------------------
 src/cairoint.h     |   13 ++++---
 2 files changed, 55 insertions(+), 52 deletions(-)

commit b311c414a27b7374540671b3ef7153b30def0451
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Nov 1 19:40:25 2007 +0000

    [cairo] Use NULL instead of a bare 0.
    
    Silence a sparse warning.

 src/cairo.c |   10 +++++-----
 1 files changed, 5 insertions(+), 5 deletions(-)

commit fd5c5178189d2035f3e25919c7453fa4e1c5a76a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Nov 1 19:39:02 2007 +0000

    [cairo-scaled-font] Zero extents on early error.
    
    Ensure that the output extents of cairo_scaled_font_glyph_extents(),
    are zeroed if we return early due to being passed by the user a
    cairo_scaled_font_t with an error set.

 src/cairo-scaled-font.c |    9 ++++++++-
 1 files changed, 8 insertions(+), 1 deletions(-)

commit cee6aa016b9d96d3430187d44397df2b311de8bc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Nov 1 19:30:19 2007 +0000

    [cairo-paginated-surface] Mark the backend static.
    
    Only used within the file, so do not expose outside the library.

 src/cairo-paginated-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 6e0151df469b67ea56c36f7b0050b5d5c959c67d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Nov 1 19:29:00 2007 +0000

    [cairo-atomic] Rearrange code under the correct ifdefs.
    
    The atomic get/set depend upon NEED_MEMORY_BARRIER which is separate
    from HAVE_ATOMIC_OPS.

 src/cairo-atomic.c |   24 +++++++++++++-----------
 1 files changed, 13 insertions(+), 11 deletions(-)

commit a26118cf5bf4063a4bdac2bece1bba0be776c801
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 31 16:37:09 2007 +0000

    [cairo-png] Check for feof whilst reading.
    
    We need to check for both ferror() and feof() when handling short reads.

 src/cairo-png.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 61143e5b21ea4c2687c1cef012eb0758a7cb378a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 31 16:34:51 2007 +0000

    [cairo-png] Handle missing PNG_SETJMP_SUPPORTED
    
    If libpng has not been compiled with jmpbuf support, then we cannot
    atempt to use it - in which case we fall back to png's default error
    handler and abort.

 src/cairo-png.c |   16 ++++++++++++----
 1 files changed, 12 insertions(+), 4 deletions(-)

commit c37a8ace818770ce3f07c2a7147088231d559e44
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Nov 1 00:01:16 2007 +1030

    Round floats in output-stream to 6 significant digits after decimal
    
    The previous commit increased the precision of floats from 6 digits
    after the decimal point to 18 digits to correct rounding errors with
    very small numbers. However most of the time this extra precision is
    not required and results in increased PS/PDF output.
    
    This commit makes the precision after the decimal point 6 significant
    digits. For example:
    
       1.234567
       0.123456
       0.00123456
       0.00000000123456

 src/cairo-output-stream.c |   41 +++++++++++++++++++++++++++++++++++++++--
 1 files changed, 39 insertions(+), 2 deletions(-)

commit 8297daff896ca9d803959edb3c1955977594fab9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Oct 31 02:41:33 2007 -0400

    [cairo-output-stream] Write out floats to 18 digits after decimal point
    
    We write floats using %f as the scientific format used by smarter %g is
    invalid in PS/PDF.  %f however by default rounds to five digits after
    decimal point.  This was causing precision loss and making the newly
    added degenerate-pen test fail for PDF.  We now print up to 18 digits
    which is as many bits doubles can accomodate.  We can be smarter, but
    that's for another commit.

 src/cairo-output-stream.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 04793175ace1312ac88570407ee28db4dde9a93c
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Oct 30 22:49:10 2007 -0700

    Increment cairo version to 1.5.3 after the 1.5.2 snapshot

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ee5dc04aaf81d6ce9c496c7966ceebfbd6ab12fb
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Oct 30 22:33:24 2007 -0700

    Add missing images to REFERENCE_IMAGES list
    
    Otherwise, these don't get included in the generated tar file
    and the test suite doesn't pass when run from that tar file,
    (like 'make distcheck' tests).

 test/Makefile.am |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 194029b63afa24eff8264f10a1c5a79d90e7fdd9
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Oct 30 22:15:55 2007 -0700

    Increment cairo version to 1.5.2 and libtool versioning to 14:0:12

 configure.in |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 06af5c2891b89da28581c30afcde06c5442884db
Author: Keith Packard <keithp@koto.keithp.com>
Date:   Tue Oct 30 22:00:59 2007 -0700

    Force non-AA text when using a bitmap strike with only scaling transform.
    
    When the current font size matches one of the available fixed sizes, and
    the overall transform has only scaling components, FreeType will use the
    fixed size bitmaps by default. For glyphs which do not have bitmaps,
    force them to be rendered in monochrome instead of anti-aliased so
    that they all match nicely.

 src/cairo-ft-font.c |   24 ++++++++++++++++++++++++
 1 files changed, 24 insertions(+), 0 deletions(-)

commit f09f02a6e82df0efb66696fca857a412e7d12672
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Oct 30 21:57:47 2007 -0700

    Add notes for 1.5.2 snapshot

 NEWS |  252 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 252 insertions(+), 0 deletions(-)

commit 448c9314252bba779194d2b01950b8738b26fd13
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Oct 30 17:09:56 2007 -0700

    Fix degenerate-pen test case by removing the triggering assertion
    
    Instead we choose either the first or last pen vertex as
    appropriate.
    
    This makes the degenerate-pen pass stop failing on an
    assertion, and passes for most backends. It's still failing
    for the PDF backend, but that looks like a new, PDF-specific
    bug.

 src/cairo-pen.c |   16 +++++++++++++++-
 1 files changed, 15 insertions(+), 1 deletions(-)

commit 5e76f652842d36086f500735f67cfd1d2f3e3edf
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Oct 30 17:00:33 2007 -0700

    Add degenerate-pen test case.
    
    This demonstrates the assertion failure pointed out by
    Benjamin Otte here:
    
    	[cairo] Assertion 'i < pen->num_vertices' failed in 1.4.10
    	http://lists.cairographics.org/archives/cairo/2007-August/011282.html

 test/.gitignore                       |    1 +
 test/Makefile.am                      |    1 +
 test/degenerate-pen-ps-argb32-ref.png |  Bin 0 -> 390 bytes
 test/degenerate-pen-ref.png           |  Bin 0 -> 278 bytes
 test/degenerate-pen.c                 |  104 +++++++++++++++++++++++++++++++++
 5 files changed, 106 insertions(+), 0 deletions(-)

commit 53378301d42eabc1ebedca983092f522299bd18e
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Oct 30 13:13:29 2007 -0700

    Update URLs for pixman to point to cairographics.org

 README       |    7 ++++---
 configure.in |    2 +-
 2 files changed, 5 insertions(+), 4 deletions(-)

commit 6957aa27e8df55ed3ef1e0cfc62c714ad9b644ee
Merge: 00d701f 8d8724e
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Oct 30 09:45:59 2007 -0700

    Merge in fix for get-path-extents test case.
    
    With independent fixes on both branches, the test case now
    passes completely. Hurrah!

commit 8d8724e80462593f6fee434cf972a67cb4ded282
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Oct 30 09:45:45 2007 -0700

    Improve brace readability for multi-line conditional

 src/cairo.c |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

commit f43f0c104045a88de87c5ebf28309a5ba728203e
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Oct 30 09:44:42 2007 -0700

    Fix remaining two calls to _cairo_path_fixed_get_current_point
    
    The previous commit failed to fix up two callers to the
    _cairo_path_fixed_get_current_point function, (and since
    C doesn't distinguish between an enum and our integer-as-
    Boolean, the compiler didn't complain).
    
    Fortunately, though, the test suite did complain, as the
    bug introduced a new failure into the get-path-extents
    test, and git-bisect helpfully pointed to the previous
    commit.
    
    With this fix, the new failure of get-path-extents is
    eliminated, (though, in this branch the arc-based failure
    of that test still exists).

 src/cairo-ft-font.c    |    3 +--
 src/cairo-win32-font.c |    3 +--
 2 files changed, 2 insertions(+), 4 deletions(-)

commit 00d701ff7de68609aa8cec7871d93b27a108fd14
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Oct 29 17:55:28 2007 -0700

    Limit miters for small angles
    
    This fixes the current failure get-path-extents, which is a
    demonstration of the following bug:
    
    	cairo_stroke_extents() gives wrong result for arcs in some cases
    	https://bugs.freedesktop.org/show_bug.cgi?id=7245
    
    Many thanks to Michael Urman whose review of early versions of
    this work found a fatal mistake in my algebra.

 src/cairo-path-stroke.c |   76 ++++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 75 insertions(+), 1 deletions(-)

commit 9bf0a640d203a880cae5c6a8bf3602344d03cb68
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Oct 29 16:24:13 2007 -0700

    Add figure illustrating derivation of miter limit
    
    And use sin in the first place rather than the more awkward
    secant.

 src/cairo-path-stroke.c |   43 ++++++++++++++++++++++++++++++++++++-------
 1 files changed, 36 insertions(+), 7 deletions(-)

commit abeba1e69be3d4500107f10e50e1f0e7cae8c78f
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Oct 29 16:22:15 2007 -0700

    Annoying churn of sgml templates

 doc/public/tmpl/cairo-ps.sgml          |   53 ++++++++++++++++++++++++++++++++
 doc/public/tmpl/cairo-surface.sgml     |   19 +++++++++++
 doc/public/tmpl/cairo-win32-fonts.sgml |   10 ++++++
 doc/public/tmpl/cairo-win32.sgml       |    9 +++++
 4 files changed, 91 insertions(+), 0 deletions(-)

commit 0d42af2427d1de27845cb8a6b3d290a562c28fc6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 30 11:13:44 2007 +0000

    [cairo-surface] Fix typo in doc.
    
    s/INVALUE_FORMAT/INVALID_FORMAT/

 src/cairo-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 39664b7cac7244ac901cb361442ca2967d74a542
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 30 11:01:40 2007 +0000

    [cairo-path] Return CAIRO_STATUS_SUCCESS.
    
    If we have already returned the error status, then it is cleaner (and
    the common idiom) to use 'return CAIRO_STATUS_SUCCESS' rather than
    'return status'.

 src/cairo-path.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e57df319633f8ebd0249096d76c9058f31f9835b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 30 10:58:16 2007 +0000

    [cairo-path] Make _cairo_path_nil static.
    
    _cairo_path_nil is only used within cairo-path.c, so there is no reason
    to expose it to the rest of the libary.

 src/cairo-path-private.h |    2 --
 src/cairo-path.c         |    2 +-
 2 files changed, 1 insertions(+), 3 deletions(-)

commit 6fdb7f129c8154e288ee40765fa63ffaeebaf8fd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 30 10:42:22 2007 +0000

    Simplify return value from cairo_path_fixed_get_current_point().
    
    The only caller of cairo_path_fixed_get_current_point(), used the status
    return to determine whether or not the path had a current point (and did
    not propagate the error) - for which we had already removed the
    _cairo_error() markup. Now we reduce the boolean status return to a
    cairo_bool_t, with a net reduction in code.

 src/cairo-path-fixed.c |   11 ++++-------
 src/cairo.c            |   13 +++++--------
 src/cairoint.h         |    2 +-
 3 files changed, 10 insertions(+), 16 deletions(-)

commit 4a2ab87e1a19921e2ae496f375c1144d2710d0c4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Oct 29 12:04:33 2007 +0000

    [cairo-surface] Add the usual guards to _cairo_surface_set_font_options().
    
    Adrian Johnson hit a SEGV after
    _cairo_paginaged_surface_create_image_surface() tried to set the font
    options on an error surface after running out of memory. So add the
    usual checks that the surface is not a snapshot, or in an error state or
    finished before modifying its font options.

 src/cairo-surface.c |   13 +++++++++++++
 1 files changed, 13 insertions(+), 0 deletions(-)

commit bb6d36561c5f50d869236b2bb4d10afd627f9a1d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Oct 27 17:29:54 2007 +0100

    [test/get-path-extents] Add link to bug report.
    
    Add a link to the original bug report for the broken extents with arcs.
    [http://bugs.freedesktop.org/show_bug.cgi?id=7245]

 test/get-path-extents.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit a69d4731300b430b802222d317698c313c75a31a
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Oct 26 22:58:57 2007 -0700

    Fix typo in _cairo_gstate_fini
    
    Obrigado a Luiz Americo Pereira Camara <luizmed@oi.com.br>

 src/cairo-gstate.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0c02b998f9e8589a90b2e744392995903b94414f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 26 18:06:36 2007 +0100

    [cairo-gstate] Allow angle==0 whilst rotating.
    
    Cut'n'paste error whilst copying the NaN check from
    _cairo_gstate_scale() flagged the no rotation case as an error.

 src/cairo-gstate.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit ce44cd65238d38dd6958bf1f7b8ffb9d0e8723c3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 25 00:01:21 2007 +0100

    [cairo-gstate] Add a missing _cairo_error() markup.
    
    Missed calling _cairo_error() for the CAIRO_STATUS_NULL_POINTER
    returned by _cairo_gstate_init(). Rearrange the code to avoid the
    overly complicated return statement. We note that _cairo_gstate_init()
    is special as _cairo_gstate_fini() will always be called, even if an
    error is thrown, and so do not do the usual cleanup in the case of an
    aborted initialization.

 src/cairo-gstate.c |   28 +++++++++++++++++++---------
 1 files changed, 19 insertions(+), 9 deletions(-)

commit 4ce785e6a9433e7c862efaa6ef9c113412bf51a5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 24 21:58:08 2007 +0100

    [cairo-gstate] Add NaN check to rotate.
    
    Check the user input to _cairo_gstate_rotate() for invalid numbers.

 src/cairo-gstate.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 6295a296b0064f0959ca7f39e1d8d00fa51b6251
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 24 21:29:54 2007 +0100

    [cairo-gstate] Check scale sx * sy != 0.
    
    Bill Spitzak said
        "If you really want to match when the determinant is non-zero in the
        resulting matrix, use sx*sy != 0. This appears the same as sx&&sy but
        may also catch when underflow makes the determinant zero."
    
    Return CAIRO_STATUS_INVALID_MATRIX if we know the user input will
    generate a degenerate matrix. For additional paranoia we could recompute
    and validate the inverse each time as well.

 src/cairo-gstate.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 483ebe866df539460861a05f5d5e8e56ab2f5430
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 24 19:32:00 2007 +0100

    [cairo-test] Remove executable flag from source files.
    
    chmod a-x test/cairo-test.[ch]

 0 files changed, 0 insertions(+), 0 deletions(-)

commit 1651359ffbda4c14eaf4e79b6deced4f2c247686
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 24 18:35:41 2007 +0100

    [cairo-perf-diff-files] Only use a valid initializer for min_test.
    
    Do not assume that the tests[0] is a valid test, but instead scan for
    the first test that has a name (i.e. is not a terminator).

 perf/cairo-perf-diff-files.c |    9 +++++++--
 1 files changed, 7 insertions(+), 2 deletions(-)

commit 38c779e7d672151d25cd596149485fcc9f21c298
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 23 12:57:26 2007 +0100

    [cairo-perf-diff-files] Check for terminator before comparing tests.
    
    Only the name of the terminating test is set so check that the current
    test is not the terminator before comparing.

 perf/cairo-perf-diff-files.c |   23 ++++++++++++++++-------
 1 files changed, 16 insertions(+), 7 deletions(-)

commit e3248a21841cfcbc285d76e2299485f9822857f1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Oct 22 09:34:55 2007 +0100

    [cairo-matrix] Check user input for invalid numbers.
    
    Supplement the guards for scale==0 with checks that the user does not
    attempt to translate or scale by invalid numbers.

 src/cairo-gstate.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 8888afe9a4269e2d740d309186159fe946e57eaf
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Oct 22 23:05:25 2007 +0930

    PDF: Fix meta surface patterns with EXTEND_REFLECT

 src/cairo-pdf-surface.c |   34 +++++++++++++++++++++++++++++-----
 1 files changed, 29 insertions(+), 5 deletions(-)

commit f073a83251e56f641a522764c5cab1d71a786a60
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Mon Oct 22 00:02:23 2007 +0930

    win32-printing: fix error in comment

 boilerplate/cairo-boilerplate-win32-printing.c |   21 +++++++++++----------
 1 files changed, 11 insertions(+), 10 deletions(-)

commit fb2bf3e250b39078476d3df4bdbb81201ef00a96
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Oct 21 23:50:57 2007 +0930

    win32-printing: remove unused code

 src/cairo-win32-printing-surface.c |   17 -----------------
 1 files changed, 0 insertions(+), 17 deletions(-)

commit b854d1e1b57680f244939b90b03911a5300f34d6
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Oct 21 23:50:28 2007 +0930

    win32-printing: fix typo in comment

 src/cairo-win32-printing-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 2d68c46b779909b5cc493a62db1228ea504ff52a
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Oct 21 23:49:58 2007 +0930

    win32-printing: fix dash-caps-joins test failure

 src/cairo-win32-printing-surface.c |   11 ++++++-----
 1 files changed, 6 insertions(+), 5 deletions(-)

commit 5fa62250456745907dd97fdb9030481bdc91a8dd
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Oct 21 23:49:33 2007 +0930

    win32-printing: Add test boilerplate
    
    Testing win32-printing requires setting the default printer to
    a PostScript level 3 color printer. The PostScript output is
    saved to a file and converted to png using ghostscript.

 boilerplate/Makefile.am                        |    2 +
 boilerplate/cairo-boilerplate-win32-printing.c |  308 ++++++++++++++++++++++++
 boilerplate/cairo-boilerplate-win32-private.h  |   15 ++
 boilerplate/cairo-boilerplate.c                |   11 +
 4 files changed, 336 insertions(+), 0 deletions(-)

commit e63b5e5201a79a8af4bd1d5acb524f067b5f2794
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Oct 21 23:47:35 2007 +0930

    win32-printing: Use the surface ctm in show_glyphs
    
    show_glyphs needs to scale the font by the current CTM.

 src/cairo-win32-printing-surface.c |   14 ++++++++++++++
 1 files changed, 14 insertions(+), 0 deletions(-)

commit ac9831ea55bd62f0ed427230ad80348768415852
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Oct 21 23:46:52 2007 +0930

    win32-printing: fix stroke rounding problems
    
    The win32 CTM is changed to user space to set the stroke parameters.
    As win32 uses integers for stroke parameters this will cause rounding
    problems depending on the CTM used.
    
    This is fixed by factoring out a scale from the user space CTM so that
    xx, xy, yx, and yy in the CTM are all < 1. This preserves the shape
    of the transformation while ensuring that the CTM does not cause
    rounding problems. The stroke parameters are multiplied by the scale
    value.

 src/cairo-win32-printing-surface.c |   35 +++++++++++++++++++++++++++++------
 1 files changed, 29 insertions(+), 6 deletions(-)

commit 89fe7b2ff09d19d3bdc84a8ee871e15716ff3539
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Oct 21 23:45:40 2007 +0930

    win32-printing: fix rounding problems when using pattern matrix
    
    When using meta surface patterns, the win32 CTM is changed to the
    inverted pattern matrix then the meta surface is replayed to the
    surface. The problem with this is that win32 uses integer coordinates
    for GDI functions. A pattern matrix that scale the CTM up will cause
    rounding errors in the position of each path in the pattern.
    
    This is fixed by always keeping the win32 CTM set to the identity
    matrix. The CTM is stored in the surface and all coordinates are
    transformed by the CTM before calling GDI functions.

 src/cairo-win32-printing-surface.c |  167 +++++++++++++++++++++++++++++-------
 src/cairo-win32-private.h          |    2 +
 2 files changed, 138 insertions(+), 31 deletions(-)

commit af01d9b8fabc2422eb7db144171d52fab95c4387
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Oct 21 23:43:27 2007 +0930

    win32-printing: add meta surface pattern support

 src/cairo-win32-printing-surface.c |  251 ++++++++++++++++++++++++++++--------
 src/cairo-win32-private.h          |    1 +
 2 files changed, 200 insertions(+), 52 deletions(-)

commit dae1b352c60e6a63ec2131f788fec230fd583d3d
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Oct 21 23:42:54 2007 +0930

    update cairo-sections.txt

 doc/public/cairo-sections.txt |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit c8da2a7dedb8352bb623954c3ac40244b86eeb24
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Oct 21 23:42:22 2007 +0930

    win32-printing: check if images are opaque
    
    Don't use fallback for argb32 images with all alpha == 255.

 src/cairo-win32-printing-surface.c |   57 ++++++++++++++++++++++++++++++++++++
 1 files changed, 57 insertions(+), 0 deletions(-)

commit 9eb5747755f8c57bd6ba04925e193503fe194462
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Oct 21 23:41:31 2007 +0930

    win32-printing: Add missing struct initializers

 src/cairo-win32-printing-surface.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 8f6abdbc26ee15451b5a386610f7d5a7a9114d63
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sat Oct 20 23:41:46 2007 +0100

    [quartz] return status instead of CGPatternRef
    
    Returning status improves error handling, since
    returning NULL doesn't let us distinguish different
    types of error.

 src/cairo-quartz-surface.c |   20 +++++++++++---------
 1 files changed, 11 insertions(+), 9 deletions(-)

commit cfb26fdf0f490b4902106b50d02628cffd53a0eb
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sat Oct 20 23:41:32 2007 +0100

    [quartz] return status instead of cairo_quartz_surface_t
    
    Returning status improves error handling, since
    returning NULL doesn't let us distinguish different
    types of error.

 src/cairo-quartz-surface.c |   32 ++++++++++++++++++--------------
 1 files changed, 18 insertions(+), 14 deletions(-)

commit dec3099585eeb184ed51b5c720eb891314d7ea51
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sat Oct 20 22:45:30 2007 +0100

    [quartz] return status instead of CGShadingRef
    
    Returning status improves error handling, since
    returning NULL doesn't let us distinguish different
    types of error. Suggested by Chris Wilson.

 src/cairo-quartz-surface.c |   30 ++++++++++++++++--------------
 1 files changed, 16 insertions(+), 14 deletions(-)

commit 481ce2b8cb2dc376419e7d6cbdd73bd4ebcd5b5b
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sun Jul 1 14:37:57 2007 +0100

    implement clipping with surface masks.
    
    This implements clipping using CGContextClipToMask, which
    means that it will only have an effect on OS X 10.4+.
    No additional tests pass with this fix - mainly due to
    text effects and problems with the IN, OUT, DEST_IN, DEST_ATOP
    operators.

 src/cairo-quartz-surface.c |   43 +++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 43 insertions(+), 0 deletions(-)

commit b9c065df74027b06e15e105fee5e4a4d350e0abf
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sun Jun 24 23:53:47 2007 +0100

    fix dash-zero-length test
    
    Quartz was failing the dash-zero-length test for odd numbers
    of dashes; it seems cairo wants 3 dashes to be on-off-on,
    off-on-off, wheras quartz uses on-off-on, on-off-on. Fixed
    by doubling the number of dashes used.

 src/cairo-quartz-surface.c |   16 +++++++++++-----
 1 files changed, 11 insertions(+), 5 deletions(-)

commit f334ee0397963e12c9efcb2690792aac83734661
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sun Jun 24 01:17:58 2007 +0100

    Implement EXTEND_NONE for gradients.
    
    Fixes linear and radial gradients, which were displaying with
    extend_pad when extend_none was requested. Makes the
    radial-gradient test pass.

 src/cairo-quartz-surface.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 0eeec372c0e7849d81bde8c8c5bf491919f51a6e
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sat Jun 23 23:36:32 2007 +0100

    call _cairo_error on failure
    
    Call _cairo_error to enable setting a breakpoint on quartz errors.

 src/cairo-quartz-surface.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 8c8ec63903f8ad67a88394eff1359607bb93cf88
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sat Jun 23 12:34:24 2007 +0100

    do not return a cairo_status_t of UNSUPPORTED
    
    We had a bug which converted cairo_int_status_t to cairo_status_t,
    causing an assertion; reported at http://developer.imendio.com/node/128.
    Return the generic out of memory error instead.

 src/cairo-quartz-surface.c |    9 +++++++--
 1 files changed, 7 insertions(+), 2 deletions(-)

commit 6fec51990e90901ebafbb872a9e618cb70d17911
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Mon Jun 18 00:07:33 2007 +0100

    do not ignore errors, return NULL instead (moz#874315)
    
    In the quartz backend there are occasional errors where returning NULL
    can be used to signal that an error has occured.
    
    Mozilla bug #874315.

 src/cairo-quartz-surface.c |   37 ++++++++++++++++++++++++++++---------
 1 files changed, 28 insertions(+), 9 deletions(-)

commit 07fd091e3e6b925c588b9a16f6f10efcd46615c2
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Mon Jun 18 00:07:33 2007 +0100

    do not ignore errors in setup_source
    
    In setup_source we were ignoring a return value, but we can't relay
    it to the caller. This patch treats the error as an unsupported
    operation.

 src/cairo-quartz-surface.c |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit b6b9cef7136453f97543173bcb2ade46b1c46b77
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Tue Jun 19 21:13:39 2007 +0100

    do not ignore errors when creating styles.
    
    This fixes statuses being ignored when calling
    CreateSizedCopyOfStyle. As a side effect, it cleans up
    two other bugs - the font object was sometimes not
    freed, and a the scaled font mutex was aquired recursively,
    causing a hang in the invalid-matrix test.

 src/cairo-atsui-font.c |   37 ++++++++++++++++++++++++++-----------
 1 files changed, 26 insertions(+), 11 deletions(-)

commit 4885a12c6863321a566e7103bf6dccdd5d13a986
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Mon Jun 18 00:07:33 2007 +0100

    do not ignore ATSUI errors.
    
    This fixes multiple instances where the return value of an ATSUI
    call was ignored and converts them into CAIRO_STATUS_NO_MEMORY.
    As a side effect it fixes a utf8 array not being freed.

 src/cairo-atsui-font.c |   74 ++++++++++++++++++++++++++++++++++++++++++------
 1 files changed, 65 insertions(+), 9 deletions(-)

commit b498c928be73635614596243d17a922e9d5ff008
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Mon Jun 18 00:07:33 2007 +0100

    do not ignore errors in glyph paths
    
    When interpreting glyph paths in ATSUI callbacks we were ignoring
    the cairo status. We need to return this to the caller. In order
    to do this we introduce a custom OSStatus code in the range that
    Apple reccommend.

 src/cairo-atsui-font.c |   30 ++++++++++++++++++++++++------
 1 files changed, 24 insertions(+), 6 deletions(-)

commit 95c708c717a367205845cefc81ae0afd9bd3d18f
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Mon Jun 18 00:07:33 2007 +0100

    propagate cairo_status_t return values
    
    There are several places in the quartz surface where we ignored
    the returned status. This fixes the simple cases where the error
    can just be returned to the caller.

 src/cairo-quartz-surface.c |   16 +++++++++++++---
 1 files changed, 13 insertions(+), 3 deletions(-)

commit 7072959e3da0e8814cfd5193f8915aeb1341cc37
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sat Oct 20 11:46:54 2007 +0100

    Fix to support new similar tests.
    
    The patch to repeat tests for similar surfaces changed the
    format of the test log files, which were parsed to produce
    index.html. This fixes the parser to understand those changes.

 test/make-html.pl |  136 +++++++++++++++++++++++++++++------------------------
 1 files changed, 75 insertions(+), 61 deletions(-)

commit ae2535e4cb7c09eda1be13079d7a23b262aaef7b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 19 23:25:57 2007 +0100

    [cairo-perf] Run performance tests over similar surfaces as well.
    
    Immediately repeat the performance test against a similar surface to
    ensure that they introduce no regressions. Primarily introduced to
    sanity check the change to use XShmPixmaps instead of XPixmaps in the
    xlib backend, but it should be generally useful.

 perf/cairo-perf.c |  121 +++++++++++++++++++++++++++++++++--------------------
 1 files changed, 75 insertions(+), 46 deletions(-)

commit 081507a09e61e1e4a048e40f8ba67a76aa76bbef
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 19 22:26:28 2007 +0100

    [cairo-test] Repeat tests for similar surfaces.
    
    Having noticed strange discrepancies creeping into similar surfaces
    whilst working on the xlib backend, I thought it wise to also run
    the test harness against similar targets. For consistency, only
    targets whose similar surface use the same backend are included.
    
    This can be disabled by exporting CAIRO_TEST_IGNORE_SIMILAR=1.

 test/cairo-test.c |  173 ++++++++++++++++++++++++++++++++++------------------
 1 files changed, 113 insertions(+), 60 deletions(-)

commit 3211d810d31a6607c8d78a50f577a8ca8eb705e6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 19 22:45:15 2007 +0100

    [cairo-xlib] Check source for XRender support.
    
    Do not rely on the assumption that if the destination has render support
    then the source has it as well - breaks when the boilerplate disables
    render support for a surface.
    
    Similarly do not set the XRender attributes on the source surface
    unless it actually has a xrender_format.

 src/cairo-xlib-surface.c |   17 +++++++++--------
 1 files changed, 9 insertions(+), 8 deletions(-)

commit 5c08226a0f7bc373a96fe75d15ad854910eb3265
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 19 16:04:33 2007 +0100

    [cairo-clip] Avoid work when all clipped out.
    
    When the clip mask is empty we perform actions like composite 0x0
    surfaces, which results in a lot of unnecessary work and allocations.
    Avoid doing work when we know everything is clip out and take the
    liberty of freeing any memory associated with the clop state.

 src/cairo-clip-private.h |    2 +
 src/cairo-clip.c         |   86 +++++++++++++++++++++++++++++++++++++++++-----
 2 files changed, 79 insertions(+), 9 deletions(-)

commit c70c2cf6d6a71df54515175af0cb1651b67bdb86
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 19 23:31:36 2007 +0100

    [Makefile.am] Fix ${top_srcdir}/libtool
    
    libtool exists in the top level build directory, but in a couple of
    places we refer to the top level source directory.

 perf/Makefile.am |    4 ++--
 test/Makefile.am |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 76e3b3cdc3dda986d420637cfc2445aca481a863
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Oct 19 15:02:03 2007 -0400

    [cairo-xlib] Release glyph surfaces if we made them to be generated
    
    The reasoning is that right now, applications render glyphs to images,
    upload it to the X server, and keep a local copy in the cache.  The X
    server works hard to reuse glyph renderings, by hashing glyph images and
    reusing them.  So we are wasting memory in cairo apps that don't use the
    glyph surface after uploading to the server, which is the case if you
    don't use the glyph in an image surface.  The patch does not release the
    glyph surface if it already existed in the cache, so, worst case
    scenario is that we render the glyph twice, if you first use it with
    xlib, then with image surface.  That effect should be negligible.

 src/cairo-xlib-surface.c |   83 +++++++++++++++++++++++++++++++++++-----------
 1 files changed, 63 insertions(+), 20 deletions(-)

commit 8ae778273799ee9f6d3c13e9c41730daeda2c743
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 18 20:07:12 2007 +0100

    [cairo-xlib-surface] Match content to xrender_format using the channel masks.
    
    _xrender_format_to_content() was using the channel offset to determine
    whether the format supported a content type.
    For example, the XRenderPictFormat for the A8 format looks like:
        direct.alpha = 0; direct.alphaMask = 0xff;
        direct.red   = 0; direct.redMask   = 0x00;
        direct.green = 0; direct.greenMask = 0x00;
        direct.blue  = 0; direct.blueMask  = 0x00;
    which _xrender_format_to_content() matched as CAIRO_CONTENT_COLOR.
    
    Switch to using the channel masks for deducing content type.

 src/cairo-xlib-surface.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit b7d8763c58165817f3238def4d1771ce8575139e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 18 19:42:21 2007 +0100

    [check-plt] Use -W flag to readelf.
    
    Pass -W to readelf so that the output (in particular the function name)
    is not clipped to fit within 80 characters.

 src/check-plt.sh |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 01eb16977359c7953dbabb52e1f6a132d93839f3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 18 19:28:00 2007 +0100

    [test/.gitignore] Add *.exe.so
    
    Ignore these winegcc output files.

 test/.gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit c64335a9a846ba18411a720f6e69e511b15e2c6b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 17 23:12:49 2007 +0100

    [cairo-scaled-font-subsets] Simplify boolean return code.
    
    _cairo_sub_font_lookup_glyph() was returning either a NULL_POINTER
    error or success whereas its only caller was using it as a simple
    predicate and handled the 'error' rather than propagate it upwards.

 src/cairo-scaled-font-subsets.c |   20 +++++++++-----------
 1 files changed, 9 insertions(+), 11 deletions(-)

commit 379b9b79fa77be1bf9b5e0581b2363e80b0a8c88
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 17 20:41:57 2007 +0100

    [cairo-xlib] Move the buggy_repeat discovery to the display_t.
    
    The VendorString parsing (to detect broken Xserver versions) was being
    performed for each surface creation, but as it is a display invariant
    we can save a small amount of work by storing the result on the
    cairo_xlib_display_t.

 src/cairo-xlib-display.c |    9 +++++++++
 src/cairo-xlib-private.h |    1 +
 src/cairo-xlib-surface.c |    9 +--------
 3 files changed, 11 insertions(+), 8 deletions(-)

commit 5e09653e5dca60902423938737195e38ccde1b95
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 16 15:30:50 2007 +0100

    [test/rgb24-ignore-alpha] Destroy the surface after use.
    
    Destroy the surface so that valgrind doesn't complain about the memory
    leak.

 test/rgb24-ignore-alpha.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit bd3dd72262772f1b2dfd8335630163f2e3bfacac
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 16 15:29:59 2007 +0100

    [pdiff] Reorganise the inner loops of the convolution.
    
    Reorder the indices and introduce a couple of temporary accumulators to
    improve cache access.

 test/pdiff/lpyramid.c |   27 +++++++++++++++------------
 1 files changed, 15 insertions(+), 12 deletions(-)

commit fa9201b9c98b18ea18fbee1e5608f20335a02131
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 16 15:27:33 2007 +0100

    [pdiff] Check for too small images.
    
    The Laplacian pyramid can only work on images larger than 3x3 due to the
    size of its convolution kernel. So if the image is too small return an
    error (-1) before attempting to construction the pyramid.

 test/pdiff/pdiff.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 3b1cc128dc4223ac88f7824dca223ed0f84df5d9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 16 10:55:04 2007 +0100

    [cairo-ft-font] Add paranoid error checking to Fc* operations.
    
    Check the return status when using Fc*() functions to modify the pattern
    and propagate the failure (if necessary).

 src/cairo-ft-font.c    |  178 +++++++++++++++++++++++++++++-------------------
 src/cairo-ft-private.h |    1 -
 2 files changed, 108 insertions(+), 71 deletions(-)

commit a55f1abf7cdc0276fe1eb85db969f33d0df4fe75
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 16 10:29:45 2007 +0100

    [cairo-clip] Pass the local pattern to create_similar_solid().
    
    Avoid the short-lived pattern allocation within
    _cairo_surface_create_similar_solid() by providing the local solid
    pattern to use as the source.

 src/cairo-clip.c |   12 +++++++-----
 1 files changed, 7 insertions(+), 5 deletions(-)

commit 7ff80234e3823547395819f96d7f7673df9ce9df
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 16 10:37:45 2007 +0100

    [cairo-path-fixed] Drop the _cairo_error() markup.
    
    Do not use _cairo_error(CAIRO_STATUS_NO_CURRENT_POINT) within
    _cairo_path_fixed_get_current_point() as the only caller,
    cairo_get_current_point(), expects and handles that status.

 src/cairo-path-fixed.c |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

commit 189feaf352f59b0a049202552024578715ef8cc7
Author: Chris Heath <chris@heathens.co.nz>
Date:   Mon Oct 15 17:31:50 2007 -0400

    [autogen.sh] Tolerate tput failure (#12757)

 autogen.sh |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 4660561cb548ab8d1eca724fda4d3658c95d4c04
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Oct 14 19:05:06 2007 +0930

    PDF: Add support for CAIRO_FORMAT_A1 images

 src/cairo-pdf-surface.c |   43 ++++++++++++++++++++++++++++++++++++-------
 1 files changed, 36 insertions(+), 7 deletions(-)

commit 39044157da03d598b816a459979f3d0e6285e023
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Oct 14 19:04:33 2007 +0930

    PDF: Add support for linear gradients with REPEAT and REFLECT

 src/cairo-pdf-surface.c |  226 +++++++++++++++++++++++++++++++++++++++--------
 1 files changed, 188 insertions(+), 38 deletions(-)

commit 5af1b2280b2cf952624d587496158a98df0ee504
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Oct 14 00:04:21 2007 +0930

    Make PostScript output text selectable
    
    The glyph names used in the Type42 and Type1 fallback fonts are now of
    the form "/uniXXXX" where XXXX is the unicode character for each
    glyph. When converted to pdf (eg using ps2pdf), pdf viewers are now
    able to correctly extract the text.

 src/cairo-ps-surface.c                  |   36 ++++++--
 src/cairo-scaled-font-subsets-private.h |   15 +++
 src/cairo-scaled-font-subsets.c         |  159 +++++++++++++++++++++++++++++++
 src/cairo-type1-fallback.c              |   18 +++-
 src/cairoint.h                          |    1 +
 5 files changed, 219 insertions(+), 10 deletions(-)

commit e347a7a7c394fc2638faa2ff52e4b96545ac1ee3
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Oct 13 22:59:20 2007 +0930

    PS: Add support for images with bilevel alpha
    
    This patch eliminates two sources of fallback images. The alpha value
    of each pixel in argb32 images are checked. If all alpha values are
    255 the image is treated the same as rgb24 images. If all alpha values
    are either 0 or 255 and the PS level is 3, a Type 3 image (image +
    mask) is emitted.

 src/cairo-ps-surface.c |  519 ++++++++++++++++++++++++++++++++++++------------
 1 files changed, 388 insertions(+), 131 deletions(-)

commit af5cdde34d003b7d5943b169c160b91b8f7d10f3
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Oct 13 22:15:48 2007 +0930

    PS/Win32-printing: remove redundant checks from _analyze_operation
    
    The check for supported operators is performed earlier in this
    functions so these two checks in not required.

 src/cairo-ps-surface.c             |    6 ------
 src/cairo-win32-printing-surface.c |    6 ------
 2 files changed, 0 insertions(+), 12 deletions(-)

commit ff35ffd2a7baa775e2ef73b844e783434c149057
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Oct 13 22:09:04 2007 +0930

    Add meta-surface-pattern test

 test/.gitignore                         |    1 +
 test/Makefile.am                        |    1 +
 test/meta-surface-pattern-ref.png       |  Bin 0 -> 3072 bytes
 test/meta-surface-pattern-rgb24-ref.png |  Bin 0 -> 3162 bytes
 test/meta-surface-pattern.c             |  131 +++++++++++++++++++++++++++++++
 5 files changed, 133 insertions(+), 0 deletions(-)

commit 0b3f530973049737f942219452d991d76b65b724
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Oct 13 21:49:50 2007 +0930

    Add PS reference images for tests using gradients

 test/clip-operator-ps-argb32-ref.png   |  Bin 0 -> 8594 bytes
 test/gradient-alpha-ps-argb32-ref.png  |  Bin 0 -> 187 bytes
 test/gradient-alpha-ps-rgb24-ref.png   |  Bin 0 -> 184 bytes
 test/linear-gradient-ps-argb32-ref.png |  Bin 0 -> 613 bytes
 test/linear-gradient-ps-rgb24-ref.png  |  Bin 0 -> 613 bytes
 test/operator-source-ps-argb32-ref.png |  Bin 0 -> 3885 bytes
 test/operator-source-ps-rgb24-ref.png  |  Bin 0 -> 3548 bytes
 test/text-pattern-ps-argb32-ref.png    |  Bin 0 -> 997 bytes
 test/text-pattern-ps-rgb24-ref.png     |  Bin 0 -> 969 bytes
 test/trap-clip-ps-argb32-ref.png       |  Bin 5810 -> 5700 bytes
 test/trap-clip-ps-rgb24-ref.png        |  Bin 0 -> 5616 bytes
 11 files changed, 0 insertions(+), 0 deletions(-)

commit e66ce8cbc6e53b4b07a9af6bb7d2294ada0782c0
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Oct 13 21:28:19 2007 +0930

    PS: Add linear and radial gradient support

 src/cairo-ps-surface.c |  321 +++++++++++++++++++++++++++++++++++++++++++-----
 1 files changed, 291 insertions(+), 30 deletions(-)

commit 583059e4a3e86c937de13c07a50486f7ca77b335
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Oct 13 21:16:49 2007 +0930

    Fix bug in _gradient_is_opaque()

 src/cairo-pattern.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b5c36010edc92ca129a0498cf04592f8f692f800
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Oct 13 21:14:28 2007 +0930

    Add cairo_ps_surface_restrict_to_level() API

 doc/public/cairo-sections.txt  |    4 ++
 src/cairo-ps-surface-private.h |    2 +
 src/cairo-ps-surface.c         |   99 +++++++++++++++++++++++++++++++++++++++-
 src/cairo-ps.h                 |   25 ++++++++++
 4 files changed, 129 insertions(+), 1 deletions(-)

commit b5fa273c9a4f730882c6edade785236e72b2b4db
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Oct 13 21:04:51 2007 +0930

    Add PS reference images for tests using create_similar
    
    before the PS meta surface pattern patch these tests
    had image fallacks in the PS output and did not require
    a PS reference image.

 test/clip-fill-rule-ps-rgb24-ref.png             |  Bin 0 -> 309 bytes
 test/clip-nesting-ps-rgb24-ref.png               |  Bin 0 -> 636 bytes
 test/clip-push-group-ps-argb32-ref.png           |  Bin 0 -> 179 bytes
 test/clip-push-group-ps-rgb24-ref.png            |  Bin 0 -> 179 bytes
 test/clip-twice-ps-rgb24-ref.png                 |  Bin 0 -> 541 bytes
 test/copy-path-ps-rgb24-ref.png                  |  Bin 0 -> 440 bytes
 test/dash-caps-joins-ps-rgb24-ref.png            |  Bin 0 -> 3852 bytes
 test/dash-scale-ps-rgb24-ref.png                 |  Bin 0 -> 6316 bytes
 test/dash-state-ps-rgb24-ref.png                 |  Bin 0 -> 8650 bytes
 test/degenerate-path-ps-rgb24-ref.png            |  Bin 0 -> 358 bytes
 test/fill-and-stroke-ps-rgb24-ref.png            |  Bin 0 -> 319 bytes
 test/fill-missed-stop-ps-rgb24-ref.png           |  Bin 0 -> 531 bytes
 test/fill-rule-ps-rgb24-ref.png                  |  Bin 0 -> 2031 bytes
 test/font-matrix-translation-ps-rgb24-ref.png    |  Bin 0 -> 783 bytes
 test/leaky-dash-ps-rgb24-ref.png                 |  Bin 0 -> 284 bytes
 test/line-width-scale-ps-rgb24-ref.png           |  Bin 0 -> 3901 bytes
 test/new-sub-path-ps-rgb24-ref.png               |  Bin 0 -> 423 bytes
 test/pixman-rotate-ps-argb32-ref.png             |  Bin 0 -> 411 bytes
 test/pixman-rotate-ps-rgb24-ref.png              |  Bin 0 -> 392 bytes
 test/random-intersections-ps-rgb24-ref.png       |  Bin 0 -> 89414 bytes
 test/rel-path-ps-rgb24-ref.png                   |  Bin 0 -> 243 bytes
 test/rotate-image-surface-paint-ps-rgb24-ref.png |  Bin 0 -> 274 bytes
 test/source-clip-scale-ps-argb32-ref.png         |  Bin 0 -> 183 bytes
 test/source-clip-scale-ps-rgb24-ref.png          |  Bin 0 -> 183 bytes
 test/text-rotate-ps-rgb24-ref.png                |  Bin 0 -> 7196 bytes
 25 files changed, 0 insertions(+), 0 deletions(-)

commit 8520ce31be13bc939357cd45bd1b4c1967d7ff53
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Oct 13 20:17:43 2007 +0930

    PS: Add meta surface pattern support

 boilerplate/cairo-boilerplate.c |   11 +--
 src/cairo-ps-surface-private.h  |    2 +-
 src/cairo-ps-surface.c          |  257 ++++++++++++++++++++++++++-------------
 3 files changed, 177 insertions(+), 93 deletions(-)

commit e5b01e67975578797b4f7875a9ba02121ff935b5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 11 17:54:55 2007 +0100

    [Makefile.am] Add missing headers and reference images.
    
    Andrew Jorgensen spotted that make dist was missing a few headers needed
    for compilation and running make distcheck had spurious failures. Add
    the missing files to the distribution and a silly one-liner to check for
    missing reference images.

 src/Makefile.am  |    2 ++
 test/Makefile.am |   25 ++++++++++++++++++++++++-
 2 files changed, 26 insertions(+), 1 deletions(-)

commit b7adcf67f8c640c146bada1fbeaa1cda1cfa825a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 11 14:11:06 2007 +0100

    [cairo-path-stroke] Jump to cleanup after error.
    
    Incorrect early return in _cairo_stroker_curve_to() after
    _cairo_stroker_join() resulted in leaking the local spline and pen.

 src/cairo-path-stroke.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0222c02d9525dc8ff1ad5a2bea46e623d9db1e43
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 11 14:01:20 2007 +0100

    [cairo-pdf-surface] Return UNSUPPORTED from _to_unicode_stream().
    
    Distinguish the UNSUPPORTED case where the font backend does not
    support conversion to unicode from other fatal errors by returning a
    status value rather than using stream.id == 0 to indicate any error.

 src/cairo-pdf-surface.c |   71 +++++++++++++++++++++++++---------------------
 1 files changed, 39 insertions(+), 32 deletions(-)

commit 981bc12e5b9b91ce1c5abe343ace837561059658
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 10 23:58:43 2007 +0100

    [cairo-ps-surface] Close a couple of memory leaks.
    
    Adjust error paths to free local resources.

 src/cairo-ps-surface.c |   18 +++++++++++-------
 1 files changed, 11 insertions(+), 7 deletions(-)

commit c1db44b26501cd905fb9ca858f41632c148b6b07
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 10 15:15:55 2007 +0100

    [cairo-png] Clean up volatile warning.
    
    gcc warns that 'rows' is missing a volatile qualifier - so add it.

 src/cairo-png.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 05702b8b6ea73fecd04dc5cc4b26ad1d46fa8850
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 23:37:34 2007 +0100

    [cairo-pdf-surface] Free the clip path on error.
    
    If we fail to add the clip path to the current group, destroy it.

 src/cairo-pdf-surface.c |   14 +++++++++++---
 1 files changed, 11 insertions(+), 3 deletions(-)

commit 8fa5f638a5f8eee4f9efe267ede20344fc7bd4e2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 23:36:52 2007 +0100

    [cairo-pdf-surface] Restore old_group for failed emit_meta_surface().
    
    Ensure we restore the surface->current_group if we encounter an error
    during _cairo_pdf_surface_emit_meta_surface() lest we leak the
    current_group array.

 src/cairo-pdf-surface.c |   27 ++++++++++++++++-----------
 1 files changed, 16 insertions(+), 11 deletions(-)

commit 8eb9fcf67336a8e4f95366956ae6f1880af4a93e
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Oct 10 14:05:22 2007 -0700

    [win32] mask win32 printing vertex colors with 0xff00 per docs
    
    The range for the vertex color structures is 0x0000 .. 0xff00; I
    think that this is an error in the docs, but strip out the low bits
    just in case.

 src/cairo-win32-printing-surface.c |   11 +++++++----
 1 files changed, 7 insertions(+), 4 deletions(-)

commit 3545ebc1357969616e2f4fa6b36565f211ea36b3
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Oct 10 14:01:30 2007 -0700

    Fix win32 printing surface copyright notice
    
    Bad copy-and-paste of license.

 src/cairo-win32-printing-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 0b65c301a72836f46cdcda8b8fa1e995100c7727
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 23:17:42 2007 +0100

    [Makefile.am] Change lcov-clean to use more portable constructs.
    
    Replace xargs and rm with the binaries found by configure and drop the
    passing of NUL-terminated strings as that is a GNU extension.

 Makefile.am |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit b8d7d62b08576364c8c402490b6f5e4a1472d5d8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 23:12:52 2007 +0100

    Fix some trivial syntax warnings for -ansi.
    
    gcc -ansi -pedantic gives a few syntax warnings, principally for use of
    '//' comments and a comma at the end of enumerators. Apply these
    corrections as they are trivial.

 configure.in                     |    2 +-
 src/cairo-directfb-surface.c     |   16 ++++++++--------
 src/cairo-meta-surface-private.h |    2 +-
 src/cairo-type1-fallback.c       |    2 +-
 src/cairo-types-private.h        |    7 +++----
 src/cairoint.h                   |    5 +++++
 6 files changed, 19 insertions(+), 15 deletions(-)

commit 7e6ac74de17cf82f224d9f5fad3ad60e92d7690b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 10 14:00:56 2007 +0100

    [win32] Clean up compiler warnings.
    
    Fix up a few instances of unused status returns.

 src/cairo-win32-font.c             |   89 ++++++++++++++++++++----------------
 src/cairo-win32-printing-surface.c |   26 +++++++----
 src/cairo-win32-surface.c          |   24 ++++------
 3 files changed, 76 insertions(+), 63 deletions(-)

commit bee05467a5f398eaaaa8d79b3ff0a8b119856143
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 10 12:32:16 2007 +0100

    [configure.in] Initialise test_svg.
    
    Set test_svg to no prior for checking for SVG availability so that the
    printed summary is correct if the user explicitly disables the SVG
    surface on the configure command line.

 configure.in |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 785cb5b7e11a2786b60a995c43e9ee411ec5ec2d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 16:58:46 2007 +0100

    [cairo-image-surface] Dead code elimination.
    
    Remove an unreachable return and unused variable - tidy up after
    a bad merge.

 src/cairo-image-surface.c |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

commit 2268c5907ce80fe40d54ccfac8435ee5e22d36de
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 13:23:34 2007 +0100

    [cairo-glitz-surface] Propagate errors from set_image().
    
    Propagate errors from _cairo_glitz_surface_set_image().

 src/cairo-glitz-surface.c |   28 ++++++++++++++++++++--------
 1 files changed, 20 insertions(+), 8 deletions(-)

commit 4958789b9e8bf531259b3d1ea27887a8319f7696
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 12:49:08 2007 +0100

    [cairo-xlib-surface] Propagate error from _draw_image_surface() to surface.
    
    Instead of simply ignoring the error that may occur when we upload the
    destination image to the xlib surface (via XPutImage) record the error
    on the xlib surface.

 src/cairo-xlib-surface.c |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit 9c65efeeb108c39e6f55c9247e7d11bfea35cb66
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 11:51:48 2007 +0100

    [boilerplate-test-surfaces] Check show page for errors.
    
    Check that cairo_surface_show_page() did not generate any errors before
    reading back the image buffer and saving it as a png.

 boilerplate/cairo-boilerplate-test-surfaces.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit caf04b1bb89c1a7668e36d5f334765a2323bd564
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 11:22:46 2007 +0100

    [cairo-cff-subset] Propagate error status from failed append_copy().
    
    Add a couple of missing status checks for the result of
    cff_index_append_copy().

 src/cairo-cff-subset.c |   16 ++++++++++------
 1 files changed, 10 insertions(+), 6 deletions(-)

commit ef275cd65a9f20a8a3b1fb3883aff0cc8a3bf401
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 11:19:45 2007 +0100

    [test-meta-surface] Propagate error from show_page().
    
    Add a missing error propagation for _test_meta_surface_show_page().

 src/test-meta-surface.c |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

commit 7758e56d0c96fd113a12b2adc92c783e962feebf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 11:16:40 2007 +0100

    [cairo-hull] Remove a couple of redundant status returns.
    
    Those two functions unconditionally returned success, so change the
    return to void.

 src/cairo-hull.c |   10 +++-------
 1 files changed, 3 insertions(+), 7 deletions(-)

commit 1dabfc2b271a57b4eaa13922a031ccd38a586dd1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 11:15:27 2007 +0100

    [cairo-clip] Propagate error status from clip_intersect_path().
    
    Propagate the error status (filtering out UNSUPPORTED) from
    intersect_path() when reapplying the clip path during a deep copy.

 src/cairo-clip.c |   51 +++++++++++++++++++++++++++++++--------------------
 1 files changed, 31 insertions(+), 20 deletions(-)

commit 32b78fffc3b8441029ee6b48762a7d0c06bb44a8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 11:08:58 2007 +0100

    [cairo-traps] Simplify the status interaction of traps_grow().
    
    Simply return the error status from the traps_grow() function rather
    than having an assignment in the return function and then immediately
    another assignment of the error to the status member at its callsite.

 src/cairo-traps.c |   11 +++--------
 1 files changed, 3 insertions(+), 8 deletions(-)

commit 66563eddd8ba2610fa59341b9337a30533e70d56
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 9 09:28:35 2007 +0100

    [cairo-pdf-surface] Check status return after emit_meta_pattern().
    
    Add the missing status propagation.

 src/cairo-pdf-surface.c |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

commit be7d1f0f8f84ddac9e8c7dda4aa39f88806a5e39
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Oct 9 14:27:53 2007 -0700

    Simplify CAIRO_REFERENCE_COUNT_INVALID macro
    
    MSVC doesn't like the previous anonymous structure/cast, so simplify
    to just a bare {} structure for use as an initializer.

 src/cairo-reference-count-private.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 712c3cda44d7023316b93a1241e66aabde15d668
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Oct 9 13:56:51 2007 -0700

    [win32] reduce GDI object usage
    
    Only create region objects if they're necessary; this significantly reduces
    the number of GDI objects in use by cairo surfaces.

 src/cairo-win32-surface.c |  159 +++++++++++++++++++++++++--------------------
 1 files changed, 89 insertions(+), 70 deletions(-)

commit c99d33b10e84883ade1402c3c1d1efdb4b46f66e
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Oct 2 10:54:44 2007 -0700

    [win32] return a nil surface, not NULL
    
    Missed an error return

 src/cairo-win32-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 4dbf495515d6de933de7f567b935c5fdceed5f6f
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Oct 2 10:48:59 2007 -0700

    [win32] report error correctly if CreateCompatibleBitmap fails
    
    These errors were being dropped on the floor, leading to
    rendering errors in out of video memory conditions.

 src/cairo-win32-surface.c |   20 +++++++++++++++++++-
 1 files changed, 19 insertions(+), 1 deletions(-)

commit 61ba63f3a0947bc89310f04e9bc1694fb6451c11
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Fri Sep 21 11:18:17 2007 -0700

    [win32] remove ignore_operators flag from win32 printing surface
    
    Remove the ignore_operators fallback-avoiding workaround; if apps
    want that same behaviour, they'll have to implement it themselves
    by taking care when calling cairo_set_operator().

 src/cairo-win32-printing-surface.c |   16 ++++------------
 src/cairo-win32-private.h          |    5 -----
 src/cairo-win32.h                  |    3 ++-
 3 files changed, 6 insertions(+), 18 deletions(-)

commit b12ed375cf7ad02a30324616e121a1e9ab8998cb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Oct 9 15:54:58 2007 -0400

    [ChangeLog.mk] Fix changelog generation rules
    
    Previously it was trying to get logs of 1.2.0..1.4 while I really meant
    was 1.2.0..1.4.0.  It was a simple typo.

 ChangeLog.mk |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit cbc4087a40aa7c6039ddadfca2a9876cb14e1bc6
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Oct 6 19:18:31 2007 +0930

    Type1 subset: Add check for CFF fonts

 src/cairo-type1-subset.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit a1633df6eebd9b1252d832c7a70cea6150c818d3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 17:21:00 2007 +0100

    [cairo-scaled-font-subsets] Increment the sub_font counter after insertion.
    
    Do not modify the parent subsets->num_sub_font until after we have
    successfully created the sub_font and inserted it into the hash table.

 src/cairo-scaled-font-subsets.c |   24 +++++++++++++++---------
 1 files changed, 15 insertions(+), 9 deletions(-)

commit cf2f994a319da1230c5d53f3dd81e7715e44a162
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 17:15:29 2007 +0100

    [cairo-paginated-surface] Propagate backend errors to the surface.
    
    If we call a srface backend function directly, then it our
    responsibility to propagate any fatal errors to the surface.

 src/cairo-paginated-surface.c |   57 ++++++++++++++++++++++++----------------
 1 files changed, 34 insertions(+), 23 deletions(-)

commit 3da62fdd2848bd9d06b83534adfee2afa17828ba
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 13:41:39 2007 +0100

    [cairo-xlib-display] Rescan the displays list during shutdown.
    
    As we drop the list mutex whilst calling the hooks during the
    XCloseDisplay callback, we must rescan the list when we reacquire the
    mutex in order to remove the display from the list.

 src/cairo-xlib-display.c |   48 +++++++++++++++++++++++++--------------------
 1 files changed, 27 insertions(+), 21 deletions(-)

commit 737cbd25a6cb0bec87563926ad644da019fc9800
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 13:03:47 2007 +0100

    [cairo-ps-surface] Cleanup ps surface after creation failure.
    
    If we fail to create the paginated wrapper for the ps surface, cleanup
    the resources allocated for the surface.

 src/cairo-ps-surface.c |   17 +++++++++++------
 1 files changed, 11 insertions(+), 6 deletions(-)

commit 31b52779bad4122d101cdffdb03153baf6cd011e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 12:55:13 2007 +0100

    [cairo-boilerplate-xlib] Cleanup fallback after creation failure.
    
    Cleanup the local resource if we fail to create the X window and
    surface for the xlib fallback test target.

 boilerplate/cairo-boilerplate-xlib.c |    9 +++++++--
 1 files changed, 7 insertions(+), 2 deletions(-)

commit b210bea6c1867ef9d5c344747d17ca216f6071bd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 12:45:36 2007 +0100

    [cairo-pdf-surface] Check for pdf_resource_t allocation failure.
    
    Check that the resources are actually allocated or propagate the error.

 src/cairo-pdf-surface.c |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

commit 5ac7ba9821cba076d7f53f6b8836a8619661018c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 12:16:23 2007 +0100

    [cairo-pdf-surface] Destroy local resources on failed surface creation.
    
    During _cairo_pdf_surface_create_for_stream_internal() destroy all
    locally allocated resources and the output stream if we fail to create
    the pdf surface or its paginated wrapper.

 src/cairo-pdf-surface.c |   29 ++++++++++++++++++++---------
 1 files changed, 20 insertions(+), 9 deletions(-)

commit 63ddfa077c498780d46f752ec7f255b143c9f692
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 12:08:40 2007 +0100

    [cairo-pdf-surface] Propagate error status.
    
    Add a few missing propagations of error status.

 src/cairo-pdf-surface.c |   45 ++++++++++++++++++++++++++++++++++-----------
 1 files changed, 34 insertions(+), 11 deletions(-)

commit f1b6e2735c48d5a54190068c038047942f40f1d1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 11:59:13 2007 +0100

    [cairo-ps-surface] Propagate errors from emit_pattern().
    
    Do not discard the error status from _cairo_ps_surface_emit_pattern(),
    but propagate it back to the caller.

 src/cairo-ps-surface.c |   21 ++++++++++++++++-----
 1 files changed, 16 insertions(+), 5 deletions(-)

commit 709f3160368417d9a9a78974b16d93ec3e5e3c14
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 17:37:05 2007 +0100

    Cleanup a couple of warnings for use of uninitialized statuses.
    
    The compiler spotted a couple of potential uses of an uninitialized
    status variable - apply the obvious fixes.

 src/cairo-svg-surface.c  |    2 +-
 src/cairo-type1-subset.c |    4 +++-
 2 files changed, 4 insertions(+), 2 deletions(-)

commit 2f22510e22237283869fb2e23585504077566adf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 16:23:12 2007 +0100

    [cairo-xlib] Initialize the global mutexes.
    
    The xlib surface creation routines will eventually attempt to lock the
    global _cairo_xlib_display_mutex. Under the default environment this is
    a non-issue as the CAIRO_MUTEX_INITIALIZE/FINALIZE become no-ops under
    pthreads. However, for the sake of correctness (i.e. to silence the
    lockdep debugger!) insert a call to initialize the global mutexes at the
    start of the public entry points.

 src/cairo-xlib-surface.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit d2557cd5eec7e51496d6b1b57899b2a028898a7c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 00:57:38 2007 +0100

    [test-paginated] Free resources if fail to create the test surface.
    
    Ensure that all the locally allocated resources are freed if we fail
    to allocate the paginated test surface.

 src/test-paginated-surface.c |   12 ++++++++++--
 1 files changed, 10 insertions(+), 2 deletions(-)

commit 60ffeecd4888fdf824b4095c945e1b27e05c0e1d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 00:56:11 2007 +0100

    [test-surfaces] Mark the test backend as static.
    
    There is no need to export the test surface backends, so mark them
    static.

 src/test-fallback-surface.c |    4 ++--
 src/test-meta-surface.c     |    4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 6598973661490ce90b9f42155d8397af491b90c9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 10:23:13 2007 +0100

    [cairo-scaled-font-subset] Propagate errors during collection.
    
    Propagate the errors encountered whilst iterating over the scaled font
    subsets ie _cairo_scaled_font_subsets_foreach_scaled() and co.

 src/cairo-pdf-surface.c                 |   20 ++++++++++++--------
 src/cairo-ps-surface.c                  |   27 +++++++++++++++++++--------
 src/cairo-scaled-font-subsets-private.h |    2 +-
 src/cairo-scaled-font-subsets.c         |   20 ++++++++++++++++----
 src/cairo-svg-surface.c                 |    4 +++-
 5 files changed, 51 insertions(+), 22 deletions(-)

commit 3a2dd9d33686d6a6d1549965cacf48a7f401c086
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 10:10:16 2007 +0100

    [cairo-png] Markup a couple of original error sites with _cairo_error().
    
    Add the _cairo_error() markup to the original error sites within the png
    read/write functions.

 src/cairo-png.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 81243ee7ef1c3fdf3d571778c414adb64e05fa9d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 09:57:56 2007 +0100

    [cairo-scaled-font] Mask cannot be NULL so remove redundant check.
    
    We either generate a mask for the glyphs or throw an error and bypass
    the check, so at that point mask can never be NULL and we do not need
    the test.

 src/cairo-scaled-font.c |   21 +++++++++------------
 1 files changed, 9 insertions(+), 12 deletions(-)

commit f3d921baca02af4db5f8f1743f32e800d2f492bc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 09:53:36 2007 +0100

    [cairo-scaled-font] Destroy the zombie font.
    
    If we do not transfer the font to the holdovers array (because it has
    been removed from the cache and left in a zombie state), destroy it.

 src/cairo-scaled-font.c |   48 ++++++++++++++++++++++++----------------------
 1 files changed, 25 insertions(+), 23 deletions(-)

commit 41aab58f3ae044f1baf668363376532381270ff4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 09:44:29 2007 +0100

    [cairo-surface] Add the usual guards to the API entry point.
    
    Add the checks for unmodifiable surfaces (snapshots, finished and error) to
    cairo_surface_set_fallback_resolution.

 src/cairo-surface.c |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

commit f3ae783c9c81106bdb3aa2d15b848d131c39cd93
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 09:42:23 2007 +0100

    [cairo-surface-fallback] Release the acquired image on error.
    
    Add _cairo_surface_release_source_image() to the error paths.

 src/cairo-surface-fallback.c |   11 +++++++----
 1 files changed, 7 insertions(+), 4 deletions(-)

commit 29a5aae958fd9c6a8ec71326c7dad679c0bf5938
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 09:39:20 2007 +0100

    [cairo-type1-fallback] Propagate error from closing the stream.
    
    Propagate the error from destroying the font and closing the output stream.

 src/cairo-type1-fallback.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit dd0f2d851cd4c4b2bab05668800e5379712f8ac6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 15:22:13 2007 +0100

    [cairo-atomic] Hide compiler warnings for _cairo_status_set_error().
    
    gcc treats cairo_status_t as an unsigned integer and so generates a
    warning when passing it address as signed integer pointer to
    _cairo_atomic_int_cmpxchg(). Use an ugly cast to hide the warning and
    similarly to hide the warning about the unused result.

 src/cairo-atomic-private.h |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

commit 91d18eefe7be6ad3d1fa951c7424d5843e4718f9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 15:16:28 2007 +0100

    [cairo-type1-subset] Propagate error status (correctly!)
    
    Adrian Johnson pointed out a couple of mistakes in my previous attempt,
    535e7c161b907292eac098b6b4305373558948df, to ensure propagation of errors
    throughout the generation of the type1 subset.
    
    This time the status member of the cairo_type1_font_subset_t is removed
    in favour of simply return the error status from each function. This
    completely avoids the issue of whether we overwrite a pre-existing error
    status and confustion of status returns and the status member. The
    removal of the status from the structure is possible due to its
    short-lived nature - it is not exposed outside of the
    _cairo_type1_subset_init() function, and is not shared by any other
    piece of code.

 src/cairo-type1-subset.c |  293 +++++++++++++++++++++++-----------------------
 1 files changed, 146 insertions(+), 147 deletions(-)

commit bd2245f8b87d85f5ea61200838c10de70e776cf5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 5 00:45:00 2007 +0100

    [cairo-svg-surface] Review error propagation.
    
    Ensure that the error status is propagated and all local resources
    are freed on the error path.

 src/cairo-svg-surface.c |  374 ++++++++++++++++++++++++++++++++++-------------
 1 files changed, 271 insertions(+), 103 deletions(-)

commit 853b29c56fdb50c627b27fc3a767300c7551dba0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 23:30:21 2007 +0100

    [cairo-pdf-surface] Add some missing error propagation.
    
    Add a couple of returns where the status was being assigned but not
    checked.

 src/cairo-pdf-surface.c |   18 ++++++++++++++----
 1 files changed, 14 insertions(+), 4 deletions(-)

commit 323511088d0c9057c1b0fa5e7aacda5e44e2e139
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 23:22:49 2007 +0100

    [cairo-pdf-surface] Propagate errors from close_stream.
    
    Propagate the status return from _cairo_pdf_surface_close_stream().

 src/cairo-pdf-surface.c |   13 +++++++++----
 1 files changed, 9 insertions(+), 4 deletions(-)

commit 0e3f5caf9f0bbdb5acf34ae1b92eab32bf08acbf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 23:18:33 2007 +0100

    [cairo-pdf-surface] Propagate errors during pattern selection.
    
    Propagate error from _cairo_pdf_surface_select_pattern ().

 src/cairo-pdf-surface.c |   34 ++++++++++++++++++++++++++--------
 1 files changed, 26 insertions(+), 8 deletions(-)

commit 7940e39c1820b87c5b96dec6bc59eab97be4a793
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 23:15:21 2007 +0100

    [cairo-pdf-surface] Propagate errors from opening/closing groups.
    
    Propagate the any error encountered during _cairo_pdf_surface_open_group
    and friends.

 src/cairo-pdf-surface.c |  193 +++++++++++++++++++++++++++++++++++++----------
 1 files changed, 152 insertions(+), 41 deletions(-)

commit 7601939a6524ad97a333fef910f3b5e69c46776c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 23:07:36 2007 +0100

    [cairo-deflate-stream] Return the nil stream if creating from an error stream.
    
    If _cairo_deflate_stream_create() is passed a stream in the error state,
    return a stream also in the error state, namely the _cairo_output_stream_nil.

 src/cairo-deflate-stream.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit dbbcb5c26fba77d2a828b253c97e4770b81cf90b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 21:18:47 2007 +0100

    [Makefile] Correct parameters to lcov reset.
    
    lcov uses -z to zero its counters, not --reset.

 Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 717dcd1a2c109f48f0a419a5178fc58d5d4f9a2d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 21:17:31 2007 +0100

    [cairo-pdf-surface] Propagate resource allocation failure.
    
    Propagate failure of _cairo_pdf_surface_new_object().

 src/cairo-pdf-surface.c |  163 +++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 159 insertions(+), 4 deletions(-)

commit 8fb40aee97fdb3ae2cbbfa5c6a350c7b8b030005
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 19:20:35 2007 +0100

    [cairo-image-surface] Check for errors whilst cloning.
    
    After attempting to clone an image, check the context status and return
    the nil surface if there was an error.

 src/cairo-image-surface.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit b61931640d384707a6fc48f9ba4a4f2ddf675c32
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 19:12:10 2007 +0100

    [cairo-ps-surface] Check the creation of output streams.
    
    Check for allocation errors during the creation of the output streams.

 src/cairo-ps-surface.c |   18 ++++++++++++++++--
 1 files changed, 16 insertions(+), 2 deletions(-)

commit 353c2ab5c0e10f267a1adf3957b5d6af4e6a2e29
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 19:10:42 2007 +0100

    [cairo-output-stream] Guard against destroying the nil streams.
    
    Add a guard to return early if we attempt to call
    _cairo_output_stream_destroy() on the nil cairo_output_stream_t streams.

 src/cairo-output-stream.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 7cc7bf09c1a61f407fdb054640ebf24039f985db
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 18:52:50 2007 +0100

    [cairo-meta-surface] Propagate errors during replay to the surface.
    
    Store any fatal errors raised during the replay on the surface object.

 src/cairo-meta-surface.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit 042821b566daf4aa17d662e7422d1b98858954d7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 20:05:58 2007 +0100

    [cairo-surface] Propagate fatal errors to the surface.
    
    Store errors raised by the backend on the surface.

 src/cairo-surface.c |  131 ++++++++++++++++++++++++++++-----------------------
 1 files changed, 72 insertions(+), 59 deletions(-)

commit 535e7c161b907292eac098b6b4305373558948df
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 18:45:17 2007 +0100

    [cairo-type1-subset] Do not mask error returns.
    
    When propagating errors, check that we do not overwrite a pre-existing
    error.

 src/cairo-type1-subset.c |  123 ++++++++++++++++++++++++++++++----------------
 1 files changed, 81 insertions(+), 42 deletions(-)

commit bb8d4c0b14ec175637f57a3b51c4997c0be12a0f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 18:33:24 2007 +0100

    [cairo-truetype-subset] Do mask error status returns.
    
    Be careful not to overwrite existing the error status when propagating
    errors and to not blindly return INT_STATUS_UNSUPPORTED from
    load_truetype_table() as this will mask fatal errors.

 src/cairo-truetype-subset.c |  363 ++++++++++++++++++++++++++-----------------
 1 files changed, 219 insertions(+), 144 deletions(-)

commit 37fd0d8967df21695d6536af1d7aedbeef2d2449
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 17:12:26 2007 +0100

    [cairo-cff-subset] Propagate errors and review error paths.
    
    Ensure that errors get duly propagated back to the caller and all
    locally allocated resources are freed along error paths.

 src/cairo-cff-subset.c |  291 ++++++++++++++++++++++++++++++++++--------------
 1 files changed, 209 insertions(+), 82 deletions(-)

commit add0959328117e2023db0ba2432ed29ecb93275e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 17:00:26 2007 +0100

    [cairo-debug] Finalize mutexes along with other static data.
    
    Initialize (so repeated calls of cairo_debug_reset_static_data() is
    safe) and finalize the mutexes with the reset of the static data.

 src/cairo-debug.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit a4f20610afd18d58a964dbe84cc90c5723b2996d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 16:37:44 2007 +0100

    [cairo] Protect the getters when operating on the nil object.
    
    Put a guard that checks the context's status at the start of each
    getter that prevents the function from trying to dereference NULL state.
    Use the status, as opposed to the invalid reference count, for
    consistency with the existing guards on some of the getters.

 src/cairo.c |   51 +++++++++++++++++++++++++++++++++++++++++++++++++--
 1 files changed, 49 insertions(+), 2 deletions(-)

commit 80c06f4539962231df771b38e64834a238f410dd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 16:16:41 2007 +0100

    [cairo-scaled-font] Don't hold onto to a dropped font.
    
    Mark fonts that have been removed from the cache due to an error on a
    shared object and do not put them into the holdovers array.

 src/cairo-scaled-font.c |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

commit 6e93941a7605a3958269de195dc16f255dda7bfd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 16:04:49 2007 +0100

    [cairo-scaled-font] Acquire mutex around _cairo_scaled_font_glyph_path().
    
    All calls that manipulate the scaled_font->cache must hold its mutex.

 src/cairo-gstate.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 261971a3fb9c10c267cced53a440161f1acb4b5d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 16:03:12 2007 +0100

    [cairo-gstate] Fix resource leaks on error paths.
    
    Ensure that all locally allocated (or referenced) resources are freed
    if we later encounter an error.

 src/cairo-gstate.c |   22 ++++++++++++++--------
 1 files changed, 14 insertions(+), 8 deletions(-)

commit 4e44d54f3e99b65f5e80485b22d31890ea3d6561
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 15:58:21 2007 +0100

    [cairo-matrix] Check whether a matrix is invertible before use.
    
    Provide an early check as to whether the font matrix is invertible.

 src/cairo-gstate.c      |    3 +++
 src/cairo-matrix.c      |   10 ++++++++++
 src/cairo-scaled-font.c |    3 +++
 src/cairoint.h          |    3 +++
 4 files changed, 19 insertions(+), 0 deletions(-)

commit 528da4e5e131fe385a60431eb6656a542b27c70f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 15:50:40 2007 +0100

    [cairo-scaled-font] Freeze the font cache whilst iterating over glyphs.
    
    Prevent glyph cache removal whilst iterating over a glyph string.

 src/cairo-scaled-font.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 4b81eeb20ebe070692ef8099c00de3829da8bf69
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 15:46:13 2007 +0100

    [cairo-scaled-font] Destroy the mask on the error path.
    
    Do not leak the mask if we encounter an error whilst tracing.

 src/cairo-scaled-font.c |   17 ++++++++++-------
 1 files changed, 10 insertions(+), 7 deletions(-)

commit d0b1308cd73a6b3602e5414abf03a3bdf8d2d001
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 15:43:09 2007 +0100

    [cairo-scaled-font] Store fatal errors on the cairo_scaled_font_t.
    
    Ensure that all fatal errors raised whilst using the font are stored on
    the font.

 src/cairo-scaled-font.c |   35 +++++++++++++++++++++++------------
 1 files changed, 23 insertions(+), 12 deletions(-)

commit 4c32e6bfde5d613e0eeef407b9b50c557b1878e3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 15:31:25 2007 +0100

    [cairo-scaled-font] Return the error status from _cairo_scaled_font_set_error()
    
    Similar to the other _cairo_*_set_error() return the error status.

 src/cairo-ft-font.c     |    4 ++--
 src/cairo-scaled-font.c |   18 +++++++++---------
 src/cairoint.h          |    2 +-
 3 files changed, 12 insertions(+), 12 deletions(-)

commit 06ae5f1ba3bb679c145d2f7e9ed8c244abf7ff17
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 15:26:09 2007 +0100

    [cairo-font-face] Set the error on the font.
    
    Similar to the other shared objects, store fatal errors on the shared
    font_face. And do not return a cached reference to an object in an
    error state.

 src/cairo-font-face.c   |   46 +++++++++++++++++++++++++++++++++++++---------
 src/cairo-scaled-font.c |    1 +
 src/cairoint.h          |    4 ++++
 3 files changed, 42 insertions(+), 9 deletions(-)

commit 4cffdf2681ba254587bd774ea49718e71535b067
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 14:59:55 2007 +0100

    [cairo-ft-font] Always call _cairo_ft_unscaled_font_fini ().
    
    The _cairo_ft_unscaled_font_fini() was skipped during the destroy for
    fonts generated by cairo_ft_font_face_create_for_ft_face(). However
    this causes a mutex to be 'leaked' for each font.

 src/cairo-ft-font.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit de1f92ae14bfc4d74d8df88ae81d7b90dd6739f0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 14:51:16 2007 +0100

    [cairo-output-stream] Propagate error status when copying streams.
    
    During _cairo_memory_stream_copy(), if set, copy the incoming error over
    to the destination stream and return early.

 src/cairo-output-stream.c |   12 ++++++++++--
 1 files changed, 10 insertions(+), 2 deletions(-)

commit 2c256f292fc4a9fd8414e29c4df32d347e360900
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 14:35:08 2007 +0100

    [cairo-error] Another _cairo_error (CAIRO_STATUS_SUCCESS)!
    
    Despite double checking, I still ended up converting one too many
    status values.

 src/cairo-truetype-subset.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit bed8239f03773ad1584c8ba48ceb0b34bbe69453
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 13:15:46 2007 +0100

    [cairo-error] Clean up all the warnings and missing _cairo_error() calls.
    
    Every time we assign or return a hard-coded error status wrap that value
    with a call to _cairo_error(). So the idiom becomes:
        status = _cairo_error (CAIRO_STATUS_NO_MEMORY);
    or
        return _cairo_error (CAIRO_STATUS_INVALID_DASH);
    
    This ensures that a breakpoint placed on _cairo_error() will trigger
    immediately cairo detects the error.

 src/cairo-analysis-surface.c    |    4 +-
 src/cairo-array.c               |    9 +--
 src/cairo-atsui-font.c          |   18 +++---
 src/cairo-base85-stream.c       |    2 +-
 src/cairo-bentley-ottmann.c     |   22 +++-----
 src/cairo-cache.c               |    4 +-
 src/cairo-cff-subset.c          |  122 +++++++++++++++------------------------
 src/cairo-clip.c                |   18 +++---
 src/cairo-deflate-stream.c      |    2 +-
 src/cairo-directfb-surface.c    |   49 +++++++---------
 src/cairo-font-face.c           |    6 +-
 src/cairo-font-options.c        |    4 +-
 src/cairo-ft-font.c             |  111 ++++++++++++++---------------------
 src/cairo-glitz-surface.c       |   89 ++++++++++++----------------
 src/cairo-gstate.c              |   37 +++++-------
 src/cairo-hash.c                |   10 +--
 src/cairo-hull.c                |    2 +-
 src/cairo-image-surface.c       |   47 ++++++---------
 src/cairo-lzw.c                 |    6 +-
 src/cairo-matrix.c              |    4 +-
 src/cairo-meta-surface.c        |   48 ++++++----------
 src/cairo-os2-surface.c         |   24 ++++----
 src/cairo-output-stream.c       |   18 +++---
 src/cairo-paginated-surface.c   |    8 +--
 src/cairo-path-fixed.c          |   14 ++--
 src/cairo-path-stroke.c         |    6 +-
 src/cairo-path.c                |   16 +++---
 src/cairo-pattern.c             |   65 +++++++++-----------
 src/cairo-pdf-surface.c         |   62 ++++++++-----------
 src/cairo-pen.c                 |   19 ++----
 src/cairo-png.c                 |   24 ++++----
 src/cairo-polygon.c             |    6 +-
 src/cairo-ps-surface.c          |   63 +++++++++-----------
 src/cairo-quartz-surface.c      |   15 ++---
 src/cairo-region.c              |   22 +++----
 src/cairo-scaled-font-subsets.c |   20 +++----
 src/cairo-scaled-font.c         |   16 ++---
 src/cairo-skiplist.c            |    2 +-
 src/cairo-spline.c              |    6 +-
 src/cairo-stroke-style.c        |    6 +-
 src/cairo-surface-fallback.c    |   10 +--
 src/cairo-surface.c             |   82 ++++++++++++++------------
 src/cairo-svg-surface.c         |   24 +++-----
 src/cairo-traps.c               |    9 +--
 src/cairo-truetype-subset.c     |   43 ++++++--------
 src/cairo-type1-fallback.c      |   27 ++++-----
 src/cairo-type1-subset.c        |   30 +++++-----
 src/cairo-unicode.c             |   20 +++----
 src/cairo-win32-font.c          |   40 ++++++------
 src/cairo-win32-surface.c       |   23 ++++----
 src/cairo-xcb-surface.c         |   50 +++++++---------
 src/cairo-xlib-display.c        |    2 +-
 src/cairo-xlib-surface.c        |   88 +++++++++++++---------------
 src/cairo.c                     |    8 +-
 src/cairoint.h                  |    8 ++-
 src/test-fallback-surface.c     |    2 +-
 src/test-meta-surface.c         |    6 +-
 src/test-paginated-surface.c    |    6 +-
 58 files changed, 648 insertions(+), 856 deletions(-)

commit d90d4bb6b99e0a912650234e28d097ea76c1cecc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 11:30:13 2007 +0100

    [cairo-error] Make _cairo_error() return the error status.
    
    As pointed out by Jeff Muizelaar, this allows for more concise code, as
        _cairo_error(CAIRO_STATUS_NO_MEMORY)
        return CAIRO_STATUS_NO_MEMORY
    can become
        return _cairo_error(CAIRO_STATUS_NO_MEMORY);

 src/cairo.c    |    6 +++++-
 src/cairoint.h |    2 +-
 2 files changed, 6 insertions(+), 2 deletions(-)

commit 71120727e190dfaf3ccbe63b3d91d90e36cff6f6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 11:13:33 2007 +0100

    [cairo-atomic] Use an atomic operation to set the status on a shared resource.
    
    Since the objects can be shared and may be in use simultaneously across
    multiple threads, setting the status needs to be atomic. We use a
    locked compare and exchange in order to avoid overwriting an existing
    error - that is we use an atomic operation that only sets the new status
    value if the current value is CAIRO_STATUS_SUCCESS.

 src/cairo-atomic-private.h |    8 ++++++++
 src/cairo-atomic.c         |   15 +++++++++++++++
 src/cairo-pattern.c        |   17 ++++++++---------
 src/cairo-scaled-font.c    |   13 ++++++-------
 src/cairo-surface.c        |   13 ++++++-------
 src/cairo.c                |   12 +++++-------
 6 files changed, 48 insertions(+), 30 deletions(-)

commit f4356efb64a043e7a459fe77616f3b7c92b25c49
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 09:30:32 2007 +0100

    [malloc/error] Fixup _cairo_error (CAIRO_STATUS_SUCCESS)!
    
    At some point during the blitz, I accidentally wrote
    _cairo_error (CAIRO_STATUS_SUCCESS) and then proceeded to paste it into
    the next 30 error sites! s/CAIRO_STATUS_SUCCESS/CAIRO_STATUS_NO_MEMORY/

 src/cairo-glitz-surface.c |   24 ++++++++++++------------
 src/cairo-gstate.c        |    8 ++++----
 src/cairo-hash.c          |    6 +++---
 src/cairo-hull.c          |    2 +-
 src/cairo-image-surface.c |   12 +++++++-----
 src/cairo-lzw.c           |    4 ++--
 src/cairo-meta-surface.c  |   10 +++++-----
 7 files changed, 34 insertions(+), 32 deletions(-)

commit ef5f460eb1f86a73e016c1150723ae1e70b3b037
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 09:08:46 2007 +0100

    [cairo-path] Check for an empty path in cairo_append_path().
    
    As we now generate empty paths, we must be able to handle empty paths
    in the user facing API. cairo_append_path() has an explicit check, and
    raises an error, for a NULL path->data, so we need to check the
    path->num_data first for empty paths.

 src/cairo.c      |    3 +++
 test/copy-path.c |   15 +++++++++++++++
 2 files changed, 18 insertions(+), 0 deletions(-)

commit 8ad56b308ae8bbecfe9873c21551a6d4b2302420
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 4 00:38:12 2007 +0100

    [malloc/error] Add call to _cairo_error() after a failed malloc.
    
    Blitz all allocations to ensure that they raise a
    _cairo_error(CAIRO_STATUS_NO_MEMORY) on failure.

 src/cairo-array.c               |    6 +++-
 src/cairo-atsui-font.c          |    1 +
 src/cairo-base85-stream.c       |    4 ++-
 src/cairo-bentley-ottmann.c     |   12 +++++--
 src/cairo-cache.c               |    4 ++-
 src/cairo-cff-subset.c          |   72 +++++++++++++++++++++++++++++---------
 src/cairo-clip.c                |    4 ++-
 src/cairo-deflate-stream.c      |    4 ++-
 src/cairo-directfb-surface.c    |   32 ++++++++++++-----
 src/cairo-font-face.c           |    4 ++-
 src/cairo-font-options.c        |   11 ++++--
 src/cairo-ft-font.c             |   13 +++++--
 src/cairo-glitz-surface.c       |   33 ++++++++++++++----
 src/cairo-gstate.c              |   13 +++++--
 src/cairo-hash.c                |    9 ++++-
 src/cairo-hull.c                |    4 ++-
 src/cairo-image-surface.c       |   10 ++++-
 src/cairo-lzw.c                 |    2 +
 src/cairo-meta-surface.c        |   26 +++++++++++---
 src/cairo-output-stream.c       |   21 +++++++++---
 src/cairo-paginated-surface.c   |    4 ++-
 src/cairo-path-fixed.c          |    8 +++-
 src/cairo-path-stroke.c         |    5 ++-
 src/cairo-pattern.c             |    5 ++-
 src/cairo-pdf-surface.c         |   10 ++++-
 src/cairo-ps-surface.c          |   19 +++++++---
 src/cairo-quartz-surface.c      |   14 +++++++
 src/cairo-region.c              |    4 ++-
 src/cairo-scaled-font-subsets.c |   18 +++++++---
 src/cairo-scaled-font.c         |    3 ++
 src/cairo-skiplist.c            |    5 ++-
 src/cairo-spline.c              |    1 +
 src/cairo-stroke-style.c        |    4 ++-
 src/cairo-surface-fallback.c    |    2 +
 src/cairo-surface.c             |    1 +
 src/cairo-traps.c               |    5 ++-
 src/cairo-truetype-subset.c     |   13 ++++++-
 src/cairo-type1-fallback.c      |    7 +++-
 src/cairo-type1-subset.c        |   26 +++++++++++---
 src/cairo-unicode.c             |    8 +++-
 src/cairo-win32-font.c          |    9 ++++-
 src/cairo-win32-surface.c       |    5 ++-
 src/cairo-xcb-surface.c         |   23 ++++++++++---
 src/cairo-xlib-display.c        |    4 ++-
 src/cairo-xlib-surface.c        |   19 ++++++++--
 src/cairo.c                     |    9 ++++-
 src/test-meta-surface.c         |    4 ++-
 47 files changed, 404 insertions(+), 116 deletions(-)

commit 66664596559c55913fb0b9c8784fe8ab862c217b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 3 23:25:10 2007 +0100

    [malloc] Take advantage of calloc() argument checking.
    
    calloc() will check its arguments for integer overflows so it is safer
    not to pre-multiply them.

 src/cairo-ft-font.c       |    4 ++--
 src/cairo-glitz-surface.c |    2 +-
 src/cairo-image-surface.c |    2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

commit e49bcde27f88e21d5b8037a0089a226096f6514b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 3 23:19:10 2007 +0100

    [malloc] Check for integer overflow when realloc'ing.
    
    Perform similar sanity checks to Vlad's _cairo_malloc_ab() but on the
    arguments to realloc instead.

 src/cairo-array.c          |    4 ++--
 src/cairo-lzw.c            |    6 +++++-
 src/cairo-malloc-private.h |   30 ++++++++++++++++++++++++++----
 src/cairo-path-stroke.c    |    3 ++-
 src/cairo-pattern.c        |    4 +++-
 src/cairo-pen.c            |    3 ++-
 src/cairo-polygon.c        |    3 ++-
 src/cairo-spline.c         |    3 ++-
 src/cairo-traps.c          |    3 ++-
 9 files changed, 46 insertions(+), 13 deletions(-)

commit 8cba73a36c4ec42601388bb9374f3182651bfe60
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 3 22:27:09 2007 +0100

    [cairo-polygon] Add a _cairo_error().
    
    Add a _cairo_error() to an originating error site.

 src/cairo-polygon.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit e767c8b50af578209f1dac3b8f2ae22835e1fee7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 3 22:26:03 2007 +0100

    [cairo-pen] Add _cairo_error().
    
    Markup a couple of originating error sites with _cairo_error().

 src/cairo-pen.c |   12 +++++++++---
 1 files changed, 9 insertions(+), 3 deletions(-)

commit 7047a091748577754845a6ed7f35837e41e7d5fb
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Oct 3 23:10:15 2007 +0930

    TODO: Remove PDF encoding issues
    
    All PDF font encoding issues are fixed now that TrueType fonts are
    embedded in PDF as CIDFontType2.

 TODO |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit 3e70b0a388c04c61816078de058c323774edeb96
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Oct 3 23:01:59 2007 +0930

    ROADMAP: Mark EPS support done

 ROADMAP |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit a4627177663beacd3d15699fee072f7ad2eff4a9
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Oct 3 19:55:05 2007 +0930

    PDF: Fix bug in font resources

 src/cairo-pdf-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit c9a9f1299c2bd5b6a8e53fdb264c233a43e0c44a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Oct 1 17:00:38 2007 +0100

    [cairo-image-surface] Avoid trying to create surfaces with invalid strides.
    
    pixman does not (yet?) support arbitrary strides and will fail to
    generate an image for the data. We misinterpret that failure as a
    CAIRO_STATUS_NO_MEMORY, so instead return CAIRO_STATUS_INVALID_FORMAT
    before attempting to create the pixman image.

 src/cairo-image-surface.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit e241205f0c6d823150cf018c0deb6652dd8b8d02
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Oct 1 16:54:16 2007 +0100

    [cairo-image-surface] Return correct error surfaces.
    
    Avoid returning the "generic" _cairo_surface_nil (which corresponds to
    CAIRO_STATUS_NO_MEMORY) when the user asks us to create a surface with
    an invalid format or content.

 src/cairo-image-surface.c |   65 ++++++++++++++++++++++++++++++++++++++++----
 1 files changed, 59 insertions(+), 6 deletions(-)

commit b4f86638cc4b87bfaf10568ae9beb89626e26613
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Oct 1 17:59:57 2007 +0100

    [cairo-path] Don't raise an error when attempting to create an empty path.
    
    Generate a real empty path structure instead of returning
    _cairo_path_nil, if we have been asked to create an empty path.
    
    (Also add a couple of missing _cairo_error()s and an appropriate test
    case.)
    
    Spotted by Fred Kiefer.

 src/cairo-path.c |   36 ++++++++++++++++++++++++------------
 test/copy-path.c |   17 +++++++++++++++++
 2 files changed, 41 insertions(+), 12 deletions(-)

commit 042c382c094d1ea6f9a5a162d4d1d9ac83413233
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Sep 29 07:55:48 2007 +0930

    CFF Subetting: Fix for #10849
    
    This fixes the problem Apple Preview has with viewing PDFs with CFF
    font subsets.

 src/cairo-cff-subset.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d837a458b95c0e1866eecaf3688dfa36e7dafe8e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 27 17:45:51 2007 +0100

    [configure] Work-around bad interaction of libtool and lcov
    
    libtool causes the .gcda files to be generated in the .libs/ directory,
    separate from the .c source file. lcov expects them to be in the same
    directory - so massage the lcov.info file to remove the reference to the
    .libs/.
    
    Also separate the target for generating the lcov output, so that it can
    be run independently from triggering the tests. And improve convenience
    of using the other lcov targets.

 Makefile.am |   29 ++++++++++++++++++++---------
 1 files changed, 20 insertions(+), 9 deletions(-)

commit abe1b89da4a2aa255a218103c7a05711d0f73b1c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 27 14:49:30 2007 +0100

    [test/get-path-extents] Test extents of cairo_text_path().
    
    Check that the text path extents match the computed metrics.

 test/get-path-extents.c |   38 ++++++++++++++++++++++++++++----------
 1 files changed, 28 insertions(+), 10 deletions(-)

commit 0618818f7a4a323d2c2d0dd122e08aeaa025b3f3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Sep 26 14:40:36 2007 +0100

    [test/get-path-extents] Test extents of an arc.
    
    Add the test case from bug 7245,
    https://bugs.freedesktop.org/show_bug.cgi?id=7245.

 test/get-path-extents.c |   24 +++++++++++++++++++-----
 1 files changed, 19 insertions(+), 5 deletions(-)

commit 54d5dccffa402835db57231f7a6cd98d71688359
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Sep 26 22:21:26 2007 +0930

    PDF: Compress pattern and group streams

 src/cairo-pdf-surface.c |   16 +++++++++++-----
 1 files changed, 11 insertions(+), 5 deletions(-)

commit a0a51977f48cc14c442357f472ed20e43c42829c
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Sep 26 22:21:07 2007 +0930

    PDF: Fix bug in font resources when same font is in multiple groups

 src/cairo-pdf-surface.c |   16 +++++++++++-----
 1 files changed, 11 insertions(+), 5 deletions(-)

commit 76b9b1819251c8f3df0a5ada92a501ad83baa5a1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Sep 26 00:41:31 2007 +0100

    [test/create-for-stream] Add the missing cairo_surface_finish().
    
    Moments after pushing the new test case did I realise the issue...
    We do not attempt to write out the surface to the user stream until
    we perform the cairo_surface_destroy() by which point we have lost
    the ability to interrogate the error status. We can avoid this by
    explicitly calling cairo_surface_finish() and then checking the
    error status - and we see that the error is indeed reported
    correctly.
    
    No bug. Nothing to see here. Please move along. (Apart from the
    request for the status to be return from cairo_surface_destroy!)

 test/create-for-stream.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 1e7f0bd4d5148940fe963eb20782bffe5ee735bd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Sep 26 00:28:47 2007 +0100

    [test/create-for-stream] Add test case for user error propagation.
    
    From bug https://bugs.freedesktop.org/show_bug.cgi?id=7049, we find
    that the error status from the user supplied write function to
    cairo_*_surface_create_for_stream is ignored and not propagated back
    to the surface/context - leading to silent data loss. Incorporate
    the suggested test case, a write function that simply returns
    CAIRO_STATUS_WRITE_ERROR, into create-for-stream.c.

 test/create-for-stream.c |   57 +++++++++++++++++++++++++++++++++++----------
 1 files changed, 44 insertions(+), 13 deletions(-)

commit 1469de5211e84e40490fa612538986768748bd55
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Sep 25 23:35:25 2007 +0100

    [cairo-png] Propagate error from read and write funcs.
    
    Use the png_struct->error_ptr to propagate the error status from the
    user/stdio read and write functions through the png_error() to the
    cairo_surface_write_to_png*() and cairo_surface_read_from_png*()
    functions. From there the error is returned back to the user either
    directly or as the most appropriate error surface.
    
    (Fixes https://bugs.freedesktop.org/show_bug.cgi?id=6909)

 src/cairo-png.c        |   57 +++++++++++++++++++++-----------
 test/create-from-png.c |   84 ++++++++++++++++++++++++++++++++++++++++++-----
 2 files changed, 113 insertions(+), 28 deletions(-)

commit f1d84271d363cc80cdef92ec9cac2cf29783bfe0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Sep 25 21:58:24 2007 +0100

    [cairo-atomic]  Do not use Intel atomic primitives on i386.
    
    When limiting the target instruction set for compatibility with older
    processors, e.g. -march=i386, the Intel atomic primitives generate a
    call to a non-existent function, __sync_fetch_and_add_4(). To detect
    this scenario change the configure test from AC_TRY_COMPILE to
    AC_TRY_LINK which will then cause Cairo to fall back to using mutexes
    for its atomic operations.

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 03be41151d06d48d55bc1e172535829ec45a10cf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Sep 23 21:08:09 2007 +0100

    [cairo-atomic] Rewrite reference counting using atomic ops.
    
    Introduce an opaque cairo_reference_count_t and define operations on it
    in terms of atomic ops. Update all users of reference counters to use
    the new opaque type.

 src/Makefile.am                     |    1 +
 src/cairo-clip-private.h            |   12 +++---
 src/cairo-clip.c                    |   11 +++--
 src/cairo-font-face.c               |   49 ++++++++++-----------
 src/cairo-ft-font.c                 |    2 +-
 src/cairo-image-surface.c           |    2 +-
 src/cairo-pattern.c                 |   50 +++++++++++----------
 src/cairo-private.h                 |    3 +-
 src/cairo-reference-count-private.h |   66 ++++++++++++++++++++++++++++
 src/cairo-scaled-font-private.h     |    3 +-
 src/cairo-scaled-font.c             |   81 +++++++++++++++++------------------
 src/cairo-surface-private.h         |    3 +-
 src/cairo-surface.c                 |   33 ++++++++------
 src/cairo-xlib-display.c            |   42 ++++++++----------
 src/cairo-xlib-private.h            |    5 +-
 src/cairo-xlib-screen.c             |   12 +++--
 src/cairo.c                         |   23 +++++-----
 src/cairoint.h                      |   27 ++++++------
 18 files changed, 246 insertions(+), 179 deletions(-)

commit 8b6c871c9084739460f1320cd36560a09477a83e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 21 10:45:55 2007 +0100

    [cairo-atomic] Introduce atomic ops.
    
    Test for the availability of the Intel __sync_* atomic primitives and
    use them to define a few operations useful for reference counting -
    providing a generic interface that may be targeted at more architectures
    in the future. If no atomic primitives are available, use a mutex based
    variant. If the contention on that mutex is too high, we can consider
    using an array of mutexes using the address of the atomic variable as
    the hash.

 configure.in                   |   16 ++++++++
 src/Makefile.am                |    2 +
 src/cairo-atomic-private.h     |   81 ++++++++++++++++++++++++++++++++++++++++
 src/cairo-atomic.c             |   79 +++++++++++++++++++++++++++++++++++++++
 src/cairo-mutex-list-private.h |    3 +
 5 files changed, 181 insertions(+), 0 deletions(-)

commit 42de1a0a7f5cc10c2bad98ef69da302ed2a1ca84
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Sep 23 21:00:23 2007 +0100

    Move GCC attributes wrapping into a separate header.
    
    The wrapping of GCC attributes (such as cairo_private) needs to be
    visible to any header file, including those that avoid cairoint.h such
    as cairo-boilerplate. To achieve this we move the pre-processor magic to
    its own header file and include it as required.

 src/Makefile.am                   |    1 +
 src/cairo-cache-private.h         |    1 +
 src/cairo-clip-private.h          |    1 +
 src/cairo-compiler-private.h      |  115 +++++++++++++++++++++++++++++++++++++
 src/cairo-hash-private.h          |    1 +
 src/cairo-mutex-private.h         |    1 +
 src/cairo-output-stream-private.h |    1 +
 src/cairo-region-private.h        |    2 +
 src/cairo-wideint-private.h       |    2 +
 src/cairo-xlib-private.h          |    5 +-
 src/cairoint.h                    |   71 +----------------------
 11 files changed, 131 insertions(+), 70 deletions(-)

commit be327a7b49a62c684e133aad5d5d6adec30b60e6
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Sep 25 23:04:03 2007 +0930

    PDF: Compress the content stream
    
    The content stream compression that was previously implemented was
    inadvertently bypassed when the new stream handling for meta surface
    patterns was implemented.

 src/cairo-pdf-surface-private.h |    4 ++
 src/cairo-pdf-surface.c         |   65 ++++++++++++++++++++++++++++++++------
 2 files changed, 58 insertions(+), 11 deletions(-)

commit 99fd9449c24055fd7b3623157397fe61282e2de0
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Sep 25 21:57:46 2007 +0930

    PDF: Remove duplication from the resource dictionary
    
    The same font identifer was being added the resources every time it
    was referenced.

 src/cairo-pdf-surface.c |    4 +---
 1 files changed, 1 insertions(+), 3 deletions(-)

commit dc23ecb6198f1e28b6096cbef931e15407cc20a8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Sep 23 21:02:31 2007 +0100

    [cairo-boilerplate] Do not throw an error if an exclude target is not found.
    
    If we fail to exclude a target because it was not in the list of
    targets - job done and no need to throw a tantrum.

 boilerplate/cairo-boilerplate.c |    5 -----
 1 files changed, 0 insertions(+), 5 deletions(-)

commit 4f7c5a5033f41de94a7ea284a64f4afa0900fff1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Sep 23 21:04:36 2007 +0100

    [cairo-region] Call _cairo_error() at original error site.
    
    Before returning a fresh CAIRO_STATUS_NO_MEMORY, remember to call
    cairo_error().

 src/cairo-region.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 45feb13c2689a8f5813e60fb0c2d17e9e02fd4b5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Sep 23 21:34:50 2007 +0100

    [cairo-clip] Avoid a malloc(0).
    
    Avoid a potential allocation of 0 bytes, and a potential NULL leading to an
    incorrect CAIRO_STATUS_NO_MEMORY, when copying an empty clip region.

 src/cairo-clip.c |   36 +++++++++++++++++++++---------------
 1 files changed, 21 insertions(+), 15 deletions(-)

commit 77f1aa78872aa108199afd41247cf21827f7e33a
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Sep 23 17:43:44 2007 +0930

    Add Encapsulated PostScript support
    
    The analysis surface will calculated the tight bounding box for each
    page. A new paginated-surface backend function set_bounding_box() has
    been added for passing the page bounding box to the target surface at
    the end of the analysis phase.
    
    The changes to the PS file when EPS is enabled are:
        - Add EPS header
        - Use tight bounding box instead of page size
        - Use save/restore to ensure PS interpreter is left in the same state

 src/cairo-analysis-surface-private.h |   10 ++-
 src/cairo-analysis-surface.c         |   32 +++++++
 src/cairo-paginated-private.h        |   19 ++++-
 src/cairo-paginated-surface.c        |   15 +++-
 src/cairo-ps-surface-private.h       |    3 +-
 src/cairo-ps-surface.c               |  151 +++++++++++++++++++++++-----------
 6 files changed, 171 insertions(+), 59 deletions(-)

commit beefbdd63864d10924360f41b244de7edf7b5f5b
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Sep 23 14:23:33 2007 +0930

    Add Encapsulated PostScript API

 doc/public/cairo-sections.txt  |    2 +
 src/cairo-ps-surface-private.h |    2 +
 src/cairo-ps-surface.c         |   57 ++++++++++++++++++++++++++++++++++++++++
 src/cairo-ps.h                 |    7 +++++
 4 files changed, 68 insertions(+), 0 deletions(-)

commit b20e08999e2f6e7a72ee75a7c3fd865bf0368794
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Sep 23 11:37:02 2007 +0930

    Truetype Subsetting: Avoid failing when fonts are missing optional tables
    
    Previously, the TrueType subsetting would fail if any of the "cvt",
    "fpgm", or "prep" tables were missing from the source font. However
    these tables are optional and not required in the subsetted font if
    they do not appear in the source font.
    
    The "name" table has been removed from the subsetted font as the
    Type42 specification does not require this table.

 src/cairo-truetype-subset.c |  153 +++++++++++++++++++++++++++++++------------
 1 files changed, 110 insertions(+), 43 deletions(-)

commit 8132b8b417c75388ce4c4671fffddaa44a5d1be0
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sun Sep 23 02:52:01 2007 +0100

    [type1-subset] only subset ft fonts
    
    If atsui and ft were both enabled, the code crashed trying to subset
    type-1 fonts; fixed by checking if fonts really are ft before using
    them as ft fonts. This is a temporary fix until we support subsetting
    across all font backends.

 src/cairo-type1-subset.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 6020f67f1a49cfe3844c4938d4af24c63c8424cc
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Fri Sep 21 11:02:42 2007 -0700

    Avoid divide-by-zero when trying to allocate a 0-sized array
    
    Fix up the _cairo_malloc_* wrappers to avoid blindly dividing by zero;
    any attempt to allocate a zero-sized chunk of memory will result in
    NULL.

 src/cairo-malloc-private.h |   35 +++++++++++++++++++++++++----------
 1 files changed, 25 insertions(+), 10 deletions(-)

commit c79fc9af334fd6f2d1078071d64178125561b187
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Sep 20 16:01:43 2007 -0700

    Add rgb24-specific reference imag for mask-alpha test

 test/mask-alpha-rgb24-ref.png |  Bin 0 -> 599 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit 59dd59ce8d4c2a35788f3f0baf3409d3a8555744
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Sep 9 22:32:36 2007 +0930

    Add mask-alpha test

 test/.gitignore         |    1 +
 test/Makefile.am        |    1 +
 test/mask-alpha-ref.png |  Bin 0 -> 640 bytes
 test/mask-alpha.c       |   90 +++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 92 insertions(+), 0 deletions(-)

commit 12b2ab630c2343c7bd7d885cc0e773023e3d8fa8
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Sep 20 22:51:39 2007 +0930

    PDF: Add support for CAIRO_FORMAT_A8 images

 src/cairo-pdf-surface.c |   44 ++++++++++++++++++++++++++++++++------------
 1 files changed, 32 insertions(+), 12 deletions(-)

commit 8a4adcf5f3c893505a53882a0532a220f79f4409
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Sep 20 08:57:19 2007 +0930

    ROADMAP: Add metadata API

 ROADMAP |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit 6e78c6589d4af6291158b7cd9d94e3a80139e279
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Sep 18 19:50:16 2007 -0400

    [ROADMAP] Mark xlib IncludeInferior support done

 ROADMAP |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

commit d8b0de01d67cdf73d8266a73f54ba1ac42fee3c9
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Sep 18 09:26:05 2007 -0700

    fix trailing whitespace

 src/cairo-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 4fd9acc1b321d75623a66d37c0ff299ae06fb98b
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Sep 4 10:30:08 2007 -0700

    [win32] add new win32 printing surface

 src/Makefile.win32 |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit e3c16e15e39d98f96e2ce20e397d88214f5a821e
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Aug 29 16:30:49 2007 -0700

    Make NO_MUTEX really mean no mutexes

 src/cairo-mutex-type-private.h |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit ffc16c4be2fb5a0d214cb186dee52e74dbd584cf
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Aug 29 16:25:58 2007 -0700

    [win32] Add win32 printing surface
    
    Add win32 surface intended for use with printer DCs; GDI will be used
    as much as possible, and the surface will be a paginated surface
    that supports fine-grained fallback.
    
    (Original work from Adrian Johnson; additional fixes by me.)

 src/Makefile.am                    |    2 +-
 src/cairo-paginated-surface.c      |   37 +-
 src/cairo-win32-font.c             |    7 +-
 src/cairo-win32-printing-surface.c | 1220 ++++++++++++++++++++++++++++++++++++
 src/cairo-win32-private.h          |   66 ++-
 src/cairo-win32-surface.c          |   78 ++-
 src/cairo-win32.h                  |    3 +
 src/cairo.h                        |    4 +-
 8 files changed, 1376 insertions(+), 41 deletions(-)

commit 284ed91ee4418baf6dd1a437a904980a2156fa48
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Aug 29 15:34:04 2007 -0700

    Let surfaces specify their native resolution, for fallback purposes

 src/cairo-image-surface.c     |    2 ++
 src/cairo-paginated-surface.c |    4 ++--
 src/cairo-surface-private.h   |    8 ++++++++
 src/cairo-surface.c           |   24 ++++++++++++++++++++++++
 src/cairoint.h                |    6 ++++++
 5 files changed, 42 insertions(+), 2 deletions(-)

commit 79d975f84bcc32e91db517d71a7312e2e1d653d4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Sep 12 17:45:11 2007 -0400

    [cairo-ft-font] Ignore FT_Load_Glyph errors other than out-of-memory
    Same for FT_Render_Glyph.
    
    When the user asks us to render a glyph that is not available in the font,
    it's mostly an unavoidable kind of error for them, as in, they can't
    avoid such a call.  So it's not nice to put cairo_t in an error state and
    refuse any further drawying.
    
    Many PDF files are created using buggy software and cause such glpyh-not-found
    errors for CID 0 for example.
    
    Eventually we should propagate these kind of errors up and return it from
    the function call causing it, but that needs API change to add return value
    to all text functions, so for now we just ignore these errors.

 src/cairo-ft-font.c |   14 +++++++++-----
 1 files changed, 9 insertions(+), 5 deletions(-)

commit 21ab44f11d3d20eead5d988c7a6cf48eebff08c7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Sep 17 16:41:52 2007 -0400

    [ChangeLog.mk] Make make rule depend on .git/HEAD, not .git
    That is exactly what we want.  Kristian Hgsberg suggested it.

 ChangeLog.mk |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3f4875dbe20e1d093d70f49c32f7ddf6a6e6ef61
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Sep 16 20:26:33 2007 +0930

    Analysis-surface: Use pattern extents to limit show_glyphs extents

 src/cairo-analysis-surface.c |   12 +++++++++++-
 1 files changed, 11 insertions(+), 1 deletions(-)

commit 14786385b40aa0ae83e3b077a82e3f34aba63f22
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Sep 16 19:43:28 2007 +0930

    Change paginated surface size when PS/PDF _set_size() called
    
    The finer-grained fallbacks would not work correctly if the page
    was set to a larger size.
    
    Add _cairo_paginated_surface_set_size() function that is called
    from cairo_ps_surface_set_size() and cairo_pdf_surface_set_size().

 src/cairo-paginated-private.h   |    5 +++++
 src/cairo-paginated-surface.c   |   23 +++++++++++++++++++++++
 src/cairo-pdf-surface-private.h |    2 ++
 src/cairo-pdf-surface.c         |   14 ++++++++++----
 src/cairo-ps-surface-private.h  |    2 ++
 src/cairo-ps-surface.c          |   14 ++++++++++----
 6 files changed, 52 insertions(+), 8 deletions(-)

commit 46cb7e69526e8b5663077e7409dc232a0f56800b
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Sep 16 16:32:54 2007 +0930

    PS: Remove initclip operator
    
    The DSC and EPS specifications do not allow the use of initclip.
    Instead each page is wrapped in a gsave/restore pair and a
    "grestore gsave" is emitted when the clip path is reset.

 src/cairo-ps-surface.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit e9d85235f9cceed92af428e0ab43503fe0850636
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Sep 16 16:21:10 2007 +0930

    PDF: Fix copy_page() bug

 src/cairo-pdf-surface.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit a5cb48fcf269c16dd138c0ee31b138b1f13e623d
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Sep 16 16:15:10 2007 +0930

    PS: Remove copy_page()
    
    The DSC specification recommends not using the copypage operator as it
    breaks page independence.

 src/cairo-paginated-surface.c |    3 +--
 src/cairo-ps-surface.c        |   14 +-------------
 2 files changed, 2 insertions(+), 15 deletions(-)

commit 03f7a51f47717af45afbc439ce2178789449ab32
Author: Ken Herron <kherron+cairo@fmailbox.com>
Date:   Sun Sep 16 15:56:16 2007 +0930

    PS output optimizations (#11442)
    
    This patches cairo-ps-surface.c to use the aliases for moveto, lineto, curveto,
    and closepath. It also uses selectfont to select fonts.

 src/cairo-ps-surface.c |   13 ++++++-------
 1 files changed, 6 insertions(+), 7 deletions(-)

commit 1274147ce3ec855488fe4e437838b1134c494413
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Sep 15 04:03:08 2007 -0400

    [cairo-gstate] Fix comment about font_matrix having zero translation

 src/cairo-gstate.c |    9 +++++----
 1 files changed, 5 insertions(+), 4 deletions(-)

commit 6fbe2432c6072522b9003a1e46180392010a7aad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Sep 15 04:02:39 2007 -0400

    [PDF] Fix typo in comments

 src/cairo-pdf-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit dca93eb76d64194f1325d7b941fa523da7801634
Author: Jeff Muizelaar <jeff@freiheit.infidigm.net>
Date:   Wed Sep 12 23:12:59 2007 -0400

    Fix theoretical NULL return from cairo_pop_group()
    
    This also makes the code more consistent as group_pattern always holds a valid
    pattern.

 src/cairo.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 5eae45c55b3cd240945cd225631c9c782f69b50f
Author: Jonathan Gramain <jonathan.gramain@gmail.com>
Date:   Wed Sep 12 17:43:55 2007 -0400

    [cairo-gstate] Fix order of matrices in _cairo_gstate_backend_to_user_rectangle()
    
    The cairo_matrix_multiply(out,a,b) docs say that it is equivalent to applying
    matrix a first, followed by b.  Looking at _cairo_gstate_backend_to_user() we should
    apply device_transform_inverse followed by ctm_inverse.  That's what we do now.

 src/cairo-gstate.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit f2910ad3e9bfd279af7f9f43013489a32b5c1747
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Sep 11 13:32:26 2007 -0700

    Update cairo-sections.txt

 doc/public/cairo-sections.txt |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 9e975757a2820303d67e8497ab6cef9368237eb5
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Sep 11 13:30:35 2007 -0700

    Export cairo_surface_{copy,show}_page
    
    This patch adds cairo_surface_copy_page and cairo_surface_show_page
    as public methods, leaving the previous cairo_show_page variants as
    shorthands.  copy_page/show_page are specific to the surface, not
    to the context, so they need to be surface methods.

 TODO                                          |    5 ----
 boilerplate/Makefile.win32                    |    4 +++
 boilerplate/cairo-boilerplate-test-surfaces.c |    5 +---
 src/cairo-gstate.c                            |    4 +-
 src/cairo-paginated-surface.c                 |    6 ++--
 src/cairo-surface.c                           |   27 +++++++++++++++++++++++-
 src/cairo-svg-surface.c                       |    2 +-
 src/cairo.c                                   |    6 +++++
 src/cairo.h                                   |    6 +++++
 src/cairoint.h                                |    8 +-----
 10 files changed, 50 insertions(+), 23 deletions(-)

commit 7dd05b7f86da6a465bb979c2ba955655ddcf66ed
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Sep 11 11:27:35 2007 -0700

    [mlk] Free boxes in copy_rectangle_list on success
    
    Fix memory leak when copy_rectangle_list is used.

 src/cairo-clip.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 897350c6c5cba29b8bd7890a33ecc4d7fa9b7795
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Sep 9 19:11:12 2007 +0930

    PDF: Remove BC entry from Smask dictionary
    
    The BC (background color) in the smask of the recently added
    cairo_mask() support was causing Ghostscript to crash due to the wrong
    number of BC values. The BC entry has been removed as BC default color
    is already what we want.

 src/cairo-pdf-surface.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit 909e0be2416aa6833639439279583d1ae61777fc
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Sep 9 11:20:02 2007 +0930

    Add PDF support for cairo_mask()

 src/cairo-pdf-surface.c |  129 +++++++++++++++++++++++++++++++++++++++++++++--
 1 files changed, 125 insertions(+), 4 deletions(-)

commit d62f8861689d8b9a9a837043fb78813f0407abd4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Sep 5 08:07:41 2007 +0100

    [cairo-ft-font] Early detection of a zero sized bitmap.
    
    Under rare circumstances we may need to extract a surface that
    represents a bitmap with width==0 and rows==0. Detect this case at the
    start and simply return a zero-sized surface.
    
    Fixes https://bugs.freedesktop.org/show_bug.cgi?id=12284.

 src/cairo-ft-font.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit d635e0103346f22e578d17c59153d292820e00d2
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Thu Sep 6 12:56:59 2007 -0700

    Add b8g8r8 formats to cairo-image-surface
    
    Add recognition code for x8b8g8r8 and a8b8g8r8 to cairo-image-surface.
    (Used as the default for 24bpp by some older VNC servers.)

 src/cairo-image-surface.c |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

commit 3c01efb0ee0c8911fba7627d056ec3b53dfab6e3
Merge: 0682b9a 1e21220
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Sep 5 14:38:40 2007 -0700

    Merge branch adrianj/pdf-meta-surface-pattern into cairo
    
    This does introduce some reported failures from the cairo-pdf backend
    into the test suite. However, in all cases the output PDF files look
    fine when viewed with acroread. It looks like all of the problems
    could be fixed by using cairo_rectangle;cairo_fill along with
    CAIRO_EXTEND_PAD when drawing images with cairo inside poppler.
    
    However, I'm not yet filing a bug against poppler and disabling these
    tests because we need to _implement_ CAIRO_EXTEND_PAD before we can
    tell poppler to start using it.

commit 0682b9a9c18640c284c7cc8ba8792a329414998e
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Sep 4 16:47:49 2007 -0700

    Add rgb24-ignore-alpha test
    
    This test demonstrates a bug when compositing an rgb24 image over an argb32
    image, (the implementation appears to be examining the alpha channel
    rather than ignoring it).

 test/.gitignore                 |    1 +
 test/Makefile.am                |    1 +
 test/rgb24-ignore-alpha-ref.png |  Bin 0 -> 116 bytes
 test/rgb24-ignore-alpha.c       |   65 +++++++++++++++++++++++++++++++++++++++
 4 files changed, 67 insertions(+), 0 deletions(-)

commit 84a2c8968a57ed7593db1515718115218072bc0d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Sep 5 12:38:27 2007 -0400

    [test,perf] Support TARGETS_EXCLUDE make variable

 perf/Makefile.am |    6 ++++--
 test/Makefile.am |    5 +++--
 2 files changed, 7 insertions(+), 4 deletions(-)

commit 1e21220f0e2540e3befa66e4764f75589d0eef82
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Sep 5 22:53:43 2007 +0930

    Create meta-surface source image with same content type as the
    meta-surface

 src/cairo-meta-surface.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 875e32178e5d990a09f3c41262d890888035f04f
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Sep 5 22:51:13 2007 +0930

    Eliminate unclipped CLEAR from meta-surface playback
    
    The optimization that avoids replaying commands prior to an unclipped
    CLEAR operation now starts playback from the first command after the
    CLEAR. This avoids the need to handle the unclipped CLEAR in the PDF
    surface.

 src/cairo-meta-surface.c |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

commit d24f019101dd014983aeb0bf186fe2011694e2ed
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Sep 5 22:26:16 2007 +0930

    Add support for PDF meta-surface patterns

 boilerplate/cairo-boilerplate.c  |   11 +--
 src/cairo-analysis-surface.c     |   66 +++++++++
 src/cairo-meta-surface-private.h |    4 +
 src/cairo-meta-surface.c         |   43 +++++-
 src/cairo-pdf-surface.c          |  282 ++++++++++++++++++++++++++++----------
 src/cairo-types-private.h        |    3 +-
 6 files changed, 317 insertions(+), 92 deletions(-)

commit b85032584b32af968dc8d8a0fcfc9f3e1d2770a0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Sep 5 00:26:56 2007 -0400

    [configure.in] Fix non-pkgconfig Xrender detection path (#4724)

 configure.in |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit 1d788da5175dac34ed0298204753bf1b40dfc2b0
Merge: 49ae376 e1819a2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Sep 4 19:12:48 2007 -0400

    Merge branch 'no-xrender.h' into cairo

commit e1819a24fb0196218c4045616c2ba458819b7d31
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Sep 4 19:12:14 2007 -0400

    [cairo-xlib-xrender-private] Remove some protocol-specific macros

 src/cairo-xlib-xrender-private.h |   48 --------------------------------------
 1 files changed, 0 insertions(+), 48 deletions(-)

commit 5e09126ce13c72222719b73ed3a8f504cf352583
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Sep 4 18:40:54 2007 -0400

    [cairo-xlib-xrender-private] Add copyright/license info for copied files

 src/cairo-xlib-xrender-private.h |  163 ++++++++++++++++++++++----------------
 1 files changed, 95 insertions(+), 68 deletions(-)

commit 49ae376840a5851bf4cc281a0562acdfe03337df
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Sep 4 11:35:40 2007 -0700

    Fix error in description of cairo version numbers
    
    And eliminate a bit of redundant text.

 configure.in |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit b60c0a672f1711c20f898ac76c15b6b65a63d46e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Sep 3 14:33:11 2007 +0100

    [cairo-boilerplate] Introduce CAIRO_TEST_TARGET_EXCLUDE.
    
    As opposed to the CAIRO_TEST_TARGET env var which lists the exact
    targets to test, CAIRO_TEST_TARGET_EXCLUDE instead supplies a list of
    targets to filter from the testing set. This is useful under
    circumstances where the build environment prevents testing of a target,
    for example no DirectFB support or the glitz library is broken, but where
    you still want to perform the minimal check that the code compiles.

 boilerplate/cairo-boilerplate.c |   39 ++++++++++++++++++++++++++++++++++++++-
 1 files changed, 38 insertions(+), 1 deletions(-)

commit 740fed62d236224fdfbfccf8c49a199851189107
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Aug 31 20:52:43 2007 -0400

    [xlib] Make it compile without Xrender available at compile time (#12210)

 src/Makefile.am                  |    3 +-
 src/cairo-xlib-display.c         |    1 -
 src/cairo-xlib-private.h         |   10 +-
 src/cairo-xlib-screen.c          |    2 -
 src/cairo-xlib-surface.c         |    7 +-
 src/cairo-xlib-xrender-private.h | 1102 ++++++++++++++++++++++++++++++++++++++
 6 files changed, 1110 insertions(+), 15 deletions(-)

commit c8ed3e1827dd1e6e85f2a40de67c4013432ba3bf
Author: Jody Goldberg <jody@gnome.org>
Date:   Fri Aug 31 17:00:36 2007 -0400

    [PDF] The symbol 'GROUP' is already used on some win32 systems; add a prefix

 src/cairo-pdf-surface.c |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit c14cf02f61105b755b380bd0a5d5b9e83a97d2c9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 31 17:20:54 2007 +0100

    [cairo-surface] Add a comment about why the glyph array is not const.
    
    As penance for attempting to make the glyph array constant, add a
    comment block to explain that the backends rely on being able to modify
    the array.

 src/cairo-surface.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit e8e3bfc1308aa30ea08ec530b6a5ddf532fd3088
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 31 16:53:21 2007 +0100

    Revert "[cairo-gstate] Avoid copying untransformed glyphs."
    
    This reverts commit 919bea6dbb32746f11781cd3a94eb44f5c4a32e6.
    
    Sadly as Behdad points out some backends do modify the glyph array and,
    for example cairo-xlib-surface, hide this from the compiler with some
    evil casts.

 src/cairo-analysis-surface.c         |    2 +-
 src/cairo-directfb-surface.c         |    2 +-
 src/cairo-glitz-surface.c            |    2 +-
 src/cairo-gstate.c                   |   41 ++++++++-------------------------
 src/cairo-meta-surface.c             |    2 +-
 src/cairo-paginated-surface.c        |    2 +-
 src/cairo-pdf-surface.c              |    2 +-
 src/cairo-ps-surface.c               |    2 +-
 src/cairo-quartz-surface.c           |    2 +-
 src/cairo-scaled-font.c              |    2 +-
 src/cairo-surface-fallback-private.h |    2 +-
 src/cairo-surface-fallback.c         |    4 +-
 src/cairo-surface.c                  |    4 +-
 src/cairo-svg-surface.c              |    2 +-
 src/cairo-win32-font.c               |    2 +-
 src/cairo-win32-surface.c            |    2 +-
 src/cairo-xcb-surface.c              |   20 ++++++++--------
 src/cairo-xlib-surface.c             |    4 +-
 src/cairoint.h                       |   12 +++++-----
 src/test-meta-surface.c              |    2 +-
 src/test-paginated-surface.c         |    2 +-
 21 files changed, 47 insertions(+), 68 deletions(-)

commit 919bea6dbb32746f11781cd3a94eb44f5c4a32e6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 31 11:24:06 2007 +0100

    [cairo-gstate] Avoid copying untransformed glyphs.
    
    Skip the memory duplication of the incoming glyphs if we do not need
    to transform them into the backend coordinate system.
    
    As a consequence we need to constify the glyphs passed to the backend
    functions.

 src/cairo-analysis-surface.c         |    2 +-
 src/cairo-directfb-surface.c         |    2 +-
 src/cairo-glitz-surface.c            |    2 +-
 src/cairo-gstate.c                   |   41 +++++++++++++++++++++++++--------
 src/cairo-meta-surface.c             |    2 +-
 src/cairo-paginated-surface.c        |    2 +-
 src/cairo-pdf-surface.c              |    2 +-
 src/cairo-ps-surface.c               |    2 +-
 src/cairo-quartz-surface.c           |    2 +-
 src/cairo-scaled-font.c              |    2 +-
 src/cairo-surface-fallback-private.h |    2 +-
 src/cairo-surface-fallback.c         |    4 +-
 src/cairo-surface.c                  |    4 +-
 src/cairo-svg-surface.c              |    2 +-
 src/cairo-win32-font.c               |    2 +-
 src/cairo-win32-surface.c            |    2 +-
 src/cairo-xcb-surface.c              |   20 ++++++++--------
 src/cairo-xlib-surface.c             |    4 +-
 src/cairoint.h                       |   12 +++++-----
 src/test-meta-surface.c              |    2 +-
 src/test-paginated-surface.c         |    2 +-
 21 files changed, 68 insertions(+), 47 deletions(-)

commit 62377cbac17779fd51ec108e9704be8d3eed4935
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Aug 30 19:45:44 2007 -0400

    [cairo-path-fixed] Remove leftover typedef keyword
    
    Oops!

 src/cairo-path-fixed-private.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit dd406b1ffa411b100950c0156d842e3022e4029d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Aug 30 18:45:26 2007 -0400

    [cairo-path-fixed] typedef char cairo_path_fixed_op_t
    
    So it consumes one byte only, instead of the previous enum with
    the __attribute__((packed)) that didn't do anything on non-gcc systems.

 src/cairo-path-fixed-private.h |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit e7324454a06e1f090d4e654c9cdcb774f9fb39ab
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Aug 29 15:26:41 2007 -0700

    Disable radial-gradient and unbounded-operator tests for pdf
    
    These are failing due to (already reported) poppler bugs.
    
    There were also problems with the gradients in the PDF
    files previously, but these have recently been fixed.

 boilerplate/cairo-boilerplate-pdf.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit f72078fb7660b3c8a369e7bca19628416176a55e
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Aug 29 20:18:09 2007 +0930

    Fix unbounded operator bug in analysis surface

 src/cairo-analysis-surface.c |  117 +++++++++++++++++++++++-------------------
 1 files changed, 65 insertions(+), 52 deletions(-)

commit 3216275fd9a9cd8d51b1c3a8671393912d50d899
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Aug 28 23:40:18 2007 +0930

    Fix PDF gradients bug
    
    The PDF surface was adding extra stops at the 0.0 and 1.0 offset when
    there was not already stops at these offsets. This has been replaced
    with code to move the coordinates of the linear gradient line in to
    the position of the first and last offset.

 src/cairo-pdf-surface.c |   63 ++++++++++++++++++++++++++++++----------------
 1 files changed, 41 insertions(+), 22 deletions(-)

commit bdc70d1fc2a31aa829571244c54f98210e97a2cf
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Aug 29 12:52:00 2007 -0700

    [win32] call scaled_font_fini in create before returning NULL

 src/cairo-win32-font.c |   13 +++++++++----
 1 files changed, 9 insertions(+), 4 deletions(-)

commit 114b07881e8b09f97394dd4fe8f2900ee9f4c348
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Aug 29 12:18:16 2007 -0400

    [configure.in] Make PS backend require zlib too (#12210)
    
    The PS backend uses zlib these days.  Make it depend on zlib being available
    like PDF has been doing.

 configure.in |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

commit 7f726e57546dba4cdd96086515a372d18c1ee2a9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Aug 29 12:15:36 2007 -0400

    [configure.in] Document version scheme

 configure.in |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 93aee43690c329f43be9e7b840851267ceb17956
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Aug 28 16:47:24 2007 -0700

    Fix previous create_similar fallback patch
    
    We can't use composite, as some backends don't implement it.
    Use paint() instead.

 src/cairo-pattern.c          |   32 -----------------------
 src/cairo-surface-fallback.c |   28 +++++++++++---------
 src/cairo-surface.c          |   57 ++++++++++++++++++++++--------------------
 3 files changed, 46 insertions(+), 71 deletions(-)

commit 6525d4debb6df67126b04609bb04d23d9c9bd7a6
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Aug 28 10:47:52 2007 -0700

    [win32] call free() and not scaled_font_destroy() if scaled init fails
    
    If scaled_font_destroy() is called, a deadlock can result; there's no
    reason to call destroy since the initialization failed (and, indeed,
    it might not be valid to do so anyway).

 src/cairo-win32-font.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ae19b1c9911f95f64657f6ddaa0c924ca7a34b88
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Aug 28 10:40:33 2007 -0700

    [win32] Add cairo_win32_font_face_create_for_logfontw_hfont
    
    Patch from: Robert O'Callahan <roc@ocallahans.org>
    
    Add cairo_win32_font_face_create_for_logfontw_hfont, allow win32
    scaled_fonts to rescale themselves properly to the required CTM and
    only use the font_face's hfont if we're sure it's appropriate.

 src/cairo-win32-font.c |  107 ++++++++++++++++++++++++++++++++++++++----------
 src/cairo-win32.h      |    3 +
 2 files changed, 88 insertions(+), 22 deletions(-)

commit 69dae7ee4ace8a92226140ce5ccb690e7f62e35c
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Aug 27 16:30:52 2007 -0700

    Implement fallback for clone_similar

 src/cairo-surface-fallback-private.h |   10 ++++++++
 src/cairo-surface-fallback.c         |   41 ++++++++++++++++++++++++++++++++++
 src/cairo-surface.c                  |    6 ++++-
 3 files changed, 56 insertions(+), 1 deletions(-)

commit 19fa097f515e72c195d10ddd64920ec71fa903ec
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Aug 27 15:29:24 2007 -0700

    [win32] Update win32 Makefiles
    
    Happy building with msys, one location for CFLAGS/etc changes (toplevel),
    new pdiff makefile.

 Makefile.win32             |   45 ++++++++++++++++++++++++++++++++++++++-----
 boilerplate/Makefile.win32 |   13 ++++++-----
 src/Makefile.win32         |   18 +++++-----------
 test/Makefile.win32        |   18 ++++++++++++----
 test/pdiff/Makefile.win32  |   18 +++++++++++++++++
 5 files changed, 83 insertions(+), 29 deletions(-)

commit f4a8633fce5262c09b323eef212fd6efe57d8f10
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Aug 27 14:26:19 2007 -0700

    [win32] check correct surface for BitBlt support in get_subimage

 src/cairo-win32-surface.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit 9aad6efd2b2ee14b0a8960a8e4de91b330ad0c4c
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Aug 27 14:17:50 2007 -0700

    Fix image_extra arg in call to _cairo_release_source_image

 src/cairo-surface-fallback.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 7ccae2de6d859fcac93cedbd3ecd1121e0d0a72b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Aug 28 13:45:02 2007 -0400

    [perf] Make cairo-perf-diff build cairo-perf-diff-files

 perf/cairo-perf-diff |   10 ++++++++--
 1 files changed, 8 insertions(+), 2 deletions(-)

commit 766346aa5cffb699206cc17114221ba7a0323565
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Aug 28 20:35:49 2007 +0930

    PDF: Remove unused code

 src/cairo-pdf-surface-private.h |    1 -
 src/cairo-pdf-surface.c         |   18 ------------------
 2 files changed, 0 insertions(+), 19 deletions(-)

commit ad43b7fe6bba3ba597b28b6f6668ee98cdc04a88
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Aug 28 20:35:23 2007 +0930

    PDF: Clean up comments

 src/cairo-pdf-surface.c |   20 ++++++++++----------
 1 files changed, 10 insertions(+), 10 deletions(-)

commit a60beb2eef46b03bcb81f5204dcde49cbc090928
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Aug 28 20:34:55 2007 +0930

    Fix PDF regression with multipage documents

 src/cairo-pdf-surface.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit 1a6b62e5995aac27527c37fd5cb6ec5e36a3f890
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Aug 27 14:45:51 2007 -0700

    Disable 7 cairo-pdf tests due to poppler knockout-group bug
    
    The following 7 tests currently fail with poppler due to:
    
    	Poppler does not correctly handle knockout groups
    	https://bugs.freedesktop.org/show_bug.cgi?id=12185
    
    and we've verified with acroread that the cairo-pdf output
    does render as intended there. The disabled tests are
    clip-operator, operator-clear, operator-source, over-above-source,
    over-around-source, over-below-source, and over-between-source.

 boilerplate/cairo-boilerplate-pdf.c |   25 ++++++++++++++++++-------
 1 files changed, 18 insertions(+), 7 deletions(-)

commit 1cdd11873b18ec55521ffd744ad12c619cf9b227
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Aug 25 06:44:08 2007 +0930

    Add finer-grained fallback support to the PDF surface
    
    The stream handling has been changed to support writing the content to
    one or more group objects. Each page has a top level knockout
    group. The first operation in the knockout group paints another group
    containing the content. Fallback images are painted from the knockout
    group. This ensures that fallback images do not composite with any
    content under the image.

 src/cairo-paginated-surface.c   |    6 +-
 src/cairo-pdf-surface-private.h |   55 ++-
 src/cairo-pdf-surface.c         | 1406 ++++++++++++++++++++++++++-------------
 3 files changed, 982 insertions(+), 485 deletions(-)

commit 1e8446609b01a3a60c3cc5b69d95d26cc9df460b
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Aug 27 14:02:55 2007 -0700

    Add explanation of pdf_ignored_tests with links to upstream poppler bug reports

 boilerplate/cairo-boilerplate-pdf.c |   29 +++++++++++++++++++++++++++++
 1 files changed, 29 insertions(+), 0 deletions(-)

commit 463493af73a644c7031df0e396c722cf2cb227b1
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Aug 27 10:39:14 2007 -0700

    Remove svg2pdf and pdf2svg programs from test directory
    
    These are useful programs, but they don't belong in test/.
    They are never used in the test suite at all. Instead, these
    should exist in some demo package, or as applications in their
    own right.
    
    (The motivation for the removal is that someone just encountered
    a build error with one of these. And I'm not interested in debugging
    build errors for unused components.)

 test/.gitignore  |    1 -
 test/Makefile.am |   12 ------
 test/pdf2svg.c   |  101 ------------------------------------------------------
 test/svg2pdf.c   |   85 ---------------------------------------------
 4 files changed, 0 insertions(+), 199 deletions(-)

commit 495c9d19bf27150783b563ed8a7a9b2e6e8c2115
Author: Carl Worth <cworth@cworth.org>
Date:   Sat Aug 25 23:39:28 2007 -0700

    One more PS-specific reference image (for over-between-source)
    
    A pixman bug had kept this from being correct earlier. It
    works now as long as pixman includes the following fix:
    
    	8ff7213f39edc1b2b8b60d6b0cc5d5f14ca1928d
    	rasterize traps that extend outside of the image bounds correctly

 test/over-between-source-ps-argb32-ref.png |  Bin 0 -> 678 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit a3c3fe2296a7e8f1fdffc9f922fb647237504818
Author: Carl Worth <cworth@cworth.org>
Date:   Sat Aug 25 19:23:13 2007 -0700

    Modify ps-specific reference images for ft-text-vertical tests
    
    I've been seeing failures with the PS backend for these tests
    for a while. This is in spite of the face that we've had a PS-
    specific reference image for each of these tests. I'm not sure
    what the difference is between my current system and the
    system used to generate the original ps-specific reference
    images.
    
    One thing we definitely need to do is to bundle fonts with the
    test suite to avoid problems like this. Another is to start
    documenting the systems used to generate reference images.
    I get very confused with ghostscript versioning, but I can
    at least say that "gs --version" reports 8.15.3 here, (though
    the package appears to have an 8.56 version).

 ...ft-text-vertical-layout-type1-ps-argb32-ref.png |  Bin 1877 -> 1879 bytes
 ...ft-text-vertical-layout-type3-ps-argb32-ref.png |  Bin 1879 -> 1882 bytes
 2 files changed, 0 insertions(+), 0 deletions(-)

commit 71cc245d5a99eb6593e104b5e6727a7db13a4503
Author: Carl Worth <cworth@cworth.org>
Date:   Sat Aug 25 19:18:44 2007 -0700

    Add PS-specific reference images for 4 tests
    
    The following 4 tests recently started drawing with native operations
    in the place of image fallbacks, so we need ps-specific reference images
    to account for minor rasterization differences: over-above-source,
    over-around-source, over-below-source, and trap-clip.

 test/over-above-source-ps-argb32-ref.png  |  Bin 0 -> 636 bytes
 test/over-around-source-ps-argb32-ref.png |  Bin 0 -> 637 bytes
 test/over-below-source-ps-argb32-ref.png  |  Bin 0 -> 503 bytes
 test/trap-clip-ps-argb32-ref.png          |  Bin 0 -> 5810 bytes
 4 files changed, 0 insertions(+), 0 deletions(-)

commit ae185f803a95248bcb6a8232cabedbc992b66502
Author: Carl Worth <cworth@cworth.org>
Date:   Sat Aug 25 18:57:46 2007 -0700

    Add four new test to exercise interactions of native and fallback objects
    
    The new tests are: over-above-source, over-around-source, over-below-source,
    and over-between-source

 test/.gitignore                        |    4 ++
 test/Makefile.am                       |    4 ++
 test/over-above-source-ref.png         |  Bin 0 -> 538 bytes
 test/over-above-source-rgb24-ref.png   |  Bin 0 -> 461 bytes
 test/over-above-source.c               |   80 ++++++++++++++++++++++++++++
 test/over-around-source-ref.png        |  Bin 0 -> 614 bytes
 test/over-around-source-rgb24-ref.png  |  Bin 0 -> 503 bytes
 test/over-around-source.c              |   91 ++++++++++++++++++++++++++++++++
 test/over-below-source-ref.png         |  Bin 0 -> 434 bytes
 test/over-below-source-rgb24-ref.png   |  Bin 0 -> 392 bytes
 test/over-below-source.c               |   80 ++++++++++++++++++++++++++++
 test/over-between-source-ref.png       |  Bin 0 -> 575 bytes
 test/over-between-source-rgb24-ref.png |  Bin 0 -> 473 bytes
 test/over-between-source.c             |   91 ++++++++++++++++++++++++++++++++
 14 files changed, 350 insertions(+), 0 deletions(-)

commit 5929a1defbc9816a6faa6dca94ae6dc3a2dbf3df
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Sat Aug 25 21:28:33 2007 +0200

    [SVG] Suppress code duplication by using _cairo_svg_surface_emit_stroke_style
    from _cairo_svg_surface_stroke.

 src/cairo-svg-surface.c |   65 ++--------------------------------------------
 1 files changed, 3 insertions(+), 62 deletions(-)

commit 726ed304018915815d232822cd9efb83ee1339bc
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Sun Jul 29 16:46:21 2007 +0200

    [SVG] Don't emit transform property when matrix is identity.

 src/cairo-svg-surface.c |   44 +++++++++++++++++++++++++-------------------
 1 files changed, 25 insertions(+), 19 deletions(-)

commit 89881187f22b40b4afd15eed0b2c19edcba2ca09
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Sun Jul 29 13:33:50 2007 +0200

    [SVG] Implement fill_stroke method.

 src/cairo-svg-surface.c |  132 ++++++++++++++++++++++++++++++++++++++++++++---
 1 files changed, 124 insertions(+), 8 deletions(-)

commit ac51fff0db73c5917a38af3f610d4751b8fec626
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Sat Aug 25 20:49:50 2007 +0200

    Add a new fill_stroke surface backend method.
    
    This method is for use in vector backends, where fill immediatly followed by
    stroke command with the same path can be emited in the same backend command.
    This commit also factorize the detection of such cases in the meta surface
    backend and automatically call the fill_stroke method on replay.

 src/cairo-meta-surface.c |   54 ++++++++++++++++++++++++++++++++++++-----
 src/cairo-path-fixed.c   |   27 +++++++++++++++++++++
 src/cairo-surface.c      |   59 ++++++++++++++++++++++++++++++++++++++++++++++
 src/cairoint.h           |   36 ++++++++++++++++++++++++++++
 4 files changed, 169 insertions(+), 7 deletions(-)

commit 43d35e01106659ac689846a8d5875d235b0d3c9f
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Sat Jul 28 17:37:24 2007 +0200

    [SVG] fix modeline for vim.

 src/cairo-svg-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3ceaa6e74e4bd3f5935016c3639411b26d7f576f
Merge: e3b5a65 24075f1
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Aug 24 08:03:44 2007 -0700

    Merge branch 'cairo-origin' into cairo

commit e3b5a650213b98c3514a850cdb86f1178fe06833
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Aug 24 08:03:03 2007 -0700

    Remove build-breaking debugging helper.
    
    Sorry! Totally my fault on this one.

 src/cairoint.h |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit 24075f1bddbda1d90dfd6f041b8d6bdaf9c786dc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 24 14:16:43 2007 +0100

    [cairo-perf] Blacklist xlib-fallback.
    
    Do not try and create non-Render xlib surfaces as they explicitly do
    not support performance testing.

 perf/cairo-perf.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit 8894894d9d34d169efa39d6d86ebefcb2ba69fe1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 24 13:40:26 2007 +0100

    [cairo-boilerplate-xlib] Check that the surface will fit in the screen.
    
    Whilst testing the fallback surface, the resultant image was being
    clipped to the screen size. Be conservative and refuse to create
    windows (for CAIRO_CONTENT_COLOR surfaces) that are larger than the
     screen.

 boilerplate/cairo-boilerplate-xlib.c |   25 +++++++++++++++++++++++++
 1 files changed, 25 insertions(+), 0 deletions(-)

commit a29544a0b6f150384fd652aad950d1cae9809c42
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 24 12:24:20 2007 +0100

    [cairo-boilerplate-xlib] Clear Render data for the non-Render fallback.
    
    As well as marking the XRender extension unavailable in
    _cairo_boiler_player_xlib_disable_render(), we need to clear any
    XRender derived information stored during the surface creation.

 boilerplate/cairo-boilerplate-xlib.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 177a3b8a32f13ce92d45899367fb7758600f7b93
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Aug 23 16:13:04 2007 -0700

    Remove include of cairoint.h from *-private.h header files.
    
    These were recently added, (as part of sparse integration?), but they
    break boilerplate which reaches into at least cairo-types-private.h
    and cairo-scaled-font-private.h. But boilerplate cannot see cairoint.h
    or else it gets the internal sybol renaming, (with the INT_ prefix),
    and then all the test suite tests refuse to link.
    
    If this change reverts some recently-added functionality, (or
    cleanliness), then we'll just need to find some other way to add that
    back again without the breakage.

 src/cairo-cache-private.h             |    1 -
 src/cairo-clip-private.h              |    1 -
 src/cairo-fixed-private.h             |    1 -
 src/cairo-ft-private.h                |    1 -
 src/cairo-gstate-private.h            |    1 -
 src/cairo-hash-private.h              |    1 -
 src/cairo-malloc-private.h            |    1 -
 src/cairo-mutex-private.h             |    4 +++-
 src/cairo-mutex-type-private.h        |    4 +++-
 src/cairo-os2-private.h               |    3 +--
 src/cairo-output-stream-private.h     |    1 -
 src/cairo-paginated-surface-private.h |    2 +-
 src/cairo-path-fixed-private.h        |    2 --
 src/cairo-pdf-surface-private.h       |    2 --
 src/cairo-private.h                   |    1 -
 src/cairo-ps-surface-private.h        |    2 --
 src/cairo-region-private.h            |    2 --
 src/cairo-scaled-font-private.h       |    2 +-
 src/cairo-surface-private.h           |    2 +-
 src/cairo-svg-surface-private.h       |    2 --
 src/cairo-type1-private.h             |    2 --
 src/cairo-wideint-private.h           |    2 --
 src/cairo-xlib-surface-private.h      |    2 --
 src/cairoint.h                        |    2 ++
 24 files changed, 12 insertions(+), 32 deletions(-)

commit fa41ebfb7c074a6ffa6a8fe7c43207e594c6534c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Aug 23 13:55:19 2007 -0400

    Fix header inclusion order
    
    Enough for now, until I figure out the right way to break cairoint.h.

 src/cairo-types-private.h |  105 +++++++++++++++++++++++++++------------------
 src/cairoint.h            |   23 +---------
 2 files changed, 64 insertions(+), 64 deletions(-)

commit d66f1ee82a10de325ee4e7579bbbaa1d301292e4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Aug 23 13:54:37 2007 -0400

    [boilerplate] Build libcairoboilerplate.la in make check and make test

 boilerplate/Makefile.am         |    2 ++
 boilerplate/cairo-boilerplate.c |   15 ---------------
 2 files changed, 2 insertions(+), 15 deletions(-)

commit 5594f8b0356fc209749d01e2043559fccd3966d0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Aug 23 00:38:00 2007 -0400

    [Makefile.am] Run sparse and splint once per source file
    
    Also skip .h files for splint as it causes lots of unused-function warnings.

 src/Makefile.am |   13 +++++++++++--
 1 files changed, 11 insertions(+), 2 deletions(-)

commit 503ab85e44bfa02ef8391f7849826cbe07ff15d2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 23 15:01:02 2007 +0100

    Fix inadvertent executable mode flip.
    
    Clear the executable bit for cairo-scaled-font.c

 0 files changed, 0 insertions(+), 0 deletions(-)

commit 735757a17a7c72f8598c8958b600daad941a0431
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Aug 22 02:58:37 2007 -0400

    [Makefile.am] Add target sparse to run sparse static source code analyzer
    
    There are still some bits not quite working.

 src/Makefile.am                       |   23 ++++++++++++++++++-----
 src/cairo-cache-private.h             |    1 +
 src/cairo-clip-private.h              |    1 +
 src/cairo-fixed-private.h             |    1 +
 src/cairo-ft-private.h                |    1 +
 src/cairo-gstate-private.h            |    1 +
 src/cairo-hash-private.h              |    1 +
 src/cairo-malloc-private.h            |    1 +
 src/cairo-mutex-private.h             |    4 +---
 src/cairo-mutex-type-private.h        |    4 +---
 src/cairo-os2-private.h               |    3 ++-
 src/cairo-output-stream-private.h     |    1 +
 src/cairo-paginated-surface-private.h |    2 +-
 src/cairo-path-fixed-private.h        |    2 ++
 src/cairo-pdf-surface-private.h       |    2 ++
 src/cairo-private.h                   |    1 +
 src/cairo-ps-surface-private.h        |    2 ++
 src/cairo-quartz-private.h            |    2 +-
 src/cairo-region-private.h            |    2 ++
 src/cairo-scaled-font-private.h       |    2 +-
 src/cairo-surface-private.h           |    2 +-
 src/cairo-svg-surface-private.h       |    2 ++
 src/cairo-type1-private.h             |    2 ++
 src/cairo-types-private.h             |    2 ++
 src/cairo-wideint-private.h           |    2 ++
 src/cairo-xlib-surface-private.h      |    2 ++
 src/cairoint.h                        |   12 ++++++------
 27 files changed, 59 insertions(+), 22 deletions(-)

commit bfdc3b6642a36a7728f82ae87de83244d86ba29e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Aug 22 01:16:50 2007 -0400

    [Makefile.am] Move -DHAVE_CONFIG_H to the right place

 src/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit af6a123e95b359234d70f7a766457ff3a427c3cc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Aug 22 01:09:21 2007 -0400

    [Makefile.am] Inhibit unrecognized options to splint

 src/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e9d709b5caf4bc3c48259d6b40e6b95f730aa348
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Aug 22 01:07:59 2007 -0400

    [cairo-image-surface] Fix comment syntax
    Found by splint.

 src/cairo-image-surface.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit ef878345c87c57a79eda079fa5e765aba5ddf163
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Aug 22 01:07:38 2007 -0400

    [Makefile.am] Add target splint to run splint static source code analyzer

 src/Makefile.am |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit f015091bb5361552eebfafc007bcf9e77ba5bfbf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Aug 22 01:03:50 2007 -0400

    [Makefile.am] Use libcairo_la_CFLAGS instead of INCLUDES
    for clarity.

 src/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3e5859c58f8749eaae16149577d52399a2fcf952
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Aug 21 23:02:03 2007 -0400

    [ROADMAP] Mark fine-grained fallbacks done

 ROADMAP |    7 +++++++
 TODO    |    7 -------
 2 files changed, 7 insertions(+), 7 deletions(-)

commit 333b96f0e0a7d775b96014b91c6887cdcda3e93a
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Aug 17 10:41:03 2007 -0700

    Add support for image fallbacks for X servers with 555 visuals
    
    This fixes bugzilla #9993:
    
    	Cairo fails with 555 X server visual
    	https://bugs.freedesktop.org/show_bug.cgi?id=9993

 ROADMAP                   |    2 +-
 src/cairo-image-surface.c |   14 ++++++++++++++
 2 files changed, 15 insertions(+), 1 deletions(-)

commit f00fb10f87d1341b91f025bb068d935355c68c70
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Aug 17 10:36:14 2007 -0700

    Add support for image fallbacks for X servers with 565 visuals
    
    This fixes bugzilla #10461:
    
    	Cairo doesn't support 565 xlib visual
    	https://bugs.freedesktop.org/show_bug.cgi?id=1046

 ROADMAP                   |    2 +-
 src/cairo-image-surface.c |   16 ++++++++++++++++
 2 files changed, 17 insertions(+), 1 deletions(-)

commit ddb78df4c92fc8e51ca18202b59bcef7d1e1d66d
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Aug 17 10:33:25 2007 -0700

    Restore the error message for unsupported X server visuals
    
    Apparently, our much-beloved error message, (just look at how many people
    love to quote it in bugzilla entries), was removed during the switch to
    the new pixman. It was replaced with an obscure failure of a nil surface
    being returned, (leading to obscure failures or false "out of memory"
    errors).
    
    So we're putting this back now, (even though we _really_ want to ensure
    that this message never gets printed in practice).

 src/cairo-image-surface.c |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

commit 72fab3675c46a773dac315fffff72cd7f887f79f
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Aug 17 10:29:37 2007 -0700

    Use a pixman_format_code to describe the image surface used for xlib fallbacks
    
    Previously, the code was just using cairo_format_t which is much more limited
    than the formats supported by pixman, (so many "odd" X server visuals would
    just fall over).

 src/cairo-image-surface.c |   87 ++++++++++++++++++++++-----------
 src/cairo-xlib-surface.c  |  117 ++++----------------------------------------
 src/cairoint.h            |   19 +++++++-
 3 files changed, 87 insertions(+), 136 deletions(-)

commit a9662d0aaed8685292ffe13c458182046a644fa7
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Aug 17 08:15:50 2007 -0700

    Eliminate fragile cairo_internal_format_t
    
    Instead we take advantage of the pixman_format_code_t
    that now exists in the public interface of the new, external
    pixman library.

 src/cairo-image-surface.c |  152 ++++++++++++++++++++++++++++++++-------------
 src/cairo-pattern.c       |    2 +-
 src/cairoint.h            |   44 +------------
 3 files changed, 113 insertions(+), 85 deletions(-)

commit 9f4e6436496fe561aa124bb2b89e1c6711684d98
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Aug 21 10:03:00 2007 -0700

    Ensure the Render extension is initialized before calling XESetCloseDisplay
    
    This avoids a potential crash from the Render extension being cleaned
    up during XCloseDisplay before the cairo CloseDisplay hook goes on to
    call into XRenderFreePicture.

 src/cairo-xlib-display.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit d05593a5fb9fef586171cb9973a9942a105d50d7
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Aug 20 14:50:02 2007 -0700

    Add a new xlib-fallback target to test xlib using image fallbacks instead of the Render extension

 boilerplate/cairo-boilerplate-xlib-private.h |    8 +++
 boilerplate/cairo-boilerplate-xlib.c         |   72 ++++++++++++++++++++++++++
 boilerplate/cairo-boilerplate.c              |    9 +++
 test/fill-rule.c                             |    2 +-
 4 files changed, 90 insertions(+), 1 deletions(-)

commit 590717f03b4a396600734c4dac1dd0a9f140283c
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Wed Aug 22 07:58:14 2007 +0930

    PS: Remove debug info from PS output
    
    The debug code is now conditionally compiled.

 src/cairo-ps-surface.c |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

commit e66b2b68ab456d779524d9b4ab34acf5d38362b5
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Aug 21 14:52:54 2007 -0700

    Use 8-bit math to flatten color when emitting a solid pattern to PostScript
    
    This isn't necessarily more correct than the old code using the doubles,
    but it does result in bit-for-bit color equivalence when comparing the
    results against the image backend. So that's both good consistency, and
    more ease is using the test suite to verify things.

 src/cairo-ps-surface.c |   26 +++++++++++++++-----------
 1 files changed, 15 insertions(+), 11 deletions(-)

commit bf92255edd20595a6eb220c6ee9d6aa40b244eef
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Aug 21 22:27:57 2007 +0930

    PS: Add finer-grained image fallback support
    
    The analysis surface now keeps track of two regions: supported
    operations, and unsupported operations. If the target surface returns
    CAIRO_INT_STATUS_FLATTEN_TRANSPARENCY, the analysis surface will check
    if any previous operation intersects with this operation. If there is
    nothing previously drawn under the operation, the status is changed to
    supported.
    
    The meta surface has two new functions:
            _cairo_meta_surface_replay_region()
            _cairo_meta_surface_replay_and_create_regions()
    
    During the analysis stage, the paginated surface replays the meta
    surface using _cairo_meta_surface_replay_and_create_regions(). The
    return status from each analyzed operation is saved in the meta
    surface. The _cairo_meta_surface_replay_region() function allows only
    operations from either the supported or unsupported region to be
    replayed. This allows the paginated surface to replay only the
    supported operations before emitting a fallback image for each
    rectangle in the unsupported region.

 src/cairo-analysis-surface-private.h |    3 +
 src/cairo-analysis-surface.c         |  358 +++++++++++++++++++++++++++++-----
 src/cairo-meta-surface-private.h     |   34 +++-
 src/cairo-meta-surface.c             |   78 ++++++--
 src/cairo-paginated-surface.c        |  131 ++++++++++---
 src/cairo-ps-surface.c               |   93 ++++++----
 src/cairo-region-private.h           |    4 +
 src/cairo-region.c                   |   13 ++
 src/cairoint.h                       |    4 +-
 9 files changed, 585 insertions(+), 133 deletions(-)

commit bf4bdbb6076dbe3b74534bc4308dbc9213bf628d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Aug 20 20:29:51 2007 -0400

    [cairo-scaled-font] Document how glyph surfaces use device offsets

 src/cairo-scaled-font.c |  106 +++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 106 insertions(+), 0 deletions(-)

commit 31f5aafa36015ee6ea8ff769c2e1d5841f62642f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Feb 5 20:46:48 2007 -0500

    Fix device_offset misuse in all glyph surface uses
    
    Seems like all over the code, we have been using negated device_offset
    values for glyph surfaces.  Here is all the math(!):
    
    A device_transform converts from device space (a conceptual space) to
    surface space.  For simple cases of translation only, it's called a
    device_offset and is public API (cairo_surface_[gs]et_device_offset).
    A possibly better name for those functions could have been
    cairo_surface_[gs]et_origing.  So, that's what they do: they set where
    the device-space origin (0,0) is in the surface.  If the origin is inside
    the surface, device_offset values are positive.  It may look like this:
    
    Device space:
          (-x,-y) <-- negative numbers
             +----------------+
             |      .         |
             |      .         |
             |......(0,0) <---|-- device-space origin
             |                |
             |                |
             +----------------+
                      (width-x,height-y)
    
    Surface space:
           (0,0) <-- surface-space origin
             +---------------+
             |      .        |
             |      .        |
             |......(x,y) <--|-- device_offset
             |               |
             |               |
             +---------------+
                       (width,height)
    
    In other words: device_offset is the coordinates of the device-space
    origin relative to the top-left of the surface.
    
    We use device offsets in a couple of places:
    
      - Public API: To let toolkits like Gtk+ give user a surface that
        only represents part of the final destination (say, the expose
        area), but has the same device space as the destination.  In these
        cases device_offset is typically negative.  Example:
    
             application window
             +---------------+
             |      .        |
             | (x,y).        |
             |......+---+    |
             |      |   | <--|-- expose area
             |      +---+    |
             +---------------+
    
        In this case, the user of cairo API can set the device_space on
        the expose area to (-x,-y) to move the device space origin to that
        of the application window, such that drawing in the expose area
        surface and painting it in the application window has the same
        effect as drawing in the application window directly.  Gtk+ has
        been using this feature.
    
      - Glyph surfaces: In most font rendering systems, glyph surfaces
        have an origin at (0,0) and a bounding box that is typically
        represented as (x_bearing,y_bearing,width,height).  Depending on
        which way y progresses in the system, y_bearing may typically be
        negative (for systems similar to cairo, with origin at top left),
        or be positive (in systems like PDF with origin at bottom left).
        No matter which is the case, it is important to note that
        (x_bearing,y_bearing) is the coordinates of top-left of the glyph
        relative to the glyph origin.  That is, for example:
    
        Scaled-glyph space:
    
          (x_bearing,y_bearing) <-- negative numbers
             +----------------+
             |      .         |
             |      .         |
             |......(0,0) <---|-- glyph origin
             |                |
             |                |
             +----------------+
                      (width+x_bearing,height+y_bearing)
    
        Note the similarity of the origin to the device space.  That is
        exactly how we use the device_offset to represent scaled glyphs:
        to use the device-space origin as the glyph origin.
    
    Now compare the scaled-glyph space to device-space and surface-space
    and convince yourself that:
    
    	(x_bearing,y_bearing) = (-x,-y) = - device_offset
    
    That's right.  If you are not convinced yet, contrast the definition
    of the two:
    
    	"(x_bearing,y_bearing) is the coordinates of top-left of the
    	 glyph relative to the glyph origin."
    
    	"In other words: device_offset is the coordinates of the
    	 device-space origin relative to the top-left of the surface."
    
    and note that glyph origin = device-space origin.
    
    So, that was the bug.  Fixing it removed lots of wonders and magic
    negation signs.
    
    The way I discovered the bug was that in the user-font API, to make
    rendering the glyph from meta-surface to an image-surface work I had
    to do:
    
    	cairo_surface_set_device_offset (surface, -x_bearing, -y_bearing);
    	_cairo_meta_surface_replay (meta_surface, surface);
    	cairo_surface_set_device_offset (surface, x_bearing, y_bearing);
    
    This suggested that the use of device_offset for glyph origin is
    different from its use for rendering with meta-surface.  This reminded
    me of the large comment in the xlib backend blaming XRender for having
    weird glyph space, and of a similar problem I had in the PS backend
    for bitmap glyph positioning (see d47388ad759b0a1a0869655a87d9b5eb6ae2445d)
    
    ...those are all fixed now.

 src/cairo-atsui-font.c       |    4 +-
 src/cairo-directfb-surface.c |    4 +-
 src/cairo-ft-font.c          |   46 +++++++++++++++++++++--------------------
 src/cairo-glitz-surface.c    |    8 +++---
 src/cairo-ps-surface.c       |   12 +++++-----
 src/cairo-scaled-font.c      |    8 ++----
 src/cairo-svg-surface.c      |    2 +-
 src/cairo-xcb-surface.c      |   40 +----------------------------------
 src/cairo-xlib-surface.c     |   40 +----------------------------------
 9 files changed, 46 insertions(+), 118 deletions(-)

commit d55da1aa621d76b1411300932be5d37883b25dfa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Feb 7 00:20:29 2007 -0800

    [scaled-font] Really ignore ctm translation
    
    Previously we were ignoring ctm translation in scaled fonts when hashing, but
    still storing it into the scaled font.  Now we zero the translation components
    when storing.

 src/cairo-scaled-font.c |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit a394e5870e2c5ccedfd9d116b4a42c58b459334d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Feb 5 16:53:18 2007 -0500

    [cairo-image-surface] Simplify device-offset usage

 src/cairo-image-surface.c |   10 +++++-----
 1 files changed, 5 insertions(+), 5 deletions(-)

commit 61f736d0d1166b050ee948ce2738feab0327ece9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Feb 5 15:51:30 2007 -0500

    [cairo-paginated-surface] Add XXX mark to integer width,height arguments

 src/cairo-paginated-surface.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit f97bb5613a7fb3d92f2d730460f9c721ee13a41a
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Aug 20 17:32:05 2007 -0700

    Fix path_fixed_offset_and_scale to apply scale and offset in right order

 src/cairo-path-fixed.c |   24 +++++++++---------------
 1 files changed, 9 insertions(+), 15 deletions(-)

commit 51b6cca8de3181d7b42b612ff491451c765d5811
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 18 00:54:30 2007 +0100

    [cairo-perf-diff] Remove reference to pixman.
    
    Remove the use of pixman as part of the perf id as pixman is no longer
    an integral component of cairo.

 perf/cairo-perf-diff |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 39367b26120b6e1ad0f556911a49f28ef370115b
Author: Martin Ejdestig <marejde@gmail.com>
Date:   Fri Aug 17 02:28:35 2007 +0200

    Plug possible leak of pixman_traps in _cairo_image_surface_composite_trapezoids.
    
    If width and height are 0 and pixman_traps is allocated on the heap,
    it would leak. Fix by simply checking width and height prior to
    allocating pixman_traps.

 src/cairo-image-surface.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 507d7ee09951a35df8b80f0e1507ba17dbd9bfa9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 27 12:34:35 2007 +0100

    [cairo-xlib-surface] Avoid a malloc(0).
    
    Avoid a zero byte allocation (potentially returning NULL) for an array
    of 0 trapezoids.

 src/cairo-xlib-surface.c |    9 +++++++--
 1 files changed, 7 insertions(+), 2 deletions(-)

commit 85d911d86c9f1dd55d79b7c429ad2b617ec345d1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 27 08:05:35 2007 +0100

    [cairo-image-surface] Avoid malloc(0)
    
    Special case width==0, height==0 to avoid allocating a 0 byte image.

 src/cairo-image-surface.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 7332a5e9949ca19869b003fe5a0a777adac41307
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 27 11:32:50 2007 +0100

    [boilerplate/xmalloc] Special case malloc(0) and friends.
    
    malloc(0) can return NULL so double check the requested size before
    exiting with an out-of-memory error.

 boilerplate/xmalloc.c     |    6 +++---
 src/cairo-image-surface.c |    2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 56e505298c0f5de360380ca7e968baa0e60ac828
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 27 23:01:44 2007 +0100

    [cairo-truetype-subset] Avoid malloc(0).
    
    Avoid attempting to allocate a zero length subset as malloc(0) may return
    NULL.

 src/cairo-truetype-subset.c |   15 +++++++++------
 1 files changed, 9 insertions(+), 6 deletions(-)

commit 7bd1d5ba3d081ae188fe7f8bc346071d0b8d2278
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jul 3 14:14:56 2007 +0100

    [cairo-png] Protect against malloc(0).
    
    Avoid calling malloc(0) for an empty image.

 src/cairo-png.c |   21 ++++++++++++---------
 1 files changed, 12 insertions(+), 9 deletions(-)

commit 06134df0d0670a7d00d58ebd7a20ba7174f56d16
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 4 19:11:29 2007 +0100

    [cairo-pdf-surface] Check for errors during compression.
    
    Check status return from zlib's compress().

 src/cairo-pdf-surface.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit 76b871d710cd81bee5fe7c2f6175f8d678ebeea5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 16 15:29:11 2007 +0100

    [cairo-image-surface] Remove status return for hard-coded CAIRO_STATUS_SUCCESS.
    
    Remove the status return if the function can only return
    CAIRO_STATUS_SUCCESS, and remove the then surplus conditionals.

 src/cairo-image-surface.c |   13 +++++--------
 1 files changed, 5 insertions(+), 8 deletions(-)

commit 4e39e30d83fc1866a44f0b746c406ee2efb3bf6a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 16 09:25:38 2007 +0100

    [cairo-pen] Remove status from _cairo_pen_find_active_vertex_*()
    
    This pair of functions unconditionally return SUCCESS, so remove the
    status return and supporting tests from their callers.

 src/cairo-path-stroke.c |   24 ++++++------------------
 src/cairo-pen.c         |   16 +++++-----------
 src/cairoint.h          |    4 ++--
 3 files changed, 13 insertions(+), 31 deletions(-)

commit b72b06cc222d88015ce78a5cddf061e903d032b5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 16 09:40:47 2007 +0100

    [cairo-pen] Remove hard-coded CAIRO_STATUS_SUCCESS from _stroke_spline_half()
    
    Remove the status return and update callers as
    _cairo_pen_stroke_spline_half() unconditionally returned SUCCESS.

 src/cairo-pen.c |   15 ++++-----------
 1 files changed, 4 insertions(+), 11 deletions(-)

commit e24969a94ac5670a13c2737db435ac7b5bebb19c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 16 09:36:54 2007 +0100

    [cairo-pdf-surface] cairo_pattern_set_matrix guarantees invertibility.
    
    Be consistent in asserting that the pattern matrix is inverted
    successfully and remove a couple of redundant checks.

 src/cairo-pdf-surface.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 50ebdda3a97334e5411749cd0c309843ba8cdf44
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 19 10:26:37 2007 +0100

    [cairo-pattern] Assert that the pattern->matrix is invertible.
    
    We guarantee when setting the pattern->matrix that it is invertible, so
    merely assert that it is so when we attempt to use its inverse.

 src/cairo-pattern.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 7d853bcabcc1c55b79a05280a0eb35828b93163d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 16 14:34:07 2007 +0100

    [cairo-boilerplate-xlib] Check for NULL xrender_format before use.
    
    Testing for XRender support (xrender_format != NULL) after
    dereferencing said format doesn't work as intended.

 boilerplate/cairo-boilerplate-xlib.c |   16 ++++++++++++----
 1 files changed, 12 insertions(+), 4 deletions(-)

commit bc635da45a32eb9b7aff6fa5f7f560ebf99092a8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 16 12:21:49 2007 +0100

    [cairo-ft-font] Decrement lock count on error.
    
    As noted in http://bugs.freedesktop.org/show_bug.cgi?id=12026 the error
    path of _cairo_ft_unscaled_font_lock_face() failed to reset the
    unscaled->lock_count before releasing the mutex and returning NULL.

 src/cairo-ft-font.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 8881265cca73790a49068b3bab5362cb73f8deb6
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Aug 10 20:10:29 2007 +0930

    PDF: Fix regression in pdf_surface_set_size()

 src/cairo-pdf-surface.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 4ca0ca153a847337452bbb237d42f6d7b0a163d0
Author: Sren Sandmann Pedersen <sandmann@redhat.com>
Date:   Mon Aug 6 19:24:31 2007 -0400

    Bump pixman dependency to 0.9.4
    
    Also print the download location if the library wasn't found.

 configure.in               |   11 +++++++----
 src/cairo-region-private.h |    2 +-
 src/cairoint.h             |    2 +-
 test/buffer-diff.c         |    2 +-
 4 files changed, 10 insertions(+), 7 deletions(-)

commit 13cae8b5e6d3fc93c4eb1853b91ba356b572b551
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Aug 6 11:06:47 2007 -0700

    Ensure that a copied pattern gets its own user_data array
    
    This fixes the bug reported here:
    
    	Segfault with cairo_pattern_set_user_data
    	https://bugs.freedesktop.org/show_bug.cgi?id=11855

 src/cairo-pattern.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 027915717df6e203826d10da7bfdf8e26af13ee1
Author: Nis Martensen <nis.martensen@web.de>
Date:   Wed Jul 4 07:09:00 2007 -0700

    Typo fixes in README files

 README      |    4 ++--
 perf/README |    6 +++---
 test/README |    6 +++---
 3 files changed, 8 insertions(+), 8 deletions(-)

commit 72c1f5d802c32f97ae5c0cbf899dc3a12fc28222
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Aug 5 00:50:23 2007 +0930

    PDF: Fix gradients regression

 src/cairo-pdf-surface.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 9bcedd3d6f0de8c380e7ab4981d32377e3c5a778
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Fri Aug 3 14:18:40 2007 -0700

    [win32] compilation fix for win32

 src/cairo-win32-surface.c |   10 +++++-----
 1 files changed, 5 insertions(+), 5 deletions(-)

commit f52aa4c13e91339e575ca2c52c9e3a1f4d95b106
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Aug 2 21:25:46 2007 +0930

    CFF Subsetting: fix integer encoding bug
    
    Bug report at https://bugzilla.mozilla.org/show_bug.cgi?id=368668

 src/cairo-cff-subset.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ef93f1897c0703c3284c85206cb1c70e23ff3fe5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Jul 31 17:52:13 2007 -0400

    [configure.in] Cleanup after pixman removal and correctly check for pixman

 configure.in |   24 ++++--------------------
 1 files changed, 4 insertions(+), 20 deletions(-)

commit 4cce3135e0e50d5edb3a7cc54cf413fc2242a521
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Jul 26 18:04:39 2007 -0400

    Clear executable flag off .c file

 0 files changed, 0 insertions(+), 0 deletions(-)

commit 5b0e2e3e2b6823580bbc40dd1be415b7461bcbf0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 23 13:05:13 2007 +0100

    [cairo-glitz-surface] Compile fix.
    
    Minor corrections to reflect updated structures.

 src/cairo-glitz-surface.c |   19 +++++++++----------
 1 files changed, 9 insertions(+), 10 deletions(-)

commit c0a7d33ac6c81dd74ee2a9daaa3749a346ef4897
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Jul 4 13:54:03 2007 +0200

    [fixpt] Fixup malloc usage to use _cairo_malloc_*
    
    Fix some introduced mallocs as a result of the fixed point patches.

 src/cairo-clip.c          |    2 +-
 src/cairo-glitz-surface.c |    2 +-
 src/cairo-image-surface.c |    2 +-
 src/cairo-pattern.c       |    2 +-
 src/cairo-xcb-surface.c   |    4 ++--
 src/cairo-xlib-surface.c  |    4 ++--
 6 files changed, 8 insertions(+), 8 deletions(-)

commit b719592428907d2010645303fb65d38dcb8b30c0
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Wed Jul 4 12:16:27 2007 +0200

    [fixpt] Fix up compilation post pixman merge

 src/cairo-pattern.c        |    1 -
 src/cairo-region-private.h |    2 +-
 src/cairo-region.c         |    9 +++++----
 src/cairo-svg-surface.c    |    6 +++---
 4 files changed, 9 insertions(+), 9 deletions(-)

commit 866b485314bfd5d8bbf865d19f6a589d08292e2a
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Jun 18 18:38:54 2007 -0700

    [fixpt] Let the compiler calculate the magic double-to-fixed value

 src/cairo-fixed-private.h |   14 ++------------
 1 files changed, 2 insertions(+), 12 deletions(-)

commit 0abe5324a5b03149630a5b6496c980f83be4fd75
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Jun 18 18:33:29 2007 -0700

    [fixpt] Create cairo_region wrapper around pixman_region16_t
    
    Insulate region-using code from implementation details;
    at some point we'll want to switch to using 32-bit regions.

 src/cairo-analysis-surface-private.h |    4 +-
 src/cairo-analysis-surface.c         |    4 +-
 src/cairo-clip-private.h             |    4 +-
 src/cairo-clip.c                     |  182 +++++++++++++++++----------------
 src/cairo-directfb-surface.c         |   25 +++--
 src/cairo-glitz-surface.c            |   65 ++++++++++--
 src/cairo-image-surface.c            |    4 +-
 src/cairo-pattern.c                  |   16 ++--
 src/cairo-region-private.h           |  105 +++++++++++++++++++
 src/cairo-region.c                   |  173 ++++++++++++++++++++++++++++++--
 src/cairo-surface-fallback.c         |   29 +++---
 src/cairo-surface.c                  |   63 +++++++------
 src/cairo-traps.c                    |   50 +++++-----
 src/cairo-win32-surface.c            |   28 ++++--
 src/cairo-xcb-surface.c              |   26 +++--
 src/cairo-xlib-surface.c             |   28 +++---
 src/cairoint.h                       |   38 ++++++--
 src/test-paginated-surface.c         |    2 +-
 18 files changed, 598 insertions(+), 248 deletions(-)

commit dc035fecda0070e18a68e06f567f268fc39483f1
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Jun 18 17:34:36 2007 -0700

    [fixpt] Fix xcb surface to handle conversion to 16.16

 src/cairo-xcb-surface.c |   87 +++++++++++++++++++++++++++++++++++-----------
 1 files changed, 66 insertions(+), 21 deletions(-)

commit 58d9664702308639ead888c7167e71ca605a8fe3
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Jun 18 17:33:44 2007 -0700

    [fixpt] Fix xlib surface to handle conversion to 16.16

 src/cairo-xlib-surface.c |   87 +++++++++++++++++++++++++++++++++++-----------
 1 files changed, 66 insertions(+), 21 deletions(-)

commit aaf94ef6c4656d7e836e52c2a71db214a1c01b57
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Jun 18 17:29:04 2007 -0700

    [fixpt] remove dependency on some pixman types
    
    Introduce cairo_gradient_stop_t, and remove pixman dependency
    for core pattern types.  Perform conversion from cairo types
    to pixman types as necessary in fallback code.

 src/cairo-matrix.c           |   12 +++---
 src/cairo-pattern.c          |   97 ++++++++++++++++++++++++++++++-----------
 src/cairo-pdf-surface.c      |    8 ++--
 src/cairo-scaled-font.c      |    6 +-
 src/cairo-surface-fallback.c |   10 +++-
 src/cairo-svg-surface.c      |   87 +++++++++++++++++++------------------
 src/cairoint.h               |   27 ++++++------
 7 files changed, 150 insertions(+), 97 deletions(-)

commit e5fdacae1c5b7005b95db8f9065cce51ef19bf20
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Jun 18 17:05:34 2007 -0700

    [fixpt] fix up image surface to translate to 16.16 for pixman

 src/cairo-image-surface.c |   76 ++++++++++++++++++++++++++++++++++++++------
 1 files changed, 65 insertions(+), 11 deletions(-)

commit be3516335cda8587d9baf5bd0097d3ce1cb64ab1
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Jun 18 16:56:24 2007 -0700

    [fixpt] Replace cairo_rectangle_int16_t with cairo_rectangle_int_t
    
    Mostly s/cairo_rectangle_int16_t/cairo_rectangle_int_t/,
    as well as definitions to pick cairo_rectangle_int_t.

 src/cairo-analysis-surface.c         |    2 +-
 src/cairo-clip-private.h             |    6 ++--
 src/cairo-clip.c                     |   12 ++++----
 src/cairo-directfb-surface.c         |   16 +++++-----
 src/cairo-glitz-surface.c            |   20 ++++++------
 src/cairo-gstate.c                   |    2 +-
 src/cairo-image-surface.c            |   12 ++++----
 src/cairo-meta-surface.c             |    2 +-
 src/cairo-os2-surface.c              |   10 +++---
 src/cairo-paginated-surface.c        |    6 ++--
 src/cairo-pattern.c                  |   12 ++++----
 src/cairo-pdf-surface.c              |    4 +-
 src/cairo-ps-surface.c               |    4 +-
 src/cairo-quartz-private.h           |    2 +-
 src/cairo-quartz-surface.c           |   24 ++++++++--------
 src/cairo-rectangle.c                |   10 +++---
 src/cairo-region.c                   |    2 +-
 src/cairo-scaled-font.c              |    2 +-
 src/cairo-surface-fallback-private.h |    2 +-
 src/cairo-surface-fallback.c         |   52 +++++++++++++++++-----------------
 src/cairo-surface.c                  |   40 +++++++++++++-------------
 src/cairo-svg-surface.c              |    4 +-
 src/cairo-win32-private.h            |    4 +-
 src/cairo-win32-surface.c            |   16 +++++-----
 src/cairo-xcb-surface.c              |   18 ++++++------
 src/cairo-xlib-surface.c             |   18 ++++++------
 src/cairo.c                          |    2 +-
 src/cairoint.h                       |   48 +++++++++++++++++++------------
 src/test-fallback-surface.c          |   12 ++++----
 src/test-meta-surface.c              |    4 +-
 src/test-paginated-surface.c         |    2 +-
 31 files changed, 191 insertions(+), 179 deletions(-)

commit 9c38aa3b96a1e926ef422837fc3102e902a796fc
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Jun 18 16:30:09 2007 -0700

    [fixpt] Use _cairo_fixed_mul insted of manual multiplication

 src/cairo-fixed-private.h |    1 -
 src/cairo-path-fixed.c    |   11 +++--------
 src/cairo-traps.c         |   26 +++++++++++---------------
 3 files changed, 14 insertions(+), 24 deletions(-)

commit 0048a26a4477d3acb5dd0231756cfaae92d240a9
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Jun 18 16:26:14 2007 -0700

    [fixpt] Make fixed point methods static inline and generic
    
    Move the fixed point methods to static inline versions in
    cairo-fixed-private.h, and don't hardcode fixed to be 16.16.

 src/cairo-fixed-private.h  |  256 ++++++++++++++++++++++++++++++++++++++++++++
 src/cairo-fixed.c          |  100 +-----------------
 src/cairo-quartz-surface.c |    2 +-
 src/cairoint.h             |   37 +------
 4 files changed, 259 insertions(+), 136 deletions(-)

commit 76c32f899af63649bf911533a2ed6b42e617da41
Author: Vladimir Vukicevic <vladimir@frankenmac.mshome.net>
Date:   Mon Jul 2 15:09:21 2007 +0200

    [fixpt] Update quartz surface for new types

 src/cairo-quartz-surface.c |   20 ++++++++++----------
 1 files changed, 10 insertions(+), 10 deletions(-)

commit 290daee4ce26a931a15425f380ed4f495a4bd3c1
Author: Sren Sandmann <sandmann@redhat.com>
Date:   Tue Jul 10 10:31:23 2007 -0400

    Add note about pixman dependency in README

 README |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 1fac791537d2333b084e3fbabc1a6a890433e9ed
Author: Jinghua Luo <sunmoon1997@gmail.com>
Date:   Tue Jul 10 15:09:04 2007 +0800

    [Glitz] fix compilation.
    
    Separating pixman broke the compilation if glitz backend is enabled,
    fix it and all compiler warning as well.

 src/cairo-glitz-surface.c |  104 +++++++++++++++++++++++++++-----------------
 1 files changed, 64 insertions(+), 40 deletions(-)

commit 5819be398c4eada9a6cfc8e37a532991751b4a51
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 5 18:59:31 2007 +0100

    [check-plt] Ignore entries for pixman.
    
    pixman is now an external library, so we now expect PLT entries.

 src/check-plt.sh |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 35ef8419a981929b65157407485ec001b69b3391
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 5 18:52:21 2007 +0100

    [cairo-matrix] Check determinant for invalid numbers.
    
    By checking matrices for invalid determinants, we can prevent the
    setting and application of invalid matrices.
    
    The trick used here is that NaNs, as specified by IEE754, always
    return FALSE in comparisons. Since we know that the square of the
    determinant must be positive definite, then if the comparison is
    FALSE the computation must have resulted in a NaN.

 src/cairo-matrix.c    |    4 ++
 test/invalid-matrix.c |   94 ++++++++++++++++++++++++++++++++++++++++++------
 2 files changed, 86 insertions(+), 12 deletions(-)

commit 7eaba5d5fbf83f66b39db42a89db3e7a892c2ea0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 5 15:24:11 2007 +0100

    [configure] Only run PostScript tests if we have ghostscript.
    
    During configure check for the ghostscript command line tool (gs) before
    enabling the PostScript surface tests for make check.

 boilerplate/cairo-boilerplate.c |    2 +-
 configure.in                    |   14 ++++++++++++++
 2 files changed, 15 insertions(+), 1 deletions(-)

commit ef967be630dd8d0bf81ad5889d6264bebe7631d4
Merge: 0c42dbb 5c7d2d1
Author: Sren Sandmann Pedersen <sandmann@annarchy.freedesktop.org>
Date:   Mon Jul 2 08:33:29 2007 -0700

    Merge branch 'master' of git+ssh://sandmann@git.freedesktop.org/git/cairo
    
    Conflicts:
    
    	pixman/src/fbcompose.c
    	pixman/src/icimage.c
    	pixman/src/pixmanint.h
    	pixman/src/pixregionint.h
    	src/cairo-clip.c

commit 5c7d2d14d78e4dfb1ef6d2c40f0910f177e07360
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue Jun 19 13:15:21 2007 -0700

    [fix] Avoid int overflow when allocating large buffers
    
    This patch introduces three macros: _cairo_malloc_ab,
    _cairo_malloc_abc, _cairo_malloc_ab_plus_c and replaces various calls
    to malloc(a*b), malloc(a*b*c), and malloc(a*b+c) with them.  The macros
    return NULL if int overflow would occur during the allocation.  See
    CODING_STYLE for more information.

 CODING_STYLE                    |   25 +++++++++
 pixman/src/fbcompose.c          |    4 +-
 pixman/src/icimage.c            |    8 ++--
 pixman/src/pixman.h             |    7 +++
 pixman/src/pixmanint.h          |   17 ++++++
 pixman/src/pixregion.c          |   59 ++++++++++++++++++----
 pixman/src/pixregionint.h       |    1 -
 src/cairo-atsui-font.c          |    2 +-
 src/cairo-bentley-ottmann.c     |    6 +-
 src/cairo-beos-surface.cpp      |    4 +-
 src/cairo-clip.c                |   10 +++-
 src/cairo-directfb-surface.c    |    2 +-
 src/cairo-ft-font.c             |    4 +-
 src/cairo-glitz-surface.c       |   34 +++++++++++--
 src/cairo-gstate.c              |    6 +-
 src/cairo-hull.c                |    2 +-
 src/cairo-malloc-private.h      |  104 +++++++++++++++++++++++++++++++++++++++
 src/cairo-meta-surface.c        |    4 +-
 src/cairo-os2-surface.c         |    9 ++--
 src/cairo-path.c                |    2 +-
 src/cairo-pattern.c             |    6 +-
 src/cairo-pdf-surface.c         |    6 +-
 src/cairo-pen.c                 |    4 +-
 src/cairo-png.c                 |    6 +-
 src/cairo-polygon.c             |    2 +-
 src/cairo-ps-surface.c          |    4 +-
 src/cairo-quartz-surface.c      |    8 ++--
 src/cairo-scaled-font-subsets.c |    4 +-
 src/cairo-scaled-font.c         |    2 +-
 src/cairo-spline.c              |    2 +-
 src/cairo-stroke-style.c        |    2 +-
 src/cairo-surface-fallback.c    |    4 +-
 src/cairo-surface.c             |    2 +-
 src/cairo-svg-surface.c         |    2 +-
 src/cairo-traps.c               |    2 +-
 src/cairo-unicode.c             |    4 +-
 src/cairo-win32-font.c          |    6 +-
 src/cairo-win32-surface.c       |    6 +-
 src/cairo-xcb-surface.c         |    8 ++--
 src/cairo-xlib-surface.c        |    6 +-
 src/cairoint.h                  |    1 +
 41 files changed, 308 insertions(+), 89 deletions(-)

commit fc34073464c487405b6e2e0a5fa269a1ae15a02a
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jun 27 14:38:41 2007 -0700

    Increment version to 1.5.1 after the 1.4.10 release

 configure.in |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 107a74885a25e585b467c7841c6929a12aa62565
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jun 27 14:05:56 2007 -0700

    Increment cairo version to 1.4.10 (and libtool versioning to 13:5:11)

 configure.in |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit f595ad2348dbd97b57d22471fdec7664f8ca7bf6
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jun 27 14:04:27 2007 -0700

    Add notes to NEWS for 1.4.10

 NEWS |   45 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 45 insertions(+), 0 deletions(-)

commit 2bf3e31da99f34328973a0866346af40748097f6
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jun 27 11:11:36 2007 -0700

    Prefer local dpy variable instead of display->display
    
    This was a tiny piece of cleanup that had been erroneously included
    with some earlier functional changes, (so it went through a cycle
    of being applied and reverted). It's back now in its own commit.

 src/cairo-xlib-display.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit eebb0df512da50f883a417bb5e8e368dc81e35a9
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jun 27 11:08:53 2007 -0700

    Revert "[cairo-xlib-display] Hide XErrors during processing of the work queue."
    
    This reverts commit 285b702ef6f73e7eb4ca0da235a287ad1e1f412f.
    
    The recent commit of 0791f342b93225849d9171aac8b738014b18bdf5 fixes
    the same bug that 285b702e was fixing, but without introducing any
    performance-killing calls to XSync. So we can drop those now.

 src/cairo-xlib-display.c |   17 +++--------------
 1 files changed, 3 insertions(+), 14 deletions(-)

commit b019cb8a7a910879c7af304edbd06fd105c9d89e
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jun 27 11:07:07 2007 -0700

    Revert "[cairo-xlib-surface] Check for errors before installing a NOOP error handler."
    
    This reverts commit 7016614dd90798247524f0c118f462aa2e7ef673.
    
    We want to avoid any negative performance impacts due to extra calls
    to XSync. The fact that X errors can be missed with this appraoch is
    undesirable of course---a proper fix will likely involve moving to
    XCB which will hopefully allow us to do the error-checking the way
    we want without any performance penalty.

 src/cairo-xlib-surface.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit 6d021eb4b6e319dd2bb3e5e126de07c6844d5c07
Merge: 9109946 0791f34
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Jun 27 11:01:00 2007 -0700

    Merge branch 'ooo-fix' into cairo

commit 0791f342b93225849d9171aac8b738014b18bdf5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 27 10:53:29 2007 -0700

    Avoid deferring resource cleanup for application drawables
    
    This eliminates X errors propagated from cairo due to cleaning up
    Render Pictures after the application had already destroyed the
    Drawable they reference. (It would be nice if the X server wouldn't
    complain that some cleanup work is already done, but there you
    have it.)
    
    This fix has been verified to fix the bug causing OpenOffice.org to
    crash as described here:
    
    	XError on right click menus in OOo.
    	https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=243811
    
    And unlike other proposed fixes for this bug, this fix does not
    introduce any new calls to XSync, (and thereby avoids performance
    concerns from those).

 src/cairo-xlib-surface.c |   47 +++++++++++++++++++++++++--------------------
 1 files changed, 26 insertions(+), 21 deletions(-)

commit 0c42dbb1925efb8228fb5246e0715bee0a5ded28
Author: Sren Sandmann <sandmann@redhat.com>
Date:   Fri Jun 15 00:39:27 2007 -0400

    pixman_image_set_transform() returns FALSE on failure

 src/cairo-pattern.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e0cff78b34558f0eed29aff5d818d1591c7bf966
Author: Sren Sandmann <sandmann@redhat.com>
Date:   Thu Jun 14 13:42:08 2007 -0400

    Fix bug where _cairo_image_surface_composite_trapezoids() computed the wrong stride for aliased masks

 src/cairo-image-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ca5760a289f287a7fafe36e69c6bdf47710c17e7
Author: Sren Sandmann <sandmann@redhat.com>
Date:   Thu Jun 14 13:12:01 2007 -0400

    Fix initialization of radial patterns

 src/cairo-pattern.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 12cc32b674d3f1b705ef1a66bbce1ef8c4488daf
Author: Sren Sandmann <sandmann@redhat.com>
Date:   Wed Jun 13 00:15:34 2007 -0400

    [pixman] Initial port to standalone pixman library.

 Makefile.am                        |    4 +-
 configure.in                       |   14 +-
 pixman/.gitignore                  |   20 -
 pixman/AUTHORS                     |   19 -
 pixman/COPYING                     |   92 -
 pixman/ChangeLog                   | 1534 -------------
 pixman/ChangeLog.libic             |  300 ---
 pixman/ChangeLog.libpixregion      |   47 -
 pixman/ChangeLog.slim              |   39 -
 pixman/INSTALL                     |    9 -
 pixman/Makefile.am                 |    7 -
 pixman/NEWS                        |  135 --
 pixman/README                      |   47 -
 pixman/RELEASING                   |   81 -
 pixman/TODO                        |   10 -
 pixman/autogen.sh                  |   53 -
 pixman/configure.in                |   92 -
 pixman/libpixman.pc.in             |   10 -
 pixman/src/.gitignore              |   13 -
 pixman/src/Makefile.am             |   46 -
 pixman/src/Makefile.win32          |   37 -
 pixman/src/check-config.sh         |   17 -
 pixman/src/check-pixmanint.sh      |   17 -
 pixman/src/fbcompose.c             | 4354 ------------------------------------
 pixman/src/fbedge.c                |  303 ---
 pixman/src/fbedgeimp.h             |  136 --
 pixman/src/fbmmx.c                 | 2821 -----------------------
 pixman/src/fbmmx.h                 |  298 ---
 pixman/src/fbpict.c                | 2181 ------------------
 pixman/src/fbpict.h                |  355 ---
 pixman/src/fbtrap.c                |  236 --
 pixman/src/icblt.c                 |  951 --------
 pixman/src/icbltone.c              |  743 ------
 pixman/src/iccolor.c               |   83 -
 pixman/src/icformat.c              |  220 --
 pixman/src/icimage.c               |  744 ------
 pixman/src/icimage.h               |  384 ----
 pixman/src/icint.h                 | 1070 ---------
 pixman/src/icpixels.c              |  116 -
 pixman/src/icrect.c                |  404 ----
 pixman/src/icrop.h                 |  137 --
 pixman/src/icstipple.c             |   81 -
 pixman/src/ictransform.c           |   63 -
 pixman/src/ictrap.c                |  200 --
 pixman/src/ictri.c                 |  293 ---
 pixman/src/icutil.c                |  287 ---
 pixman/src/pixman-xserver-compat.h |  125 -
 pixman/src/pixmanint.h             | 1076 ---------
 pixman/src/pixregionint.h          |   75 -
 pixman/src/renderedge.c            |  196 --
 pixman/src/renderedge.h            |  157 --
 pixman/update.pl                   |  159 --
 src/Makefile.am                    |    6 +-
 src/cairo-clip.c                   |   36 +-
 src/cairo-glitz-surface.c          |  126 +-
 src/cairo-image-surface.c          |  314 ++--
 src/cairo-pattern.c                |   82 +-
 src/cairo-pdf-surface.c            |   40 +-
 src/cairo-ps-surface.c             |    2 +-
 src/cairo-surface-fallback.c       |    5 +-
 src/cairo-surface.c                |    9 +-
 src/cairo-svg-surface.c            |   31 +-
 src/cairo-traps.c                  |    4 +-
 src/cairo-xlib-surface.c           |   43 +-
 src/cairoint.h                     |   14 +-
 test/buffer-diff.c                 |   16 +-
 66 files changed, 398 insertions(+), 21221 deletions(-)

commit 9109946a1a7f9341e60da7358da6535c5fac52db
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jun 21 15:40:23 2007 +0100

    [cairo-directfb] Correct minor typo.
    
    Correct the reference to _cairo_directfb_surface_is_similar.

 src/cairo-directfb-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 1e76aa66b23aa7b3fd7b9f7de2b563b4db814517
Author: Nis Martensen <nis.martensen@web.de>
Date:   Tue Jun 19 17:04:48 2007 +0200

    Update INSTALL about status of backends

 INSTALL |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 02f753c23ad0db7d677ae41f8d69dc566c8aaa0b
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Jun 18 18:23:06 2007 -0700

    Fix cairo-perf-diff to compile cairo-perf explicitly

 perf/cairo-perf-diff |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 2477e57de532fb3ebd1f6113cf51619b84b303d9
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Jun 18 13:58:15 2007 -0700

    [perf] Add pixman_region_init_rects and use in extract_region
    
    Avoid O(N*N) loop in traps_extract_region by letting us hand pixman
    an array of rects all at once.

 perf/Makefile.am          |    3 +-
 perf/cairo-perf.c         |    1 +
 perf/cairo-perf.h         |    1 +
 perf/long-dashed-lines.c  |   67 +++++++++++++++++++++++++++++++++++++++++++++
 pixman/src/pixman-remap.h |    1 +
 pixman/src/pixman.h       |    2 +
 pixman/src/pixregion.c    |   29 +++++++++++++++++++
 src/cairo-traps.c         |   58 +++++++++++++++++++++++++++-----------
 8 files changed, 144 insertions(+), 18 deletions(-)

commit 285b702ef6f73e7eb4ca0da235a287ad1e1f412f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 15 20:38:01 2007 +0100

    [cairo-xlib-display] Hide XErrors during processing of the work queue.
    
    It is possible for the resources that we defer freeing to be already
    destroyed and trigger an XError whilst processing the work queue. For
    example, the application renders to a Window and then destroys the
    Drawable before proceeding with more rendering. This will trigger an
    invalid Picture from RenderFreePicture whilst attempting to free the
    resources.
    
    By ignoring the possibility that the application could allocate a fresh
    resource with the same ID, we can simply hide the XErrors...
    
    Fixes: https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=243811

 src/cairo-xlib-display.c |   17 ++++++++++++++---
 1 files changed, 14 insertions(+), 3 deletions(-)

commit 7016614dd90798247524f0c118f462aa2e7ef673
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 15 20:45:53 2007 +0100

    [cairo-xlib-surface] Check for errors before installing a NOOP error handler.
    
    Call XSync before ignoring errors from XGetImage to avoid hiding
    unassociated errors. Similarly, call XSync before reinstalling the old
    error handler to ensure no errors creep out of the ignored section.

 src/cairo-xlib-surface.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 0c5d28a4e5ce5e4dd72c0f416ce5e960e92b808b
Author: Ryan Lortie <desrt@desrt.ca>
Date:   Wed Jun 13 18:59:22 2007 -0400

    [xlib] Create source xrender Picture with IncludeInferiors
    
    When an xlib surface is used as the source of a draw operation this
    will cause the contents of child windows to be included in the source
    data.  The semantics of drawing to xlib surfaces are unchanged (ie:
    draws are still clipped by child windows overlapping the destination
    window).

 src/cairo-xlib-surface.c |   15 ++++++++++++++-
 1 files changed, 14 insertions(+), 1 deletions(-)

commit 817d4b0c9a354526389290c6d5a7662713d67cd8
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sat Jun 9 19:14:05 2007 +0100

    [atsui] Document ATSUI
    
    Add cairo_atsui_font_face_create_for_atsu_font_id
    and ATSUI to the documentation. Don't enable it yet,
    since this is still unsupported.

 doc/public/tmpl/cairo-atsui.sgml |    2 +-
 src/cairo-atsui-font.c           |   13 +++++++++++++
 2 files changed, 14 insertions(+), 1 deletions(-)

commit fd1edaa5d386f15edacfd5596b550593ed45d627
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Wed Jun 13 01:27:36 2007 +0100

    [quartz] remove unused code
    
    clean up warnings about unused code: removing
    _cairo_quartz_cairo_path_to_quartz_path and the functions
    it calls.

 src/cairo-quartz-surface.c |   47 --------------------------------------------
 1 files changed, 0 insertions(+), 47 deletions(-)

commit d7a0816ec3d750939dd935f34b217980ee27af3f
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Wed Jun 13 01:27:36 2007 +0100

    [quartz] move glyph array declarations
    
    Move declarations causing a warning. A separate patch from
    the other warning cleanups because it moves where the allocation
    happens.

 src/cairo-quartz-surface.c |   20 ++++++++++----------
 1 files changed, 10 insertions(+), 10 deletions(-)

commit bf39b28b77a83160e5aa037031d82f8c0843f387
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Wed Jun 13 01:04:54 2007 +0100

    commit 75be87b4093aaa7f477d587d5a68308cade1b29c
    
        [quartz] move glyph array declarations
    
        Move declarations causing a warning. A separate patch from
        the other warning cleanups because it moves where the allocation
        happens.

 src/cairo-quartz-surface.c |   27 +++++++++++++++------------
 1 files changed, 15 insertions(+), 12 deletions(-)

commit 2034d1dbd5888c393c57f0feeb707b0411fa4480
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Wed Jun 13 01:27:36 2007 +0100

    [quartz] pass quartz_stroke_t not CGContextRef
    
    Fix a typo where an incompatible pointer was being passed.

 src/cairo-quartz-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 54bbe44b08b37041c8982634837dbc79b19e6c18
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jun 11 17:51:37 2007 -0400

    [TODO] Add link to Adrian's finer-grain fallback thread

 TODO |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit ef3c64fd13d66648f4e00affb304e8b404249f92
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Mon Jun 11 09:27:11 2007 -0700

    [misc] Blow away last remaining $Id$ directives in sources

 pixman/src/fbtrap.c                  |    2 --
 src/cairo-analysis-surface-private.h |    3 +--
 test/rel-path.c                      |    2 --
 3 files changed, 1 insertions(+), 6 deletions(-)

commit 853f23e18c28548bce4647d4e54a5cfb317ac3dc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jun 11 02:42:04 2007 -0400

    [test] Use check_PROGRAMS instead of custom made SUPPORT_PROGS
    
    It better handles $(EXEEXT) and is exactly made for this purpose.

 test/Makefile.am |   14 ++++++--------
 1 files changed, 6 insertions(+), 8 deletions(-)

commit 1d86c7fa888918c32eb13adb084de78883e17c84
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Jun 9 13:48:13 2007 -0400

    [perf] Link to librt if available
    
    This is needed on Solaris, but also works on Linux.

 configure.in     |    4 ++++
 perf/Makefile.am |    3 ++-
 2 files changed, 6 insertions(+), 1 deletions(-)

commit 85d045f2675cf191ea1d1af66ad4cd9e57d58e67
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Jun 8 16:08:44 2007 -0700

    Update version to 1.4.9 after the 1.4.8 release.

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit fea4f344c46cf5f85c6af3102333008768c55063
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Jun 8 15:49:12 2007 -0700

    Update version to 1.4.8 (and libtool info to 13:4:11)

 configure.in |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 0b19ff1d3f493067fa5484151e71dfcedcd14fd1
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Jun 8 15:34:35 2007 -0700

    Add include of X11/Xlib.h to cairo-xlib-xrender.h
    
    This makes this header file self-sufficient. Thanks to
    Sam Sirlin <samuel.w.sirlin@jpl.nasa.gov> for pointing
    this out.

 src/cairo-xlib-xrender.h |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 8223c976d54319b58906de03fcb8fb1967105e53
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Fri Jun 8 01:56:10 2007 +0100

    [NEWS] add note about quartz fixes
    
    We've got 11 less failures in the quartz tests this time around,
    worth a mention.

 NEWS |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 00063a65f758265f3ad5c0caa374d9c7d5e89932
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Fri Jun 8 01:17:09 2007 +0100

    [quartz] fix DO_IMAGE
    
    The implementation of DO_IMAGE leaks memory via a referenced surface,
    and wasn't applied for strokes and glyphs. This patch corrects those
    issues.

 src/cairo-quartz-private.h |    5 ++-
 src/cairo-quartz-surface.c |   83 +++++++++++++++++++++++++++-----------------
 2 files changed, 55 insertions(+), 33 deletions(-)

commit 39e6a0090faa4e73a658c1ca0ead3040309b84a2
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Fri Jun 8 01:12:24 2007 +0100

    [quartz] fall back on extended gradients
    
    A temporary fix for mozilla bug 379321, use an image fallback for
    gradients that use EXTEND_REPEAT or EXTEND_REFLECT.

 src/cairo-quartz-surface.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit 7c1afdcd597331c14f256f406a3e95743f7fdad6
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Mon Mar 26 00:06:23 2007 +0100

    [quartz] fixes the offsets in the font-matrix test
    
    Apply the font matrix offset to text on the quartz surface, if necessary.

 src/cairo-quartz-surface.c |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit 55f1dbd0fbcbc587823ef8fa291a0af08441c775
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sun Apr 1 00:04:24 2007 +0100

    [quartz] ensure that line widths are scaled.
    
    cairo-gstate applies the ctm to the coordinates used in paths,
    but not to the line width. In quartz this ends up drawing unscaled
    lines. This is a minimal fix - it undoes the scaling applied to the
    points and then draws the path scaled correctly.

 src/cairo-quartz-surface.c |   72 ++++++++++++++++++++++++++++++++++---------
 1 files changed, 57 insertions(+), 15 deletions(-)

commit 5a9de1b5c9f6cc445f9f6230937c2254ee49e7cb
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Thu Jun 7 23:22:30 2007 +0100

    [atsui] remove unused code
    
    Remove CGAffineTransformMakeWithCairoFontScale.

 src/cairo-atsui-font.c |    8 --------
 1 files changed, 0 insertions(+), 8 deletions(-)

commit 807c5ab613e7df60be452d6683c4f9f045ef62a0
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Thu Jun 7 23:22:29 2007 +0100

    [atsui] clean up warnings
    
    Refactor code to get rid of compiler warnings.

 src/cairo-atsui-font.c |   11 +++++++----
 1 files changed, 7 insertions(+), 4 deletions(-)

commit b210b09e2de2f048debad6e8881f0226b6b17060
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Thu Jun 7 23:22:27 2007 +0100

    [quartz] implement CAIRO_EXTEND_REFLECT
    
    Implement extend-reflect by tiling a larger 2x2 grid of reflected
    images.

 src/cairo-quartz-surface.c |   64 ++++++++++++++++++++-----------------------
 1 files changed, 30 insertions(+), 34 deletions(-)

commit fa5dd548b0dd2dfe523501bd40cafe7916240be1
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Tue May 29 23:11:49 2007 +0100

    [quartz] implement CAIRO_EXTEND_NONE
    
    Implement extend-none for surface patterns, by using a single
    DrawImage where possible. There is some code duplication in this
    patch, to make it easier to edit this patch series without conflicts.
    A patch to remove duplicate code will be required later..

 src/cairo-quartz-surface.c |   61 ++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 59 insertions(+), 2 deletions(-)

commit 147288864c8c512f3ae17c8117d3c36dbbc6d5f8
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Thu Jun 7 23:22:05 2007 +0100

    [quartz] Refactor code to create a CGImageRef from a pattern
    
    In order to implement CAIRO_EXTEND_NONE we will need to create
    a CGImageRef without also creating a CGPattern. Separate the two
    pieces of code.

 src/cairo-quartz-surface.c |   40 +++++++++++++++++++++-------------------
 1 files changed, 21 insertions(+), 19 deletions(-)

commit a5ee983e1cb97aff63b0c9c3a57125b37d0e3f74
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Jun 7 15:03:43 2007 -0700

    Update release notes for 1.4.8

 NEWS |   75 ++++++++++++++++++++++++++++++++++++++++++-----------------------
 1 files changed, 48 insertions(+), 27 deletions(-)

commit e19c49269d0b236de91a5a9b5230bed7d76282ed
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Jun 7 12:19:46 2007 -0700

    Remove stale reference to cairo-xlib-test.h

 src/Makefile.am |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 5ded4479d6ddbbe16c631144ef987c4c02e706a6
Author: Carl Worth <cworth@cworth.org>
Date:   Thu May 31 15:35:14 2007 -0700

    Fix return value of cairo_surface_write_to_png for unsupported formats
    
    For some reason this was returning CAIRO_STATUS_NULL_POINTER.
    Now fixed to return CAIRO_STATUS_INVALID_FORMAT.

 src/cairo-png.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ec63a7839457e2d14c7b1a5b64d1a79daf044222
Author: Carl Worth <cworth@cworth.org>
Date:   Thu May 31 14:28:50 2007 -0700

    Add CAIRO_INTERNAL_FORMAT_RGB16_565 and prefer it over deprecated CAIRO_FORMAT_RGB16_565
    
    Also clarify the documentation for cairo_internal_format_t

 src/cairo-image-surface.c |    6 ++--
 src/cairoint.h            |   52 ++++++++++++++++++++++++++------------------
 2 files changed, 34 insertions(+), 24 deletions(-)

commit b6ee6c531c41adb57512fe0eaf21558e5d03f04b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Jun 7 12:22:20 2007 -0400

    [NEWS] Add par about Chris 'ickle' Wilson's error-handling improvements work

 NEWS |   14 ++++++++++++++
 1 files changed, 14 insertions(+), 0 deletions(-)

commit 2399f923d504fba6b3dcbd0a185cd3d4b29b4dcf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 4 19:55:23 2007 +0100

    [cairo-bentley-ottmann] Malloc reduction.
    
    Attempt to allocate the edges during tessellate_polygon() from the stack,
    if the polygon size is sufficiently small and amalgamate the separate
    allocations for the list of events and their sorted index into a single
    block.

 src/cairo-bentley-ottmann.c |   28 +++++++++++++++-------------
 1 files changed, 15 insertions(+), 13 deletions(-)

commit ecf6f7f5147195276b3b479879cbd3db402df688
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 4 16:35:15 2007 +0100

    [cairo-scaled-font] Skip the mask composition onto the surface on error.
    
    If we fail to composite the glyph onto the mask, skip compositing the
    mask onto the surface.

 src/cairo-scaled-font.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 2e60029392bca904f7035a8f403de0593193b6b9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jun 5 09:08:51 2007 +0100

    [cairo-ft-font] Markup error paths with _cairo_error().
    
    Behdad Esfahbod noted that in ff5af0f540ec4 I had introduce new error
    paths without the appropriate _cairo_error(). So review cairo-ft-font
    to ensure that _cairo_error() is called at the start of every error path,
    as close to the originating error as possible.

 src/cairo-ft-font.c |   58 ++++++++++++++++++++++++++++++++++++---------------
 1 files changed, 41 insertions(+), 17 deletions(-)

commit a5e12cd9f212b12a32230263188be38c175dc0a1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 31 19:21:30 2007 -0400

    [ROADMAP] Add link for a8mask patch

 ROADMAP |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit ff5af0f540ec407beb3d2a105b22f041cd770ce4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 30 15:44:59 2007 +0100

    [cairo-ft-font] Propagate error rather than asserting.
    
    FT_Set_Char_Size can fail due to an out-of-memory condition, so
    propagate the error status instead of asserting that it never fails.

 src/cairo-ft-font.c |   41 ++++++++++++++++++++++++++++++-----------
 1 files changed, 30 insertions(+), 11 deletions(-)

commit de4dd4263cb5183b128a8fc80576ed7ddb239319
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 11 15:15:11 2007 +0100

    [cairo] Propagate surface->status on cairo_t creation.
    
    Set the cairo_t status to be the surface->status when the context is
    created, and special case the NO_MEMORY status in order to avoid a
    redundant allocation.

 src/cairo-gstate.c |    2 +-
 src/cairo.c        |   12 +++++-------
 2 files changed, 6 insertions(+), 8 deletions(-)

commit 9f4efa8a3ae6cbc194d89012286990582a6c8f5d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 11 09:48:47 2007 +0100

    [cairo-ps-surface] Check status of glyph_lookup.
    
    Check for failure of _cairo_scaled_glyph_lookup() before preceeding to
    access the glyph and propagate the failure up the callstack as far as
    possible.

 src/cairo-ps-surface.c |   14 ++++++++++----
 1 files changed, 10 insertions(+), 4 deletions(-)

commit 8010d46de4056e6c15b6891a06ef3d784c641b82
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun May 27 11:40:47 2007 +0100

    [cairo-gstate] Check scaled font status.
    
    After using the public API to access the scaled font, which only sets
    the status field in the font, check the scaled font status. This will
    then correctly propagate errors during glyph loading to the context.

 src/cairo-gstate.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit faf986bb25eab34eee16415f4dab6f7d5d3460d3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 29 12:39:16 2007 +0100

    [cairo-gstate] Check status on existing fonts.
    
    Add an initial guard in _cairo_gstate_ensure_scaled_font() and
    _cairo_gstate_ensure_font_face() to check that there is no prior
    error status on the objects.

 src/cairo-gstate.c |   41 +++++++++++++++++++++++------------------
 1 files changed, 23 insertions(+), 18 deletions(-)

commit ac4b20082dd6b2e2b280d3615eebf5387da87e2f
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue May 29 20:50:02 2007 -0700

    [misc] make _cairo_image_surface_nil_invalid static const

 src/cairo-image-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0b34e958f18f0bcfb8bc9b054fb3bbb2343d2c32
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Tue May 29 17:14:41 2007 -0700

    [test] add XFAIL test surface-pattern-big-scale down
    
    Add test for image downscaling with large images severely limiting
    the destination coordinate space.  See the test for more information.

 test/Makefile.am                      |    2 +
 test/surface-pattern-big-scale-down.c |  121 +++++++++++++++++++++++++++++++++
 2 files changed, 123 insertions(+), 0 deletions(-)

commit 0898411d0abdfa6a02c2fb959b3a668e728fd87c
Author: Kouhei Sutou <kou@cozmixng.org>
Date:   Mon May 28 17:05:40 2007 -0400

    [doc] Minor documentation fixes

 src/cairo-matrix.c      |    2 +-
 src/cairo-pattern.c     |    2 +-
 src/cairo-scaled-font.c |    2 +-
 src/cairo.c             |   22 +++++++++++++++-------
 src/cairo.h             |    2 +-
 5 files changed, 19 insertions(+), 11 deletions(-)

commit 4da50dfa02d7c03c32ee20c15f8304eafa0844e0
Author: Luo jinghua <sunmoon1997@gmail.com>
Date:   Sun May 27 17:09:49 2007 +0800

    [cairo-xlib-surface]: flush work queue before sending glyphs to X server.
    
      After introducing a work queue for deferred destruction of X resource
    my firefox crashes over and over again because XRenderFreeGlyphs is trying
    to free a non-exist glyph (already freed). The problematic call sequence is
    something like below:
      XRenderAddGlyphs (20990204, 20069)
      XRenderAddGlyphs (20990204, 20069)
      XRenderFreeGlyphs (20990204, 20069)
      XRenderFreeGlyphs (20990204, 20069)
    You can see the two add/free glyphs is interlaced. And obviously, we'll crash
    at the last one. To fix this bug, we must be ensure here's no pending work
    to free the glyph that we want to sent.

 src/cairo-xlib-surface.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 69bf823db1b256f19487d2f002e7b0811859e58e
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Fri May 25 01:35:37 2007 +0100

    [atsui] use ATSGlyphGetScreenMetrics to measure glyphs.
    
    I don't know how I managed to get glyph measurement so badly wrong
    before, but tracing paths was not necessary, and 6x slower. The fix
    switches to using ATSGlyphGetScreenMetrics for all metrics, and remove
    the  old measuring code.

 src/cairo-atsui-font.c |   88 +++--------------------------------------------
 1 files changed, 6 insertions(+), 82 deletions(-)

commit 5b2b008048d2bcbb0b558a6c02aee1093311db39
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 11 10:14:57 2007 +0100

    [cairo-scaled-font-subsets] Shortcut empty subset.
    
    If the font_subset if empty, avoid allocating zero bytes and iterating
    over the empty hash table.

 src/cairo-scaled-font-subsets.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit c175cf7b833b03c38c8ddea183333ce84c6fdfec
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 17 17:04:14 2007 +0100

    [cairo-ft-font] Remove erroneous cached font faces.
    
    Only return a font face from the cache if it is not in an error condition.
    Otherwise unlink the bad font face from the cache and construct a new one.

 src/cairo-ft-font.c |   15 +++++++++++----
 1 files changed, 11 insertions(+), 4 deletions(-)

commit f382c3e110f8078e83cbb9d73cfbb43b1506a11b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 11 15:31:33 2007 +0100

    [cairo-pattern] Fully initialise the error pattern.
    
    _cairo_pattern_fini depends on the pattern being correctly initialised,
    for example when calling _cairo_user_data_array_fini(), so we need to
    initialize the whole pattern and not just set the type to SOLID when
    creating a pattern for a surface in error.

 src/cairo-pattern.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit fcdfda83655faf0eecbb2b5af09a05340fe422e6
Author: Boris Zbarsky <bzbarsky@MIT.EDU>
Date:   Mon May 14 23:46:14 2007 -0500

    [quartz] implementing release_source_image (#11059)
    
    The image surface that _cairo_quartz_surface_acquire_source_image creates never
    seems to be released, probably because there is no release_source_image callback
    in the quartz code.
    
    The attached patch fixes that problem, at least insofar as the image surface
    itself is no longer leaking.  I'm not sure whether any other cleanup needs to
    happen here.
    
    -Boris

 src/cairo-quartz-surface.c |   11 ++++++++++-
 1 files changed, 10 insertions(+), 1 deletions(-)

commit 2c8598aafb4a8779ce94940ce91033a8c5a62ea4
Author: Carl Worth <cworth@cworth.org>
Date:   Fri May 18 13:23:04 2007 -0700

    Fix typo in comment.

 src/cairo-pattern.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3cb67435f805a8ea39f38194379f216ea4a69ed6
Author: Carl Worth <cworth@cworth.org>
Date:   Fri May 18 13:22:36 2007 -0700

    Document behavior of color stops added with identical offsets.

 src/cairo-pattern.c |   13 +++++++++++++
 1 files changed, 13 insertions(+), 0 deletions(-)

commit 1cf4ed989473e2468ea2d64bb7759084c9f6a1e4
Author: Carl Worth <cworth@cworth.org>
Date:   Fri May 18 13:16:23 2007 -0700

    ROADMAP: Add bugs for 565 and 655 Visuals to the list

 ROADMAP |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit 7260ee23ecb08e72a938a194e70dfb5e7a48c599
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri May 18 11:55:37 2007 -0400

    [Type1] #include <ctype.h> (#10989)

 src/cairo-type1-subset.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 6a42ddf0f9e9e4b8dc5fa6a98ef4448f1c149789
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu May 17 12:45:22 2007 +0930

    TrueType Subsetting: Remove post table
    
    The post table is not used now that TrueType fonts are embedded
    in PDF as CID fonts.

 src/cairo-truetype-subset.c |   34 +---------------------------------
 1 files changed, 1 insertions(+), 33 deletions(-)

commit 67e752f75fdc561aca419f798a1650feb22e59a4
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu May 17 11:48:25 2007 +0930

    CFF Subsetting: Filter out Unique ID from subset
    
    The subsetted font is not the same as the original font so it should not
    have the same XUID and UniqueID.

 src/cairo-cff-subset.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit 99a6983017e1cd27f8a598487f8a72cfa6d411f1
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu May 17 10:17:09 2007 +0930

    Ensure surface backend finish() is never called more than once.
    
    Previously if the backend finish() function returned an error status,
    surface->finished was not set true. This would result in the backend
    finish() function being called twice which in the case of the PostScript
    backend caused a seg fault.

 src/cairo-surface.c |    4 +---
 1 files changed, 1 insertions(+), 3 deletions(-)

commit c5ae0f1232e8cef860bc1fc0b449ddf9d9063d22
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 11 16:11:02 2007 +0100

    [cairo-truetype-subset] Avoid a potential 0 byte allocation.
    
    During _cairo_truetype_subset_init skip copying the string_offsets if
    the vector is empty.

 src/cairo-truetype-subset.c |   21 +++++++++++++--------
 1 files changed, 13 insertions(+), 8 deletions(-)

commit e37bee3f52282a042251f2dfc8e051943fd8f1d7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 16 14:47:33 2007 +0100

    [cairo-pdf-surface] emit_pattern_stops() array overrun.
    
    _cairo_pdf_surface_emit_pattern_stops() tried to set the last element
    to have an offset of exactly 1.0, but missed and set the next element
    after the end of the array.

 src/cairo-pdf-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 27de1869f5a837b79812cd4b04e17621ec0f848c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 16 13:10:58 2007 +0100

    [cairo-pdf-surface] Free allstops on error.
    
    Ensure the locally allocated resources are freed on the error paths.

 src/cairo-pdf-surface.c |   18 +++++++++---------
 1 files changed, 9 insertions(+), 9 deletions(-)

commit 79e6c0207cb65b6bc1f38537f42632d623a1bc9a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 12 18:27:58 2007 +0100

    [cairo-pattern] Check for the nil surface.
    
    cairo_surface_create_similar() does not return NULL as was being checked
    for, but the nil surface on error. Also ensure that the returned surface
    is destroyed if we encounter an error whilst compositing.

 src/cairo-pattern.c |   26 ++++++++++++++++++++++----
 1 files changed, 22 insertions(+), 4 deletions(-)

commit 32c0ef9f145cec8b997c011b13208362eaf03004
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 12 16:20:00 2007 +0100

    [cairo-gstate] Remove a redundant conditional.
    
    Simplify _cairo_gstate_text_to_glyphs() with a tail call.

 src/cairo-gstate.c |    9 ++-------
 1 files changed, 2 insertions(+), 7 deletions(-)

commit 37d8c18b3fc489d6336131bae6ec219cafc35718
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 12 15:42:59 2007 +0100

    [cairo-scaled-font-subsets] Destroy the glyph if we fail to cache it.
    
    If we fail to insert the glyph into the sub_font glyph cache then we
    must destroy it before propagating the error.

 src/cairo-scaled-font-subsets.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 76e758df5b99fd4dee64481b9039b0d44dd01587
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 12 15:40:39 2007 +0100

    [cairo-truetype-subset] Destroy the arrays on error.
    
    Growing the arrays may successfully allocate the indirect pointer, but
    fail whilst allocating the actual array - so always call
    _cairo_array_fini after _cairo_array_grow_by().

 src/cairo-truetype-subset.c |   22 +++++++++++-----------
 1 files changed, 11 insertions(+), 11 deletions(-)

commit b63b32958e690409448ddc14e19b1856b9ef555a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 12 15:32:34 2007 +0100

    [cairo-scaled-font-subsets] Destroy the parent and subfont on error.
    
    If we fail to create the sub font destroy the local reference to the
    parent font and if we fail to insert the sub font into the hash table,
    destroy the newly create sub font.

 src/cairo-scaled-font-subsets.c |   16 ++++++++++++----
 1 files changed, 12 insertions(+), 4 deletions(-)

commit fcd1076bcffa20b7770a1b447a46232760972e2f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 12 14:36:11 2007 +0100

    [cairo-ft-font] Destroy the path on error.
    
    During _decompose_glyph_outline() destroy the fixed path if we
    encounter an error.

 src/cairo-ft-font.c |   22 ++++++++++++----------
 1 files changed, 12 insertions(+), 10 deletions(-)

commit abb19e61cf076c62c7626094c70de0530bd9fd00
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 12 14:32:52 2007 +0100

    [cairo-ft-font] Destroy the unscaled reference on error.
    
    Release the reference to the unscaled font if we encounter an error
    whilst initialising the cairo_ft_scaled_font_t.

 src/cairo-ft-font.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit e4055f02a1f5a3d7942c7c2bb4f460ce0a8b5481
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 12 14:29:28 2007 +0100

    [cairo-ft-font] Race between unscaled removal from hash table and creation
    
    Small window of opportunity for the unscaled font to be destroyed and
    removed from the hash table before
    _cairo_ft_unscaled_font_create_for_pattern() takes a reference on behalf
    of its cairo. Close the window by taking the reference with the font
    map lock held.

 src/cairo-ft-font.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit f239308ef1014174d554ccaeab1fe7c2d84e26dc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 12 13:27:09 2007 +0100

    [cairo-deflate-stream] Free the stream on error.
    
    Before returning the nil output stream, free the locally allocated
    stream when encountering an error during _cairo_deflate_stream_Create().

 src/cairo-deflate-stream.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 35a2ed03352a1abc42e441ce5f52f2704de9be85
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 12 12:36:47 2007 +0100

    [cairo-ft-font] Destroy surface if glyph transformation fails.
    
    As we allocated the surface we need to destroy it if we encounter an
    error.

 src/cairo-ft-font.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit 6a43c027238d2302f9e01ee7a780370d330def6c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 12 09:43:30 2007 +0100

    [cairo-xlib-screen] Increase number of GC depths.
    
    Add support for depths 12 and 30, and a separate unknown.

 src/cairo-xlib-private.h |    2 +-
 src/cairo-xlib-screen.c  |   14 ++++++++------
 2 files changed, 9 insertions(+), 7 deletions(-)

commit 70611846ded98ffa0f085f5a704979384b37e84c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 12 09:40:13 2007 +0100

    [cairo-xlib-surface] Always nullify GC after pushing to screen.
    
    The status return from _cairo_xlib_screen_put_gc() indicates the failure
    to queue a job to free an old GC - the current GC is always transferred
    away from the caller, so always nullify it in the surface.

 src/cairo-xlib-surface.c |   11 +++++------
 1 files changed, 5 insertions(+), 6 deletions(-)

commit 58c35e6d7b2e153dc9cd6ff89fa91497c507afaf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 12 00:10:26 2007 +0100

    [cairo-paginated-surface] Check surface status during finish.
    
    Propagate children status during finish.

 src/cairo-paginated-surface.c |   11 +++++++++--
 1 files changed, 9 insertions(+), 2 deletions(-)

commit 9ffd8154e2ec2ccbeeefd3e4a34b2aa16844c1ce
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 11 23:43:53 2007 +0100

    [cairo-scaled-font-subsets] Correctly destroy the hash table.
    
    After an allocation failure in
    _cairo_scaled_font_subsets_create_internal() call
    _cairo_hash_table_destroy() instead of a mere free().

 src/cairo-scaled-font-subsets.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit bcfc5f0bdbd4c1eedc22bde5eed464a8bd18211e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 11 20:57:12 2007 +0100

    [pixman] Propagate allocation failure.
    
    pixman_op() failed to propagate the failure from
    pixman_region_appendNonO() and the generic op.

 pixman/src/pixregion.c |   24 +++++++++++++++++-------
 1 files changed, 17 insertions(+), 7 deletions(-)

commit 9e99f0611c834f80903e3554663f71682ef59ef3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 11 20:38:24 2007 +0100

    [cairo-traps] Initialize traps to use embedded buffer.
    
    Set the traps to use the embedded buffer during initialization which will
    save one redundant _cairo_traps_grow()

 src/cairo-traps.c |   26 ++++++--------------------
 1 files changed, 6 insertions(+), 20 deletions(-)

commit 35eb65b7772459266e2f954fb370bfdca12b5b64
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 11 18:25:13 2007 +0100

    [cairo-path] Check for errors during the count.
    
    Return the nil object if we encounter any error whilst trying to
    generate the path.
    
    Also special case the NO_MEMORY error object to return the nil object.

 src/cairo-path.c |   10 +++++++++-
 1 files changed, 9 insertions(+), 1 deletions(-)

commit a60afb0e78ab42498158ef852fcea35c8f71e8ec
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 11 16:01:26 2007 +0100

    [cairo-scaled-font] Return status of _cairo_scaled_font_glyph_path()
    
    The status return of _cairo_path_fixed_interpret() was being ignored,
    propagate it.

 src/cairo-scaled-font.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit d46f6872a5fe601862e2f63455c97a15c4667cf2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun May 13 21:52:52 2007 -0400

    [docs] Update to latest source changes and kill warnings

 doc/public/Headers.mk     |    1 +
 doc/public/Makefile.am    |    2 --
 doc/public/cairo-docs.xml |    6 +++---
 3 files changed, 4 insertions(+), 5 deletions(-)

commit 40558cb15e5f7276a29847b00c9dae08b9d9380e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 12 10:10:49 2007 +0100

    [cairo-xlib-screen] Clear the gc_needs_clip_reset after use.
    
    After consuming the GC we need to unset the clip reset flag, so that
    if we try and get a new GC without first putting a fresh one we do not
    try to call XSetClipMask on a NULL GC.
    
    (Fixes http://bugs.freedesktop.org/show_bug.cgi?id=10921)

 src/cairo-xlib-screen.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit abba3f2375c58401b7722837b3be37c3de9beca4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 10 23:05:46 2007 +0100

    [valgrind-suppressions] Update to cover XrmGetStringDatabase
    
    By dropping the top frame from suppression, the XrmGetFileDatabase
    suppressions will also match XrmGetStringDatabase leaks which are
    starting to occur.

 test/.valgrind-suppressions |   42 ++++++++++++++----------------------------
 1 files changed, 14 insertions(+), 28 deletions(-)

commit c4abc3a0e3ebb27bc0aa178651e496c514eb1fae
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 10 21:28:48 2007 +0100

    [cairo-truetype-subset] Set CAIRO_STATUS_NO_MEMORY on malloc failure.
    
    _cairo_truetype_font_create() failed to update the status before
    returning after detecting an allocation failure, leaving its callers
    none the wishing - and eventually triggering a segmentation fault when
    the font was used in anger.

 src/cairo-truetype-subset.c |   16 ++++++++++++----
 1 files changed, 12 insertions(+), 4 deletions(-)

commit ebababc0cf83f828d48200b8e316f57912fb0128
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 10 19:24:54 2007 +0100

    [cairo-pattern] Return the nil cairo_pattern_t for CAIRO_STATUS_NO_MEMORY.
    
    If we asked to create a pattern after encountering an allocation failure,
    we can avoid another allocation by returning the nil pattern object.

 src/cairo-pattern.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit e8e5f93ffec8321c029c0b95abcb3cd8cadcff31
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 10 20:50:58 2007 +0100

    [cairo-meta-surface] Add a surface->status guard to meta_surface_replay()
    
    Before attempting to access the cairo_meta_surface_t specific members,
    we need to ensure that _cairo_meta_surface_replay() has received a true
    meta surface rather than an error surface (e.g. _cairo_surface_nil).

 src/cairo-meta-surface.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 195112697fac77e70ef36e00a2d557eda1e0e145
Author: elaine <elaine.xiong@sun.com>
Date:   Thu May 10 13:58:44 2007 -0400

    [xlib] The buggy_repeat path should be removed for Xsun now
    
    Sun never released a version of Solaris with Xorg with the buggy repeat
    problem.  This patch was only needed for development versions of Solaris
    Nevada (roughly builds 25-30).  The latest S10U release and Nevada releases
    have a fixed Xorg.  So no users should ever encounter this bug.
    
    We need to remove this test because Xsun has the same VendorString and a lower
    VendorRelease number so it falsely triggers buggy_repeat to be turned on.
    They just added Xrender support recently to Xsun, so this wasn't an issue
    before recently.

 src/cairo-xlib-surface.c |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

commit ab6a767cf476c98b466c62dd410d0f61f8dd6bbb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 10 17:17:30 2007 +0100

    [cairo-scaled-font] Check for allocation failure.
    
    cairo_scaled_font_create() returns a nil object on failure whereas a few
    callers were checking for NULL.
    
    Secondly review the public entry points for cairo_scaled_font_*() to
    ensure that all check that they will not attempt to overwrite the
    read-only nil object.

 src/cairo-gstate.c              |    7 +++----
 src/cairo-scaled-font-subsets.c |    2 ++
 src/cairo-scaled-font.c         |   10 ++++++++--
 src/cairo-type1-fallback.c      |    2 +-
 4 files changed, 14 insertions(+), 7 deletions(-)

commit aec92188f1cf4ca34e890b0a4266425532f669d4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 10 09:29:24 2007 +0100

    [cairo-clip] Correctly report allocation failure
    
    Distinguish between the unrepresentable clip and the failure to allocate
    the clip extents.

 src/cairo-clip.c |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

commit 1a719d1189243a76120b98371f84e074c8cd611e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 10 09:28:20 2007 +0100

    [cairo] Use _cairo_clip_nil for CAIRO_STATUS_NO_MEMORY
    
    When creating a error clip list for CAIRO_STATUS_NO_MEMORY, simply
    reuse the nil object rather than allocate a fresh list.

 src/cairo.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 3fbc4bb5ae27809f417ec2627fa515375e63a0e7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 9 21:41:17 2007 +0100

    [cairo-clip] Add missing error status for _cairo__clip_intersect_region()
    
    An out-of-memory error path missed setting CAIRO_STATUS_NO_MEMORY.

 src/cairo-clip.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit b5d25068796d572b4b0c6e33eecc5f0736fb8f78
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 9 16:27:42 2007 +0100

    [cairo] cairo_pop_group() returns a NULL pattern
    
    cairo_pop_group() checks for a NULL return from
    cairo_pattern_create_for_surface() instead of the nil cairo_pattern_t,
    and then returns a NULL pattern instead of the nil object.

 src/cairo.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 6f09e93ad7ac4c941ba6c72b21ea4536d248f8d5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 9 13:39:08 2007 +0100

    [ciro-surface-fallback] Propagate status for _clip_and_composite_trapezoids
    
    The result of _clip_and_composite_trapezoids() was ignored by 2/3 of
    its callers - simply propagate the status.

 src/cairo-surface-fallback.c |   28 ++++++++++++++--------------
 1 files changed, 14 insertions(+), 14 deletions(-)

commit ae5d4a1c17a46c0a6ea2e4c825ecce7a5cbbe28b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 9 13:19:54 2007 +0100

    [cairo] Return after detecting the invalid font-options.
    
    Do not continue to copy the contents of the nil cairo_font_options_t,
    but set the error on the context and return.

 src/cairo.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit dfd4d41ac99dbe5d8ea16aa4ce4809b66308c803
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 9 12:30:40 2007 +0100

    [cairo-xlib-surface] Free the allocation if we fail to queue the work.
    
    Avoid the leak of the allocated argument if we fail to queue the work to
    free the glyph.

 src/cairo-xlib-surface.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit 8ddfc1b2e4aeefb704e05e64661b5c9985788e99
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 8 16:13:08 2007 +0100

    [cairo-pattern] Return status from _cairo_pattern_init_copy()
    
    During the copy, allocation of the gradient may fail and so the callers
    need to check for a pattern that returned in an error state. No callers
    did so and in order to force all callers to check the error status,
    the status return was added to _cairo_pattern_init_copy().  The early
    error checking may appear redundant for an object with an embedded
    structure, however it does fix an error where an uninitialised pattern
    was being used:
    
    ==1922== Process terminating with default action of signal 11 (SIGSEGV)
    ==1922==  Access not within mapped region at address 0x55555555
    ==1922==    at 0x402CF6F: _cairo_array_index (cairo-array.c:208)
    ==1922==    by 0x402D4F3: _cairo_user_data_array_fini (cairo-array.c:370)
    ==1922==    by 0x4046464: _cairo_pattern_fini (cairo-pattern.c:188)
    ==1922==    by 0x404992A: _cairo_meta_surface_paint (cairo-meta-surface.c:266)
    ==1922==    by 0x403FCE0: _cairo_surface_paint (cairo-surface.c:1331)
    ==1922==    by 0x405CB5E: _test_meta_surface_paint (test-meta-surface.c:195)
    ==1922==    by 0x403FCE0: _cairo_surface_paint (cairo-surface.c:1331)
    ==1922==    by 0x4032A60: _cairo_gstate_paint (cairo-gstate.c:822)
    ==1922==    by 0x402B2D1: cairo_paint (cairo.c:1879)
    ==1922==    by 0x804A4F7: draw (radial-gradient.c:73)
    ==1922==    by 0x804AFA4: cairo_test_expecting (cairo-test.c:326)
    ==1922==    by 0x804A57C: main (radial-gradient.c:109)
    ==1922== Injected fault at:
    ==1922==    at 0x4020EA5: malloc (vg_replace_malloc.c:207)
    ==1922==    by 0x404475C: _cairo_pattern_init_copy (cairo-pattern.c:136)
    ==1922==    by 0x403F779: _cairo_surface_copy_pattern_for_destination (cairo-surface.c:2153)
    ==1922==    by 0x403FCC1: _cairo_surface_paint (cairo-surface.c:1328)
    ==1922==    by 0x405CB5E: _test_meta_surface_paint (test-meta-surface.c:195)
    ==1922==    by 0x403FCE0: _cairo_surface_paint (cairo-surface.c:1331)
    ==1922==    by 0x4032A60: _cairo_gstate_paint (cairo-gstate.c:822)
    ==1922==    by 0x402B2D1: cairo_paint (cairo.c:1879)
    ==1922==    by 0x804A4F7: draw (radial-gradient.c:73)
    ==1922==    by 0x804AFA4: cairo_test_expecting (cairo-test.c:326)
    ==1922==    by 0x804A57C: main (radial-gradient.c:109)

 src/cairo-glitz-surface.c  |   12 +++++++--
 src/cairo-gstate.c         |   55 ++++++++++++++++++++++++++++++-------------
 src/cairo-meta-surface.c   |    6 ++++-
 src/cairo-pattern.c        |   30 +++++++++++++++++------
 src/cairo-quartz-surface.c |    6 ++++-
 src/cairo-surface.c        |   47 ++++++++++++++++++++++++++-----------
 src/cairoint.h             |    2 +-
 7 files changed, 113 insertions(+), 45 deletions(-)

commit dbdaf0690e1121d0f810dfb035e7a9f0dae17248
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 9 09:22:31 2007 +0100

    [cairo-scaled-font] Check _cairo_scaled_glyph_loop() status
    
    In _cairo_scaled_font_glyph_path() we forgot to check the status return
    of _cairo_scaled_glyph_loop() - propagate any failures.

 src/cairo-scaled-font.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit b744c2705184c24845423d661258b39bbb17749b
Author: James Cloos <cloos@jhcloos.com>
Date:   Wed May 9 02:50:59 2007 -0400

    [cairo-directfb-surface] Fix typo from commit a8c8e17d
    Fix typo in name of _cairo_directfb_surface_is_similar().

 src/cairo-directfb-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit cbc9218cd3f664682bcb5095c602adf9615535d0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 9 09:03:04 2007 +0100

    [cairo-xcb-surface] Fix compilation
    
    As spotted by James Cloos <cloos@jbcloos.com>, I broke the compilation...
    This is a minimal fix with no claims of completeness.

 src/cairo-xcb-surface.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 069514a10ff2ca9ac86cc3dc1703aa19caa538e2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 8 18:19:56 2007 +0100

    [test/in-fill-empty-trapezoid] Cleanup after test failure.
    
    Ensure that the failure path also calls cairo_test_fini().

 test/in-fill-empty-trapezoid.c |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit 43645eb486da1af91b3264af6c84ac18a1eddcaa
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 8 20:25:21 2007 +0100

    [test/fallback-resolution] Cleanup after test failure
    
    Be valgrind clean even for test failures.

 test/fallback-resolution.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 21c6643b09c771454f913b444b6b040aaaacd3a8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 8 21:28:48 2007 +0100

    [cairo-surface] Check for errors when generating the scaled font.
    
    cairo_surface_show_glyphs() attempts to generate a device specific
    scaled font and so needs to check for failure before attempting to use
    it.

 src/cairo-surface.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit ede76a97ea5b68c3bd042dc6a93ecb1aa7c9761c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 8 17:26:22 2007 +0100

    [cairo-font-options] Check for the nil-object.
    
    The design is for the user to create a cairo_font_options_t object with
    cairo_font_options_create() and then is free to use it with any Cairo
    operation. This requires us to check when we may be about to overwrite
    the read-only nil object.

 src/cairo-font-face.c    |    5 +++++
 src/cairo-font-options.c |    7 ++++++-
 src/cairo-gstate.c       |    4 +---
 src/cairo-scaled-font.c  |   10 ++++++++++
 src/cairo-surface.c      |    3 +++
 src/cairo.c              |   12 ++++++++----
 src/cairoint.h           |    3 ++-
 7 files changed, 35 insertions(+), 9 deletions(-)

commit c441938569ed78123a57662a70ef5a74dcf73851
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 8 21:40:26 2007 +0100

    [cairo-pattern] Cleanly handle an invalid pattern in cairo_pattern_transform()
    
    Simply return without writing to potentially read-only members of an
    invalid pattern rather than assert. This is cleaner than tracking down
    all the error paths that may call into cairo_pattern_transform()...

 src/cairo-pattern.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 409f9734297be250de5e462e2d52e653bd893125
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 8 14:18:42 2007 -0400

    [test] If a test target fails, end the test
    otherwise cairo is left in a dirty state and further tests are
    unreliable.

 test/cairo-test.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit aad66d05fd0f310564e80c9ff59526028871751c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 8 16:40:24 2007 +0100

    [test/nil-surface] Destroy the auxiliary context on failure paths.
    
    Just to be tidy, and aim to be valgrind-clean.

 test/nil-surface.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit e3acacc096d7db947e7c8f2167a6d97f04c403b1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 8 16:35:14 2007 +0100

    [cairo-boilerplate-ps] Destroy the target on creation failure
    
    Remember to destroy the ptc->target as well as the ordinary surface, if
    we need to.

 boilerplate/cairo-boilerplate-ps.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit efd212bfa25cb44b9499b89f93aa7167a9544ccb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 8 16:23:07 2007 +0100

    [cairo-boilerplate] Protect against the nil cairo_scaled_font_t
    
    Beware the NULL pointer deference when trying to adjust the max glyph
    cache size...

 boilerplate/cairo-boilerplate.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit b85920684f8feaba8d2d5b0262c60b4960c223b8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 8 14:01:00 2007 +0100

    [cairo-test] Destroy the check image on failure
    
    If drawing the checker pattern should fail, we need to free the
    resources allocated locally.

 test/cairo-test.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 0bf3ffacda5dbfc4fd8a5a0d5fd37d9630f5bcdb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 8 13:55:04 2007 +0100

    [test-fallback-surface] Destroy the backing image on malloc failure.
    
    Ensure we free all local resource should we encounter an allocation
    failure during _cairo_test_fallback_surface_create().

 src/test-fallback-surface.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit eac18d44c7559fe393abf6706b52e5a8edbfd5e9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 8 12:46:42 2007 +0100

    [cairo-paginated-surface] Propagate malloc failure
    
    Check for an allocation failure during _cairo_analysis_surface_create()
    and propagate to caller - where we discover that the callers themselves
    missed the status checks...

 src/cairo-paginated-surface.c |   10 ++++++++--
 1 files changed, 8 insertions(+), 2 deletions(-)

commit 0d8a1540ec53ecc309a10e77ea7788fcd16d8345
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Tue May 8 09:11:57 2007 +0200

    SVG: Don't clip SVG element, as clipping region is implicit.
    
    That makes editing of produced SVG easier.

 src/cairo-svg-surface-private.h |    1 +
 src/cairo-svg-surface.c         |   53 +++++++++++++++++++--------------------
 2 files changed, 27 insertions(+), 27 deletions(-)

commit 936c965777c867bd4de7fd2278335837cc24eb22
Author: Jinghua Luo <sunmoon1997@gmail.com>
Date:   Tue May 8 13:24:40 2007 +0800

    glitz: kill some compiler warnings.

 src/cairo-glitz-surface.c |   11 +++++++++--
 1 files changed, 9 insertions(+), 2 deletions(-)

commit 413705872e321288bff1368c62eacad11805c2fc
Author: Jinghua Luo <sunmoon1997@gmail.com>
Date:   Tue May 8 13:19:35 2007 +0800

    glitz: fix a typo preventing build glitz backend from succeeding.

 src/cairo-glitz-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d81907734e18fb9302e78eccb1e25a838223b726
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 5 12:33:29 2007 +0100

    [cairo-color] Only compare the shorts for equality.
    
    By only checking the premultiplied shorts inside the cairo_color_t we
    only have to compare at most 8 bytes instead of the full 24 bytes.

 src/cairo-color.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit 966a39396eb75d9d4ecc9997bb21d62fba176f78
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 4 15:25:18 2007 +0100

    [NEWS] Surface cache for solid patterns
    
    Add an entry describing the surface cache to NEWS.

 NEWS |   21 +++++++++++++++++++++
 1 files changed, 21 insertions(+), 0 deletions(-)

commit 056d149212ce4999f8984db62b880ff2eb998ab3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 2 12:54:49 2007 +0100

    [cairo-pattern] Don't cache fallback surfaces
    
    _cairo_surface_create_similar_solid() may return an image surface,
    should the backend not support the required content or should it
    encounter an error whilst creating the surface. In those circumstances
    we choose not to cache the fallback surface.

 src/cairo-pattern.c |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

commit a8c8e17d845c7060286dac58b553fb717b270788
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 2 10:00:22 2007 +0100

    [cairo-pattern] Cache surface for solid patterns
    
    Original work by Jorn Baayen <jorn@openedhand.com>,
    2715f2098127d04d2f9e304580a26cd0842c0e64
    
    We use a small cache of size 16 for surfaces created for solid patterns.
    This mainly helps with the X backends where we don't have to create a
    pattern for every operation, so we save a lot on X traffic.  Xft uses a
    similar cache, so cairo's text rendering traffic with the xlib backend
    now completely matches that of Xft.
    
    The cache uses an static index variable, which itself acts like a cache of
    size 1, remembering the most recently used solid pattern.  So repeated
    lookups for the same pattern hit immediately.  If that fails, the cache is
    searched linearly, and if that fails too, a new surface is created and a
    random member of the cache is evicted.
    
    A cached surface can only be reused if it is similar to the destination.
    In order to check for similar surfaces a new test is introduced for the
    backends to determine that the cached surface is as would be returned by
    a _create_similar() call for the destination and content.
    
    As surfaces are in general complex encapsulation of graphics state we
    only return unshared cached surfaces and reset them (to clear any error
    conditions and graphics state). In practice this makes little difference
    to the efficacy of the cache during various benchmarks. However, in order
    to transparently share solid surfaces it would be possible to implement a
    COW scheme.
    
    Cache hit rates:    (hit same index + hit in cache) / lookups
    cairo-perf:         (42346 + 28480) / 159600 = 44.38%
    gtk-theme-torturer: (3023  + 3502)  / 6528   = 99.95%
    gtk-perf:           (8270  + 3190)  / 21504  = 53.29%
    
    This translates into a reduction of about 25% of the XRENDER traffic during
    cairo-perf.

 src/cairo-directfb-surface.c   |   15 ++++-
 src/cairo-glitz-surface.c      |   40 ++++++++++++-
 src/cairo-image-surface.c      |   29 ++++++++-
 src/cairo-mutex-list-private.h |    3 +-
 src/cairo-pattern.c            |  135 +++++++++++++++++++++++++++++++++++-----
 src/cairo-pdf-surface.c        |    3 +
 src/cairo-surface.c            |   57 +++++++++++++++++
 src/cairo-win32-surface.c      |   29 ++++++++-
 src/cairo-xcb-surface.c        |   39 +++++++++++-
 src/cairo-xlib-surface.c       |   45 +++++++++++++-
 src/cairoint.h                 |   16 +++++
 11 files changed, 388 insertions(+), 23 deletions(-)

commit 52472b740e821dee444ede1fff041a99d344daab
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 1 18:34:47 2007 +0100

    [cairo-xlib-surface] Defer application of clip mask until required.
    
    By deferring the issuing of the X requests to set the clip mask we can
    theoretically avoid some redundant requests, but primarily we remove
    another path where X requests are emitted.

 src/cairo-xlib-surface-private.h |    7 ++++
 src/cairo-xlib-surface.c         |   72 ++++++++++++++++++--------------------
 2 files changed, 41 insertions(+), 38 deletions(-)

commit a81823cdf9a147d02bb2365558ba667ab52fb3c9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 20 17:32:25 2007 +0100

    [cairo-xlib-display] Allocate the close_display hooks from a freelist.
    
    Similar to job allocation, but only useful for toolkits like GTK+ which
    recreate a new xlib surface for each expose.

 src/cairo-xlib-display.c |  105 ++++++++++++++++++++++++---------------------
 src/cairo-xlib-private.h |    1 +
 2 files changed, 57 insertions(+), 49 deletions(-)

commit c29ffc64ca341623d21a7861f1b5f131b420d20f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 20 16:33:56 2007 +0100

    [cairo-xlib-display] Cache the screen_info for the lifetime of the display.
    
    Hold an extra reference to the screen_info and explicitly destroy the
    list of screens on CloseDisplay.

 src/cairo-xlib-display.c |   19 +++++++++++++++++++
 src/cairo-xlib-screen.c  |    3 +--
 2 files changed, 20 insertions(+), 2 deletions(-)

commit 1d6f7b7a0282d1b24bec82d9ad113b0d0a0cde98
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 19 13:01:52 2007 +0100

    [cairo-xlib] Cache freed GCs
    
    Maintain a cache of freed GCs, one for each used depth.

 src/cairo-xlib-display.c |    6 +++-
 src/cairo-xlib-private.h |   10 ++++++
 src/cairo-xlib-screen.c  |   70 ++++++++++++++++++++++++++++++++++++++++++++++
 src/cairo-xlib-surface.c |   22 ++++++++------
 4 files changed, 98 insertions(+), 10 deletions(-)

commit 88c6d25d4e53ddad6f3d465b2f5249c76a421b82
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 17 12:03:07 2007 +0100

    [cairo-xlib-surface] Defer xlib resource cleanup.
    
    Due to caching, destruction of X11 resources may occur outside of a
    usable X11 context. To avoid this, we defer the destruction onto a work
    queue which will be run the next time we try to use the X11 connection
    on behalf of the user (at which point we must have a usable X11 context!)
    or we are closing the Display.

 src/cairo-xlib-surface.c |  180 +++++++++++++++++++++++++++++++++++++++------
 1 files changed, 156 insertions(+), 24 deletions(-)

commit 8ad30ccdb0a00701b15003edb2fe0cd4a8a9dfb7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 19 12:15:04 2007 +0100

    [cairo-xlib] Introduce a workqueue for deferred destruction of X resources.
    
    Due to the nature of the reference counting, an X resource may be
    destroyed later than anticipated and possibly from a different thread
    than the original context. This becomes an issue for applications that
    carefully manage their single X connection from a single thread and do
    not use locking and are then suprised when cairo triggers X traffic when
    performing work for a different part of the application in another thread.

 src/cairo-xlib-display.c |  171 +++++++++++++++++++++++++++++++++++++++++++++-
 src/cairo-xlib-private.h |   18 +++++
 src/cairo-xlib-screen.c  |    1 -
 src/cairo-xlib-surface.c |   21 +++++-
 4 files changed, 205 insertions(+), 6 deletions(-)

commit dd8681b76b088bab45c99510258920f027490f70
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 16 15:04:08 2007 +0100

    [cairo-xlib] Split per-display attributes from per-screen.
    
    Previously, we stored the per-display attributes inside a special
    screen=NULL _cairo_xlib_screen_info_t. Now we keep track of known X
    displays and store the screen information beneath the display structure
    alongside the per-display hooks.

 src/Makefile.am                |    8 +-
 src/cairo-debug.c              |    4 -
 src/cairo-mutex-list-private.h |    2 +-
 src/cairo-xlib-display.c       |  258 +++++++++++++++++++++++++++++++++
 src/cairo-xlib-private.h       |   37 ++++-
 src/cairo-xlib-screen.c        |  309 ++++++++-------------------------------
 src/cairo-xlib-surface.c       |    2 +-
 src/cairoint.h                 |    6 -
 8 files changed, 359 insertions(+), 267 deletions(-)

commit 9919f1ed9ccbec637252e06dd1de5f4665c873b4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 3 19:54:31 2007 -0400

    [TODO] Add link to cairo_copy_clip() proposal

 TODO |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit e5d9d51e55eb45704de6d98ac9265743af56711f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 3 19:04:21 2007 -0400

    [cairo-mutex] Fix typo.

 src/cairo-mutex.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 5ec27eef9566faa22fb1cbaf1a103a57ba5296c8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 3 13:46:25 2007 +0100

    [pixman] Free the old rects if we fail to allocate new.
    
    During the pixman_op, a complicated dance is performed to handle
    enlarging the rectangle array to accommodate the op. One consequence
    of this is to, under certain circumstances, replace the current
    rectangle array with emptyData and track the old array with oldData.
    Hence if we fail to realloc the enlarged array we need to free oldData.

 pixman/src/pixregion.c |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

commit ef3070821713c33fab78abb191e27a62e165f6c6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed May 2 16:22:13 2007 -0400

    [boilerplate] Fix typo

 boilerplate/xmalloc.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit c412e42c72c0ff53c678119638357ed95897ed78
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 2 21:17:39 2007 +0100

    [cairo-xlib-surface] Check that the acquire surfaces are xlib surfaces
    
    _cairo_pattern_acquire_surfaces() may substitute an image surface for
    either the source or the mask should the backend not support creation
    of similar scratch surfaces or an error occurs during creation. For
    composition we require xlib surfaces and so we must trigger the
    fallback path if this happens.

 src/cairo-xlib-surface.c |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit f3153091b742daffa853f2c31b76aa9689c5165a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 1 20:10:39 2007 -0400

    [cairo-mutex] Document the API for adding cairo_mutex_t implementations

 src/cairo-mutex-type-private.h |   83 ++++++++++++++++++++++++++++++++++++++++
 1 files changed, 83 insertions(+), 0 deletions(-)

commit 5bfd6553fd028f1429d72c60d04788de4a3c0d58
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 1 19:48:33 2007 -0400

    [cairo-mutex] Define a NOOP CAIRO_MUTEX_FINALIZE() for pthread
    as now the mutex layer will define a generic CAIRO_MUTEX_FINALIZE()
    whenever the implementation defines CAIRO_MUTEX_FINI().  In the
    case of pthread however we don't need finalization as we don't
    have any place to call it, and pthread_mutex_destroy() doesn't
    do much anyway.

 src/cairo-mutex-type-private.h |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit c4e0a059feb9c2e0c32966dcb168861e75a244b7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 1 19:46:51 2007 -0400

    [cairo-mutex] Remove NOOP definition of CAIRO_MUTEX_INITIALIZE
    as now the mutex layer will use a NOOP CAIRO_MUTEX_INITIALIZE
    by default if the implementation does not define CAIRO_MUTEX_INIT.

 src/cairo-mutex-type-private.h |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 06cc74d974a99526829df558606174b41b0ee6e1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 1 19:45:29 2007 -0400

    [cairo-mutex] Rewrite defaults for CAIRO_MUTEX macros not defined by the implementation
    to make them better match the design I have in mind, that I will
    document in a minute.  They are a lot more readable and understandable
    now.

 src/cairo-mutex-private.h |   93 ++++++++++++++++++++++++++++++++------------
 src/cairo-mutex.c         |   18 +++++++-
 2 files changed, 82 insertions(+), 29 deletions(-)

commit e87a25dc7c73a44b0cdfc4ef368736e7f77fb522
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 1 19:24:26 2007 -0400

    [cairo-mutex] Fix usage of CAIRO_MUTEX_DECLARE()
    
    Previously cairo-mutex.c was abusing cairo-mutex-private.h by
    defining CAIRO_MUTEX_DECLARE before including it, and
    cairo-mutex-private.h was simply not overriding any available
    CAIRO_MUTEX_DECLARE.  This is not the way it should be.
    cairo-mutex.c should instead define CAIRO_MUTEX_DECLARE and
    include cairo-mutex-list-private.h for itself.

 src/cairo-mutex-private.h |    4 +---
 src/cairo-mutex.c         |    9 +++++----
 2 files changed, 6 insertions(+), 7 deletions(-)

commit 1a33e44aa5d73f568c4164c41f9595964e9f1bbb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 1 18:13:19 2007 -0400

    [RELEASING] Update GNOME URL to point to 2.19 planning page

 RELEASING |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 4764e6222bf4d5223fc2fbb139bb31a24819b2b5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 1 00:50:03 2007 -0400

    [cairo-mutex] Improve error message if no thread implementation found
    
    to put back Carl's "acknowledge and accept" clause (!) before suggesting
    use of CAIRO_NO_MUTEX.

 src/cairo-mutex-type-private.h |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit b5f015f21f3c800919a85f03a081a3ec1648a794
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 1 00:48:33 2007 -0400

    [cairo-mutex] Make sure mutex implementation declares enough macros
    
    We have defaults for the rest.

 src/cairo-mutex-private.h |   11 +++++++++++
 1 files changed, 11 insertions(+), 0 deletions(-)

commit b0a0a1779dc5cc16423473b6d80ee5099793a47f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 1 00:47:02 2007 -0400

    [cairo-mutex] Make CAIRO_MUTEX_INIT/FINI take mutex object, not pointer to it
    
    This is more consistent with CAIRO_MUTEX_LOCK/UNLOCK.

 src/cairo-ft-font.c            |    4 ++--
 src/cairo-mutex-private.h      |    2 +-
 src/cairo-mutex-type-private.h |   19 +++++++------------
 src/cairo-mutex.c              |    4 ++--
 src/cairo-scaled-font.c        |    4 ++--
 5 files changed, 14 insertions(+), 19 deletions(-)

commit f9154f7eda4272ff99cc8a894082cc5aa1b008ef
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 1 00:44:42 2007 -0400

    [cairo-mutex] Make sure CAIRO_MUTEX_FINI() evaluates its argument once

 src/cairo-mutex-private.h      |    2 +-
 src/cairo-mutex-type-private.h |    3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)

commit a8d47d0c001a36ddd6c9f09247e6eada408edb24
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 1 00:43:15 2007 -0400

    [cairo-mutex] Rename macro arguments from "name" to "mutex"

 src/cairo-mutex-private.h      |    6 +++---
 src/cairo-mutex-type-private.h |   20 ++++++++++----------
 src/cairo-mutex.c              |    4 ++--
 3 files changed, 15 insertions(+), 15 deletions(-)

commit f57a536fceec73435bb13c44275717792b9b3a8c
Author: Carl Worth <cworth@cworth.org>
Date:   Tue May 1 13:45:58 2007 -0700

    Increment version to 1.4.7 after the 1.4.6 release

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ddca8fec07ff95caeda6e4ce9efc3239b146bd2d
Author: Carl Worth <cworth@cworth.org>
Date:   Tue May 1 13:37:16 2007 -0700

    perf: Add $(EXTRA_PROGRAMS) to CLEANFILES
    
    Otherwise these programs stick around and break distclean,
    distcheck, and hence release-publish targets.

 perf/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 0390ed4f189365d595b40a45b0cf9eef5aa0c6ba
Author: Carl Worth <cworth@cworth.org>
Date:   Tue May 1 13:24:43 2007 -0700

    Increment version to 1.4.6 (and library versioning to 13:3:11)

 configure.in |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit c9e0bb5c79abfc50ae6a24f603c5493c3ac68e40
Author: Carl Worth <cworth@cworth.org>
Date:   Tue May 1 13:20:56 2007 -0700

    NEWS: Add notes for cairo 1.4.6

 NEWS |  116 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 116 insertions(+), 0 deletions(-)

commit 7f7f4d4f35cd640733b990fcff924a090b43d360
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 1 12:37:38 2007 +0100

    [cairo-xlib-surface.c] Free the Pixmap on surface construction failure.
    
    If we create the Pixmap whilst constructing a similar xlib surface, then
    it our responsibility to free the Pixmap should we fail to allocate the
    surface.

 src/cairo-xlib-surface.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 3e3bd4df7e810a9acd14cd6f3717633f71691b9e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 1 11:28:45 2007 +0100

    Minor typo in cairo_surface_destroy() documentation.
    
    The type of @surface is #cairo_surface_t, not #cairo_t.

 src/cairo-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit f7cdbd385a02d023e35357cd27dcc165ada667f2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 1 00:41:07 2007 -0400

    [cairo-mutex-private.h] Move implementation-specific parts to cairo-mutex-type-private.h
    
    This fixes the problem reported by Dave Yeo that boilerplate wasn't building:
    
    In file included from ../src/cairo-scaled-font-private.h:44,
    	     from cairo-boilerplate.c:65:
    ../src/cairo-mutex-private.h:183: error: syntax error before "extern"
    ../src/cairo-mutex-private.h:184: error: syntax error before "void"
    ../src/cairo-mutex-private.h:185: error: syntax error before "void"
    make[3]: *** [cairo-boilerplate.lo] Error 1

 src/Makefile.am                 |    1 +
 src/cairo-mutex-private.h       |   81 +-----------------------
 src/cairo-mutex-type-private.h  |  131 +++++++++++++++++++++++++++++++++++++++
 src/cairo-scaled-font-private.h |    2 +-
 4 files changed, 135 insertions(+), 80 deletions(-)

commit 6de0f2d15775a451ead2cc3e80530b7dc6b321a3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Apr 30 22:38:00 2007 -0400

    [cairo-mutex] Fix CAIRO_MUTEX_FINALIZE definition to take parantheses
    This was breaking build on some systems as reported by Adrian Johnson
    on the list.

 src/cairo-mutex-private.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3f297a0fccb01f4e10a093ddc44a25a937364447
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Apr 30 22:00:31 2007 -0400

    [TODO] Add various items discussed recently

 TODO |   13 ++++++++++++-
 1 files changed, 12 insertions(+), 1 deletions(-)

commit 51440ad9027bd9ccf7d987c234995470f7699043
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Apr 30 21:57:29 2007 -0400

    [ROADMAP] Mark clipping trapezoids done

 ROADMAP |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 8ea48710dc933cd5dd52fb7d0c29eb8994a5d160
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Apr 30 19:20:56 2007 -0400

    [perf] Check availability before including nonstandard headers

 configure.in                 |    4 ++++
 perf/cairo-perf-diff-files.c |    2 ++
 perf/cairo-perf.c            |    6 +++++-
 3 files changed, 11 insertions(+), 1 deletions(-)

commit fbc8bf05033a652d26c1defa56d12183e4009870
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Apr 30 19:11:31 2007 -0400

    [perf] Don't build cairo-perf in "make all"

 perf/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 4be608399f0d196a792f84fe4ddfce9acd2ea943
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sun Apr 29 19:29:24 2007 +0930

    Fix cygwin compile error
    
    The WINVER macros need to be defined before including <windows.h>.
    As a result of some recent include file rearranging, <windows.h>
    was included indirectly before WINVER was defined.

 src/cairo-mutex-private.h |   12 ------------
 src/cairo-win32-surface.c |   11 ++++++-----
 2 files changed, 6 insertions(+), 17 deletions(-)

commit a5d1fc923fdef354ceed8478c93e8b7cb734158a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 30 16:05:36 2007 +0100

    Free all memory when cairo-perf exits.
    
    Similar to cairo-test, we free any global memory used by cairo for its
    caches through the debug interfaces. We do this so that valgrind does
    not unnecessary warn about memory leaks for the cached data and any true
    leak is then not lost in the noise.

 perf/cairo-perf.c |   19 +++++++++++++++++++
 1 files changed, 19 insertions(+), 0 deletions(-)

commit 7e6ab5461c2eb75c948bcb4725613ebe826c697a
Author: Carl Worth <cworth@cworth.org>
Date:   Sat Apr 28 07:46:56 2007 -0700

    Add missing prototypes for getline and strndup
    
    This is needed to prevent breaking the build for non-GNU systems.

 perf/cairo-perf-diff-files.c |   12 ++++++++++--
 1 files changed, 10 insertions(+), 2 deletions(-)

commit 422798db1d73c1a8ecc5877133b0325023f38e61
Author: Carl Worth <cworth@cworth.org>
Date:   Sat Apr 28 07:46:15 2007 -0700

    cairo-perf-diff-files: Add missing include of libgen.h for basename

 perf/cairo-perf-diff-files.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit d89d8e6b45b7c13b77aa7c2f1c480f58429b08af
Author: Carl Worth <cworth@cworth.org>
Date:   Sat Apr 28 07:45:26 2007 -0700

    pixman.h: Add missing definition of WARN_UNUSED_RESULT
    
    This was breaking the build on systems without support for the
    __warn_unused_result__ attribute.

 pixman/src/pixman.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit cb6fcdae92503964448144413e48ac388861d95f
Author: Carl Worth <cworth@cworth.org>
Date:   Sat Apr 28 07:38:56 2007 -0700

    Fix typo in Makefile preventing builds from succeeding
    
    The cairo-ps-surface-private.h file was not getting included in the
    distribution.

 src/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit a392cc85081dd1e0fa3342c313af94a1e0c289b1
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Apr 27 22:46:47 2007 -0700

    Clarify documentation of cairo_in_stroke and cairo_in_fill
    
    Like cairo_stroke_extents and cairo_fill_extents, these functions
    work without regard to the surface dimensions or the current clip
    region.

 src/cairo.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 8286b8741675ae163fc40187cd04e84395954c6e
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Apr 27 17:23:08 2007 -0700

    Clip trapezoids that are partially (or wholly) outside the clip region.
    
    It's quite simple to add a new _cairo_traps_limit call which installs
    a box into the cairo_traps_t structure. Then at the time of
    _cairo_traps_add we can discard any trapezoid that is wholly outside
    the box and also clip any trapezoid that is partially outside the box.
    
    We take advantage of this for both cairo_stroke and cairo_fill, (when
    cairo is computing the trapezoids in cairo-surface-fallback.c). Note
    that we explicitly do not do any clipping for cairo_stroke_extents,
    cairo_fill_extents, cairo_in_stroke, or cairo_in_fill which are
    defined to ignore clipping.
    
    As seen by the long-lines perf case, this fix successfully works
    around the bug in the X server where it creates overly large masks for
    partially-outside-the-destination-surface trapezoids:
    
     xlib-rgba   long-lines-uncropped-100  545.84 -> 5.83: 93.09x speedup
    
     xlib-rgb    long-lines-uncropped-100  554.74 -> 8.10: 69.04x speedup
    

 src/cairo-surface-fallback.c |   52 ++++++++++++++++++++++++++++++++
 src/cairo-traps.c            |   68 +++++++++++++++++++++++++++++++++++++++++-
 src/cairoint.h               |    7 ++++
 3 files changed, 126 insertions(+), 1 deletions(-)

commit 2dcfb944b044172640a3784246d6b3129b686b60
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Apr 27 16:41:17 2007 -0700

    Don't test PDF tests known to fail due to poppler limitations
    
    The following four tests are disabled:
    
    	gradient-alpha, linear-gradient, text-pattern, trap-clip
    
    We don't use XFAIL as that would disable all backends, (but
    we can still usefully use these tests on backends other than
    PDF).

 boilerplate/cairo-boilerplate-pdf.c |   15 +++++++++++++++
 test/gradient-alpha.c               |    3 ++-
 test/linear-gradient.c              |    3 ++-
 test/text-pattern.c                 |    3 ++-
 test/trap-clip.c                    |    3 ++-
 5 files changed, 23 insertions(+), 4 deletions(-)

commit 179e3399101b5a0daa907dcfe1f9f11ae8fe691e
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Apr 27 16:01:56 2007 -0700

    PDF: Change CTM to identity
    
    Some PDF viewers forget the CTM when drawing gradient patterns
    with SMasks. This patch works around these bugs by using the default
    identity matrix for the CTM. All paths are transformed from
    cairo to pdf coordinates before writing to the pdf file.

 src/cairo-pdf-surface-private.h |    1 +
 src/cairo-pdf-surface.c         |  135 +++++++++++++++++++--------------------
 2 files changed, 67 insertions(+), 69 deletions(-)

commit 1816d7c590ae4d423f9314a8a7794e2cae854da3
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Apr 27 09:49:45 2007 -0700

    Add support for transparent gradients
    
    This is based on the gradient patch written by Mikls Erdlyi at
    http://lists.freedesktop.org/archives/cairo/2006-August/007648.html
    
    Currently only EXTEND_NONE and EXTEND_PAD are supported. Other extend
    types will go through the image fallback path.

 src/cairo-pdf-surface-private.h |   13 +
 src/cairo-pdf-surface.c         |  950 ++++++++++++++++++++++++++++++---------
 2 files changed, 752 insertions(+), 211 deletions(-)

commit 050dad71734739f1eaf8976ca5bb88e47c76409c
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 26 11:30:27 2007 -0700

    cairo-perf-diff-files: Always print old and new configuration names
    
    Previously, if the change in the first test case was small enough
    to be considered insignificant, then the header lines showing the
    names of the old and new configurations would be omitted. This
    commit fixes that bug.

 perf/cairo-perf-diff-files.c |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

commit 6035d3b47e635f53b361dc7924e161a214e038b3
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 25 16:28:14 2007 -0700

    cairo-perf-diff: Repair command-line option parsing.
    
    Apparently --force and --html have been broken since the attempt
    to address --help in ef5611df6c6bc8d9c6877af3a59c66fa6fc5c13a .

 perf/cairo-perf-diff |   14 +++++++++-----
 1 files changed, 9 insertions(+), 5 deletions(-)

commit 0a1d2070e252921e097fec89537537675f8b7161
Author: Jeff Muizelaar <jeff@infidigm.net>
Date:   Wed Apr 25 16:01:29 2007 -0700

    Fix bugs in fbCompositeSrc_8888x8x8888mmx and fbCompositeSrc_x888x8x8888mmx
    
    And re-enable fbCompositeSrc_8888x8x8888mmx now that it should work.
    
    This gives another little boost to the paint-with-alpha perf test:
    
    image-rgba paint-with-alpha_image_rgba_over-512 11.76 -> 5.20: 1.85x speedup
    
    image-rgb  paint-with-alpha_image_rgba_over-512 11.76 -> 5.26: 1.84x speedup
    

 pixman/src/fbmmx.c  |   20 +++++++++-----------
 pixman/src/fbpict.c |    8 +++-----
 2 files changed, 12 insertions(+), 16 deletions(-)

commit 342de46eb4033e1cccfec8b905c0002cc880c9fb
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 25 10:25:57 2007 -0700

    Make the traditional speedup vs. slowdown report style available again
    
    Now, if you pass exactly two performance reports on the command line
    you'll get the traditional report style again, (so the tool remains
    backwards compatible). If you really want the new style with two
    reports you can get it by adding /dev/null as a third argument.

 perf/cairo-perf-diff-files.c |  112 ++++++++++++++++++++++++++++++++++++++---
 1 files changed, 103 insertions(+), 9 deletions(-)

commit db2a761ae7055a61d3705a76526cbd0b71fcc95d
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 25 08:53:46 2007 -0700

    Implement support for generating a report from more than two files
    
    This support is intended to compare the identical backends across multiple
    reports from several different configurations, (of one sort or another).
    The configuration names used in the report are taken from the filenames
    of the report files, (which will format most nicely if 8 characters or
    less).
    
    The traditional two-input report mode, (showing one line perdiff with
    all speedups before all slowdowns), is removed with this commit, but
    is intended to return again shortly.

 perf/cairo-perf-diff-files.c |  270 ++++++++++++++++++++++++------------------
 1 files changed, 157 insertions(+), 113 deletions(-)

commit 5030cfce5df507a0338e1070a5dab3851ed9df7c
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 19 16:32:57 2007 -0700

    cairo-perf-diff-files: Use pointers instead of indexing to iterate over reports
    
    We terminate the iteration by adding a final report with a NULL
    name. This will simplify future code that iterates over more than
    two reports simultaneously.

 perf/cairo-perf-diff-files.c |   31 ++++++++++++++++++-------------
 1 files changed, 18 insertions(+), 13 deletions(-)

commit 6121f4fccfe8d98fb09c096402da05d29d10b9e8
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 19 16:21:39 2007 -0700

    cairo-perf-diff-files: Simplify code to grow report->tests

 perf/cairo-perf-diff-files.c |   14 +++++---------
 1 files changed, 5 insertions(+), 9 deletions(-)

commit cc03f0499e7b133a2e5c14e55207259ea000b8c2
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 19 16:09:06 2007 -0700

    cairo-perf-diff-files: Sort and compute stats at the time of loading a report

 perf/cairo-perf-diff-files.c |  150 +++++++++++++++++++++---------------------
 1 files changed, 75 insertions(+), 75 deletions(-)

commit 228c83c9d2d1fdb6fa3af8a650640a47c8e21e36
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 19 14:35:51 2007 -0700

    cairo-perf-diff: Separate command-line options within the args structure
    
    A function like cairo_perf_report_diff wants the options, but really
    doesn't want/need to see the filenames for example,

 perf/cairo-perf-diff-files.c |   44 +++++++++++++++++++++++------------------
 1 files changed, 25 insertions(+), 19 deletions(-)

commit 876786b3f7316b99a51ba8225e34581be13a883d
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 19 13:54:50 2007 -0700

    Move implementation of getline and strndup
    
    These kept getting in my way as I looked for structure declarations
    at the top of the file.

 perf/cairo-perf-diff-files.c |  108 ++++++++++++++++++++---------------------
 1 files changed, 53 insertions(+), 55 deletions(-)

commit 90d532e08f25644c4e621b0b7e592f4531a39d88
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 19 13:52:03 2007 -0700

    Replace old and new reports with reports array
    
    Another baby step toward allowing comparison of more than two reports.

 perf/cairo-perf-diff-files.c |   11 +++++++----
 1 files changed, 7 insertions(+), 4 deletions(-)

commit c6c17633e40f549ede5761095a0652c08adeee08
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 19 13:31:37 2007 -0700

    Replace old_filename and new_filename with a filenames array
    
    More preparation for comparing more than two perf reports.

 perf/cairo-perf-diff-files.c |   30 +++++++++++++-----------------
 1 files changed, 13 insertions(+), 17 deletions(-)

commit 1849a7a8bededb281fbb07ec0939f8d1f4954771
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 19 12:55:04 2007 -0700

    cairo-perf-diff-files: Add new --min-change option, (replacing third positional argument)
    
    An upcoming change will allow cairo-perf-diff-files to generate
    a report based on more than two files. This prepares for that by
    moving the minimum-change support from the 3rd positional argument
    to a new --min-change option.

 perf/cairo-perf-diff-files.c |   39 +++++++++++++++++++++++----------------
 1 files changed, 23 insertions(+), 16 deletions(-)

commit ef5611df6c6bc8d9c6877af3a59c66fa6fc5c13a
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 19 11:26:47 2007 -0700

    cairo-perf-diff: Fix implementation of --help
    
    Previously only "--" would givethe usage, and not "--help"
    as intended. The new approach has been tested with ash, bash,
    and dash, (hopefully that's good enough).

 perf/cairo-perf-diff |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit a8d4fed67a32c6040c27615e063466d654b55a3a
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 19 10:02:22 2007 -0700

    cairo-perf-diff-files: Remove some overzealous option parsing.
    
    The code was complicated and confusing, and only existed to implement
    undocumented and unneeded command-line options.

 perf/cairo-perf-diff-files.c |   13 ++++++-------
 1 files changed, 6 insertions(+), 7 deletions(-)

commit fe9dd719561048af1f2c3c8c43e46f7d97575053
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 18 17:01:36 2007 -0700

    Correct misattribution of Mathias' work to Chris

 NEWS |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 29670d37665d184d78d568070cb409acf98ee797
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 23 10:24:03 2007 -0700

    Add a content value to solid patterns
    
    This allows for the surface acquired from the pattern to have the
    same content. In particular, in a case such as cairo_paint_with_alpha
    we can now acquire an A8 mask surface instead of an ARGB32 mask
    surface which can be rendered much more efficiently. This results
    in a 4x speedup when using the OVER operator with the recently
    added paint-with-alpha test:
    
    Speedups
    ========
    image-rgb  paint-with-alpha_image_rgb_over-256 2.25 -> 0.60: 4.45x speedup
    
    
    It does slowdown the same test when using the SOURCE operator, but
    I don't think we care. Performing SOURCE with a mask is already a very
    slow operation, (hitting compositeGeneral), so the slowdown here is
    likely from having to convert from A8 back to ARGB32 before the
    generalized compositing. So if someone cares about this slowdown,
    (though SOURCE with cairo_paint_with_alpha doesn't seem extremely
    useful), they will probably be motivated enough to contribute a
    customized compositing function to replace compositeGeneral in which
    case this slowdown should go away:
    
    image-rgba paint-with-alpha_image_rgb_source-256 3.84 -> 8.86%: 1.94x slowdown
    

 src/cairo-clip.c             |    3 ++-
 src/cairo-glitz-surface.c    |    5 ++++-
 src/cairo-gstate.c           |    3 ++-
 src/cairo-pattern.c          |   41 ++++++++++++++++++++++++++---------------
 src/cairo-surface-fallback.c |   12 ++++++++----
 src/cairo-surface.c          |    2 +-
 src/cairo-xcb-surface.c      |    3 ++-
 src/cairo-xlib-surface.c     |    3 ++-
 src/cairo.c                  |    2 +-
 src/cairoint.h               |    9 ++++++---
 10 files changed, 54 insertions(+), 29 deletions(-)

commit fea5336e2db201be69256ef1bafd418fee98a21e
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 25 10:36:12 2007 -0700

    Allow fbCompositeSrc_x888x8x8888mmx when destination has alpha
    
    Previously the check for this optimized function would only allow
    the function to be called if the source and destination had
    identical formats. But the function doesn't read the destination
    alpha (if any) so can be used when it exists as well.
    
    (Thanks to Jeff Muizelaar for pointing out this problem.)

 pixman/src/fbpict.c |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

commit 72b812be8c69108c46334841823a2e9103b69516
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 23 09:35:35 2007 -0700

    perf: Add new paint-with-alpha test
    
    MacSlow noticed that cairo_paint_with_alpha is much slower than
    it should be, (and jrmuizel has a nice plan for fixing the
    performance bug).

 perf/Makefile.am        |    1 +
 perf/cairo-perf.c       |    1 +
 perf/cairo-perf.h       |    1 +
 perf/paint-with-alpha.c |   45 +++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 48 insertions(+), 0 deletions(-)

commit 302f1146da5b179e5016e2d523e891437c1a256b
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 23 09:26:32 2007 -0700

    Fix two bugs in documentation code sample of cairo_arc
    
    The sample code for drawing an ellipse had width and height
    reversed in the call to cairo_scale, and also had both
    incorrectly inverted.

 src/cairo.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e37c9edac02ccd9fbcbc4622a2f421f4be0d597e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 24 17:33:37 2007 -0400

    [ROADMAP] Add cairo_xlib_surface_get_xrender_format()

 ROADMAP |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit ac0ef0302e68ba17ec5a59c689579f1854c7386c
Merge: d3cf214 260dcb3
Author: Peter Weilbacher <mozilla@weilbacher.org>
Date:   Mon Apr 23 23:18:05 2007 +0200

    Merge branch 'master' of git+ssh://pmw@git.freedesktop.org/git/cairo

commit 260dcb316e14945e7600406954e4876e8827a777
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 23 13:54:37 2007 +0100

    Add a _cairo_error() to png_simple_error_callback()
    
    With the introduction of the error callbacks for PNG, we have the
    opportunity for the user to set a breakpoint (via _cairo_error) at the
    point the error is first rasied.

 src/cairo-png.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 0fce7e85a1c853216866ddf6a40725e7ce57fe93
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 23 13:00:40 2007 +0100

    Do not print out libpng error messages to stderr.
    
    We wish to avoid writing to file descriptors (and streams) that are
    outside cairo's control. In this case, the messages are superfluous as
    the errors are propagated via the cairo_status_t returns.

 src/cairo-png.c |   31 +++++++++++++++++++++++++------
 1 files changed, 25 insertions(+), 6 deletions(-)

commit 59670dd5d3854af1f7cbdef984df7802c338330b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Apr 23 05:19:56 2007 -0400

    [ROADMAP] Add URL to David Turner's patchset

 ROADMAP |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit ce91a176489f4cb8f40c5ec29f23881d1e013a9f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 22 16:13:22 2007 -0400

    [cairo-mutex] Add a poor man's mutex implementation in case of CAIRO_NO_MUTEX
    just for fun.

 src/cairo-mutex-private.h |   13 ++++++++-----
 1 files changed, 8 insertions(+), 5 deletions(-)

commit 97b50e99bfa785d77b4900d3070f22a22827db22
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 22 16:05:25 2007 -0400

    [BeOS] Remove old-style mutex initialization cruft

 src/cairo-beos-surface.cpp |   34 ----------------------------------
 1 files changed, 0 insertions(+), 34 deletions(-)

commit 0fd13a3db00e7e11915b5a7bbe81bf8f43f1941f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 22 16:04:49 2007 -0400

    [BeOS] Add mutex implementation

 src/cairo-mutex-private.h |   17 ++++++-----------
 1 files changed, 6 insertions(+), 11 deletions(-)

commit fc83784525d3f2bb3e09d931cc9c83261c0b73ae
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 22 15:56:18 2007 -0400

    [cairo-mutex] Properly paranthesize macro arguments

 src/cairo-mutex-private.h |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

commit 406fc63b68203e86c9236d06448e2ffa2c259669
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 22 07:11:47 2007 -0400

    [util] Change make target from "tools" to "util"
    to match targets like "test", "perf", and "doc", that match
    their directory names.

 util/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 5bc1f3365d0002f2864bc30638df85c392a495f5
Author: Peter Weilbacher <pmw@avila.aip.de>
Date:   Sun Apr 22 07:11:00 2007 -0400

    [perf] Add OS/2 implementation for timer routines

 perf/Makefile.am      |    4 ++
 perf/cairo-perf-os2.c |   95 +++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 99 insertions(+), 0 deletions(-)

commit 3b46e105bd781d7a4081068a14668334a7c82986
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 08:21:01 2007 -0400

    [util] Import my malloc wrapper that prints simple statistics
    
    To build, do:
    
    	make malloc-stats.so
    
    inside util/, and to use, run:
    
    	LD_PRELOAD=malloc-stats.so some-program
    
    For binaries managed by libtool, eg, cairo-perf, do:
    
    	../libtool --mode=execute /bin/true ./cairo-perf
    	LD_PRELOAD="../util/malloc-stats.so" .libs/lt-cairo-perf
    
    The code also includes Jeff Muizelaar's libbacktracesymbols that
    is a much better implementation of backtrace_symbols() than what
    is provided by glibc.  That can be built by:
    
    	make backtrace-symbols.so

 util/.gitignore          |   17 +++
 util/Makefile.am         |   22 +++
 util/backtrace-symbols.c |  361 ++++++++++++++++++++++++++++++++++++++++++++++
 util/malloc-stats.c      |  301 ++++++++++++++++++++++++++++++++++++++
 4 files changed, 701 insertions(+), 0 deletions(-)

commit d3cf2144dbd42737d5e2c45908fbca082dd54022
Merge: 6c12961 abdcbf8
Author: Peter Weilbacher <mozilla@weilbacher.org>
Date:   Sat Apr 21 13:50:30 2007 +0200

    Merge branch 'master' of git+ssh://pmw@git.freedesktop.org/git/cairo

commit 6c129611408ddb5cf0a9a821b30bbb8148af08d9
Author: Peter Weilbacher <mozilla@weilbacher.org>
Date:   Sat Apr 21 13:49:04 2007 +0200

    Use deprecated png symbol only when compiling against old version
    
    png_set_gray_1_2_4_to_8 is deprecated in libpng >= 1.2.9, the identical
    substitute for it is png_set_expand_gray_1_2_4_to_8

 src/cairo-png.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 515491334cc32d8be856f25b7d2e36e63cb72246
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 07:48:10 2007 -0400

    Add util/ to distribution
    We already reference an script in util/ in PORTING_GUIDE, but was
    not shipping it!

 Makefile.am      |    2 +-
 configure.in     |    1 +
 util/Makefile.am |    4 ++++
 3 files changed, 6 insertions(+), 1 deletions(-)

commit abdcbf896af69677058490d1d08ba58672c429ec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 07:23:30 2007 -0400

    [boilerplate] Add missing headers.  Oops!
    I blame git for it...

 boilerplate/cairo-boilerplate-pdf.h  |   33 +++++++++++++++++++++++++++++++++
 boilerplate/cairo-boilerplate-xlib.h |   33 +++++++++++++++++++++++++++++++++
 2 files changed, 66 insertions(+), 0 deletions(-)

commit 781f2533a32d84ca43a1bdf646bb69b7adab7a77
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 07:21:38 2007 -0400

    [.gitignore] Add cairo-*.*.*

 .gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit febcd689e7a4b277bbebffd8ebdc0970a04f68eb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 07:19:47 2007 -0400

    Update .gitignore to ignore .perf

 .gitignore |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit de425ada871c71277a53687dcd8a93a607d4faab
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 03:46:18 2007 -0400

    [doc/public/Headers.mk] Update.

 doc/public/Headers.mk |   13 ++++++++-----
 1 files changed, 8 insertions(+), 5 deletions(-)

commit 519b722747d606170741ccc520d6ec7332b2481f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 03:45:51 2007 -0400

    [RELEASING] Remove *-test.h from instructions
    as they are all removed now.

 RELEASING |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0108f9c69f2f5391ff6b1066ae6b58fe3f71255a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 03:44:53 2007 -0400

    [check-def.sh] Do not allow _cairo_.*_test_ symbols anymore
    as all are removed now.

 src/check-def.sh |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 79098c037043f45df0a18265417e96d6214d68e1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 03:43:04 2007 -0400

    [scaled-font] Get rid of _cairo_scaled_font_test_set_max_glyphs_cached_per_font
    in favor of cairo_boilerplate_scaled_font_set_max_glyphs_cached.

 boilerplate/Makefile.am                     |    1 +
 boilerplate/cairo-boilerplate-scaled-font.h |   34 ++++++++++++++++++
 boilerplate/cairo-boilerplate.c             |   11 ++++++
 src/Makefile.am                             |    1 -
 src/cairo-scaled-font-private.h             |    1 +
 src/cairo-scaled-font-test.h                |   49 ---------------------------
 src/cairo-scaled-font.c                     |   14 ++------
 test/glyph-cache-pressure.c                 |    6 ++--
 8 files changed, 53 insertions(+), 64 deletions(-)

commit 44563161de82a5ee7bbf8f100213ea1a3af6d5db
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 03:38:24 2007 -0400

    Move a couple typedefs to cairo-types-private.h

 src/cairo-types-private.h |    2 ++
 src/cairoint.h            |    2 --
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 737d20a5702a18a1480c3b45f876e886b82b065c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 03:35:07 2007 -0400

    Move cairo_hash_entry_t to cairo-types-private.h

 src/cairo-hash-private.h        |   38 --------------------------------------
 src/cairo-scaled-font-private.h |    2 ++
 src/cairo-types-private.h       |   38 ++++++++++++++++++++++++++++++++++++++
 3 files changed, 40 insertions(+), 38 deletions(-)

commit 51ce92c3db093c8d26c8002ddbc105b11e7607bf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 03:24:31 2007 -0400

    [scaled-font] Move cairo_scaled_font_t to cairo-scaled-font-private.h

 src/Makefile.am                 |    1 +
 src/cairo-scaled-font-private.h |  109 +++++++++++++++++++++++++++++++++++++++
 src/cairo-scaled-font.c         |    1 +
 src/cairoint.h                  |   66 +-----------------------
 4 files changed, 112 insertions(+), 65 deletions(-)

commit 91f1056caf46d71c99eb044afbc943b92fb5550c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 03:18:30 2007 -0400

    Move cairo_cache_t to cairo-types-private.h

 src/cairo-cache-private.h |    2 +-
 src/cairo-cache.c         |   11 -----------
 src/cairo-hash-private.h  |    4 ++--
 src/cairo-types-private.h |   14 ++++++++++++++
 4 files changed, 17 insertions(+), 14 deletions(-)

commit d2bb5f30079badf1029fa71faab9d6781092a271
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 03:08:26 2007 -0400

    [svg] Get rid of _cairo_svg_test_force_fallbacks
    in favor of cairo_boilerplate_svg_surface_force_fallbacks.

 boilerplate/Makefile.am             |    1 +
 boilerplate/cairo-boilerplate-svg.c |   19 ++++++++++++
 boilerplate/cairo-boilerplate-svg.h |   33 +++++++++++++++++++++
 src/Makefile.am                     |    4 +-
 src/cairo-svg-surface-private.h     |    2 +
 src/cairo-svg-surface.c             |   20 +------------
 src/cairo-svg-test.h                |   54 -----------------------------------
 test/fallback-resolution.c          |    4 +-
 8 files changed, 60 insertions(+), 77 deletions(-)

commit ea1b7c2d8a55d694d575c0bb711e60f70a33ff77
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 03:04:03 2007 -0400

    [paginated] Include cairo-surface-private.h

 src/cairo-paginated-surface-private.h |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 7e0ae8bd43dfd8b052d021601912b46956b2921e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 02:57:55 2007 -0400

    [svg] Move cairo_svg_surface_t to cairo-svg-surface-private.h

 boilerplate/cairo-boilerplate-ps.c |    6 +++-
 src/Makefile.am                    |    2 +-
 src/cairo-svg-surface-private.h    |   71 ++++++++++++++++++++++++++++++++++++
 src/cairo-svg-surface.c            |   24 +------------
 4 files changed, 78 insertions(+), 25 deletions(-)

commit 3885fff3e6215023e801dd2c72fc39560a4e22fd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 03:33:58 2007 -0400

    [ps] Get rid of _cairo_ps_test_force_fallbacks
    
    in favor of cairo_boilerplate_ps_surface_force_fallbacks.

 boilerplate/Makefile.am            |    1 +
 boilerplate/cairo-boilerplate-ps.c |   15 ++++++++++
 boilerplate/cairo-boilerplate-ps.h |   33 ++++++++++++++++++++++
 src/Makefile.am                    |    2 +-
 src/cairo-ps-surface-private.h     |    3 +-
 src/cairo-ps-surface.c             |   24 +--------------
 src/cairo-ps-test.h                |   54 ------------------------------------
 test/fallback-resolution.c         |    4 +-
 8 files changed, 56 insertions(+), 80 deletions(-)

commit 57dc972d6e5fe715a83cbcaad9c6cc3d38bf8129
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 03:02:48 2007 -0400

    [ps] Move cairo_ps_surface_t to cairo-ps-surface-private.h

 src/Makefile.am                |    2 +-
 src/cairo-ps-surface-private.h |   79 ++++++++++++++++++++++++++++++++++++++++
 src/cairo-ps-surface.c         |   33 +----------------
 3 files changed, 81 insertions(+), 33 deletions(-)

commit 3e69fbca6233e9f568935dbb69bf14bc34812d77
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 03:00:21 2007 -0400

    [pdf] Fix header file header!

 src/cairo-pdf-surface-private.h |   12 +++++++++---
 1 files changed, 9 insertions(+), 3 deletions(-)

commit 29247e5010632f0453367b64a38c865076605681
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 02:57:12 2007 -0400

    [ps/pdf/svg] Fix minor coding style issue

 src/cairo-pdf-surface.c |   12 ++++++------
 src/cairo-ps-surface.c  |    2 +-
 src/cairo-svg-surface.c |   14 +++++++-------
 3 files changed, 14 insertions(+), 14 deletions(-)

commit 20ce190e71f838dea598cbd5267f047b75945cee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 02:50:53 2007 -0400

    [pdf] Get rid of _cairo_pdf_test_force_fallbacks
    in favor of cairo_boilerplate_pdf_surface_force_fallbacks.

 boilerplate/Makefile.am             |    1 +
 boilerplate/cairo-boilerplate-pdf.c |   19 ++++++++++++
 src/cairo-pdf-surface-private.h     |    2 +
 src/cairo-pdf-surface.c             |   25 ++--------------
 src/cairo-pdf-test.h                |   54 -----------------------------------
 test/fallback-resolution.c          |    4 +-
 6 files changed, 27 insertions(+), 78 deletions(-)

commit 03477064fa639ab1c735467d1889bde7c99313c4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Apr 21 02:25:51 2007 -0400

    [paginated] Move cairo_paginated_surface_t to cairo-paginated-surface-private.h
    The old cairo-paginated-surface-private.h is cairo-paginated-private.h now.

 src/Makefile.am                       |    1 +
 src/cairo-analysis-surface.c          |    2 +-
 src/cairo-paginated-private.h         |  136 +++++++++++++++++++++++++++++++++
 src/cairo-paginated-surface-private.h |  116 ++++++----------------------
 src/cairo-paginated-surface.c         |   32 +-------
 src/cairo-pdf-surface.c               |    2 +-
 src/cairo-ps-surface.c                |    2 +-
 src/cairo-svg-surface.c               |    2 +-
 src/cairo-types-private.h             |    1 +
 src/test-paginated-surface.c          |    2 +-
 10 files changed, 170 insertions(+), 126 deletions(-)

commit 21a7de61c26faaaa1ce96cddab6d777dbb37d0bb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 02:52:53 2007 -0400

    [boilerplate] Add cairo-boilerplate-xlib.h to Makefile.am

 boilerplate/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 68e2158aaeacefcff8e6df11c25bb61ab0e89606
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 02:37:15 2007 -0400

    [pdf] Move cairo_pdf_surface_t to cairo-pdf-surface-private.h

 src/Makefile.am                         |    3 +-
 src/cairo-output-stream-private.h       |    2 +-
 src/cairo-pdf-surface-private.h         |   83 +++++++++++++++++++++++++++++++
 src/cairo-pdf-surface.c                 |   42 +---------------
 src/cairo-scaled-font-subsets-private.h |    2 -
 src/cairo-types-private.h               |    3 +
 6 files changed, 90 insertions(+), 45 deletions(-)

commit 183c6af4f1730861a604a912a0609e315da65ecc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 02:30:46 2007 -0400

    [paginated] Move cairo_paginated_mode_t to cairo-types-private.h
    
    as it is used in surface structs for PS/PDF/SVG and we will need
    it.

 src/cairo-paginated-surface-private.h |    5 -----
 src/cairo-types-private.h             |    5 +++++
 2 files changed, 5 insertions(+), 5 deletions(-)

commit cd72167ede50b44aa3559ee63b95e12e4b51d80f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 02:27:19 2007 -0400

    [xlib] Get rid of _cairo_xlib_test_disable_render
    
    in favor of cairo_boilerplate_xlib_surface_disable_render.

 boilerplate/cairo-boilerplate-xlib.c |   15 +++++++++
 src/Makefile.am                      |    2 +-
 src/cairo-xlib-surface.c             |   23 +--------------
 src/cairo-xlib-test.h                |   54 ----------------------------------
 test/xlib-surface.c                  |    8 +++--
 5 files changed, 22 insertions(+), 80 deletions(-)

commit 908418cb4d43e387d06698a43626ac9a663d6c2a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 02:25:55 2007 -0400

    [cairo-surface] Move cairo_surface_t struct in cairo-surface-private.h

 src/Makefile.am                  |    2 +
 src/cairo-surface-private.h      |   96 ++++++++++++++++++++++++++++++++++++++
 src/cairo-types-private.h        |   65 +++++++++++++++++++++++++
 src/cairo-xlib-private.h         |    1 -
 src/cairo-xlib-surface-private.h |    2 +
 src/cairoint.h                   |   74 +----------------------------
 6 files changed, 167 insertions(+), 73 deletions(-)

commit 8ae02fa470eace1b449c09b6cd0f86cc09b81ec2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 01:54:35 2007 -0400

    [boilerplate] Minor indentation fix

 boilerplate/cairo-boilerplate-xlib-private.h |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

commit 1345552ac24099900acdb968f905d6e75cc20593
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 01:46:23 2007 -0400

    [xlib] Move cairo_xlib_surface_t definition into cairo-xlib-surface-private.h

 src/Makefile.am                  |    3 +-
 src/cairo-xlib-surface-private.h |   91 ++++++++++++++++++++++++++++++++++++++
 src/cairo-xlib-surface.c         |   54 +----------------------
 3 files changed, 94 insertions(+), 54 deletions(-)

commit 735be3f09d1d150909305ff3232fda42efcb87bd
Author: Peter Weilbacher <pmw@avila.aip.de>
Date:   Fri Apr 20 20:46:55 2007 +0200

    Fix build break related to mutexes on OS/2
    
    cairo_mutex_t is HTMX which is ULONG on OS/2, so we have to set the
    mutex itself to 0 and not the address...

 src/cairo-mutex-private.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 5135bcf414abc91e7777e2c024c9b6e10bf6115c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 20 19:08:07 2007 +0100

    cairo-boilerplate - use xmalloc and friends
    
    Prefer to abort gracefully if we run out of memory (or simply to protect
    them from memfault).

 boilerplate/cairo-boilerplate.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit b6be361d0ef3b81ef5cbc28852f323a671e3d030
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 20 17:49:10 2007 +0100

    Clean up compiler warnings from cairo-png
    
    I introduced some compiler warnings into read_png() with the superfluous
    introduction of a couple of volatile qualifiers. I'm sure at the time,
    the reason was that gcc suggested adding them - however, ATM gcc issues
    no warnings without them.

 src/cairo-png.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit fc455c53ecb0aa496915b1eae68dc0275af78e09
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Sat Apr 21 00:26:25 2007 +0930

    Ensure _cairo_scaled_font_subsets_map_glyph() returns correct values
    
    The CID font subsetting exposed a bug where the subset_glyph->is_scaled
    return argument of _cairo_scaled_font_subsets_map_glyph() is sometimes
    not assigned a value.

 src/cairo-scaled-font-subsets.c |   55 +++++++++++++++------------------------
 1 files changed, 21 insertions(+), 34 deletions(-)

commit 9d8eb42c013d197b3365af88e372d1c2c1617173
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Apr 20 22:45:12 2007 +0930

    Exclude Type1 fonts from CID subsets
    
    Make cairo-scaled-font-subsets.c limit Type1 font subsets to
    256 glyphs. This allows Type1 subsetting to be enabled again
    with type1-fallback as the fallback option for Type1 fonts.

 src/cairo-pdf-surface.c                 |   42 ++++++++++++++----------------
 src/cairo-scaled-font-subsets-private.h |   11 +++++++-
 src/cairo-scaled-font-subsets.c         |   36 +++++++++++++++++---------
 src/cairo-type1-subset.c                |   27 ++++++++++++++++++++
 src/cairoint.h                          |    1 +
 5 files changed, 82 insertions(+), 35 deletions(-)

commit 56ad56263b86a9678387fe8dd994e77c183c6328
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Apr 20 22:44:04 2007 +0930

    Enable embedding of CID fonts in PDF
    
    Update cairo-pdf-surface.c to embed CFF and TrueType fonts
    as CID fonts. Update the ToUnicode CMap to handle CID fonts.

 src/cairo-pdf-surface.c |  285 +++++++++++++++++++++++++++++------------------
 1 files changed, 177 insertions(+), 108 deletions(-)

commit ca3662d6fc630e5390b3a8f8dbaa1d65aebc3fe8
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Apr 20 22:43:37 2007 +0930

    Make cairo-output-stream.c accept variable width printf fields

 src/cairo-output-stream.c |   27 +++++++++++++++++++++++----
 1 files changed, 23 insertions(+), 4 deletions(-)

commit 0c2a653033e0b631a1cb6591263cbd6125ccc00c
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Apr 20 22:30:55 2007 +0930

    Add CFF CID Fallback
    
    Switching to CID font embedding requires a fallback font for
    the case where CFF CID or TrueType CID subsetting fails.
    
    The new function _cairo_type2_charstrings_init() added to
    cairo-type1-fallback.c creates Type2 charstrings from glyph
    paths. _cairo_cff_fallback_init() in cairo-cff-subset.c
    wraps these charstrings in a CFF CID font.

 src/cairo-cff-subset.c                  |  212 +++++++++++++++++++++++++++++++
 src/cairo-scaled-font-subsets-private.h |   68 ++++++++++
 src/cairo-type1-fallback.c              |  211 ++++++++++++++++++++++---------
 3 files changed, 432 insertions(+), 59 deletions(-)

commit c68a2389f51880b0fa9df6750abdd840258666fc
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Apr 20 22:30:05 2007 +0930

    Make CFF Subsetting create CID subsets
    
    OpenType/CFF fonts come in two types: CID and non CID.
    CFF CID font subsetting was previously disabled in cairo
    due 1) to the need to embed CFF CID fonts in PDF as a CID fonts
    and 2) there is no easy way to convert CFF CID to CFF non CID.
    
    With the switch to CID fonts cairo-cff-subset.c has been
    updated to subset CID fonts and to covert non CID fonts to
    CID. A further advantage of converting non CID CFF fonts
    to CID is the reduction in size due to not embedding the
    name of each glyph in the font subset.

 src/cairo-cff-subset.c  |  858 ++++++++++++++++++++++++++++++----------------
 src/cairo-pdf-surface.c |    2 +
 2 files changed, 561 insertions(+), 299 deletions(-)

commit 073fce5a85ab90b1bc6915e41d6a420a47e540e6
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Apr 20 22:29:41 2007 +0930

    Add support for creating CID/composite font subsets
    
    cairo-scaled-font-subsets.c now provides three functions for creating subsets:
    
      _cairo_scaled_font_subsets_create_scaled()
        Create a subset for each scaled font with maximum size INT_MAX.
    
      _cairo_scaled_font_subsets_create_simple()
        Create subsets suitable for embedding as simple fonts in PS/PDF.
    
      _cairo_scaled_font_subsets_create_composite()
        Create subsets suitable for embedding as composite fonts in PS/PDF.
    
    The _create_simple() and _create_composite() functions both merge
    scaled fonts with the same face and an outline path available into
    the same subset. _create_composite() has a maximum subset size of
    65536 for outline fonts. Bitmap fonts have a separate subset for
    each scale with a maximum subset size of 256.
    
    The _create_simple() and _create_composite() functions both reserve
    the first glyph in the subset for the .notdef glyph. CID fonts require
    CID 0 to be .notdef.
    
    Update Type1, TrueType and CFF subsetting to expect glyph 0 of each
    subset to be the .notdef.

 src/cairo-cff-subset.c                  |    9 +--
 src/cairo-pdf-surface.c                 |    5 +-
 src/cairo-ps-surface.c                  |   13 +--
 src/cairo-scaled-font-subsets-private.h |   61 +++++++++++----
 src/cairo-scaled-font-subsets.c         |  127 ++++++++++++++++++++++---------
 src/cairo-svg-surface.c                 |    2 +-
 src/cairo-truetype-subset.c             |   21 ++---
 src/cairo-type1-fallback.c              |    2 +-
 src/cairo-type1-subset.c                |    3 -
 9 files changed, 156 insertions(+), 87 deletions(-)

commit bf957ee0f29ff49970b4791718eccdb92f3d6886
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 23 12:59:38 2007 +0000

    cairo-png - handle short reads
    
    During MT cairo testing we get the error "libpng: Read Error" which is
    emitted should the fread return fewer bytes than asked. However, this is
    not necessarily an error, so double-check the ferror() status before
    raising a png_error().

 src/cairo-png.c |   24 +++++++++++++++++-------
 1 files changed, 17 insertions(+), 7 deletions(-)

commit d00aa44206f474e11c66c585d09bfd55e747cc5b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 01:28:56 2007 -0400

    [Makefile.am] Add a "make snapshot" target
    that creates a tarball named with version, date, and git hash of
    the tree.  Like cairo-1.4.5-20070420-2a0389.tar.gz.

 Makefile.am |   11 ++++++++++-
 1 files changed, 10 insertions(+), 1 deletions(-)

commit 2a038956635e27f61fb2147527d2262eebf9bb26
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 00:55:03 2007 -0400

    [pixman] Fix typo in Makefile.am

 pixman/src/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit abcd929c57459f95e93504e0ef07b012b497a363
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 00:50:48 2007 -0400

    [boilerplate] Add cairo_boilerplate_format_from_content

 boilerplate/cairo-boilerplate-quartz.c        |    9 +--------
 boilerplate/cairo-boilerplate-test-surfaces.c |   13 +------------
 boilerplate/cairo-boilerplate-win32.c         |    8 ++------
 boilerplate/cairo-boilerplate.c               |   18 ++++++++++++++++++
 boilerplate/cairo-boilerplate.h               |    3 +++
 5 files changed, 25 insertions(+), 26 deletions(-)

commit 97624dc488b41eb83d70b2c44a595daa5d833e7f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 00:45:42 2007 -0400

    [boilerplate] Strip test-surfaces boilerplate into cairo-boilerplate-test-surfaces*

 boilerplate/Makefile.am                            |    5 +
 .../cairo-boilerplate-test-surfaces-private.h      |   63 +++++++
 boilerplate/cairo-boilerplate-test-surfaces.c      |  170 ++++++++++++++++++++
 boilerplate/cairo-boilerplate.c                    |  146 +----------------
 4 files changed, 241 insertions(+), 143 deletions(-)

commit 2e709321d858a048731eeaaca4a13a96de739e3f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 00:34:51 2007 -0400

    [boilerplate] Move xasprintf to xmalloc.c

 boilerplate/cairo-boilerplate.c |   45 -----------------------------------
 boilerplate/cairo-boilerplate.h |   32 +++++++++++-------------
 boilerplate/xmalloc.c           |   50 ++++++++++++++++++++++++++++++++++++--
 boilerplate/xmalloc.h           |    9 ++++++-
 test/cairo-test.h               |    2 +-
 5 files changed, 71 insertions(+), 67 deletions(-)

commit 5331445c12756293a915420a26ab5553fc7db3fc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 00:26:17 2007 -0400

    [boilerplate] Cleanup includes in cairo-boilerplate-beos.cpp

 boilerplate/cairo-boilerplate-beos.cpp |   20 ++++++++++----------
 1 files changed, 10 insertions(+), 10 deletions(-)

commit 56e916d40cf2a5f061347254657592f7bfc90d02
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 00:25:44 2007 -0400

    [boilerplate] Fix typos in cairo-boilerplate-glitz.c

 boilerplate/cairo-boilerplate-glitz.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 06718b0da642d39b7b4dbfc009f08acb24e5e802
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 00:15:19 2007 -0400

    [boilerplate] Remove leftover call to cairo_test_log

 boilerplate/cairo-boilerplate.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 99737a60cb8cae1643b84782768e8c6d50ac7d0a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 00:13:25 2007 -0400

    [boilerplate] Clean up includes and remove unnecessary ones

 boilerplate/cairo-boilerplate-directfb.c |    9 +++++----
 boilerplate/cairo-boilerplate-pdf.c      |    2 +-
 boilerplate/cairo-boilerplate-svg.c      |    2 +-
 boilerplate/cairo-boilerplate-xcb.c      |    2 +-
 boilerplate/cairo-boilerplate.c          |   30 +++++++++---------------------
 5 files changed, 17 insertions(+), 28 deletions(-)

commit 4b569f13d758015f33ad258a70ad4f472da771ed
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 20 00:08:44 2007 -0400

    [boilerplate] Strip win32 boilerplate into cairo-boilerplate-win32*

 boilerplate/Makefile.am                       |    5 ++
 boilerplate/cairo-boilerplate-win32-private.h |   38 ++++++++++++++++++
 boilerplate/cairo-boilerplate-win32.c         |   51 +++++++++++++++++++++++++
 boilerplate/cairo-boilerplate.c               |   31 ++-------------
 4 files changed, 99 insertions(+), 26 deletions(-)

commit 0a03d66fffe7388d8fb4ffdb7bb5501a214c6342
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 23:58:51 2007 -0400

    [boilerplate] Rename create_win32_surface to _cairo_boilerplate_win32_create_surface

 boilerplate/cairo-boilerplate.c |   22 +++++++++++-----------
 1 files changed, 11 insertions(+), 11 deletions(-)

commit 5ee882d3941a9df61d539e056933564a758a6bbc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 23:53:34 2007 -0400

    [boilerplate] Remove empty cleanup_win32

 boilerplate/cairo-boilerplate.c |   11 ++---------
 1 files changed, 2 insertions(+), 9 deletions(-)

commit a684fd80e750bea5661262e29a59c4f8c4d9cee3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 23:36:00 2007 -0400

    [directfb] Silence compiler warning

 src/cairo-directfb-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 23e6abc3fc01e3d722adfc48cd1df9c8db73adc1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 22:40:52 2007 -0400

    [boilerplate] Strip glitz boilerplate into cairo-boilerplate-glitz*

 boilerplate/Makefile.am                       |   30 +-
 boilerplate/cairo-boilerplate-glitz-private.h |   73 ++++
 boilerplate/cairo-boilerplate-glitz.c         |  477 ++++++++++++++++++++++++
 boilerplate/cairo-boilerplate.c               |  480 +------------------------
 4 files changed, 582 insertions(+), 478 deletions(-)

commit 7d576a376706aad427915b4872429f5605104886
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 22:25:28 2007 -0400

    [boilerplate] Minor indentation fix

 boilerplate/cairo-boilerplate.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 06b657ccf129f6f154c0db7886e5cca6191f93ca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 22:20:38 2007 -0400

    [boilerplate] Strip xcb boilerplate into cairo-boilerplate-xcb*

 boilerplate/Makefile.am                     |    5 +
 boilerplate/cairo-boilerplate-xcb-private.h |   44 ++++++++++
 boilerplate/cairo-boilerplate-xcb.c         |  115 +++++++++++++++++++++++++++
 boilerplate/cairo-boilerplate.c             |   90 +--------------------
 4 files changed, 167 insertions(+), 87 deletions(-)

commit 65f636649d54348722354b2400c3a191309da0e1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 22:13:08 2007 -0400

    [boilerplate] Strip svg boilerplate into cairo-boilerplate-svg*

 boilerplate/Makefile.am                     |    5 +
 boilerplate/cairo-boilerplate-svg-private.h |   44 +++++++++
 boilerplate/cairo-boilerplate-svg.c         |  129 +++++++++++++++++++++++++++
 boilerplate/cairo-boilerplate.c             |  106 +---------------------
 4 files changed, 181 insertions(+), 103 deletions(-)

commit 8c9960675b82978acbd5a85ef358c674c3407ee3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 22:10:09 2007 -0400

    [boilerplate] Strip pdf boilerplate into cairo-boilerplate-pdf*

 boilerplate/Makefile.am                     |    5 +
 boilerplate/cairo-boilerplate-pdf-private.h |   44 +++++++++
 boilerplate/cairo-boilerplate-pdf.c         |  134 +++++++++++++++++++++++++++
 boilerplate/cairo-boilerplate.c             |  111 +---------------------
 4 files changed, 186 insertions(+), 108 deletions(-)

commit d9ce7de57514710f425bdee613edc4ea79ac0f0a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 22:08:24 2007 -0400

    [boilerplate] Rename xcairo_surface_set_user_data to cairo_boilerplate_surface_set_user_data
    
    and make it public.

 boilerplate/cairo-boilerplate.c |   48 +++++++++++++++++++++-----------------
 boilerplate/cairo-boilerplate.h |    6 +++++
 2 files changed, 32 insertions(+), 22 deletions(-)

commit df6b8ecc8963518c897648d82aab1aa090b4721a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 21:46:51 2007 -0400

    [boilerplate] Strip ps boilerplate into cairo-boilerplate-ps*

 boilerplate/Makefile.am                    |    5 +
 boilerplate/cairo-boilerplate-ps-private.h |   44 +++++++++
 boilerplate/cairo-boilerplate-ps.c         |  138 ++++++++++++++++++++++++++++
 boilerplate/cairo-boilerplate.c            |  115 +----------------------
 4 files changed, 190 insertions(+), 112 deletions(-)

commit 6461f0d120bf5fabd08b7621233229b223b3de89
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 20:45:10 2007 -0400

    [boilerplate] Remove unused variables

 boilerplate/cairo-boilerplate.c |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

commit f2d6275352142df631e00e27456d7e6ceb83804c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 20:41:34 2007 -0400

    [boilerplate] Fix renaming typo

 boilerplate/cairo-boilerplate.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d5535c993b5cde5df29a7a29339aa500992128bf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 20:36:14 2007 -0400

    [boilerplate/test] Move vector_ignored_tests from boilerplate/ to test/

 boilerplate/cairo-boilerplate.c |   28 -----------------
 test/cairo-test.c               |   62 ++++++++++++++++++++++++++++----------
 2 files changed, 45 insertions(+), 45 deletions(-)

commit d6dc4f978364d287367d239e5594c7ffe50a2571
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 20:28:22 2007 -0400

    [boilerplate] Add a boolean is_vector to boilerplate target type
    
    This is used to move the skip-these-tests-for-vector code into
    cairo-test which it belongs.

 boilerplate/cairo-boilerplate.c |   18 ++++++++++++------
 boilerplate/cairo-boilerplate.h |    1 +
 2 files changed, 13 insertions(+), 6 deletions(-)

commit 0b5e2dbaa84225452a0935f61d2348bce88a3e69
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 20:23:55 2007 -0400

    [boilerplate] Sort backend entries in Makefile.am alphabetically

 boilerplate/Makefile.am |   10 +++++-----
 1 files changed, 5 insertions(+), 5 deletions(-)

commit be0320c4f8082a9274899959dc82297a04aa7800
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 20:17:26 2007 -0400

    [boilerplate] Properly namespace boilerplate methods
    
    in preparation for ripping them into per-backend files.

 boilerplate/cairo-boilerplate-beos.cpp   |   24 +-
 boilerplate/cairo-boilerplate-directfb.c |   33 ++--
 boilerplate/cairo-boilerplate-quartz.c   |   12 +-
 boilerplate/cairo-boilerplate-xlib.c     |   24 +-
 boilerplate/cairo-boilerplate.c          |  328 +++++++++++++++++-------------
 5 files changed, 236 insertions(+), 185 deletions(-)

commit 9b660a3d54940c68eb48f2afeca7e87e1d2bffa6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 19:56:05 2007 -0400

    [boilerplate] Strip xlib boilerplate into cairo-boilerplate-xlib*

 boilerplate/Makefile.am                      |    5 +
 boilerplate/cairo-boilerplate-xlib-private.h |   44 ++++++
 boilerplate/cairo-boilerplate-xlib.c         |  196 ++++++++++++++++++++++++++
 boilerplate/cairo-boilerplate.c              |  183 ++-----------------------
 4 files changed, 254 insertions(+), 174 deletions(-)

commit d945f6434643ac35f0e86352cfe3ccf021f568de
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 19:44:57 2007 -0400

    [boilerplate] Move includes around

 boilerplate/cairo-boilerplate.c |   23 ++++++++++-------------
 1 files changed, 10 insertions(+), 13 deletions(-)

commit 0130cca6924f5c0969ca285585c68a458301a882
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 19:39:58 2007 -0400

    [boilerplate] Rename test-directfb to boilerplate-directfb

 boilerplate/Makefile.am                          |    3 +-
 boilerplate/cairo-boilerplate-directfb-private.h |   23 ++++
 boilerplate/cairo-boilerplate-directfb.c         |  143 ++++++++++++++++++++++
 boilerplate/cairo-boilerplate.c                  |    6 +-
 boilerplate/cairo-test-directfb.c                |  143 ----------------------
 boilerplate/cairo-test-directfb.h                |   23 ----
 6 files changed, 171 insertions(+), 170 deletions(-)

commit fb2c0daa09af083278024c3da6f7e9e3f851984f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 19:38:20 2007 -0400

    [boilerplate] Rename test-beos to boilerplate-beos

 boilerplate/Makefile.am                      |    3 +-
 boilerplate/cairo-boilerplate-beos-private.h |   34 ++++
 boilerplate/cairo-boilerplate-beos.cpp       |  258 ++++++++++++++++++++++++++
 boilerplate/cairo-boilerplate.c              |    8 +-
 boilerplate/cairo-test-beos.cpp              |  258 --------------------------
 boilerplate/cairo-test-beos.h                |   34 ----
 6 files changed, 298 insertions(+), 297 deletions(-)

commit 01760286b388870e5bebf3851b4bef1350d89852
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 19:32:52 2007 -0400

    [boilerplate] Rename quartz-boilerplate to boilerplate-quartz

 boilerplate/Makefile.am                        |    4 +-
 boilerplate/cairo-boilerplate-quartz-private.h |   41 ++++++++++++++++
 boilerplate/cairo-boilerplate-quartz.c         |   60 ++++++++++++++++++++++++
 boilerplate/cairo-boilerplate.c                |   10 ++--
 boilerplate/cairo-quartz-boilerplate-private.h |   41 ----------------
 boilerplate/cairo-quartz-boilerplate.c         |   60 ------------------------
 6 files changed, 108 insertions(+), 108 deletions(-)

commit d64ef355217db7a555da0029187d19c80ec12609
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 19 23:12:09 2007 +0100

    Include cairo-perf in make check
    
    Although cairo-perf is not written to perform explicit failure testing of
    cairo, it does generate long sequences of cairo operations which often
    trigger unexpected errors. By including it with make check, it becomes
    even easier for the programmer to check that one has not broken cairo in
    terms of expected behaviour or performance.

 Makefile.am      |    3 ++-
 perf/Makefile.am |   30 +++++++++++++++++++-----------
 2 files changed, 21 insertions(+), 12 deletions(-)

commit 0ffb021e9b0cc2ec9afc3eaa360b4518327afa6c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 16:52:51 2007 -0400

    [cairo-mutex] If no mutex implementation is found, should #error instead of #warning
    
    otherwise we will cause compile errors before the sanity check macros get
    a chance to err.

 src/cairo-mutex-private.h |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 813cdd71503ca2d77da011c91368e55cf20ad657
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 16:49:35 2007 -0400

    [configure.in] Support --disable-pthread
    
    Also allows for --enable-pthread=yes which will make configure abort
    if pthread is not found (as opposed to silently disabling it).

 configure.in |   13 ++++++++++++-
 1 files changed, 12 insertions(+), 1 deletions(-)

commit 6d01e89988ea89ae21f3461825583d89b6eef55e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 19 21:46:00 2007 +0100

    Add callgrind output files to CLEANFILES and .gitignore.

 perf/.gitignore  |    2 ++
 perf/Makefile.am |    1 +
 2 files changed, 3 insertions(+), 0 deletions(-)

commit 2c79f8b75bd5bb0bb3bf054fb2b3cae6de382a7c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 19 21:41:43 2007 +0100

    Fix command line for running cairo-perf under valgrind.
    
    The CAIRO_PERF_ENVIRONMENT slipped into the middle of the command line
    instead of at the start.

 perf/Makefile.am |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 3631c11eb4ab49f2bb3b9ef0478e5516793f221f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 16:38:23 2007 -0400

    [cairo-mutex] Switch to HAVE_WINDOWS_H to use Win32 mutexes

 src/cairo-mutex-private.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d2a824a191e6b0d10a1f495d970b0406e37e0a39
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 16:37:36 2007 -0400

    [cairo-commit] Update attribution headers in cairo-mutex-private.h

 src/cairo-mutex-private.h |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 12dfd8bb4bf72483c835e169003fa00b114beb13
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 16:36:43 2007 -0400

    [cairo-mutex] Warn if no mutex definition found and let sanity macros err
    about undefined CAIRO_MUTEX macros.

 src/cairo-mutex-private.h |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit 6aa823841d6c1d59d4d972f0236f0e6a43199970
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 16:36:10 2007 -0400

    [cairo-mutex] Support non-reentrant compilation if CAIRO_NO_MUTEX defined
    to 1.

 src/cairo-mutex-private.h |   10 +++++++++-
 1 files changed, 9 insertions(+), 1 deletions(-)

commit e5980f69ad2d59ee305fe9aae62070a74d2df58b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 16:31:47 2007 -0400

    [cairo-commit] Just warn for BeOS and let the sanity check macros err
    about undefined CAIRO_MUTEX macros.

 src/cairo-mutex-private.h |   10 +++-------
 1 files changed, 3 insertions(+), 7 deletions(-)

commit 8ebb054ff9d2fe12faa7b1807aef24b2bf916e64
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 16:28:44 2007 -0400

    [cairo-mutex] Prefer "#if CAIRO_SOMETHING" over "#if defined CAIRO_SOMETHING"

 src/cairo-mutex-private.h |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 97c197478023ceb5477a203d058eaec2cb18f987
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 16:26:21 2007 -0400

    [cairo-mutex] Add default implementation for CAIRO_MUTEX_INIT
    that uses CAIRO_MUTEX_NIL_INITIALIZER.  This used to be the
    implementation for pthread because pthread_mutex_init() is
    broken.  See d48bb4fbe876a93199ba48fcf5f32734fbe18ba9.

 src/cairo-mutex-private.h |   11 +++++++----
 1 files changed, 7 insertions(+), 4 deletions(-)

commit 6d2a2dd6d9190c62b209e47c083b7df72e7134fb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 16:24:16 2007 -0400

    [cairo-mutex] Add default no-op implementation for CAIRO_MUTEX_FINI

 src/cairo-mutex-private.h |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 2067d6fa90dae80aa666fb7328d51e2f92bec5bd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 16:23:14 2007 -0400

    [cairo-mutex] Use CAIRO_MUTEX_NOOP when applicable

 src/cairo-mutex-private.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 5dda76c90f8886b6017ca8bbdf81be2b97201962
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 16:22:02 2007 -0400

    [cairo-mutex] Err if at least one of mutex macros are not defined

 src/cairo-mutex-private.h |   23 +++++++++++++++++++++++
 1 files changed, 23 insertions(+), 0 deletions(-)

commit f771b9157c26430949f4dd1412c7a7b35367f81a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 16:21:13 2007 -0400

    [cairo-mutex] Define and use CAIRO_MUTEX_USE_GENERIC_INITIALIZATION
    We use the generic initialization if CAIRO_MUTEX_INITIALIZE is not
    defined.

 src/cairo-mutex-private.h |    9 +++++++++
 src/cairo-mutex.c         |    2 +-
 2 files changed, 10 insertions(+), 1 deletions(-)

commit 4fc52e2d49c1299f8f175e22472ebe08baa41fa4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 16:19:48 2007 -0400

    [cairo-mutex] Define CAIRO_MUTEX_NOOP

 src/cairo-mutex-private.h |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit f9dd8fd0ef0ad95921723155b951cd113ccb2d0b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 16:19:25 2007 -0400

    [cairo-mutex] Inlucde cairo-features.h and config.h
    Previously we were lucky enough to have them included before us

 src/cairo-mutex-private.h |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 4e754cf3df9855c1d442578e555b7fb17c3dd4a1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 15:31:24 2007 -0400

    [cairo-truetype-subset] Shut gcc warning up

 src/cairo-truetype-subset.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 4141e752e2eb0f40f2eb298bad398e6390e00ef8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 15:04:11 2007 -0400

    [cairo-freelist] Remove redundant struct declarations

 src/cairo-freelist-private.h |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit ea817c560c429f445e4c450b60d499dae27f6024
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 14:50:38 2007 -0400

    [cairo-mutex] Remove unneeded #undef CAIRO_MUTEX_EXTERNAL

 src/cairo-mutex-private.h |    8 --------
 1 files changed, 0 insertions(+), 8 deletions(-)

commit 0b281085b55aae70876c6ef022266b73461800ab
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 14:45:41 2007 -0400

    [cairo-mutex] Err on unintended inclusion of cairo-mutex-list-private.h

 src/cairo-mutex-list-private.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 47be7280bfe751c9f635f1e17c158f04b2927ae3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 19 14:42:55 2007 -0400

    [cairo-mutex] Remove multiple-inclusion guards from cairo-mutex-list-private.h
    
    This is a list header file.  We should not prevent it from multiple
    inclusions.

 src/cairo-mutex-list-private.h |    3 ---
 src/cairo-mutex.c              |    2 --
 2 files changed, 0 insertions(+), 5 deletions(-)

commit 55ea0466e25de2c60171a9d6c96536bc2e7fb9e3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 19 20:24:27 2007 +0100

    Embed simple clip XRectangles in cairo_xlib_surface_t
    
    Toolkits like GTK+ almost always set a simple rectangular clip mask before
    any cairo operation, so avoid the allocation for this simple case by
    embedding a small number of XRectangles into the surface structure.

 src/cairo-xlib-surface.c |   18 +++++++++++-------
 1 files changed, 11 insertions(+), 7 deletions(-)

commit 7906a993403e75aa34b32d2d9338ec179896d765
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Thu Apr 19 14:54:30 2007 +0200

    Define INT32 limits on MSVC as noticed by Hans-Jrgen Schler

 src/cairo-wideint-private.h |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit cc8841645cd7aa06ae48cbad804b31b3c0c2146b
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Thu Apr 19 13:47:45 2007 +0200

    Properly use CAIRO_MUTEX_{INIT,FINI} and remove CAIRO_MUTEX_LIST_PRIVATE_H sentinal before explicitly including the mutex list.

 src/cairo-mutex.c |   10 ++++++----
 1 files changed, 6 insertions(+), 4 deletions(-)

commit 39a633a8f3618f3b1adb3eefdf36e2fc6d896054
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Thu Apr 19 13:15:08 2007 +0200

    Reintroduce DllMain as deterministic mutex initialization path

 src/cairo-win32-surface.c |   30 ++++++++++++++++++++++++++++++
 1 files changed, 30 insertions(+), 0 deletions(-)

commit 9b348929b51fb45f5985914350a10955d6df17ae
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Thu Apr 19 13:13:42 2007 +0200

    Introduce CAIRO_MUTEX_FINALIZE as counter-part for CAIRO_MUTEX_INITIALIZE

 src/cairo-mutex-private.h |    8 +++++++-
 src/cairo-mutex.c         |   12 ++++++++++++
 src/cairo-os2-surface.c   |    6 +++---
 3 files changed, 22 insertions(+), 4 deletions(-)

commit 67767afa09e3622988b9ac67b754114ea9f84105
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Thu Apr 19 12:35:10 2007 +0200

    Update _cairo_mutex_initialized during initialization.

 src/cairo-mutex.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 41c6eebcd1fab94fd3a91d09f1ef6ee0d8c7a044
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 19 11:56:15 2007 +0100

    Optionally provide a pattern to use for creating a similar solid surface.
    
    _cairo_surface_create_similar_solid() creates a fresh pattern to wrap
    color, however sometimes the caller already has that pattern available.
    In those circumstances we can pass the pattern as well as the color and
    avoid the extra allocation.

 src/cairo-clip.c          |    3 ++-
 src/cairo-glitz-surface.c |    3 ++-
 src/cairo-pattern.c       |    3 ++-
 src/cairo-surface.c       |   24 +++++++++++++++---------
 src/cairoint.h            |    6 +++++-
 5 files changed, 26 insertions(+), 13 deletions(-)

commit ef60e7c65144edd1aa14757b269f2c196df732a2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 18 18:08:45 2007 +0100

    cairo-xlib-surface - track picture properties.
    
    By tracking picture properties we can dramatically reduce the amount of
    X11 traffic by avoiding redundant changes.

 src/cairo-xlib-surface.c |   35 ++++++++++++++++++++++++-----------
 1 files changed, 24 insertions(+), 11 deletions(-)

commit 9cf09556339e64bdf1273e95938b657112df07b6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 19 09:27:51 2007 +0100

    Create opaque similar solid surfaces when possible.
    
    For opaque surfaces the backends may use simpler code paths - for
    example, the xlib backend may be able to use the Core protocol rather
    than Render. So we only generate a surface with an alpha component if
    the color is not opaque.

 src/cairo-pattern.c |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit f7b6fc474651311356f116b7d8d7a5ef1cbab570
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 19 09:22:08 2007 +0100

    Define a CAIRO_ALPHA_IS_OPAQUE variant that operates on uint16.
    
    Introducing this variant also fixed a bug in _gradient_is_opaque()
    which was using the fractional test on a uint16.

 src/cairo-pattern.c |    6 +++---
 src/cairoint.h      |    3 +++
 2 files changed, 6 insertions(+), 3 deletions(-)

commit 157074c794903f1dbe68c1ba5b129b4176dc7975
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 18 19:46:30 2007 -0400

    [boilerplate] Add cairo_boilerplate_get/free_targets
    This means, test and perf suites now share the same target handling
    code, including parsing CAIRO_TEST_TARGET.

 boilerplate/cairo-boilerplate.c |   73 +++++++++++++++++++++++++++++++++++++--
 boilerplate/cairo-boilerplate.h |    6 +++-
 perf/cairo-perf.c               |   20 +++++-----
 test/cairo-test.c               |   54 ++++-------------------------
 4 files changed, 92 insertions(+), 61 deletions(-)

commit 47c02a6bd67e8b7e50977cc87d5e35358d5c4c2e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 18 19:15:16 2007 -0400

    [boilerplate] s/_cairo_test_content_name/cairo_boilerplate_content_name/g

 boilerplate/cairo-boilerplate.c |    8 ++++----
 boilerplate/cairo-boilerplate.h |    2 +-
 test/cairo-test.c               |   10 +++++-----
 3 files changed, 10 insertions(+), 10 deletions(-)

commit b9026d0b137520247b4a93287bd518fc79774e93
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 18 19:09:53 2007 -0400

    [perf] Make targets more consistent with the test suite
    That is:
    1) no VALGRING vs VG abbreviations
    2) setting TARGETS and ITERS on the make command line works now

 perf/Makefile.am  |   26 +++++++++++++++++---------
 perf/cairo-perf.c |    8 ++++++--
 2 files changed, 23 insertions(+), 11 deletions(-)

commit 9f3e0694e644d2279c7f4835f8035d4ecccb5711
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 18 19:08:54 2007 -0400

    [test] Allow bypassing all test targets by setting CAIRO_TEST_TARGET=" "

 test/cairo-test.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 52d4e0f3191440e8ebe366b593c2e9c955328258
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 18 18:27:28 2007 -0400

    [doc] Make section title capitalization more consistent

 doc/public/cairo-sections.txt    |    2 +-
 doc/public/language-bindings.xml |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit beadcdf9bd7c1dde48c8c751ba8af75c60b93a5f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 18 18:24:09 2007 -0400

    Rename cairo-font.c to cairo-font-face.c

 src/Makefile.am       |    2 +-
 src/Makefile.win32    |    2 +-
 src/cairo-font-face.c |  514 +++++++++++++++++++++++++++++++++++++++++++++++++
 src/cairo-font.c      |  514 -------------------------------------------------
 src/cairoint.h        |    2 +-
 5 files changed, 517 insertions(+), 517 deletions(-)

commit f56582ef06bbf56edcc6ecc26698abaeba1306b0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 18 17:50:36 2007 -0400

    Put back __inline definition for MSC compilers, in both cairo and pixman
    Apparently it's too much to expect people compiling on windows to fill
    in sensible values for config.h... /sigh

 pixman/src/pixmanint.h |   10 ++++++++--
 src/cairoint.h         |    2 ++
 2 files changed, 10 insertions(+), 2 deletions(-)

commit a54b6ed0784dd00375424e581bc7349dd8a2a2d9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 18 17:45:31 2007 -0400

    [pixman] Rename icint.h to pixmanint.h

 pixman/src/Makefile.am             |    4 +-
 pixman/src/check-pixmanint.sh      |   17 +
 pixman/src/fbcompose.c             |    4 +-
 pixman/src/fbedge.c                |    4 +-
 pixman/src/fbmmx.c                 |    4 +-
 pixman/src/fbpict.c                |    4 +-
 pixman/src/fbtrap.c                |    4 +-
 pixman/src/icblt.c                 |    4 +-
 pixman/src/icbltone.c              |    4 +-
 pixman/src/iccolor.c               |    6 +-
 pixman/src/icformat.c              |    6 +-
 pixman/src/icimage.c               |    4 +-
 pixman/src/icpixels.c              |    4 +-
 pixman/src/icrect.c                |    6 +-
 pixman/src/icstipple.c             |    4 +-
 pixman/src/ictransform.c           |    6 +-
 pixman/src/ictrap.c                |    5 +-
 pixman/src/ictri.c                 |    5 +-
 pixman/src/icutil.c                |    4 +-
 pixman/src/pixman-xserver-compat.h |    4 +-
 pixman/src/pixman.h                |    4 -
 pixman/src/pixmanint.h             | 1070 ++++++++++++++++++++++++++++++++++++
 pixman/src/pixregion.c             |    4 +-
 pixman/src/renderedge.c            |    4 +-
 24 files changed, 1110 insertions(+), 75 deletions(-)

commit 48121e97ac4f0114a0d5bc35aec76d2aba23a783
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 18 17:04:07 2007 -0400

    [cairoint.h] Define WARN_UNUSED_RESULT if undefined

 src/cairoint.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit a396e0b05731db3acbf1e8d82ab77592b697e417
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 18 14:24:10 2007 +0100

    cairo-perf - add the missing newline.
    
    Oops, missed out the newline for the fprintf in the previous commit.

 perf/cairo-perf.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 383e9d5368706168498a87d1b7f023f2b59c2f92
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 18 14:12:20 2007 +0100

    cairo-perf - Check that the surface is created.
    
    Exit(1) if we fail to create the target surface.

 perf/cairo-perf.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit 7131f4e6aea11d94e38375a6be71887825008e48
Author: Dave Yeo <daveryeo@telus.net>
Date:   Tue Apr 17 15:30:20 2007 -0400

    [OS2] Fix #include "cairo-mutex-list-private.h"

 src/cairo-os2-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit f7a2787685d640dd35ef7ef1314c4e754771c512
Merge: 2efaf3a cab4d41
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Mon Apr 16 23:05:10 2007 +0200

    Merge branch 'master' of git+ssh://hasselmm@git.freedesktop.org/git/cairo

commit cab4d41cae4463841bca297a7e16c970633c8c21
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 16 16:57:24 2007 +0100

    create-for-stream - free resources after test failure.
    
    create-for-stream often fails whilst running under valgrind due to the
    postscript output containing a CreationDate with seconds resolution,
    hence the visibility of the resource leaks during failure.

 test/create-for-stream.c |   37 ++++++++++++++++++++-----------------
 1 files changed, 20 insertions(+), 17 deletions(-)

commit 9d435d5fbfae0f64053f6596f73410bc352cd2de
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 16 15:42:07 2007 +0100

    Add suppression for leak from XauFileName.
    
    The string is statically allocated by XauFileName() and so ignore the fact
    that is not freed upon termination.

 test/.valgrind-suppressions |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

commit 3a3fb0031decec26260cd94e60f1b0bf06541a6d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 16 15:08:54 2007 +0100

    Update .gitignore
    
    Add .*.sw? (vim swapfiles).
    Add *~ (backup files).
    Add *.gcno and *.gcda (gcov intermediates).

 .gitignore             |    1 +
 boilerplate/.gitignore |    4 ++++
 perf/.gitignore        |    4 ++++
 src/.gitignore         |    1 +
 test/.gitignore        |    3 +++
 5 files changed, 13 insertions(+), 0 deletions(-)

commit 7ff95c7230471be3ffa231ebc71e1d63ba4621b0
Author: Kouhei Sutou <kou@cozmixng.org>
Date:   Mon Apr 16 02:48:14 2007 -0400

    Support MinGW DLL compilation

 configure.in              |    1 +
 src/cairo-win32-surface.c |    4 ++++
 2 files changed, 5 insertions(+), 0 deletions(-)

commit ca9df759b4eda8f19a92b2e0b1092fa7b618d25b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 14 15:28:29 2007 +0100

    Change of email address.
    
    Update to my new email address and drop my old work one.

 AUTHORS |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 96ee8d5ebe6c6494a140c5424137f26de5fd5d85
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Apr 13 17:47:25 2007 -0700

    Update version to 1.4.5 after the 1.4.4 release

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ebba4a6d1467a8e5db5cc43eb08e8fc98c39b30a
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Apr 13 17:37:14 2007 -0700

    Increment version to 1.4.4 (and library versioning to 13:2:11)

 configure.in |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit e21a58ce4c2f550198de9ed35f7a37df764e7cdf
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Apr 13 17:36:31 2007 -0700

    NEWS: Add notes for cairo 1.4.4

 NEWS |   91 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 91 insertions(+), 0 deletions(-)

commit e1a1f6ff251582b2293098a55953f81a13bb9cc0
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Apr 13 16:37:52 2007 -0700

    AUTHORS: Update descriptions for Mathias Hasselmann and Chris Wilson
    
    Both have contributed a tremendous amount of effort to cairo 1.4.4.
    Well done!

 AUTHORS |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit ef3e13337e513cf470801cff5cd2b8fdcff1b6eb
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Apr 13 13:34:20 2007 -0700

    cairo-perf-diff: Use median not minimum to report differences
    
    Ideally, the minimum value would indicate the best possible performance,
    but I've encountered situations where a bogus minimum value gets lodged
    into the cached results for some reason, (and yet doesn't also get
    discarded as an outlier). The downside of that situation is that running
    more iterations never changes the result, so it's hard to fix the problem,
    (resulting in cairo-perf-diff feeling just plain broken as more runs
    change nothing).
    
    So let's try using the median time instead.

 perf/cairo-perf-diff-files.c |   10 +++++-----
 1 files changed, 5 insertions(+), 5 deletions(-)

commit 7ead3e64f17fe302398ec60c61eaeaae4e9b18cf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 13 16:34:31 2007 -0400

    [ROADMAP] Put back bug 10508 into 1.4.4 roadmap and mark it fixed
    
    Yay!

 ROADMAP |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 84c10a79ffd233a953434bd787dcfe57787552f8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 13 16:33:07 2007 -0400

    [cairo-pattern] Slightly hackish fix for bug #10508
    
    The so-attributed-to-X-server bug was that cairo maps the drawing
    region to the pattern space, rounds the box, and uploads only that
    part of the source surface to the X server.  Well, this only works for
    NEAREST filter as any more sophisticated filter needs to sneak a peek
    at the neighboring pixels around the edges too.
    
    The right fix involves taking into account the filter used, and the
    pattern matrix, but for most cases, a single pixel should be enough.
    Not sure about scaling down...
    
    Anyway, this is just a workaround to get 1.4.4 out of the door.  I'll
    commit a proper fix soon.

 src/cairo-pattern.c |   15 ++++++++++-----
 1 files changed, 10 insertions(+), 5 deletions(-)

commit fcf49a56130ede8c6aa9f84a8c59ecef54714b7b
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Apr 13 12:02:11 2007 -0700

    boilerplate: Cleanup conditional compilation ofcairo-quartz-boilerplate.c
    
    It's much nicer to use automake to conditionally compile a file,
    instead of always compiling it and conditionally having the compiler
    see an empty file.

 boilerplate/Makefile.am                        |    6 +++-
 boilerplate/cairo-boilerplate-private.h        |   45 ------------------------
 boilerplate/cairo-boilerplate.c                |    5 ++-
 boilerplate/cairo-quartz-boilerplate-private.h |   41 +++++++++++++++++++++
 boilerplate/cairo-quartz-boilerplate.c         |    6 +---
 5 files changed, 51 insertions(+), 52 deletions(-)

commit cea107c9800a4414f57a874dd52924efdff725ec
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Apr 13 11:28:21 2007 -0700

    Punt bug #10508 off of 1.4.4
    
    It looks like this is an X server bug, and we don't have an
    imminent fix. Meanwhile, the bug is avoidable by preferring
    to use xlib surface sources for transformed rendering to xlib
    instead of using image surface sources.

 ROADMAP |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit 4e3be548615f8ce8a45f0e887f19eb39ba21f8a4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 12 21:34:49 2007 -0400

    [cairo-pattern] Add a TODO item to code

 src/cairo-pattern.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit ec639449de9b630cdb4e7bca4ba8487b3a263184
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 12 18:16:52 2007 -0700

    Fix typo in loop control for computation of std. deviation
    
    Thanks to Chris Wilson for pointing out this problem.

 perf/cairo-stats.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 537a795b3b5698d4aa02f2f14e479e9bfd27fe0d
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 12 17:01:41 2007 -0700

    Remove ft-text-vertical-layout-type1
    
    This test can fail if the wrong font is loaded, but that's no
    different than many other text tests---so it doesn't really
    deserve special XFAIL treatment because of that.

 test/Makefile.am |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 04164c996cad242a25c2af596ffcd3b07ba19289
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 12 20:14:23 2007 -0400

    [cairo-surface] Make sure cairo_surface_get_font_options() fully initializes
    the font_options passed in.

 src/cairo-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 7224e1a6e6eb474a3809d07f9540c959b3da10b2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 12 17:54:32 2007 -0400

    [image] Set hint-metrics on in default font options

 src/cairo-image-surface.c |   12 +++++++++++-
 1 files changed, 11 insertions(+), 1 deletions(-)

commit 57434e249aba93f3b478a3c701e260093711d13f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 12 17:45:33 2007 -0400

    [xlib] Turn metrics-hinting on by default

 src/cairo-xlib-screen.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 8a4c108a4be6c4650cefe80e68d4c9974ccc27ba
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 12 22:19:03 2007 +0100

    Add a reference count to cairo_xlib_screen_info_t
    
    Due to the interaction between multiple threads showing glyphs and
    asynchronous CloseDisplays, it is possible for a font to maintain a
    cairo_xlib_screen_info_t beyond the CloseDisplay. The simple solution
    is to add a reference count in order to track the lifetime of the
    cairo_xlib_screen_info_t correctly.

 src/cairo-xlib-private.h |    6 +++
 src/cairo-xlib-screen.c  |   77 +++++++++++++++++++++++++++++++++++----------
 src/cairo-xlib-surface.c |    4 ++
 3 files changed, 70 insertions(+), 17 deletions(-)

commit 50ef5bcf7b5e6cc903f9247256fbd4439887ab5e
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 12 13:44:32 2007 -0700

    Revert cairo_public_warn addition to cairo.h
    
    This new feature isn't appropriate for a minor cairo release,
    (we're between 1.4.2 and 1.4.4 right now), but will make a
    lot of sense during 1.5.
    
    The code being reverted here was originally added with the
    following commit:
    
    	46eab95698e101e41407778eda22089b508a8984
    
    but this change reverts only the public-facing parts of it.

 configure.in |   11 -----------
 src/cairo.h  |   40 ++++++++++++++++++++--------------------
 2 files changed, 20 insertions(+), 31 deletions(-)

commit 35bb2152c06ef2621b14a8b2153cc327be8b43a1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 12 21:30:39 2007 +0100

    Hold the scaled_font->mutex whilst operating on the shared members.
    
    Obey the locking rules whilst resetting the scaled_font after a
    CloseDisplay.

 src/cairo-xlib-surface.c |   10 ++++++----
 1 files changed, 6 insertions(+), 4 deletions(-)

commit 97d897a7475f540ad901cb2a2cd6885e885ee02a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 12 21:17:42 2007 +0100

    cairo_xlib_close_display - drop the mutex whilst calling the hooks
    
    In order to avoid recursive dead-locks where whilst one thread holds the
    scaled font lock and is waiting on the XLockDisplay() another thread catches
    the CloseDisplay and then tries to acquire the scaled font lock, we drop
    the list mutex whilst processing the callbacks.

 src/cairo-xlib-screen.c |   33 ++++++++++++++++++++++++---------
 1 files changed, 24 insertions(+), 9 deletions(-)

commit 13b0aa669fd9ce6abc930730a941782e2baba215
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 12 13:29:56 2007 -0700

    Rebuild doc/public/Headers.mk
    
    Add a sort so that future update changes will be more legible.

 doc/public/Headers.mk  |   47 ++++++++++++++++++++++++-----------------------
 doc/public/Makefile.am |    3 ++-
 2 files changed, 26 insertions(+), 24 deletions(-)

commit ae80d375f829b076a8d1450c54b00b3750428366
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 12 13:02:26 2007 -0700

    Rename cairo-mutex-list.h to cairo-mutex-list-private.h
    
    Also add it (and cairo-mutex-private.h) to Makefile.am
    where they should have been.

 src/Makefile.am                |    2 +
 src/cairo-mutex-list-private.h |   50 ++++++++++++++++++++++++++++++++++++++++
 src/cairo-mutex-list.h         |   50 ----------------------------------------
 src/cairo-mutex-private.h      |    2 +-
 src/cairo-mutex.c              |    2 +-
 5 files changed, 54 insertions(+), 52 deletions(-)

commit 29adf591b7026092a809e9a27878b5b4e35051fb
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 12 12:47:27 2007 -0700

    move show-glyphs-many to the DISABLED_TESTS list
    
    And add a detailed comment explaining the reasons for disabling each
    test in the list.

 test/Makefile.am |   62 +++++++++++++++++++++++++++++++++++++----------------
 1 files changed, 43 insertions(+), 19 deletions(-)

commit c5b2f9d5c22c2259a11f0cbfbca8128cd3ac5794
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 12 01:22:49 2007 +0100

    cairo_xlib_screen_info_t - always perform an exact match
    
    This ensures that only one cairo_xlib_screen_info_t holds the
    close_display_hooks, an assumption used later.

 src/cairo-xlib-screen.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 8c9f0f607b992c47b555b5eaff3c599a8c1eac57
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 12 01:21:03 2007 +0100

    cairo-xlib-screen - avoid dereferencing a NULL screen.
    
    Do not initialize font options when setting up the
    cairo_xlib_screen_info_t corresponding to the display itself and not
    associated with any screen. This avoids a potential NULL dereferences.
    
    (Fixes https://bugs.freedesktop.org/show_bug.cgi?id=10517)

 src/cairo-xlib-screen.c |   12 +++++++-----
 1 files changed, 7 insertions(+), 5 deletions(-)

commit dc1de86680b59def00ce1e9f11997cf554cdfec1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 12 15:06:37 2007 -0400

    [ROADMAP] Add cairo_object_t

 ROADMAP |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 12b962d648d307d7a6b94035b6c4ffdeaadd68e2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 12 14:56:36 2007 -0400

    [ROADMAP] Mark bug #5777 as fixed

 ROADMAP |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e391d3eaee65d65f267f86d1ef1e1fd8898e6556
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 12 14:42:41 2007 -0400

    [test] Disable text-glyph-range that was crashing
    
    Disabled tests are defined in DISABLED_TESTS.  This has the benefit
    that they will still be buildable and be shipped.  Just not run by
    default.

 test/Makefile.am |   10 ++++++----
 1 files changed, 6 insertions(+), 4 deletions(-)

commit d3c7942fb271fe8d1df7ca3205b41601abdcb5c8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 12 14:22:02 2007 -0400

    [pixman] Mark some small functions that are called per-pixel inline
    
    These uses were introduced in the previous commit.

 pixman/src/fbcompose.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit e3b3d22999a130f7017e8e20a432a0d8a7f48f3b
Author: David Reveman <davidr@novell.com>
Date:   Thu Apr 12 14:14:12 2007 -0400

    [pixman] Fix fbcompose.c that was broken for some composite operations (#5777)

 pixman/src/fbcompose.c |  244 ++++++++++++++++++++++++++++++------------------
 1 files changed, 151 insertions(+), 93 deletions(-)

commit c8d2d1e8764c7ba754e46a3af68af2b4460d2e04
Author: Vladimir Vukicevic <vladimir@pobox.com>
Date:   Thu Apr 12 10:51:17 2007 -0700

    add licenses to test files

 test/composite-integer-translate-over-repeat.c |   26 ++++++++++++++++++++++++
 test/composite-integer-translate-source.c      |   26 ++++++++++++++++++++++++
 2 files changed, 52 insertions(+), 0 deletions(-)

commit e240048a14333d5c61a0d4ae5c30acd12bcb5805
Merge: 29a1fe1 977a898
Author: Michael Emmel <memmel@debian.localdomain>
Date:   Wed Apr 11 21:43:15 2007 -0700

    Merge branch 'master' of ssh+git://git.cairographics.org/git/cairo

commit 29a1fe12cf33a68713a4ddf7f59217fd40f6e967
Author: Michael Emmel <memmel@debian.localdomain>
Date:   Wed Apr 11 21:42:57 2007 -0700

    Fixed compile error from missing directfb.h include

 src/cairo-directfb.h |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 977a8982ab17760af0d69cb2e018ed50f4c7b992
Author: Kristian Hgsberg <krh@redhat.com>
Date:   Wed Apr 11 23:49:01 2007 -0400

    Add missing copyright notice.

 test/pixman-rotate.c |   26 ++++++++++++++++++++++++++
 1 files changed, 26 insertions(+), 0 deletions(-)

commit 9193b29645ef1625a599471e3b0cb5279d2c05cb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 11 23:30:31 2007 -0400

    [ROADMAP] Mark done items

 ROADMAP |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 284edb86484de8ccf3adf35d5cb9ff6ba64759ec
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 12 03:01:31 2007 +0100

    Do not raise an error if we fail to locate 'find' or 'xargs'
    
    Whilst not being able to delete all of the test output is messy it is
    however not fatal, so do not abort configuration simply because we
    cannot find either program.

 configure.in     |    6 ++----
 test/Makefile.am |   15 +++++++++------
 2 files changed, 11 insertions(+), 10 deletions(-)

commit a8974223dc6376a11588c6ecf1e54da5329b9c72
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 12 02:29:33 2007 +0100

    Check for find and xargs during configure
    
    Replace hard-coded find, xargs and rm with the paths determined during
    configure. This also gives us an opportunity to detect missing programs
    and inform the developer.

 configure.in     |    9 +++++++++
 test/Makefile.am |   12 ++++++------
 2 files changed, 15 insertions(+), 6 deletions(-)

commit 632ec8088cef5e9d4c2ff2886cfd550d706433e4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 11 20:18:11 2007 -0400

    [test] Add copyright headers for my tests

 test/extend-pad.c                 |   26 ++++++++++++++++++++++++++
 test/surface-pattern-scale-down.c |   26 ++++++++++++++++++++++++++
 test/surface-pattern-scale-up.c   |   26 ++++++++++++++++++++++++++
 test/surface-pattern.c            |   26 ++++++++++++++++++++++++++
 4 files changed, 104 insertions(+), 0 deletions(-)

commit 82397a631410af343f14cafdb31f48de9373f4a7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 12 00:55:04 2007 +0100

    Avoid using GNU find extensions.
    
    Replace the complex single find with a series of simple but POSIX correct
    equivalents.

 test/Makefile.am |   14 ++++++--------
 1 files changed, 6 insertions(+), 8 deletions(-)

commit 06382092e5e911ad2648f26e8ba5a6f8f7953e1b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 11 19:42:34 2007 -0400

    [pdiff] Ship gpl.txt

 test/pdiff/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit c8645c85de94b83fe2fd60a4d881cb639eb79b46
Merge: be98123 52435e9
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 11 16:38:46 2007 -0700

    Merge branch 'master' of git.cairographics.org:/git/cairo into cairo

commit 52435e99f31f06c18273a5a7351a2c21f7c0ecf6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 11 23:34:24 2007 +0100

    Move pixman_format_t from heap to stack allocations.
    
    pixman_format_t is a simple structure used in short-term allocations and
    suitable for on-stack allocation.
    
    Killing the pixman_format_create()/pixman_format_destroy() pairs avoid
    around 6% of the allocations during cairo-perf (e.g. 426,158 allocs out
    of a total of 7,063,469).

 pixman/src/icformat.c     |  118 +++++++++++++++------------
 pixman/src/icint.h        |   12 +---
 pixman/src/icrect.c       |    2 +-
 pixman/src/ictrap.c       |   36 +++-----
 pixman/src/ictri.c        |  199 +++++++++++++++------------------------------
 pixman/src/pixman.h       |   27 ++++---
 src/cairo-image-surface.c |  103 ++++++++++--------------
 7 files changed, 202 insertions(+), 295 deletions(-)

commit be98123b2c30a3102629afff74b9233c18e0535d
Merge: efedf57 a6506c6
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 11 16:02:08 2007 -0700

    Merge cached-scaled-font-in-error into cairo
    
    Conflicts:
    
    	src/cairo-scaled-font.c

commit a6506c67f24331c703dd56502a1bc4504b7b2311
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 23:27:52 2007 +0100

    Don't return scaled fonts in the error state from the cache.
    
    It is possible for a scaled_font to be flagged as in error, though only
    through a "true error" e.g. a malloc failure. However, when returning a font
    from the cache it should not be in error. So if we find a error font in the
    cache we remove it and return a new font.

 src/cairo-scaled-font.c |   55 +++++++++++++++++++++++++++-------------------
 1 files changed, 32 insertions(+), 23 deletions(-)

commit efedf57f43540ad79eddcc5ee79dc0d86846891e
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 11 15:25:18 2007 -0700

    cairo-truetype-subset.c: Add missing error checks and propagation
    
    These are all to satisfy new warnings caused by the preceding commit,
    (which added cairo_warn to various function tables). While fixing the
    propoagation, fix functions to declare a return type of cairo_status_t
    instead of int.

 src/cairo-truetype-subset.c |  178 +++++++++++++++++++++++++++++--------------
 1 files changed, 120 insertions(+), 58 deletions(-)

commit e6ca34e718859b40dc8eb75a6c68b056751a6deb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 22:59:10 2007 +0100

    Mark function tables with attribute(warn_unused_result)

 src/cairo-paginated-surface-private.h |    2 +-
 src/cairoint.h                        |   52 ++++++++++++++++----------------
 2 files changed, 27 insertions(+), 27 deletions(-)

commit 3bc413343a0b846c9501ee870db0424412aea701
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 11 01:08:17 2007 +0100

    Define cairo_public_warn in terms of cairo_public.
    
    By defining cairo_public_warn as an extension of cairo_public, the
    programmer need only to override cairo_public in order to export the
    complete API for different architectures i.e. existing configurations
    will continue to work with no alterations.

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 54134dd901d6dc94aa56d45486223e7d4f6ba569
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 10 23:09:13 2007 +0100

    Only enable warn-unused-result for recent gcc
    
    The attribute was introduced with gcc-3.4, but the ability to suppress
    warnings from misapplied attributes (-Wno-attributes) was only introduced
    later. Without the supression, gcc will emit tens of warnings for each
    compilation completely drowning the real errors that the programmer
    must see.

 configure.in        |   19 +++++++++++++++++--
 pixman/src/pixman.h |   10 +++++++---
 src/cairoint.h      |   13 ++++++-------
 3 files changed, 30 insertions(+), 12 deletions(-)

commit f53c2b418cb4a36fbc1c30cdb1bf0ba9dba77bd0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 9 16:24:11 2007 +0100

    _pixman_create_source_image() - check for malloc failure
    
    Fix an unchecked malloc by propagating the NULL pointer up to its callers,
    which were already checking for failures.

 pixman/src/icimage.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit d0745c08b782d79fc7ccfd59cab0ae841a56c428
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Thu Apr 12 06:32:29 2007 +0930

    PDF: Fix glyph positioning bug when glyphs are not horizontal
    
    Bug reported in
    http://lists.freedesktop.org/archives/cairo/2007-April/010337.html

 src/cairo-pdf-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e36794ad34282a4d671d7cc5527e9c650c2736fe
Merge: b692472 b745126
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 11 13:15:57 2007 -0700

    Merge branch 'warn-unused-result' into cairo

commit b745126a04c126acc695e8abb6372c1890b03f07
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 11 12:26:21 2007 +0100

    Use find | xargs to overcome shell command line limit.
    
    Once again we have hit the command line limit with the sheer volume of
    generated test output. So replace the glob with a find which has the
    additional advantage of only needing to walk the tree once to generate
    the file lists - this begins to be noticeable with such large directories.

 test/Makefile.am |   16 +++++++++-------
 1 files changed, 9 insertions(+), 7 deletions(-)

commit 61b8e346135f8b61b22257541c97b9f262c17826
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 11 11:59:27 2007 +0100

    Unexport fbSolidFillmmx and fbCopyAreammx.
    
    By unexporting these function we have exact control over their call sites
    and so can convert the initial guards into asserts which transforms the
    two functions to return unconditional success and hence conversion to
    void.

 pixman/src/fbmmx.c        |  215 +++++++++++++++++++++------------------------
 pixman/src/fbmmx.h        |   19 ----
 pixman/src/pixman-remap.h |    1 -
 3 files changed, 101 insertions(+), 134 deletions(-)

commit efee2087387ba49e36d8d6104c4e2dd3ffeba081
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 11 11:26:27 2007 +0100

    Propagate errors up through pixman_composite_trapezoids()
    
    Change the return type to indicate errors detected during
    pixman_composite_trapezoids() and add checking for failures during
    region ops.

 pixman/src/ictrap.c |   37 +++++++++++++++++++++----------------
 pixman/src/pixman.h |    2 +-
 2 files changed, 22 insertions(+), 17 deletions(-)

commit bec097b5e281fcf2453de53946e89c13b37ecd1a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 11 11:13:30 2007 +0100

    Propagate region errors from pixman_color_rects().
    
    Region operations within pixman_color_rects can fail, so cleanup and
    propagate.

 pixman/src/icrect.c       |   74 +++++++++++++++++++++++++++++++++-----------
 pixman/src/pixman.h       |    4 +-
 src/cairo-image-surface.c |    6 ++-
 3 files changed, 61 insertions(+), 23 deletions(-)

commit 909334ee00701e18b2f2033b1c3a27714ce988fb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 11 10:45:55 2007 +0100

    FbClipImage* should check for errors during region operations.
    
    Propagate the error from pixman_region_intersect().

 pixman/src/icimage.c |   18 ++++++++++++++----
 1 files changed, 14 insertions(+), 4 deletions(-)

commit 5b67efcbd8acad60080129e0a8a307671b18b4fc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 11 10:38:09 2007 +0100

    Propagate region failures during pixman_image_set_clip_region().
    
    Operating on regions can fail so check the status and return an error,
    after any necessary cleanup.

 pixman/src/icimage.c |   15 ++++++++++++---
 1 files changed, 12 insertions(+), 3 deletions(-)

commit e1abc3c26dd797ba9a888362713c5e5c1257867b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 11 09:51:58 2007 +0100

    Provide a private entry point for cairo_scaled_font_status().
    
    Add slim_hidden* markup for cairo_scaled_font_status() as we now use
    it internally.

 src/cairo-scaled-font.c |    1 +
 src/cairoint.h          |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

commit 054c28a09de2c8ec2dc7111d786bca41a94f5a83
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 11 02:26:08 2007 -0700

    boilerplate: Add error checking for cairo_surface_write_to_png

 boilerplate/cairo-boilerplate.c |    9 ++++++++-
 1 files changed, 8 insertions(+), 1 deletions(-)

commit 0a54ca2d2340c55896ee6951efe6917322813431
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 11 02:22:22 2007 -0700

    boilerplate: Add error checking for cairo_surface_set_user_data

 boilerplate/cairo-boilerplate.c |   26 ++++++++++++++++++++++----
 1 files changed, 22 insertions(+), 4 deletions(-)

commit 5661de9e1c93bd548b400de2619b6de6133d6483
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 11 02:08:36 2007 -0700

    SVG: Add missing error checking for calls to _cairo_output_stream_destroy

 src/cairo-svg-surface.c |   28 +++++++++++++++++++++-------
 1 files changed, 21 insertions(+), 7 deletions(-)

commit 8d5aa0fb8d3ac6302dd5e832425f3285ad84280a
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 11 02:03:10 2007 -0700

    SVG: Add missing error checks and propagation
    
    The function calls that get the new treatment here are:
    
    	_cairo_meta_surface_replay
    	_cairo_surface_show_page
    	_cairo_array_append
    
    all within _cairo_svg_surface_emit_meta_surface

 src/cairo-svg-surface.c |   39 +++++++++++++++++++++++++++++----------
 1 files changed, 29 insertions(+), 10 deletions(-)

commit 9c810625e796704e32e76caae18d2129219f46db
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 11 01:55:59 2007 -0700

    PDF: Added error checking and propagation for _cairo_array_append

 src/cairo-pdf-surface.c |   89 +++++++++++++++++++++++++++++-----------------
 1 files changed, 56 insertions(+), 33 deletions(-)

commit 5ae82deb6942fae1515740551c71e9eb24750a7c
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 11 01:47:21 2007 -0700

    PS: Add missing check for return value of _cairo_meta_surface_replay
    
    Here we have to change the return type of a couple of functions in
    order to propagate the error condition.

 src/cairo-ps-surface.c |   25 ++++++++++++++++++++-----
 1 files changed, 20 insertions(+), 5 deletions(-)

commit 8c31cca2af11c544a6028bf42c2187625b978f56
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 11 01:42:02 2007 -0700

    PS: Add missing checks for return value of _cairo_pattern_get_extents
    
    Propagation is extremely straightforward in this case.

 src/cairo-ps-surface.c |   11 +++++++++--
 1 files changed, 9 insertions(+), 2 deletions(-)

commit 01ac5f1aea298434b617d935512e2e72033989fd
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 11 01:35:11 2007 -0700

    Assert that cairo_matrix_invert succeeds rather than ignoring tis return value
    
    This assertion is safe as an internal consistency check thanks to
    the recent checks added to cairo_pattern_set_matrix.

 src/cairo-pdf-surface.c |    4 +++-
 src/cairo-ps-surface.c  |    5 ++++-
 2 files changed, 7 insertions(+), 2 deletions(-)

commit bd0b328f7e07b3a292190aef6f82622800230f6f
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 22:55:00 2007 -0700

    test/invalid-matrix: Add new test to exercise CAIRO_STATUS_INVALID_MATRIX paths
    
    This new test exercises every path where the user might possibly
    pass in an invalid matrix. Currently the test fails if no error
    is reported. Also, if an incorrect error is reported, (such as
    CAIRO_STATUS_NO_MEMORY instead of CAIRO_STATUS_INVALID_MATRIX),
    this is logged as a warning in invalid-matrix.log, but the test
    still passes.
    
    It would still be worthwhile to follow up quickly and fix those
    cases to propagate the correct error value.

 test/.gitignore       |    1 +
 test/Makefile.am      |    1 +
 test/invalid-matrix.c |  142 +++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 144 insertions(+), 0 deletions(-)

commit a6186604f794f2746089abc9c1716384c23aafc4
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 22:52:37 2007 -0700

    cairo_pattern_set_matrix: Validate that matrix is invertible
    
    If not, set an error in the pattern.

 src/cairo-pattern.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit 8e72852f0b9f2cd8558eb6c11acb326e73fceb12
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 22:51:44 2007 -0700

    _cairo_gstate_ensure_scaled_font: Add missing propagation for error hiding inside the scaled_font

 src/cairo-gstate.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 2f1221e0f225f305c3f9c8e7311fe8f3fecab34b
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 22:50:46 2007 -0700

    _cairo_gstate_ensure_scaled_font: Prefer to treat a pointer as a pointer, not a Boolean value

 src/cairo-gstate.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit dca69f73e3a11d397a701f82331d5aaa7194bd7f
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 17:16:39 2007 -0700

    Check (and assert) return values of cairo_matrix_invert
    
    Now that we have matrix validation at the time of _cairo_scaled_font_init
    we know that it is safe to invert this matrix.

 src/cairo-pdf-surface.c |    5 ++++-
 src/cairo-ps-surface.c  |    5 ++++-
 2 files changed, 8 insertions(+), 2 deletions(-)

commit 4ce2b62bcea49eccc0a4ee3781a115e4a34d3ad4
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 17:12:51 2007 -0700

    _cairo_scaled_font_init: Detect an invalid matrix and return an error.
    
    Also fix all callers to notice and propagate the error, (though
    some paths will still lose the CAIRO_STATUS_INVALID_MATRIX value
    due to a return value of NULL at one point).

 src/cairo-atsui-font.c  |    9 +++++++--
 src/cairo-scaled-font.c |   24 +++++++++++++++++-------
 src/cairo-win32-font.c  |   10 ++++++----
 3 files changed, 30 insertions(+), 13 deletions(-)

commit fd8c1e4dc851dd4ce8f84a3e47abdc4906c83b0f
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 16:43:50 2007 -0700

    Fix cairo_scaled_font_create to return a nil scaled font, not NULL

 src/cairo-scaled-font.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 0f0ed88ee26f22c1b0e0ec7c95b8a258d137dde4
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 23:01:55 2007 -0700

    paginated: Add missing error check for _cairo_surface_show_page
    
    Fixing this uncovered a leak of a CAIRO_INT_STATUS_UNSUPPORTED value
    up to cairo_show_page, (and similarly to cairo_copy_page). There was
    really no good reason for _cairo_surface_show_page and
    _cairo_surface_copy_page to be returning cairo_int_status_t. Fix
    this by simply handling the UNSUPPORTED return at the surface layer
    instead of the gstate layer.

 src/cairo-gstate.c            |   20 ++------------------
 src/cairo-paginated-surface.c |    4 +++-
 src/cairo-surface.c           |   16 ++++++----------
 src/cairoint.h                |    4 ++--
 4 files changed, 13 insertions(+), 31 deletions(-)

commit 381f0bcafc86cefa665368cbbe2026adda1d98c9
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 16:33:34 2007 -0700

    paginated: Add missing error check for _cairo_surface_get_extents

 src/cairo-paginated-surface.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 41911002d754f187618ab310ab93c85c4b038943
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 16:32:09 2007 -0700

    test-meta-surface.c: Fix memory leak on error recovery path.

 src/test-meta-surface.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit d954e4c1488c6478852dcc02641e66df1d4e9317
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 16:31:21 2007 -0700

    Fix indentation of CLEANUP_IMAGE label.

 src/cairo-paginated-surface.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit c011c37ba086f0c8d0dac6437318822927543955
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 16:30:43 2007 -0700

    paginated: Fix missing errors checks for _cairo_meta_surface_replay

 src/cairo-paginated-surface.c |   14 ++++++++++----
 1 files changed, 10 insertions(+), 4 deletions(-)

commit e73a55ad3cc30b0ea69379b12283515523015751
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 14:17:42 2007 -0700

    cairo-truetype-subset: Fix missing error propagation

 src/cairo-truetype-subset.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit 97b8fd8117160cfea9864c81cbb8a06b321618f1
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 14:16:01 2007 -0700

    cairo-truetype-subset: Check resturn value from _cairo_array_append and propagate

 src/cairo-truetype-subset.c |   28 ++++++++++++++++++++++++----
 1 files changed, 24 insertions(+), 4 deletions(-)

commit 84639e563ddfbd70ca48dcde4d3631418fd1cd82
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 14:11:43 2007 -0700

    test-meta-surface: Add missing check for error from _cairo_surface_get_extents

 src/test-meta-surface.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 866b2296b4a8b347011f1c8ae2e0f3a987a29d0c
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 14:09:56 2007 -0700

    test-meta-surface: Add missing checks for errors from _cairo_meta_surface_replay

 src/test-meta-surface.c |   10 ++++++++--
 1 files changed, 8 insertions(+), 2 deletions(-)

commit ec1fc931257ff90fe190c52ed0a3bed9f218c350
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 13:59:42 2007 -0700

    Add missing error check of return value of _cairo_path_fixed_close_path

 src/cairo-ft-font.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 3d21037a8fb69bde0765871f53fe461ac397367e
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 13:57:41 2007 -0700

    Add assertion check to quiet warn_unused_result warning.
    
    This is a somewhat useful internal consistency check.

 src/cairo-xlib-surface.c |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit 2f468677160080e9dd1db52a2ad7ca4adbf48149
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 13:53:58 2007 -0700

    Rename _cairo_pdf_surface_emit_toUnicode_stream to eliminate StudlyCaps
    
    Obviously, the new name is _cairo_pdf_surface_emit_to_unicode_stream which
    is consistent with the to_unicode_stream identifiers already existing in
    the implementation.

 src/cairo-pdf-surface.c |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

commit cc6c115e3c5b931be4ab0210ce7f8cecaccf6241
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 13:51:46 2007 -0700

    PDF: Check return value of _cairo_output_stream_destroy and propagate

 src/cairo-pdf-surface.c |   56 +++++++++++++++++++++++++++++-----------------
 1 files changed, 35 insertions(+), 21 deletions(-)

commit 8873928f09a78d3e6e8e57d5d4e0b94cf1f78ab7
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 13:40:04 2007 -0700

    PS: Add missing error checks for _cairo_output_stream_destroy

 src/cairo-ps-surface.c |   14 ++++++++++----
 1 files changed, 10 insertions(+), 4 deletions(-)

commit ab5eccbbf6cc361e864e0d75c0299cf7b5d6122d
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 13:28:48 2007 -0700

    Make _cairo_clip_reset void
    
    Yet another unconditionally successful function---so it's easier to return nothing.

 src/cairo-clip-private.h |    2 +-
 src/cairo-clip.c         |    4 +---
 src/cairo-gstate.c       |    4 +++-
 src/cairo-meta-surface.c |    2 +-
 4 files changed, 6 insertions(+), 6 deletions(-)

commit 7a0ae5b7057798106b5e1a82431178f6c5f148e7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 10 21:09:36 2007 +0100

    Disable warnings for cairo_*_reference functions.
    
    This class of functions modify their argument and return it as a
    *convenience* for the caller. For example, within cairo a common idiom is:
    
        cairo_object_reference (new);
        cairo_object_unreference (this->obj);
        this->obj = new;
    
    which updates the member to the new object irrespective of whether the
    new object is the same as the one being replaced. Other issues arise
    with subtypes, as the return type is the parent's and so require more
    complicated handling to compile cleanly.
    
    Disabling the warning is therefore preferred over adding code which
    decreases readibility and reduces maintainability. We need to make the
    compiler work for us, not against us...

 src/cairoint.h |   26 +++++++++++++++-----------
 1 files changed, 15 insertions(+), 11 deletions(-)

commit b82e595449e6eebbe6024454aaaaee31e6c43c73
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 9 15:31:28 2007 +0100

    pixman region operations can fail, propagate the error.
    
    Copying the clip region could fail, add error returns and propagate up
    the call stack.

 src/cairo-clip-private.h |    4 +-
 src/cairo-clip.c         |   53 +++++++++++++++++++++++++++++++++-------------
 src/cairo-gstate.c       |   14 +++++++++--
 src/cairo.c              |    2 +-
 src/cairoint.h           |    2 +-
 5 files changed, 53 insertions(+), 22 deletions(-)

commit b0a256aaf3f0fd4491a28fca797aef1ef4b1251d
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 13:07:09 2007 -0700

    Change _cairo_dtostr to have a void return type
    
    As previously implemented, there's no essential information in the
    return value from _cairo_dotostr, (the caller can simply use strlen
    to recompute the same value, which is what the only caller is already
    doing).
    
    There would be real information in a return value which would return
    the result from the call to snprintf for the case where the buffer is
    not large enough for the number being printed.

 src/cairo-output-stream-private.h |    2 +-
 src/cairo-output-stream.c         |    5 +----
 src/cairoint.h                    |    3 ---
 3 files changed, 2 insertions(+), 8 deletions(-)

commit 5303980f82431a9d084177998a68527b60610241
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 12:56:56 2007 -0700

    _cairo_output_stream_vprintf: Add assertion to detect internal inconsitency
    
    This will catch any inconsistency between the length of a single
    format specifier and the fixed size of the single_fmt buffer.

 src/cairo-output-stream.c |   14 +++++++++++---
 1 files changed, 11 insertions(+), 3 deletions(-)

commit 97a69bc82e023d139d997ef69c7eba50d2708686
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 12:13:27 2007 -0700

    Fix mis-indented _cairo_dtostr

 src/cairo-output-stream.c |   64 ++++++++++++++++++++++----------------------
 1 files changed, 32 insertions(+), 32 deletions(-)

commit 5c95800cded4e906baf8ddd10bfb4abc59151b13
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 12:13:10 2007 -0700

    Fix mis-indented _cairo_traps_init_box

 src/cairo-traps.c |   30 +++++++++++++++---------------
 1 files changed, 15 insertions(+), 15 deletions(-)

commit 57188b4dcbcc2625dfc1817f8fe3b8ffeade5dc5
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 12:06:09 2007 -0700

    Fix cairo_traps_t status handling
    
    Add a _cairo_traps_status function and use it instead of adding
    error checks to callers of _cairo_traps_add_trap and
    _cairo_traps_add_trap_from_points, (both of which are now given
    a void return type).

 src/cairo-bentley-ottmann.c |   14 +++++++-------
 src/cairo-traps.c           |   24 ++++++++++++++----------
 src/cairoint.h              |    5 ++++-
 3 files changed, 25 insertions(+), 18 deletions(-)

commit 67bc608603b9baf8de8bcd2fedcf8ec315432a37
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 11:11:32 2007 -0700

    Add missing error checking to _trace_mask_to_path
    
    Note: It looks like it would be convenient to shove a status value
    into cairo_path_fixed_t to reduce this sequence of error checks.
    But I tried that first, and it actually makes things worse overall
    due to many things like _cairo_path_fixed_move_to called by
    cairo_move_to where the result must be immediately checked anyway.
    So I've already rejected that approach.

 src/cairo-scaled-font.c |   54 +++++++++++++++++++++++++++++++++++-----------
 1 files changed, 41 insertions(+), 13 deletions(-)

commit b1086caf3b108b0df19f70a2b6df161ad51bb280
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 10 10:45:15 2007 -0700

    Add a status field to cairo_polygon_t
    
    Now, the functions to add new data to a polygon all become void,
    and there's a new _cairo_polygon_status call to query the status
    at the end of a sequence of operations.
    
    With this change, we fix many callerswhich were previously not
    checking the return values of _cairo_polygon functions by adding
    only a single call to _cairo_polygon_status rathern than several
    new checks.

 src/cairo-path-fill.c   |   36 ++++++++-------------------
 src/cairo-path-stroke.c |    8 +++++-
 src/cairo-pen.c         |    9 ++++---
 src/cairo-polygon.c     |   60 +++++++++++++++++++++++++---------------------
 src/cairoint.h          |   11 ++++++--
 5 files changed, 64 insertions(+), 60 deletions(-)

commit bff45ec9f90b5949a8ffa19cb03c140a08119e4d
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 9 17:44:12 2007 -0700

    Invert condition to more intuitive form.
    
    The idiom for checking the return value of malloc is:
    
    	if (pointer == NULL) { ... }
    
    rather than:
    
    	if (pointer != NULL) { ... }

 src/cairo-pattern.c |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

commit 01955a6e82ee28dd1377a3f2242aa2ddeebadac9
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 9 17:42:04 2007 -0700

    Rename ARRAY_LEN to ARRAY_LENGTH
    
    Yet another victim in my hunt against abbreviations within cairo's implementation.

 src/cairo-arc.c             |    2 +-
 src/cairo-atsui-font.c      |    4 ++--
 src/cairo-bentley-ottmann.c |    2 +-
 src/cairo-cff-subset.c      |    6 +++---
 src/cairo-hash.c            |    2 +-
 src/cairo-pattern.c         |    8 ++++----
 src/cairo-polygon.c         |    2 +-
 src/cairo-spline.c          |    4 ++--
 src/cairo-surface.c         |    2 +-
 src/cairo-svg-surface.c     |    2 +-
 src/cairo-traps.c           |    2 +-
 src/cairo-truetype-subset.c |    6 +++---
 src/cairoint.h              |    4 ++--
 13 files changed, 23 insertions(+), 23 deletions(-)

commit d317e8175de04c73c4a1f84db4a7e5354411ca06
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 9 17:38:17 2007 -0700

    Prefer FALSE over 0 for initializing a cairo_bool_t value

 src/cairo.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 9a33dab96988b94940a917921accc1bf19960a53
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 9 17:37:30 2007 -0700

    Fix an incorrectly indented condition

 src/cairo-xlib-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 4bfc8c98ccf29fc11d11ee35996be9aab5a63f36
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 9 17:36:41 2007 -0700

    ATSUI: Fix broken error checks for NULL surface
    
    The cairo_image_surface_create function never returns NULL so
    the previous error checks would never have triggered. The correct
    approach is to check the result of cairo_surface_status().

 src/cairo-atsui-font.c |    9 +++++----
 1 files changed, 5 insertions(+), 4 deletions(-)

commit bd98295100ce84a9dfffd16bc6e50ef0ced4d4bc
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 9 17:30:06 2007 -0700

    Add a couple of missing newline characters
    
    A return statement that's not at the end of a function really needs
    a line of whitespace after it.

 src/cairo-bentley-ottmann.c |    1 +
 src/cairo-type1-fallback.c  |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

commit a7d8e52cc4be2376429f567abc2be853da7d5fbc
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 9 17:24:18 2007 -0700

    Cleanup multi-line if condition
    
    The standard idiom of assigning to a local status variable looks much,
    much nicer here.

 src/cairo-path.c |   20 +++++++++++---------
 1 files changed, 11 insertions(+), 9 deletions(-)

commit 7c97696af98a6dab9e0c5cdc72ff08c19892c95f
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 9 17:16:30 2007 -0700

    Make _cairo_path_bounder_add_point void
    
    Yet another function that cannot fail under any circumstances.

 src/cairo-path-bounds.c |    6 ++----
 1 files changed, 2 insertions(+), 4 deletions(-)

commit 93776772edbadeab90ea199a115750310be91e4e
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 9 17:15:33 2007 -0700

    Make _cairo_matrix_compute_scale_factors void
    
    Yet another function that cannot fail under any circumstances.

 src/cairo-matrix.c |    4 +---
 src/cairoint.h     |    2 +-
 2 files changed, 2 insertions(+), 4 deletions(-)

commit d5b35d7d7666634f1f98d6c0141a2a29976e7e2f
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 9 17:12:11 2007 -0700

    Make _cairo_pen_init_empty void
    
    Yet another function that cannot fail under any circumstances.

 src/cairo-pen.c |    4 +---
 src/cairoint.h  |    2 +-
 2 files changed, 2 insertions(+), 4 deletions(-)

commit 9077da99abd163ebd0c52e8375e6f40ce60cf7d2
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 9 17:09:51 2007 -0700

    Make _cairo_gstate_user_to_device (and friends) void.
    
    This is just multiplication after all, so there's nothing that can fail.
    And we can get rid of a lot of useless error-checking code this way.
    The corrected functions are:
    
    	_cairo_gstate_user_to_device
    	_cairo_gstate_user_to_device_distance
    	_cairo_gstate_device_to_user
    	_cairo_gstate_device_to_user_distance

 src/cairo-gstate.c |   16 +++----------
 src/cairo.c        |   62 +++++++++++++++------------------------------------
 src/cairoint.h     |    8 +++---
 3 files changed, 26 insertions(+), 60 deletions(-)

commit 628ec8eb91fb246b8a44be3451163a5d8592a860
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 9 17:03:29 2007 -0700

    Make _cairo_gstate_identity_matrix void
    
    Now that we have the warn_unused_result attribute enabled, (thanks
    Chris!), it's actually harmful to have a function return an
    uncoditional value of CAIRO_STATUS_SUCCESS. The harm is that
    it would force lots of unnecessary error-checking paths that
    just add clutter.
    
    It is much better to simply give a function that cannot fail
    a return type of void.

 src/cairo-gstate.c |    9 ++-------
 src/cairo.c        |    6 +-----
 src/cairoint.h     |    2 +-
 3 files changed, 4 insertions(+), 13 deletions(-)

commit 90803eca0fa8d49c54c465580707009aae382d28
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 4 11:17:23 2007 +0100

    Implement clone_surface for test-fallback-surface.
    
    A few tests were failing due to clip_init_deep_copy() not being able to
    clone the target surface. Before propagating the failure, this was being
    silently ignored.
    
    Copy the simple implementation from cairo-image-surface.

 src/test-fallback-surface.c |   22 +++++++++++++++++++++-
 1 files changed, 21 insertions(+), 1 deletions(-)

commit 4456ecbf2694f0b71a431353e0dea0515b72926b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 23:40:31 2007 +0100

    Fix detection of FcFini().
    
    It is customary to check for a FontConfig function in the FontConfig
    library rather than the FreeType library.

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit cd2394c076e2f6b14a9a3281461026b811692f2e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 3 21:50:15 2007 +0100

    Free the bitmap->buffer on failure
    
    Currently if the ownership of the bitmap->buffer is passed to
    _get_bitmap_surface() then the status of the buffer is inconsistent
    should the function detect an error (i.e. CAIRO_STATUS_NO_MEMORY).
    Fix it up that should we encounter an error and we own the buffer then
    we always free it on behalf of the caller.

 src/cairo-ft-font.c |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

commit ac33953a81114dddc25ceb57f6df57e01d4d937b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 23:37:29 2007 +0100

    Correct handling of a malloc failure during pattern_create_in_error()
    
    Confusion had been introduced as to who provided the fixup after
    the malloc failed which resulted in a NULL deference whilst checking for
    an erroneous pattern in _cairo_pattern_create_in_error.

 src/cairo-pattern.c |   24 ++++++------------------
 1 files changed, 6 insertions(+), 18 deletions(-)

commit b6924722b8c8e5f4356d3c8ba438a702ffb8a5ed
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 8 23:35:01 2007 -0400

    [cairo-skiplist] Use one random number per insertion, instead of two

 src/cairo-skiplist-private.h |    3 +++
 src/cairo-skiplist.c         |    7 +++++--
 2 files changed, 8 insertions(+), 2 deletions(-)

commit ce1651f1ea57b53ad91f5115524d33f6424d5797
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 3 16:53:17 2007 +0100

    Free the pixman_image if we fail to wrap it with a surface.

 src/cairo-image-surface.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit bd99507f15dd8a2d162f13e691cc5f8d71795577
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 30 14:00:50 2007 +0100

    Initialise cairo_spline_t to use its embedded buffer.
    
    Currently the code defaults to setting its points to NULL and fixing it up
    on the first add_point() to use the embedded buffer. Skip this extra step
    by initialising points to the embedded buffer.

 src/cairo-spline.c |   24 +++++++-----------------
 1 files changed, 7 insertions(+), 17 deletions(-)

commit 6daaf8a89d24fb3022687fe8d52c8001dc270265
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 8 23:32:27 2007 -0400

    [cairo-skiplist] Reduce MAX_LEVEL from 31 to 15
    
    The probability that a node of level L is generated is
    0.25^(L-1) * 0.75.  It means, a node of level 15 or
    more will be used with a probability of about 3 * 10^-9.
    That's really rare...
    
    Actually that's not still true, because the level of a new
    node is capped by current max-level plus one.  So to really
    get a node with a level of 15 one should first get a node
    of level 2, then 3, then 4, ..., finally 15.  Now that's
    REALLY rare.
    
    And guess what, the skiplist only start behaving bad with a
    max level cap of MAX_LEVEL when having on the order of
    4**MAX_LEVEL items in it.  I really hope we don't get there.

 src/cairo-skiplist-private.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit a7de9501f6d0f3a574c5246b81d78aa749b64e67
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 8 23:24:50 2007 -0400

    [cairo-skiplist] Group levels two-by-two in freelists
    
    Most memory allocators allocate in multiples of twice the size of
    a pointer.  So there is no point in keeping freelists for both
    even and odd levels.  We now round odd levels up to the next
    even level for freelist computations.  This reduces the number of
    node mallocations.

 src/cairo-skiplist-private.h |   10 +++++++++-
 src/cairo-skiplist.c         |   21 ++++++++++++++-------
 2 files changed, 23 insertions(+), 8 deletions(-)

commit b2280c5ac25e752c4462acdc8d2ded916fce7c34
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 30 11:24:18 2007 +0100

    Do not overwrite cr->status
    
    The idiom for cairo.c is to do
        cr->status = _cairo_op ();
        if (cr->status) _cairo_set_error (cr, cr->status);
    
    Unfortunately a trivial mistake for a _cairo_op () is to call a cairo_op ()
    and forget to check cr->status but return CAIRO_STATUS_SUCCESS which will
    mask the earlier error.
    
    Obviously this is a bug in the lower level but the impact can be reduced
    by chaning cairo.c to use a local status variable for its return:
        cairo_status_t status = _cairo_op ();
        if (status) _cairo_set_error (cr, cr->status);

 src/cairo.c |  537 +++++++++++++++++++++++++++++++++++------------------------
 1 files changed, 319 insertions(+), 218 deletions(-)

commit 14ac5dd78b38aaaa118e8ac39fa50f485bff516d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 23:11:57 2007 +0100

    Return the correct status from _cairo_pen_stroke_spline().
    
    The return value is shared before the normal cleanup and error paths,
    so do not simply return a hard-coded CAIRO_STATUS_SUCCESS.

 src/cairo-pen.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b823e2f68ff613b2c4f537aba6bbbcf413412eb2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 23:09:31 2007 +0100

    cairo-xlib-surface - propagate status returns.
    
    These were found during a cairo_static pass on an alternative branch...
    
    A critical one in particular was setting the have added glyph flag to
    TRUE even if _cairo_xlib_surface_add_glyph() fails. This can cause an
    application crash due to a RenderBadGlyph error later when the scaled
    font is cleaned and we attempt to remove the glyph.

 src/cairo-xlib-surface.c |   44 +++++++++++++++++++++++++++++++-------------
 1 files changed, 31 insertions(+), 13 deletions(-)

commit 4a624b8e8b0a14dd03e551b28257d8a54b9ee6f6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 29 13:36:07 2007 +0100

    Remove the entry if we return an error code during _cair_hash_table_insert.
    
    Previously if we detected an error during resize we would report a
    failure to insert the entry into the hash table having already done so.

 src/cairo-hash.c |   11 +++++++++--
 1 files changed, 9 insertions(+), 2 deletions(-)

commit 1cdb54f8835446b23769b7771445201a9b5d165e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 29 09:11:21 2007 +0100

    Reorder cleanup cairo_xlib_surface_show_glyphs()
    
    _cairo_pattern_release_surface() asserts that it is passed a pattern
    surface. This itself is bad as breaks the symmetry with
    _cairo_pattern_acquire_surface under() error conditions, however reorder
    the cleanup to avoid this assertion.

 src/cairo-xlib-surface.c |   22 ++++++++++++----------
 1 files changed, 12 insertions(+), 10 deletions(-)

commit a1331fb043051ac10f8555b2ad2fe85183db96df
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 28 19:32:25 2007 +0100

    Detect failure to allocate glyphs during _cairo_scaled_font_init()
    
    If _cairo_cache_create fails, return CAIRO_STATUS_NO_MEMORY.

 src/cairo-scaled-font.c |    9 ++++++---
 1 files changed, 6 insertions(+), 3 deletions(-)

commit 1237eedff3d557b94db9c940fd8de48be9ba41ba
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 22:56:43 2007 +0100

    Check for error whilst trying to advance along a text string.
    
    The text perf-case tries to fill the region with a single text string,
    but fails to detect when the current point does not advance due to an
    error. This causes the perf-case to enter an infinite loop, so we break
    out when the cairo_status() has been set.

 perf/text.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit ea4945850ae3ce3614bcadc0fa413eb836344430
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 16 20:04:26 2007 +0000

    Avoid using substituted surfaces for xlib operations.
    
    Detect when a substitute image surface is returned for a solid pattern,
    and avoid mixed image/xlib composite operations. This can happen for example
    if there is a resource allocation failure during creating a similar surface.

 src/cairo-xlib-surface.c |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

commit 751976970bb0ec9b810c1f58a05d53b7bfb7d90f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 16 19:35:02 2007 +0000

    Handle failure to allocate a GC.

 src/cairo-xlib-surface.c |   51 ++++++++++++++++++++++++++++++---------------
 1 files changed, 34 insertions(+), 17 deletions(-)

commit c6055dc349c3f96e8d6f0e4166540871a59cb0e2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 22:50:44 2007 +0100

    Reset cairo_scaled_font_map after freeing.
    
    Along the error path the global font map was freed but not reset,
    causing segfaults on any subsequent use of a cairo_scaled_font_t.

 src/cairo-scaled-font.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 65de47d8bc7865c6bf6318fd7bd861acf4e4af05
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 22:47:19 2007 +0100

    cairo-bentley-ottmann - check init for failure
    
    This was found during a cairo_static pass on an alternative branch...
    Add the trivial error propagation for _cairo_bo_event_queue_init()

 src/cairo-bentley-ottmann.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit b4cb0306b4415f2ddf0acd84043b72c8b8485726
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 28 15:55:06 2007 +0100

    cairo-type1-fallback - propagate error returns
    
    Add status returns in order to propagate a matrix inversion failure
    up through the call stack.

 src/cairo-type1-fallback.c |   25 ++++++++++++++++++-------
 1 files changed, 18 insertions(+), 7 deletions(-)

commit b29d78dda169ee58b82cdbd04e3af2eedcc58edd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 28 15:43:37 2007 +0100

    cairo-svg-surface - propagate some error returns
    
    Add status returns to functions in order to propagate an error up
    the call stack.
    
    For the emit_*_pattern we add a new status return even when when
    the functon return CAIRO_STATUS_SUCCESS unconditionally in order for
    the caller to handle all cases in a consistent manner.

 src/cairo-svg-surface.c |   56 +++++++++++++++++++++++++++++++----------------
 1 files changed, 37 insertions(+), 19 deletions(-)

commit 3f7ca6ef5b09263607ff2f9862950393815c5d2c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 28 14:57:44 2007 +0100

    cairo-pen - cairo_pen_init() can fail propagate its error.
    
    Add status returns in order to propagate an intialisation failure
    back up the call chain.

 src/cairo-path-stroke.c |   23 +++++++++++++++--------
 1 files changed, 15 insertions(+), 8 deletions(-)

commit 67f13b3518c5fc98d1e3fb184bc6c2f5ea96f4c9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:54:41 2007 +0100

    cairo-bentley-ottmann/skip-list - catch and propagate out-of-memory errors
    
    The skip list inserts could return NULL indicating an out-of-memory error.
    In order to handle this, propagate the error up the call stack.

 src/cairo-bentley-ottmann.c |   50 ++++++++++++++++++++++++++++++-------------
 src/cairo-skiplist.c        |    2 +
 2 files changed, 37 insertions(+), 15 deletions(-)

commit 293122279fd87098a00386bb4c9310f3fc1bb373
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:50:48 2007 +0100

    cairo-path-stroke - add trivial missing status checks
    
    Propagate the error status.

 src/cairo-path-stroke.c |   33 +++++++++++++++++++++++++--------
 1 files changed, 25 insertions(+), 8 deletions(-)

commit 2f2bff038cb0e59865a0405b19da4805213d718e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:47:01 2007 +0100

    buffer-diff - check for any errors whilst writing the png
    
    Propagate any errors from writing out the png.

 test/buffer-diff.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit 79424fc64640db4b518eaf4a23477f1bbc26db5a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:45:58 2007 +0100

    cairo - add missing status checks
    
    Add a few missing status checks and set the error on the context when
    applicable.

 src/cairo.c |   74 ++++++++++++++++++++++++++++++++++++++--------------------
 1 files changed, 48 insertions(+), 26 deletions(-)

commit a34a32fd99145733df9290f7c72bf7d9759e212b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:36:42 2007 +0100

    cairo-type1-fallback - check for an error during cleanup
    
    The cleanup path is shared between the error path and the true path, and
    so any error along it can not be ignored.

 src/cairo-type1-fallback.c |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

commit d2efadc84d0716498cec0510916f5375fbb7acf0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:35:28 2007 +0100

    cairo-svg-surface - propagate error returns
    
    Add a couple of missing checks for error statues.

 src/cairo-svg-surface.c |   34 ++++++++++++++++++++++++----------
 1 files changed, 24 insertions(+), 10 deletions(-)

commit 02264b40f5ab4831e52c0ad156471045c62c9e85
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:34:25 2007 +0100

    cairo-surface-fallback - propagate error returns
    
    _cairo_surface_composite() can fail so check for and error return and
    propagate.

 src/cairo-surface-fallback.c |   44 ++++++++++++++++++++++++-----------------
 1 files changed, 26 insertions(+), 18 deletions(-)

commit 76b27fb0e81cc557c7348f6ba98b72552d781aed
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:33:00 2007 +0100

    cairo-ps-surface - add a couple of status checks
    
    Handle a couple more error returns.

 src/cairo-ps-surface.c |   54 +++++++++++++++++++++++++++--------------------
 1 files changed, 31 insertions(+), 23 deletions(-)

commit 619425a8b3bff79fb453f4b84e3a8e75db369b40
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:29:19 2007 +0100

    cairo-polygon - trivial propagation of error status
    
    _cairo_polygon_move_to() returns an error status so use it.

 src/cairo-polygon.c |    8 +++-----
 1 files changed, 3 insertions(+), 5 deletions(-)

commit 4b195779a465f69b035e9fd6695ef5c137a6b342
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:28:25 2007 +0100

    cairo-pen - trivial propagation of error status
    
    Add a couple of missing checks for error statuses and correct the
    error path cleanup for _cairo_pen_stroke_spline().

 src/cairo-pen.c |   24 +++++++++++++++++-------
 1 files changed, 17 insertions(+), 7 deletions(-)

commit 66d3e252025cf7f8a624fad83bffa1488a98910d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:26:33 2007 +0100

    cairo-pdf-surface - propagate error status
    
    Catch and propagate any error status.

 src/cairo-pdf-surface.c |   25 +++++++++++++------------
 1 files changed, 13 insertions(+), 12 deletions(-)

commit b32a5b1dc6d66a4477fb8df1461821a27192600f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:25:46 2007 +0100

    cairo-pattern - propagate status
    
    Catch, cleanup and propagate after an error return.

 src/cairo-pattern.c |   10 ++++++++--
 1 files changed, 8 insertions(+), 2 deletions(-)

commit fd49bbb4b21b73247b4d391c2cb1b028a596f6eb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:24:59 2007 +0100

    cairo-path - check for failure during _cairo_path_fixed_interpret
    
    Catch an error return from _cairo_path_fixed_interpret() and return
    it. Similary check for an error code in cairo_status() before returning
    success.

 src/cairo-path.c |   55 +++++++++++++++++++++++++++++++----------------------
 1 files changed, 32 insertions(+), 23 deletions(-)

commit 814830f63b72f69198e92564c53f2683e5bda269
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:22:56 2007 +0100

    cairo-path-fill - trivial missing unused result
    
    Actually assign the result that is tested on the next line...

 src/cairo-path-fill.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 7ab1f62c60141d5c0e989d55f4a49537a6b52c4d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:21:49 2007 +0100

    cairo-paginated-surface - fix up the trivial unused result
    
    Check for status returns and propagate, cleaning up as necessary.

 src/cairo-paginated-surface.c |   22 ++++++++++++++++------
 1 files changed, 16 insertions(+), 6 deletions(-)

commit 78c0d62ba7c650a6dc8137e6d1375e21f9477c2b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:20:42 2007 +0100

    cairo-meta-surface - propagate trivial status return
    
    _cairo_path_fixed_init_copy() could fail so propagate it's status.

 src/cairo-meta-surface.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 75cc5e04d5b854a1eefe116c2be4a3c2bb21d6ac
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:19:49 2007 +0100

    cairo-image-surface - propagate error returns from pixman.
    
    pixman does occasionally return an error - in such circumstances we
    should propagate it.

 src/cairo-image-surface.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit dee9a53029bd3e42c60a855edfb54591bf1782b5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:18:30 2007 +0100

    cairo-gstate - fix the trivial unchecked returns
    
    Check for an error return and propagate.

 src/cairo-gstate.c |   17 +++++++++++++----
 1 files changed, 13 insertions(+), 4 deletions(-)

commit de264af2c659b32c8bc71060da85037ac7e1d44f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:17:26 2007 +0100

    cairo-ft-font - handle trivial failures
    
    Catch the status return, cleanup and propagate the error.

 src/cairo-ft-font.c |   82 +++++++++++++++++++++++++++++++++-----------------
 1 files changed, 54 insertions(+), 28 deletions(-)

commit 14c8dfb0b9bcc26a02057e5636d8bf35c3b4ef29
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 9 15:03:34 2007 +0100

    cairo-clip - handle trivial pixman failures
    
    Detect the simple cases when pixman returns an error, ie an OOM
    condition, and propagate the error status.

 src/cairo-clip.c |   18 ++++++++++++------
 1 files changed, 12 insertions(+), 6 deletions(-)

commit 274c20c27a094c05afa62579cacb5749013abd60
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 21:14:09 2007 +0100

    cairo-boilerplate - handle failure to set user data
    
    After failing to set the user data on a surface, clean up and return NULL.

 boilerplate/cairo-boilerplate.c |   10 +++++++++-
 1 files changed, 9 insertions(+), 1 deletions(-)

commit 46eab95698e101e41407778eda22089b508a8984
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 8 20:50:08 2007 +0100

    Add attribute(warn_unused_result)
    
    This adds a compiler check that the function result is used by the caller
    and enables it by default for all cairo_private functions and for public
    API that returns a cairo_status_t.
    
    It has been discussed that to extend the warnings to all functions, a
    new function type could been introduced to cover static functions:
    cairo_static. This has not been done at the present time in order to
    minimise the churn and focus on the more common errors.
    
    In order to reduce the warning spew generated by gcc for invalid use of
    this attribute, -Wno-attributes is added to CFLAGS. This has the
    unfortunate side-effect of masking future warnings for all attributes -
    be warned!

 configure.in         |   13 ++++++++++++-
 pixman/configure.in  |    3 ++-
 pixman/src/pixman.h  |    2 +-
 src/cairo.h          |   40 ++++++++++++++++++++--------------------
 src/cairoint.h       |    8 +++++---
 src/check-headers.sh |    2 +-
 6 files changed, 41 insertions(+), 27 deletions(-)

commit 9da86e4a386505288c3a933f30583abf7706c950
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 8 22:56:30 2007 -0400

    Add references to the skiplist paper

 BIBLIOGRAPHY                 |    8 ++++++++
 src/cairo-skiplist-private.h |    6 ++++++
 2 files changed, 14 insertions(+), 0 deletions(-)

commit ad0e13805c036941a03e49215b1bb525b4666033
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 8 22:50:51 2007 -0400

    [cairo-skiplist] Clarify MAX_LEVEL in comment, and adjust accordingly
    
    Reading the code, MAX_LEVEL is in fact what could have been named
    MAX_NUM_LEVELS.  That is, it is maximum possible level plus one.
    All code is correct: it uses MAX_LEVEL as array size and never produces
    a level of MAX_LEVEL.  The comment is fixed.

 src/cairo-skiplist.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e8072e6e0ac86b2b0baefb54dcc551ee548164af
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 8 22:03:46 2007 -0400

    [test,perf] Make them rebuild boilerplate when src is changed

 perf/Makefile.am |    2 +-
 test/Makefile.am |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 6f9309221704a799ca36917c65abfc0941119b13
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 8 21:58:54 2007 -0400

    Rename pixman_region_uninit to pixman_region_fini

 pixman/src/fbcompose.c       |    2 +-
 pixman/src/fbpict.c          |    2 +-
 pixman/src/icimage.c         |    8 ++++----
 pixman/src/icrect.c          |    4 ++--
 pixman/src/ictrap.c          |    4 ++--
 pixman/src/pixman-remap.h    |    2 +-
 pixman/src/pixman.h          |    2 +-
 pixman/src/pixregion.c       |    2 +-
 src/cairo-clip.c             |   12 ++++++------
 src/cairo-glitz-surface.c    |    4 ++--
 src/cairo-surface-fallback.c |    6 +++---
 src/cairo-surface.c          |    4 ++--
 src/cairo-traps.c            |    2 +-
 13 files changed, 27 insertions(+), 27 deletions(-)

commit 4f8a04b1c93630c2556db5e3a0657076167e1ea3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 8 21:55:45 2007 -0400

    [pixman-image] Simply initialization given that there is no clip

 pixman/src/icimage.c |   32 +++++++++-----------------------
 1 files changed, 9 insertions(+), 23 deletions(-)

commit df9ea31df5857ee7aacd6ba002881233e9c4a9b4
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Thu Mar 15 14:42:13 2007 +0100

    [pixman-region] Separate pixman_region_init
    
    Most of the time pixman_region_init is called without any extents, and
    followed by a pixman_region_union_rect, used to used to initialize
    rectangular regions. pixman_region_union_rect is not that cheap, but
    the sequence is called quite often. So it should be worth introducing
    a specialized and fast function for this sequence.
    
    This introduces pixman_region_init_rect.  This new function makes
    _cairo_region_init_from_rectangle obsolete.
    
    Also removes the extent argument from pixman_region_init as it was
    called with NULL most of the time.  A pixman_region_init_with_extents
    is added for the general case.

 pixman/src/fbcompose.c       |    3 +--
 pixman/src/fbpict.c          |    3 +--
 pixman/src/icimage.c         |   25 +++++++++++--------------
 pixman/src/icrect.c          |   10 +++++-----
 pixman/src/ictrap.c          |    6 ++----
 pixman/src/pixman-remap.h    |    2 ++
 pixman/src/pixman.h          |    7 ++++++-
 pixman/src/pixregion.c       |   37 +++++++++++++++++++++----------------
 src/cairo-clip.c             |   18 ++++++++++--------
 src/cairo-glitz-surface.c    |    2 +-
 src/cairo-region.c           |   25 -------------------------
 src/cairo-surface-fallback.c |    7 +++----
 src/cairo-surface.c          |   16 ++++++----------
 src/cairo-traps.c            |    2 +-
 src/cairoint.h               |    4 ----
 15 files changed, 70 insertions(+), 97 deletions(-)

commit 9436959a838412b5336279c7d5c35bf4e586f984
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Wed Mar 14 01:37:28 2007 +0100

    Update function map

 pixman/src/pixman-remap.h |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

commit 99f4bfada807aa7062051bb81fd29d4d3a87fbd1
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Wed Mar 14 01:35:40 2007 +0100

    Remove abdoned pixman_region_{create,destroy}

 pixman/src/pixman.h    |    6 ------
 pixman/src/pixregion.c |   25 -------------------------
 2 files changed, 0 insertions(+), 31 deletions(-)

commit 4532c023e0810c2e8d0d5928074bcae8865c5e14
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Wed Mar 14 01:31:53 2007 +0100

    Make clientClip region static, remove abdoned CT_PIXMAP code paths

 pixman/src/icimage.c |  208 ++------------------------------------------------
 pixman/src/icimage.h |    2 +-
 pixman/src/icint.h   |    2 +-
 3 files changed, 9 insertions(+), 203 deletions(-)

commit 65f269f3a4148a6cf3b2158ea893bb8452c3ad5e
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Wed Mar 14 01:24:11 2007 +0100

    Avoid pixman_region_create in pixman_composite{,General}

 pixman/src/fbcompose.c |   32 ++++++++--------------
 pixman/src/fbpict.c    |   32 ++++++++--------------
 pixman/src/icimage.c   |   68 +++++++++++++++++-------------------------------
 3 files changed, 48 insertions(+), 84 deletions(-)

commit 82cc451148eec1703d001f2b814d5b3712d31727
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Wed Mar 14 01:21:18 2007 +0100

    Make clip regions of pixman_image_t static

 pixman/src/fbcompose.c |   38 ++++++++--------
 pixman/src/icimage.c   |  121 +++++++++++++++++++++++++++---------------------
 pixman/src/icimage.h   |    8 ++--
 pixman/src/icrect.c    |    7 ++-
 4 files changed, 96 insertions(+), 78 deletions(-)

commit 041371533746d4aae3245a74459c0b0d1a4628fb
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Wed Mar 14 00:59:36 2007 +0100

    Avoid pixman_region_create in pixman_color_rects

 pixman/src/icrect.c |   32 ++++++++++++++++----------------
 1 files changed, 16 insertions(+), 16 deletions(-)

commit 5a6ca4794bfd96026937cd8736a8bcb723b2b2ff
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Wed Mar 14 00:55:46 2007 +0100

    Replace pixman_region_create_simple by pixman_region_init

 pixman/src/ictrap.c    |   14 +++++++-------
 pixman/src/pixman.h    |    3 ---
 pixman/src/pixregion.c |   13 +------------
 3 files changed, 8 insertions(+), 22 deletions(-)

commit f9057f27520842159f73dbfd6de49cb8feee1c39
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Wed Mar 14 00:48:43 2007 +0100

    Avoid pixman_create_region in glitz-surface

 src/cairo-glitz-surface.c |   49 ++++++++++++++++++++++-----------------------
 1 files changed, 24 insertions(+), 25 deletions(-)

commit 82cbb6886cf621fd6b10be5e04ce11ff05127fc6
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Wed Mar 14 00:46:34 2007 +0100

    Remove redundant _cairo_clip_fini function

 src/cairo-clip-private.h |    3 ---
 src/cairo-clip.c         |   17 -----------------
 src/cairo-gstate.c       |    4 ++--
 src/cairo-meta-surface.c |    2 +-
 4 files changed, 3 insertions(+), 23 deletions(-)

commit 5ae309c4561418fb057a8049f047ffcb03f3b698
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Wed Mar 14 00:40:44 2007 +0100

    Avoid pixman_region_create in _cairo_traps_extract_region

 src/cairo-traps.c |   18 +++++++++---------
 src/cairoint.h    |    6 +++---
 2 files changed, 12 insertions(+), 12 deletions(-)

commit 241482b5505427d221f4aaa970e7500a78fb2da1
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Wed Mar 14 00:28:49 2007 +0100

    Avoid malloc in _cairo_region_create_from_rectangle

 src/cairo-clip.c             |   42 +++----
 src/cairo-region.c           |   34 +++---
 src/cairo-surface-fallback.c |  250 ++++++++++++++++++++++--------------------
 src/cairo-surface.c          |   52 +++++----
 src/cairoint.h               |    5 +-
 5 files changed, 199 insertions(+), 184 deletions(-)

commit efc9775149c4c87645c58235c7626cc4f72e69c3
Author: Mathias Hasselmann <mathias@pergamaunz.(none)>
Date:   Tue Mar 13 23:58:14 2007 +0100

    Make sure clip->region is always initialized

 src/cairo-clip.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit 0e7df34e07d7816b29c1ac1f67608b87c5e0efc2
Author: Mathias Hasselmann <mathias@pergamaunz.(none)>
Date:   Tue Mar 13 23:38:20 2007 +0100

    Make region of cairo_clip_t static

 src/cairo-clip-private.h |    3 +-
 src/cairo-clip.c         |   87 ++++++++++++++++++++++++----------------------
 src/cairo-surface.c      |    4 +-
 3 files changed, 49 insertions(+), 45 deletions(-)

commit ced7b4a4ab4b5a8d639bfca0dd5db38f1ae4825d
Author: Mathias Hasselmann <mathias@pergamaunz.(none)>
Date:   Tue Mar 13 22:34:23 2007 +0100

    Make pixman_region_{init,uninit} public

 pixman/src/pixman.h    |    5 +++++
 pixman/src/pixregion.c |   18 ++++++------------
 2 files changed, 11 insertions(+), 12 deletions(-)

commit 4d9065fcebbaf857d8d5fe49bcbb33f270c0bf26
Author: Mathias Hasselmann <mathias@pergamaunz.(none)>
Date:   Tue Mar 13 21:51:46 2007 +0100

    Move struct pixman_region16 to pixman.h

 pixman/src/pixman.h       |    7 ++++++-
 pixman/src/pixregionint.h |    7 +------
 2 files changed, 7 insertions(+), 7 deletions(-)

commit dce3e5e6b556b817bf95182122adbf6f816b71e9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 6 17:20:49 2007 -0400

    [TODO] Add 4945 Cairo doesn't support 8-bit pseudocolor visuals

 ROADMAP |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 8bb0e5939c0694e88ea9ede4137d7306a067bd17
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 28 20:27:29 2007 +0100

    _get_bitmap_surface - check for calloc failure

 src/cairo-ft-font.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit b95577a931645b3013d5acaa5b1bd2d892c3932f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 28 17:58:31 2007 +0100

    Protect boilerplate_xlib_synchronize from alloc failure.
    
    Don't call XDestroyImage on a NULL image.

 boilerplate/cairo-boilerplate.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 2a74fd5c7ff21f27013f709dc626be8087cb6a10
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 28 15:50:12 2007 +0100

    Propagate one error return through pdf.

 src/cairo-pdf-surface.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit a2a8f2ce7a0a9bcef7a4a29624725a77c2abe95a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 5 20:03:51 2007 -0400

    [ROADMAP] Move David Turner's cairo-ft rewrite to 1.6.

 ROADMAP |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 94460a9790ece7a436d6681ab41d7b2365f0775f
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 5 16:35:03 2007 -0700

    ROADMAP/TODO: Update with 1.4.4 and 1.6 items from recent meeting

 ROADMAP |  164 ++++++++++++++++++++++++++-----------------
 TODO    |  236 ++++++++++++++++++++++----------------------------------------
 2 files changed, 183 insertions(+), 217 deletions(-)

commit d801aa59f84d95568e36d02a0ecf3544b9914187
Author: Robert O'Callahan <roc@ocallahan.org>
Date:   Fri Apr 6 00:00:33 2007 +0100

    [quartz] fix floating point precision issue (#10531)
    
    This ensures that error due to double-to-float conversion
    does not accumulate; the position of any glyph will be off by
    at most one double-to-float conversion error.

 src/cairo-quartz-surface.c |   14 ++++++++------
 1 files changed, 8 insertions(+), 6 deletions(-)

commit 106f8590457a7ebb5335d67f16277e8d5a6b04a8
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Apr 4 15:59:50 2007 -0700

    Move misplaced CLEANUP_FONT label to avoid crash.
    
    Previously, a failure in _cairo_win32_scaled_font_init_glyph_path leading
    to the CLEANUP_FONT label would set the path into the glyph, then destroy
    the path, and return an error status, (which in turn would cause a double
    free when the glyph was destroyed).
    
    The double-free apparently leads to a crash in some cases, as described
    here:
    
    	 SVG/Cairo related crash when opening specific webpage
    	https://bugzilla.mozilla.org/show_bug.cgi?id=376498
    
    This should eliminate the double-free, but does not address the original
    error case, (attempting to get a path from a bitmap font?).

 src/cairo-win32-font.c |    4 +---
 1 files changed, 1 insertions(+), 3 deletions(-)

commit 5c24711ee65cdb8ac0fdb7419e6466e2b7cb7d9e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 4 10:13:13 2007 +0100

    Restore gcov functionality
    
    Add -lgcov to the shared library else the test programs fail to link.
    Add a couple of lcov convenience targets to generate the coverage reports.

 Makefile.am             |   13 ++++++++++++-
 boilerplate/Makefile.am |    2 +-
 configure.in            |   14 ++++++++++++--
 pixman/src/Makefile.am  |    5 ++++-
 src/Makefile.am         |    2 +-
 test/Makefile.am        |    5 +++--
 6 files changed, 33 insertions(+), 8 deletions(-)

commit 59e5189818321c8a62ad107548facbcfce9e517a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 3 20:46:14 2007 -0400

    [Makefile.am] Distribute BIBLIOGRAPHY
    Also include all automatically distributed CAPITAL files in there,
    to remove any doubts.

 Makefile.am |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit a1287e483ce8efcf3f1eca97bdaaccac2393a1bf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 3 20:30:30 2007 -0400

    [pixman/src/check-config.sh] Test that all source files #include <config.h>
    as their first include.

 pixman/src/Makefile.am     |    3 +++
 pixman/src/check-config.sh |   17 +++++++++++++++++
 src/check-cairoint.sh      |    2 +-
 3 files changed, 21 insertions(+), 1 deletions(-)

commit 8fbf50d31da9e13f1e55c7ee19586b7c394684ba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 3 20:25:30 2007 -0400

    [src] Make sure all source files #include "cairoint.h" as their first include
    
    This is necessary to avoid many portability problems as cairoint.h includes
    config.h.  Without a test, we will regress again, hence add it.
    
    The inclusion idiom for cairo now is:
    
    	#include "cairoint.h"
    
    	#include "cairo-something.h"
    	#include "cairo-anotherthing-private.h"
    
    	#include <some-library.h>
    	#include <other-library/other-file.h>
    
    Moreover, some standard headers files are included from cairoint.h and need
    not be included again.

 src/cairo-arc.c              |    2 ++
 src/cairo-atsui-font.c       |    5 ++---
 src/cairo-beos-surface.cpp   |    7 ++++---
 src/cairo-directfb-surface.c |   10 +++-------
 src/cairo-freelist.c         |    5 +++--
 src/cairo-ft-font.c          |    4 +++-
 src/cairo-gstate.c           |    2 --
 src/cairo-matrix.c           |    1 -
 src/cairo-os2-surface.c      |   11 ++++++-----
 src/cairo-output-stream.c    |    7 ++++---
 src/cairo-path-fixed.c       |    1 -
 src/cairo-path.c             |    2 ++
 src/cairo-png.c              |    3 ++-
 src/cairo-polygon.c          |    1 -
 src/cairo-quartz-surface.c   |    4 ++--
 src/cairo-region.c           |    2 +-
 src/cairo-skiplist.c         |    6 +-----
 src/cairo-surface-fallback.c |    2 ++
 src/cairo-surface.c          |    3 +--
 src/cairo-truetype-subset.c  |    2 +-
 src/cairo-unicode.c          |    4 +---
 src/cairo-win32-font.c       |    3 +--
 src/cairo-win32-surface.c    |   10 +++++-----
 src/cairo-xlib-screen.c      |    4 ++--
 src/cairoint.h               |    1 +
 src/check-cairoint.sh        |    2 +-
 src/test-fallback-surface.c  |    4 ++--
 src/test-meta-surface.c      |    4 ++--
 src/test-paginated-surface.c |    4 ++--
 29 files changed, 56 insertions(+), 60 deletions(-)

commit ffc7d06da0f97390025a510b9532e4a64e9230f4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 3 20:22:44 2007 -0400

    [src/check-cairoint.h] Test to check that all source files #include "cairoint.h"
    
    as their first include.

 src/Makefile.am       |    2 +-
 src/check-cairoint.sh |   17 +++++++++++++++++
 2 files changed, 18 insertions(+), 1 deletions(-)

commit 3646839060de7ab51c805bf5614fc3d1ea8b7fc3
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Wed Apr 4 01:16:30 2007 +0100

    [boilerplate] split quartz out to avoid symbol clash.
    
    Quartz and Xlib both define Picture and Cursor, and clashed in
    cairo-boilerplate.c. Splitting quartz out allows a single mac
    build with --enable-quartz --enable-atsui.

 boilerplate/Makefile.am                 |    1 +
 boilerplate/cairo-boilerplate-private.h |   45 +++++++++++++++++++++
 boilerplate/cairo-boilerplate.c         |   44 ++-------------------
 boilerplate/cairo-quartz-boilerplate.c  |   64 +++++++++++++++++++++++++++++++
 4 files changed, 115 insertions(+), 39 deletions(-)

commit 174ebc43fe84854876d642e67fc3a442d280b59e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 3 20:01:32 2007 -0400

    [pixman] Make sure all source files include config.h
    as their first include.

 pixman/src/fbcompose.c   |    2 ++
 pixman/src/fbpict.c      |    1 +
 pixman/src/fbtrap.c      |    4 ++++
 pixman/src/icblt.c       |    4 ++++
 pixman/src/icbltone.c    |    4 ++++
 pixman/src/iccolor.c     |    4 ++++
 pixman/src/icformat.c    |    4 ++++
 pixman/src/icpixels.c    |    4 ++++
 pixman/src/icrect.c      |    4 ++++
 pixman/src/icstipple.c   |    4 ++++
 pixman/src/ictransform.c |    4 ++++
 pixman/src/ictrap.c      |    4 ++++
 pixman/src/ictri.c       |    4 ++++
 pixman/src/icutil.c      |    4 ++++
 pixman/src/renderedge.c  |    4 ++++
 15 files changed, 55 insertions(+), 0 deletions(-)

commit 208c32b245d7f50e1e9d71695269128b28a675fc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 3 19:56:29 2007 -0400

    [cairoint.h] Remove inline definition for MS compilers
    
    Such things should go to config.h.  For one thing, cairoint.h is not
    included in pixman.

 src/cairoint.h |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit 313a6f732112ca88fa4d590a604ce8219065655c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 3 19:53:28 2007 -0400

    [pixman] Cleanup inline mess (#10150)
    
    Simply use "inline" instead of "INLINE" or "__inline__" and let
    configure figure out what to use.

 pixman/src/fbcompose.c |    8 ++++----
 pixman/src/fbedge.c    |    8 ++++++--
 pixman/src/fbmmx.c     |   45 +++++++++++++++++++++++----------------------
 pixman/src/fbpict.h    |    6 ------
 pixman/src/icimage.c   |    8 ++++++--
 pixman/src/icint.h     |   12 +-----------
 pixman/src/pixregion.c |   14 ++++++--------
 7 files changed, 46 insertions(+), 55 deletions(-)

commit 88dc0c5f19475888c19db437661b290f3a8902f8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 3 19:26:18 2007 -0400

    Make sure all nil objects start with _cairo_
    
    Previously, the convention was that static ones started with cairo_, but
    renamed to start with _cairo_ when they were needed from other files and
    became cairo_private instead of static...
    
    This is error prune indeed, and two symbols were already violating.  Now
    all nil objects start with _cairo_.

 src/cairo-base85-stream.c         |    2 +-
 src/cairo-clip-private.h          |    2 +-
 src/cairo-deflate-stream.c        |    4 ++--
 src/cairo-font-options.c          |   22 +++++++++++-----------
 src/cairo-output-stream-private.h |    2 +-
 src/cairo-output-stream.c         |   20 ++++++++++----------
 src/cairo-pattern.c               |   14 +++++++-------
 src/cairo-ps-surface.c            |    4 ++--
 src/cairo.c                       |    8 ++++----
 src/cairoint.h                    |    2 +-
 10 files changed, 40 insertions(+), 40 deletions(-)

commit 114be945db6c02aeb60cf1123b43680bd12cccdb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 3 16:47:39 2007 -0400

    [test] Add svg2pdf

 test/Makefile.am |    6 ++++
 test/svg2pdf.c   |   85 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 91 insertions(+), 0 deletions(-)

commit b121468f14a6a05a823e06cf7c51caaa1e342556
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 3 16:27:50 2007 -0400

    [configure.in] Bump version up to 1.4.3, oops!
    Supposed to be done after 1.4.2 was out, but apparently didn't happen.

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 9710c48df31c66d8931a75b6578c7c861d497baa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 3 16:26:48 2007 -0400

    [doc] Update Headers.mk

 doc/public/Headers.mk |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 040c68cb2ca6c893d9ba11291c21b1cf84fec980
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 3 16:23:35 2007 -0400

    [test] Make pdf2svg build (and distributed)

 test/Makefile.am |    9 ++++++++-
 1 files changed, 8 insertions(+), 1 deletions(-)

commit 17f5706d1730662bce0cd49f60cb150773fac051
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 3 16:04:04 2007 -0400

    [pdiff] Make stdint.h inclusion portable (#10441)
    by copying magic bits from cairo-wideint-private.h.

 test/pdiff/pdiff.c |   37 ++++++++++++++++++++++++++++++++++++-
 1 files changed, 36 insertions(+), 1 deletions(-)

commit c2b1908f9b0d8c59abf79c3462471d1c3960b153
Author: Benjamin Berg <benjamin@sipsolutions.net>
Date:   Tue Apr 3 15:46:51 2007 -0400

    Fix typo in cairo_arc_negative() docs (#10497)

 src/cairo.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 814295f5fad43ec1d8b18fac045e3c0d27ec7c29
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 3 15:37:40 2007 -0400

    [autogen.sh] Add --enable-test-surfaces to configure flags
    
    Also remove --enable-maintainer-mode since we removed AM_MAINTAINER_MODE
    from configure.in in b0d05f7421c457120b9d86a83c4935c67b217fab.

 autogen.sh |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

commit 38c9909e2948f089bbec89e2d43b0e6f930c1ab1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 3 15:34:30 2007 -0400

    [autogen.sh] Borrow version comparison from GNOME autogen.sh (#9566)
    
    Our previous version check code was thinking that 1.10 is older than 1.7

 autogen.sh |  186 +++++++++++++++++++++++++++++++-----------------------------
 1 files changed, 97 insertions(+), 89 deletions(-)

commit 00cc44373705665824d53c8ebde5df397b834e41
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Mon Mar 26 21:44:33 2007 +0100

    [test/degenerate-path] remove quartz reference image
    
    The reference image is no longer the correct size, so isn't
    providing a comparison at all. In the absence of a better
    replacement, removing it at least gives us diffs.

 test/Makefile.am                          |    1 -
 test/degenerate-path-quartz-rgb24-ref.png |  Bin 188 -> 0 bytes
 2 files changed, 0 insertions(+), 1 deletions(-)

commit 256f3e09a8a0d152a33df00604bf2245604b72bc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 26 10:33:32 2007 +0100

    Destroy the current pattern before replacing with cairo_set_source().
    
    Frequently cairo_set_source_rgb[a]() is used to replace the current
    solid-pattern source with a new one of a different colour. The current
    pattern is very likely to be unshared and unmodified and so it is likely
    just to be immediately freed [or rather simply moved to recently freed
    cache]. However as the last active pattern it is likely to cache-warm and
    suitable to satisfy the forthcoming allocation. So by setting the current
    pattern to 'none' we can move the pattern to the freed list before we
    create the new pattern and hopefully immediately reuse it.

 src/cairo-pattern.c |   10 ++++++++++
 src/cairo.c         |    9 +++++++++
 src/cairoint.h      |    1 +
 3 files changed, 20 insertions(+), 0 deletions(-)

commit 38442d4948e0a93f06cd86e6841729bc3f25ed3b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 26 10:12:46 2007 +0100

    Back out the solid-pattern-cache from 9b53bc7c6585db7ae647bb992fb9817d7bd75b38.
    
    Unfortunately one cannot cache live patterns and return a fresh reference
    instead of creating new ones as patterns can be modified by the user and
    so cannot be transparently shared between different users. However,
    solid colour allocation is still a frequent operation, so we maintain a
    small cache of recently freed patterns to reduce the malloc pressure.

 src/cairo-pattern.c |  100 ++++++++++++++++++++++++--------------------------
 1 files changed, 48 insertions(+), 52 deletions(-)

commit c8e37af4b06fffe1aa1a1c3d2cd6481cc2cf8938
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sun Mar 25 23:31:40 2007 +0100

    [quartz] fix order of fields in matrix conversion
    
    There was a typo flipping the xy and yx fields when a
    cairo matrix was converted to a quartz matrix.

 src/cairo-quartz-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit d2cdd5eba801fc5f696d1095f237ae53c54b4e2a
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sat Mar 24 13:25:03 2007 +0000

    [atsui] fix scaling  of glyph surfaces (#9568)
    
    Atsui glyph surface were clipped incorrectly when the text is scaled,
    visible in the text-pattern test.

 src/cairo-atsui-font.c |   10 ++++++++--
 1 files changed, 8 insertions(+), 2 deletions(-)

commit 2efaf3a7a47a281ca02009d371cd7a06a8a4f282
Merge: abac4d2 25ddc08
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Sat Mar 24 00:29:04 2007 +0100

    Merge branch 'master' of git+ssh://hasselmm@git.freedesktop.org/git/cairo

commit abac4d251dd02151dced296afa9d6e1b383868ee
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Fri Mar 23 23:36:15 2007 +0100

    [cairo-perf] Use full 64 bit of the clock cycle counters to avoid overflows

 perf/cairo-perf-posix.c |   22 ++++++++++++++--------
 1 files changed, 14 insertions(+), 8 deletions(-)

commit 25ddc0800490ca0222668e389412f92ccfdab91c
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Mar 23 23:19:30 2007 +1030

    PS: Remove unused variable

 src/cairo-ps-surface.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit e9a26966484171f94df41bd3abc83aae22682caa
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Fri Mar 23 23:08:46 2007 +1030

    PDF: Use the TJ operator to show glyphs

 src/cairo-pdf-surface.c                 |  125 ++++++++++++++++++++++++++-----
 src/cairo-ps-surface.c                  |   11 ++-
 src/cairo-scaled-font-subsets-private.h |   25 ++++++-
 src/cairo-scaled-font-subsets.c         |   83 ++++++++++++++++-----
 src/cairo-svg-surface.c                 |    7 +-
 5 files changed, 201 insertions(+), 50 deletions(-)

commit 820341b4c503fbd5ca3b8f6c3e5ff6eca5562b98
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Mar 21 15:44:18 2007 -0400

    [test/nil-surface] Test that cairo_get_target() returns non-NULL

 test/nil-surface.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit ef8515b4a6b468e589639e794a959cb37d592359
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Mar 21 15:29:18 2007 -0400

    cairo_push/pop_group(), bail out if cairo_t is in error status
    
    Fixes the new test added to test/nil-surface to not crash

 src/cairo.c |    9 ++++++---
 1 files changed, 6 insertions(+), 3 deletions(-)

commit 52341f7e855c93fc8e58895c3a318c43c3d58474
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Mar 21 15:21:05 2007 -0400

    [test/nil-surface] Test cairo_create(NULL).  Crashing in cairo_push_group!

 test/nil-surface.c |   19 +++++++++++++++++++
 1 files changed, 19 insertions(+), 0 deletions(-)

commit 9cea8a4bb26f7de2ac56e318c72e7d048b8b6c0f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Mar 21 15:03:02 2007 -0400

    [cairo.c] Don't access gstate members directly

 src/cairo-gstate.c |   18 ++++++++++++++++++
 src/cairo.c        |   23 +++++++++++------------
 src/cairoint.h     |    3 +++
 3 files changed, 32 insertions(+), 12 deletions(-)

commit 39ae64ff0391c40077b63d214727ca0c25e03e37
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Mar 21 14:56:34 2007 -0400

    [cairo-path] Don't access gstate members directly

 src/cairo-path.c |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

commit bd275c19782700f2cfc6905f348e4d4b3f15d311
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Mar 21 12:34:37 2007 -0400

    [cairo-pattern] Make sure cached solid patterns are not put in error status

 src/cairo-pattern.c |   19 +++++++++++++++----
 1 files changed, 15 insertions(+), 4 deletions(-)

commit e76d3cfa4f06ba813528a018fa77ba4d210a44e3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Mar 21 12:33:31 2007 -0400

    [cairo-gstate] Make sure gstate->next is initialized

 src/cairo-gstate.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 1469ea22ba659ba7afa6892e9b6b2a3f26d0dddb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Mar 21 11:22:33 2007 -0400

    [cairo-gstate] Move save/restore logic into gstate instead of cairo_t
    by adding _cairo_gstate_save/restore().  This is in preparation for
    adding copy-on-write behavior to gstate.

 src/cairo-gstate.c |   53 ++++++++++++++++++++++++++++++++++++++++++++++++++-
 src/cairo.c        |   32 +++++++++---------------------
 src/cairoint.h     |    8 +++---
 3 files changed, 65 insertions(+), 28 deletions(-)

commit 5f83a1b542a1932a59299a45f36dff22268dca14
Author: Jeff Smith <whydoubt@yahoo.com>
Date:   Wed Mar 21 10:41:03 2007 -0400

    [cairo-output-stream] Remove use of strtol

 src/cairo-output-stream.c |    8 +++-----
 1 files changed, 3 insertions(+), 5 deletions(-)

commit bba7169805cec96b442d15241b0fdf8c38d0cd0e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 20 22:55:02 2007 -0400

    Fix file permissions again
    
    Where do these a+x attributes coming from every once in a while?

 0 files changed, 0 insertions(+), 0 deletions(-)

commit ad51ee5aa0d1fc03c4ebe7f0454949995420a710
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 20 18:59:19 2007 -0400

    Define and use ARRAY_LEN

 src/cairo-arc.c             |    2 +-
 src/cairo-atsui-font.c      |    6 ++----
 src/cairo-bentley-ottmann.c |    2 +-
 src/cairo-cff-subset.c      |    8 +++-----
 src/cairo-hash.c            |    2 +-
 src/cairo-pattern.c         |    2 +-
 src/cairo-polygon.c         |    2 +-
 src/cairo-spline.c          |    2 +-
 src/cairo-surface.c         |    2 +-
 src/cairo-svg-surface.c     |    2 +-
 src/cairo-traps.c           |    2 +-
 src/cairo-truetype-subset.c |    8 +++-----
 src/cairoint.h              |    3 +++
 13 files changed, 20 insertions(+), 23 deletions(-)

commit 1de12714a9623e66309279eb9edaf6053fd92c56
Author: Chris Wilson <chris at chris-wilson.co.uk>
Date:   Wed Mar 14 01:31:58 2007 +0000

    [cairo-surface] Use a stack buffer for small numbers of rectangles

 src/cairo-surface.c |   13 +++++++++----
 1 files changed, 9 insertions(+), 4 deletions(-)

commit 9b53bc7c6585db7ae647bb992fb9817d7bd75b38
Author: Chris Wilson <chris at chris-wilson.co.uk>
Date:   Tue Mar 13 22:51:12 2007 +0000

    Cache solid patterns
    
    We use a small cache of size 16 for patterns created from solid colors,
    e.g. cairo_set_source_rgb(). This helps with toolkits that draw many
    widgets using the same colour scheme.
    
    The cache uses a static index variable, which itself acts like a cache
    of size 1, remembering the most recently used colour. So repeated
    lookups for the same colour hit immediately. If that fails, the cache
    is searched linearly, and if that fails too, a new pattern is created
    and a random member of the cache is evicted.

 src/cairo-color.c                 |    7 +++
 src/cairo-debug.c                 |    2 +
 src/cairo-mutex-list.h            |    2 +
 src/cairo-pattern.c               |   63 +++++++++++++++++++++++++++-
 src/cairoint.h                    |    7 +++
 test/Makefile.am                  |    1 +
 test/solid-pattern-cache-stress.c |   83 +++++++++++++++++++++++++++++++++++++
 7 files changed, 163 insertions(+), 2 deletions(-)

commit 39679b1b21b07b0fbc05ee21745f384a123ba8da
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 20 18:01:41 2007 -0400

    [cairo-path-fixed] Fix "comparison between signed and unsigned" warnings

 src/cairo-path-fixed.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit c939421e16fcf098f8d6196e86705173be8e40fd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 20 08:54:01 2007 -0400

    Oops.  Remove cairo-mutex-private.h include from test surfaces
    as that file is included from cairoint.h now.

 src/test-fallback-surface.c  |    1 -
 src/test-meta-surface.c      |    1 -
 src/test-paginated-surface.c |    1 -
 3 files changed, 0 insertions(+), 3 deletions(-)

commit 0d3e886b182b55b147f2ba1a298c2f5ec8a53d87
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 20 08:49:28 2007 -0400

    Include cairo-mutex-private.h in test backends

 src/test-fallback-surface.c  |    1 +
 src/test-meta-surface.c      |    2 ++
 src/test-paginated-surface.c |    1 +
 3 files changed, 4 insertions(+), 0 deletions(-)

commit 0263f18f843175e478bd3a14e24445e31e7b0952
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 20 08:47:45 2007 -0400

    [configure.in] Define PIXMAN_CFLAGS, to pass -fno-strict-aliasing to pixman

 configure.in           |   10 +++++++---
 pixman/src/Makefile.am |    4 +---
 2 files changed, 8 insertions(+), 6 deletions(-)

commit 94c367f7d7637fc74ed6d1fbe13d73662c08246b
Merge: c4bd7cf d3177a6
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Tue Mar 20 13:33:50 2007 +0100

    Merge branch 'master' of git+ssh://hasselmm@git.freedesktop.org/git/cairo

commit c4bd7cf6f85770552c0b0284db219f27ffa702f2
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Tue Mar 20 13:32:33 2007 +0100

    Move declaration of cairo_mutex_t to cairo-mutex-private.h

 src/cairo-font.c              |    1 -
 src/cairo-ft-font.c           |    1 -
 src/cairo-mutex-private.h     |   53 ++++++++++++++++++++++++++++++++++-------
 src/cairo-mutex.c             |    6 +++-
 src/cairo-paginated-surface.c |    1 -
 src/cairo-pattern.c           |    1 -
 src/cairo-scaled-font.c       |    1 -
 src/cairo-surface.c           |    1 -
 src/cairo-xlib-screen.c       |    1 -
 src/cairoint.h                |   37 +---------------------------
 10 files changed, 49 insertions(+), 54 deletions(-)

commit 9c52a9e7d8a70d21ecdd4fa241fa2594361dd5df
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Tue Mar 20 13:05:48 2007 +0100

    Remove _global_image_glyph_cache_mutex which is not used anymore.

 src/cairo-mutex-list.h |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

commit d3177a68752ac2c8d20b1a8a3616298f04f31078
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 20 07:59:47 2007 -0400

    [cairo-mutex] Rename _xlib_screen_mutex to _cairo_xlib_screen_mutex

 src/cairo-mutex-list.h  |    2 +-
 src/cairo-xlib-screen.c |   20 ++++++++++----------
 2 files changed, 11 insertions(+), 11 deletions(-)

commit be52178443ffd19fc7848dfc78c477883ccb943b
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Tue Mar 20 10:11:14 2007 +0100

    Initialize mutexes at central location.
    
    All mutex declarations have been moved to cairo-mutex-list.h.
    This should avoid breaking of less frequently tested backends,
    when mutexes are introduced or when existing mutexes are renamed.
    
    Instead of initializing mutexes on library startup, mutexes are
    lazily initialized within the few entry points of now by calling
    CAIRO_MUTEX_INITIALIZE(). Currently only the OS/2 backend takes
    care about releasing global mutexes. Therefore there is no counter
    part of that macro for finalizing all global mutexes yet - but
    as cairo-backend-os2.c shows such a function would be quite
    easy to implement.

 src/Makefile.am               |    1 +
 src/cairo-font.c              |    7 +-
 src/cairo-ft-font.c           |    3 +-
 src/cairo-mutex-list.h        |   52 +++++++++++++++++
 src/cairo-mutex-private.h     |  123 +++++++++++++++++++++++++++++++++++++++++
 src/cairo-mutex.c             |   51 +++++++++++++++++
 src/cairo-os2-surface.c       |   45 +--------------
 src/cairo-paginated-surface.c |    1 +
 src/cairo-pattern.c           |    3 +
 src/cairo-scaled-font.c       |    3 +-
 src/cairo-surface.c           |    5 +-
 src/cairo-win32-font.c        |   10 ---
 src/cairo-win32-private.h     |    3 -
 src/cairo-win32-surface.c     |   65 ---------------------
 src/cairo-xlib-screen.c       |    3 +-
 src/cairoint.h                |   71 +++++-------------------
 16 files changed, 257 insertions(+), 189 deletions(-)

commit aba2b299db163d8a5b9d0a0214cd8a485fb87162
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Mar 19 23:50:13 2007 -0700

    boilerplate: Add EXTRA_LTLIBRARIES to CLEANFILES to allow make distcleancheck to pass.

 boilerplate/Makefile.am |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 2483542b74ac71851cc766de3468d0df833cdec2
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Mar 19 23:37:28 2007 -0700

    Add skew-extreme-ref.png to the tar file for the release.

 test/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit b91ff39214675faea5d3627ecf86a24aeb8b178f
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Mar 19 23:24:26 2007 -0700

    Increment cairo version to 1.4.2 (and libtool versioning to 13:1:11)

 configure.in |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 04b3de48f5269cae483b4af425402679a35e7d33
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Mar 19 23:22:39 2007 -0700

    NEWS: Add notes for cairo 1.4.2

 NEWS |  130 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 130 insertions(+), 0 deletions(-)

commit 1401f20eb91f34d992612162db0c9e04bd666114
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Mar 19 22:39:40 2007 -0700

    Temporarily remove extend-reflect from the list of tests.
    
    This test is known to sometimes cause an X server to enter a near-
    infinite loop. That's a reall unkind thing to inflict upon our
    users who are being nice enough to test cairo. Let's disable
    this test for the 1.4.2 release.

 test/Makefile.am |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 725a4de42dfaf0d9d98447c9fbefed99fbf99ac1
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Mar 19 16:50:55 2007 -0700

    Propagate a nil surface out of _cairo_surface_create_similar_scratch
    
    We detect an error in the surface before calling into private surface-modifying
    functions, (such as _cairo_surface_set_font_options), that don't have the
    nil-surface protection of public functions.
    
    This should fix the problem reported (again) in this bug report:
    
    	cairo crashes in cairo_create_simular if nil surface returned by other->backend->create_similar
    	https://bugs.freedesktop.org/show_bug.cgi?id=9844
    
    Though I haven't succeeded in replicating the bug yet, (perhaps a system
    difference in allowing writes to read-only memory or not, or something
    like that).

 src/cairo-surface.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit eb472a9d9cbaea754907a261b459693b9c27ac79
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Mar 19 13:13:41 2007 -0700

    xlib: Prefer surface->format over surface->visual for identifying masks
    
    The original test for 'if (surface->visual)' dates back to a very old
    assumption that if the xlib surface was created with an XRenderFormat
    that the surface->visual field would be set to NULL. This assumption
    was broken years ago with the following commit:
    
    	0c05b23b3165ec6908c28f56b3446cf43dff44a2
    
    This fixes the crash reported here:
    
    	BadMatch when running gnome-terminal with the murrine-0.51 gtk engine
    	https://bugs.freedesktop.org/show_bug.cgi?id=10250

 src/cairo-xlib-surface.c |   27 +++++++++++++++------------
 1 files changed, 15 insertions(+), 12 deletions(-)

commit d27c42cc3fcd4376fc69aa68d997e6077c3eca90
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Mar 19 17:42:06 2007 -0400

    [boilerplate] Don't build in make all

 boilerplate/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 12feb1f98627637bf83ba70f739bb5b2699085aa
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Mon Mar 19 18:22:44 2007 +0000

    [quartz] apply ctm to text (#9568)
    
    Applies the ctm to text output on the quartz surface. This corrects
    the text-pattern test, and also corrects the size of text when the
    ctm includes a scale.

 src/cairo-quartz-surface.c |    9 ++++++++-
 1 files changed, 8 insertions(+), 1 deletions(-)

commit 986b0ff83813b68a19490fe8629bfdaeed68cbe2
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Mon Mar 19 18:21:27 2007 +0000

    [atsui] make text_to_glyphs return positions in user units. (#9568)
    
    text_to_glyphs was returning positions in device units; correct this
    to use user units.

 src/cairo-atsui-font.c |   14 +++++++++++++-
 1 files changed, 13 insertions(+), 1 deletions(-)

commit 06a44839270354c7f74aa66352fb4234095dee4e
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sun Mar 18 20:20:11 2007 +0000

    [atsui] store sizes in the atsui font
    
    The ATSUStyle that we store in the font contains references to
    the size and font matrix; we need to store them in the font so that
    they are not released before the style.

 src/cairo-atsui-font.c |   16 +++++++++-------
 1 files changed, 9 insertions(+), 7 deletions(-)

commit 240479d10d3263719b0c8a4426fda088899551a2
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sun Mar 18 20:20:10 2007 +0000

    [atsui] refactor CreateSizedCopyOfStyle
    
    This is just to make it easier to use with passed-in matrices,
    which I'll make use of in a subsequent patch.

 src/cairo-atsui-font.c |   36 ++++++++++++++++++++----------------
 1 files changed, 20 insertions(+), 16 deletions(-)

commit 43577e26b4c2285499ebfddba6cfa62cbbb15feb
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Sun Mar 18 20:20:10 2007 +0000

    [atsui] remove the unused old_show_glyphs function.
    
    _cairo_atsui_old_show_glyphs was a relic of the old quartz
    surface and is no longer required.

 src/cairo-atsui-font.c |  180 ++++--------------------------------------------
 1 files changed, 15 insertions(+), 165 deletions(-)

commit 5aaf584bf44d762af5e486f21a037eb0cc6e1197
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Mar 16 17:45:31 2007 -0700

    XCB: Fix parameter-order confusion with xcb_create_pixmap
    
    This fixes mask-based clipping with the XCB backend, (which also makes
    the xcb backend pass all tests that the xlib backend passes).

 src/cairo-xcb-surface.c |    7 +++----
 1 files changed, 3 insertions(+), 4 deletions(-)

commit 6f96a5dd9954418b252ec45752dcf2c3b289fed4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Mar 16 18:21:36 2007 -0400

    [win32] Really return unhinted font metrics if metrics hinting is off

 src/cairo-win32-font.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 47e71eef5f903fa1a96d82a79a75d89c52032913
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Mar 16 17:56:53 2007 -0400

    [win32] Fix font descent computation

 src/cairo-win32-font.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit dd4601b0d03bba021b11dcf96e09584f40d1621f
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Fri Mar 16 20:43:29 2007 +0100

    [cairo-perf] Emit warning, if cairo-perf is not CPU bound
    
    	cairo-perf and the X server should be bound to CPUs (either the same
    	or separate) on SMP systems. Not doing so causes random results when
    	the X server is moved to or from cairo-perf's CPU during the
    	benchmarks.

 configure.in      |   11 +++++++++++
 perf/cairo-perf.c |   52 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 63 insertions(+), 0 deletions(-)

commit d02aa5b23eb6243b21697de203db0a5f1b49def9
Author: Gilles Dauphin <dauphin@enst.fr>
Date:   Fri Mar 16 10:35:23 2007 -0700

    Don't use unsupported visibily attribute hidden on Solaris
    
    Thanks to Thomas Klausner for passing the report along.
    This fixes the following bug report:
    
    	hidden attribute does not work with Solaris ld
    	https://bugs.freedesktop.org/show_bug.cgi?id=10227
    
    And as Behdad points out, an even better fix would be to
    move checks for supported visibility attribute to configure.

 pixman/src/pixman.h |    2 +-
 src/cairoint.h      |    4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 8236282c5d58320173b17659e488384e710d0ea7
Author: Thomas Klausner <wiz@danbala.tuwien.ac.at>
Date:   Fri Mar 16 10:04:56 2007 -0700

    Use "find !" rather than "find -not" for better portability
    
    The man page for GNU find says:
           -not expr
                  Same as ! expr, but not POSIX compliant.
    
    And actually, on e.g. NetBSD, "-not" is not supported.
    
    This resolved the following bug:
    
    	https://bugs.freedesktop.org/show_bug.cgi?id=10226

 RELEASING            |    2 +-
 src/check-headers.sh |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 332c38b6c34bde4829607e534f39522f8001acf7
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 15 23:25:06 2007 -0700

    Avoid pulling in -lz for the ps backend.
    
    Quite some time ago we switched from using deflate-based compression to LZW
    for the ps backend, (which allows it to target PostScript Level 2 instead of
    PostScript Level 3). Now, we finally drop the fact that the ps backend was
    still requiring zlib in order to build.

 configure.in |    6 +-----
 1 files changed, 1 insertions(+), 5 deletions(-)

commit 2242550b489472d4d9b6505fd3db89541e101425
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 15 23:17:19 2007 -0700

    Make compilation of cairo-deflate-stream.c conditional on compilation of PDF backend.
    
    Otherwise we risk pulling in an otherwise-unneeded dependency on zlib.
    
    This fixes the bug reported here:
    
    	Without PDF surface backend we don't need cairo-deflate-stream
    	https://bugs.freedesktop.org/show_bug.cgi?id=10202

 src/Makefile.am |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 1234064fa4aa20d0875473709d2fa74600af485b
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 15 22:38:42 2007 -0700

    Allow NULL pointers for functions that accept pointers for multiple return values.
    
    When a single function accepts pointers for multiple return values,
    the convention is that it's legal for the user to pass NULL for
    those pointers in case the user is only interested in some subset
    of the values.
    
    This was already properly implemented for functions such as
    cairo_pattern_get_rgba, etc.
    
    Here we fix four functions to follow the same convention:
    
    	cairo_stroke_extents
    	cairo_fill_extents
    	cairo_clip_extents
    	cairo_surface_get_device_offset

 src/cairo-gstate.c  |   44 +++++++++++++++++++++++++++++++++-----------
 src/cairo-surface.c |    6 ++++--
 2 files changed, 37 insertions(+), 13 deletions(-)

commit 133183d858aa632da3cec2a789dcc1e1203d778b
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 15 22:08:55 2007 -0700

    Fix cairo_stroke_extents and cairo_in_stroke to not crash with line width of 0.0
    
    This fixes the line-width-zero test case and the bug reported here:
    
    	Crash in cairo_stroke_extents whe line width is 0 and line cap is ROUND
    	(_cairo_pen_find_active_cw_vertex_index)
    	https://bugs.freedesktop.org/show_bug.cgi?id=10231

 src/cairo-gstate.c |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit 23caa0f43ba199371ab178cf3e827e449ee5935f
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Mar 15 21:58:20 2007 -0700

    Add line-width-zero test which currently crashes.
    
    The crash is described in this bug report:
    
    	Crash in cairo_stroke_extents whe line width is 0 and line cap is ROUND
    	(_cairo_pen_find_active_cw_vertex_index)
    	https://bugs.freedesktop.org/show_bug.cgi?id=10231

 test/.gitignore        |    1 +
 test/Makefile.am       |    1 +
 test/line-width-zero.c |   79 ++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 81 insertions(+), 0 deletions(-)

commit 562bd551bc5ca3f3858a66b9884a8525531153c8
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Thu Mar 15 12:47:41 2007 +0100

    [cairo-perf-diff] Update usage screen to mention --html.

 perf/cairo-perf-diff |   73 ++++++++++++++++++++++++++++---------------------
 1 files changed, 42 insertions(+), 31 deletions(-)

commit 6ff2439b33a9da9a517325bfd472e8cb1fdd4992
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Mar 14 16:33:01 2007 -0700

    Implement _cairo_traps_tessellate_triangle with _cairo_traps_tessellate_convex_quad
    
    The newly rewritten convex_quad code is actually simpler than the
    triangle code being replaced here. This also allows us to throw
    away the problematic _compute_x function which can't handle
    horizontal lines, (divide by zero). So the cairo world becomes a
    better place.

 src/cairo-traps.c |   89 +++++-----------------------------------------------
 1 files changed, 9 insertions(+), 80 deletions(-)

commit 53ae6ea957bac141c033f41276d93bab3a25009f
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Mar 14 16:30:48 2007 -0700

    Fix _cairo_traps_tessellate_convex_quad to handle a == b
    
    This case was found in an attempt to use the convex_quad function
    for tessellating triangles as well. Fortunately the fix is very
    easy.

 src/cairo-traps.c |   14 +++++++++++++-
 1 files changed, 13 insertions(+), 1 deletions(-)

commit 96d8f58daf279238d3a1dfcd4ed3710014e2aeea
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 13 20:17:22 2007 +0000

    Clear the XRender data on display closure.
    
    Use the new hook functions to register a callback for xlib to clear
    the private glyph data when the display is closed. In order to do this
    we need to reset the glyph cache inside the generic scaled font as well.

 src/cairo-xlib-surface.c |   25 +++++++++++++++++++++++++
 1 files changed, 25 insertions(+), 0 deletions(-)

commit 52405533b1b191ff98ef3cbc20eaf55e97c8049c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 13 20:42:09 2007 +0000

    Privately export a function to reset the scaled font's glyph caches.

 src/cairo-scaled-font.c |    9 +++++++++
 src/cairoint.h          |    3 +++
 2 files changed, 12 insertions(+), 0 deletions(-)

commit ad7698feb5f818ba2657b01bbc04f7fb537c1297
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 13 20:11:49 2007 +0000

    Introduce hooks for _cairo_xlib_close_display()
    
    This patch adds a simple hook data type for a notifier style callback
    and introduces two functions to manipulate a list of callbacks for
    cleaning up on display closure.

 src/cairo-xlib-private.h |   15 +++++
 src/cairo-xlib-screen.c  |  153 ++++++++++++++++++++++++++++++++++++----------
 2 files changed, 136 insertions(+), 32 deletions(-)

commit 3d3173d176bc959682a35674c31d3155e8642c41
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Mar 14 16:56:45 2007 -0700

    Add svg-specific reference image for radial-gradient test.
    
    This isn't strictly needed, (pdiff allows the test to pass without the
    image), but it sure runs faster this way.

 test/radial-gradient-svg-ref.png |  Bin 0 -> 91039 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)

commit 75201c12be74055d6209d48d1d698797665a70b4
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Mar 14 15:48:15 2007 -0700

    check-def.sh: Adjust test to exempt _cairo_test_* functions as well as _cairo_*_test_*
    
    This test started failing with the recent renaming of the following
    three functions, (before they had no cairo in their names so they
    were not getting picked up at all):
    
    _cairo_test_fallback_surface_create
    _cairo_test_meta_surface_create
    _cairo_test_paginated_surface_create_for_data
    
    With this change, the failure now goes away again.

 src/check-def.sh |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 5d23d0c90c31b233d5916c12eaf2a1dafc441243
Author: Carl Worth <cworth@cworth.org>
Date:   Wed Mar 14 15:23:01 2007 -0700

    Remove dead-code remnants of old tessellator

 src/cairo-traps.c |  372 -----------------------------------------------------
 1 files changed, 0 insertions(+), 372 deletions(-)

commit 1f3a5b4e1283cc0e55f7ea6baca6d0fe67fd14b1
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Mar 13 17:42:39 2007 -0700

    Fix bugs in _cairo_traps_tessellate_convex_quad
    
    The previous code was not handling all cases correctly, (yes,
    even something as simple as a quadrilateral can exhibit a
    remarkably large number of different cases when tessellation
    is attempted).
    
    This fix now introduces slope comparison which handles several
    cases that were mis-handled with the previous implementation which
    only used independent sorting of the X and Y values of the
    coordinates.
    
    This fixes the skew-extreme test case and the bug reported here:
    
    	Skew transforms were broken by the cairo update in December
    	https://bugzilla.mozilla.org/show_bug.cgi?id=373632

 src/cairo-traps.c |  101 +++++++++++++++++++++++++++++++----------------------
 1 files changed, 59 insertions(+), 42 deletions(-)

commit 0a6ae06c35d99e5e8397c58ee94291e7ee45eb4e
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Mar 13 17:39:48 2007 -0700

    Add new skew-extreme test case.
    
    This test currently fails, demonstrating the bug reported here:
    
    	Skew transforms were broken by the cairo update in December
    	https://bugzilla.mozilla.org/show_bug.cgi?id=373632

 test/.gitignore           |    1 +
 test/Makefile.am          |    1 +
 test/skew-extreme-ref.png |  Bin 0 -> 1012 bytes
 test/skew-extreme.c       |  126 +++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 128 insertions(+), 0 deletions(-)

commit 40b6d8842e1bcb5fbb3a7dffd0c05b7d3bf6cc6b
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Mar 13 13:07:42 2007 -0700

    Remove radial-gradient test from XFAIL list
    
    This test has not been failing since the fix in:
    
    	772edc9133d41dfd667ae5915dfa6ace0bcbfd0d
    
    So get rid of the '1 unexpected passes' complaint.

 test/Makefile.am       |    1 -
 test/radial-gradient.c |    3 +--
 2 files changed, 1 insertions(+), 3 deletions(-)

commit e803e2e69ba02a1db316c97eb9a8d386709380e2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Mar 14 17:23:57 2007 -0400

    [cairo-pattern] Add a cache of two color stops to cairo_gradient_pattern_t
    
    Most of gradients have only two color stops.  This avoids
    calling malloc() for those cases.

 src/cairo-pattern.c |   25 +++++++++++++++++++++----
 src/cairoint.h      |    1 +
 2 files changed, 22 insertions(+), 4 deletions(-)

commit 4514fdca1ba0f3922c2797744f4b0d42d37f8b42
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 20:49:52 2007 -0400

    [cairo-pattern] Grow color-stops array exponentially

 src/cairo-pattern.c |   61 ++++++++++++++++++++++++++++++++++++---------------
 src/cairoint.h      |    3 +-
 2 files changed, 45 insertions(+), 19 deletions(-)

commit e878f2259b2512f0411d698bf078fe91b7373246
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Wed Mar 14 11:42:41 2007 +0100

    Include pixman/src in cairo-perf hash

 perf/cairo-perf-diff |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 1a3f5df5ff4a80bb199e296491e3a5c9887fd4f7
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Wed Mar 14 21:42:50 2007 +0100

    Add index.html to .gitignore

 perf/.gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit c40be43aef735deba7605fde14300b7810701011
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Wed Mar 14 21:41:40 2007 +0100

    Transform the output of cairo-perf-diff into HTML

 perf/Makefile.am     |    8 ++++-
 perf/cairo-perf-diff |   20 ++++++++---
 perf/make-html.py    |   89 ++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 111 insertions(+), 6 deletions(-)

commit f1dd48475a34a038ebdb6426b04fc3728a0f0782
Author: Mathias Hasselmann <mathias.hasselmann@gmx.de>
Date:   Wed Mar 14 21:18:09 2007 +0100

    Improve CPU utilization when building cairo-perf

 perf/cairo-perf-diff |   11 +++++++++++
 1 files changed, 11 insertions(+), 0 deletions(-)

commit a7595c1295ba1a58b452b1df31d02776e5c17c0f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 17:21:19 2007 -0400

    [Makefile.am] Do not distribute cairo-features.h, Ouch!
    
    We were accidentally doing that by not marking it noinst.
    Moreover, no need to mark it as BUILD_SOURCES, since it's
    created by configure, not make.

 src/Makefile.am |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit f3c8d82d6d6a759364c4228d9b0badf846debcea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 16:51:34 2007 -0400

    [test] If backends are limited and all untested, pass the test
    This is necessary to ensure that limiting backends using
    CAIRO_TEST_TARGET does not increase the number of tests failing,
    which is a desirable invariant.

 test/cairo-test.c |   44 +++++++++++++++++++++++++++++---------------
 1 files changed, 29 insertions(+), 15 deletions(-)

commit 30b5f1baa8cbd01ac0a3ff376e294775b600b4e4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 16:50:10 2007 -0400

    [test] In pattern-getters test, log what went wrong

 test/pattern-getters.c |   14 +++++++++++---
 1 files changed, 11 insertions(+), 3 deletions(-)

commit 9267cb042418250614db83bd3b2dcb0e7615af79
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 16:49:42 2007 -0400

    [cairo-pattern] Use _cairo_color_double_to_short() to fix color conversion

 src/cairo-pattern.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 60502ba3481ea751df6f379e1c38850172826695
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 16:13:35 2007 -0400

    [cairo-color] Add cairo-private _cairo_color_double_to_short()

 src/cairo-color.c |   11 ++++++-----
 src/cairoint.h    |    3 +++
 2 files changed, 9 insertions(+), 5 deletions(-)

commit 956fdfbb62ac82da1e6fbd467c50e449ec621937
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 06:30:11 2007 -0400

    [cairo-pattern] Fix color conversion from short to double
    We should divide by 65535.0, not 65536.0.

 src/cairo-pattern.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 20304908626f0af40aeda145b2967a40151728c5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 06:20:21 2007 -0400

    [cairo-pattern] Add XXX note

 src/cairo-pattern.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit deed0f473400bc2e91dde8bad2537d499a5941ea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 06:09:09 2007 -0400

    [polygon,spline,traps] Avoid free(NULL)

 src/cairo-polygon.c |    2 +-
 src/cairo-spline.c  |    2 +-
 src/cairo-traps.c   |    2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit b706bd9b38d505d2b09e932a8f362fac76ef64de
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 06:07:03 2007 -0400

    [cairo-polygon] Add a cache of eight edges to cairo_polygon_t
    
    Many, if not most, of polygons have very few edges.  This avoids
    calling malloc() for those cases.

 src/cairo-polygon.c |   30 +++++++++++++++++++++++-------
 src/cairoint.h      |    1 +
 2 files changed, 24 insertions(+), 7 deletions(-)

commit d8165d5424718404946c3a72d59396fc604d1bce
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 05:59:33 2007 -0400

    [cairo-spline] Fix typo in comment

 src/cairo-spline.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit cca7e3fec3a3ec68f812690aa7efafa7dc237849
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 05:56:38 2007 -0400

    [cairo_polygon_t] Change has_current_point from int to cairo_bool_t

 src/cairo-polygon.c |    8 ++++----
 src/cairoint.h      |    2 +-
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 81e15a454b188aa8dd03eb599d0fb4af834695f1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 05:55:45 2007 -0400

    [cairo_polygon_t] Remove unused member 'closed'

 src/cairoint.h |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit 2bf4ce389d05e07698e03374c3d05436f5d2b2e4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 05:53:13 2007 -0400

    [cairo_polygon_t] Reorder struct members for clarity

 src/cairoint.h |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 3ce84390de8be69f369a4da80c3039b716ebb0e4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 05:51:39 2007 -0400

    [cairo-polygon] Clean-up realloc algorithm for clarity

 src/cairo-polygon.c |   18 +++++++-----------
 1 files changed, 7 insertions(+), 11 deletions(-)

commit 6976ab1392e0fd07a081e6d6056510070e1d6df9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Mar 9 16:23:35 2007 -0500

    [cairo-slope] Make comparison stable if both vectors are zero

 src/cairo-slope.c |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

commit 9eee167210b6cc562014652572872cf0a7ccb00e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 22:34:44 2007 -0500

    [cairo-spline] Add a cache of eight points to cairo_spline_t
    
    Most of the splines need not more than eight points.  This avoids
    calling malloc() for those cases, and eight-points take only 64 bytes.

 src/cairo-spline.c |   28 +++++++++++++++++++++++-----
 src/cairoint.h     |    1 +
 2 files changed, 24 insertions(+), 5 deletions(-)

commit 1e64ecf0758a208b469ae0a87a747b3a70c70ceb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 22:17:30 2007 -0500

    [cairo-spline] Clean-up realloc algorithm for clarity

 src/cairo-spline.c |   17 +++++++----------
 1 files changed, 7 insertions(+), 10 deletions(-)

commit cee687a33fb46b68d39bbfa64c44f0b28e10a9ee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 22:19:49 2007 -0500

    [cairo_traps_t] Reorder struct members for clarity

 src/cairoint.h |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 24aec99ffb9abce659146ea6ecbfb92856355855
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 20:32:36 2007 -0500

    [cairo-traps] Add a cache of one trapezoid to cairo_traps_t
    
    Seems like half the time, we just need one trap.  This avoids
    calling malloc() for those cases.

 src/cairo-traps.c |   30 +++++++++++++++++++++++-------
 src/cairoint.h    |    2 ++
 2 files changed, 25 insertions(+), 7 deletions(-)

commit 4737416c6e7829ec21230103a1b993d2bd08cc0e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 20:05:13 2007 -0500

    [cairo-traps] Clean-up realloc algorithm for clarity

 src/cairo-traps.c |   21 +++++++++------------
 1 files changed, 9 insertions(+), 12 deletions(-)

commit a9d8cb3e8aceb5831dfb3920df1502bf3b9450a6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 19:34:43 2007 -0500

    [cairo-traps] Use INT32_MIN/MAX instead of INT16_MIN/MAX << 16

 src/cairo-traps.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 5d28bf605fee84520e82818dd35cae8899ecc2ba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 19:22:57 2007 -0500

    [test] Make pdiff if necessary

 test/Makefile.am |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit e765ac745e0438296d2c852fd8231bd8f1fff034
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 18:13:55 2007 -0500

    [skiplist] Prefix symbols with _cairo

 src/cairo-bentley-ottmann.c  |   24 ++++++++++++------------
 src/cairo-skiplist-private.h |   22 +++++++++++-----------
 src/cairo-skiplist.c         |   20 ++++++++++----------
 3 files changed, 33 insertions(+), 33 deletions(-)

commit cd78da36f663b99c67d50dcd692cd7b67677c82a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 18:08:37 2007 -0500

    [test-surfaces] Prefix public symbols with _cairo

 boilerplate/cairo-boilerplate.c |    6 +++---
 src/test-fallback-surface.c     |    8 ++++----
 src/test-fallback-surface.h     |    2 +-
 src/test-meta-surface.c         |    2 +-
 src/test-meta-surface.h         |    2 +-
 src/test-paginated-surface.c    |    2 +-
 src/test-paginated-surface.h    |    2 +-
 7 files changed, 12 insertions(+), 12 deletions(-)

commit 8997b3a023b0edb8877675ce520fbb883d6fa188
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 17:54:00 2007 -0500

    [skiplist] Move static variable out of function
    
    Part of my secrect plan to make cairo compilable with:
    
    	#define static
    
    Useful for some weird debugging purposes.

 src/cairo-skiplist.c |   15 ++++++++-------
 1 files changed, 8 insertions(+), 7 deletions(-)

commit d40126f5aba481e4f4d9582cb5c37478f8ef37e7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 17:47:33 2007 -0500

    [cairo_t] Embed a gstate into cairo_t
    
    So we don't have to malloc the first gstate.

 src/cairo-gstate.c  |   44 ++------------------------------------------
 src/cairo-private.h |    1 +
 src/cairo.c         |   32 ++++++++++++++------------------
 src/cairoint.h      |   10 +++++++---
 4 files changed, 24 insertions(+), 63 deletions(-)

commit 01f9ee39feb6ca48b9e07fdec62d8ab1b94ab75d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 17:42:23 2007 -0500

    [cairo-clip] Make _cairo_clip_init tolerate NULL target
    
    (needed for upcoming patches.)

 src/cairo-clip.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit bc8987068d1849cf7c16c38132fcc3c8d3b4e12e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 17:15:35 2007 -0500

    [cairo_t] Make path an array of size one
    
    This is more natural since cr->path can be used as if it was a pointer.
    This means, for example, if we move on to making it a pointer, most of
    the code using it does not need any change.  So we get some level of
    encapsulation of implementation details, if you prefer the terminology :).

 src/cairo-private.h |    2 +-
 src/cairo.c         |   52 +++++++++++++++++++++++++-------------------------
 2 files changed, 27 insertions(+), 27 deletions(-)

commit 74e6a24e98baf70284b65d5f4ed41bdf7449d72d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 17:04:43 2007 -0500

    [Quartz] Don't include cairo-private.h

 src/cairo-quartz-surface.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 6bc543a0ebe4076da31bad4d3ccca4d713948587
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 16:58:18 2007 -0500

    [cairo_t] Move gstate pointer before cairo_path_fixed_t for better cache behavior

 src/cairo-private.h |    4 ++--
 src/cairo.c         |    4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 85aff353ca38e607599282bc955e467df82fa01b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 16:52:09 2007 -0500

    [cairo-path-fixed] Fine-tune size of buffer
    
    such that cairo_path_fixed_t fits in 512 bytes.

 src/cairo-path-fixed-private.h |   10 ++++++----
 src/cairo.c                    |    4 ++--
 2 files changed, 8 insertions(+), 6 deletions(-)

commit 1bd073a1a2951bbb09fdab6637baae0172a223f0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 16:23:49 2007 -0500

    [cairo-path-fixed] Merge op and arg bufs
    
    This means, we have to malloc only one buffer, not two.  Worst case
    is that one always draws curves, which fills the arg (point) buffer
    six times faster than op buffer.  But that's not a big deal since
    each op takes 1 byte, while each point takes 8 bytes.  So op space
    is cheap to spare, so to speak (about 10% memory waste at worst).

 src/cairo-path-fill.c          |   51 ++++----
 src/cairo-path-fixed-private.h |   22 +--
 src/cairo-path-fixed.c         |  313 ++++++++++++++--------------------------
 src/cairo.c                    |    3 +-
 4 files changed, 141 insertions(+), 248 deletions(-)

commit 5750d669af24fe1d2707326b9d74dfbb18adf636
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Mar 8 14:30:10 2007 -0500

    [cairo-path-fixed] Avoid malloc for small paths
    
    We do this by including an initial op and arg buf in cairo_path_fixed_t,
    so for small paths we don't have to alloc those buffers.
    
    The way this is done is a bit unusual.  Specifically, using an array of
    length one instead of a normal member:
    
    -    cairo_path_op_buf_t *op_buf_head;
    +    cairo_path_op_buf_t  op_buf_head[1];
    
    Has the advantage that read-only use of the buffers does not need any
    change as arrays act like pointers syntactically.  All manipulation code
    however needs to be updates, which the patch supposed does.  Still, there
    seems to be bugs remaining as cairo-perf quits with a Bad X Request error
    with this patch.

 src/cairo-path-fixed-private.h |    4 +-
 src/cairo-path-fixed.c         |   68 +++++++++++++++++++++++-----------------
 src/cairo.c                    |    4 +-
 3 files changed, 43 insertions(+), 33 deletions(-)

commit 994dd1a134484d7a1ee246906f21f02d916014a8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 04:56:54 2007 -0400

    [boilerplate] Prefer top_builddir to top_srcdir
    
    This may fix some build problems the Ubuntu guys are experiencing
    with out-of-tree builds.

 boilerplate/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 2894ed19a3acd955a5d0e2f5a231a6f1eee8ac06
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 13 04:55:18 2007 -0400

    [directfb,os2] #error if the backend is not compiled in, like others do

 src/cairo-directfb.h |    3 +++
 src/cairo-os2.h      |    2 ++
 2 files changed, 5 insertions(+), 0 deletions(-)

commit 073d06d4661feb16b15ece5282a5134e3f05d8e7
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Mar 13 18:45:38 2007 +1030

    Fix incorrect file permission in previous commit

 0 files changed, 0 insertions(+), 0 deletions(-)

commit a944f42b3d58825e8def292001e3738651b7584a
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Mar 13 18:35:59 2007 +1030

    Fix buffer overflow warning

 src/cairo-truetype-subset.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0f78eb8ccf60c60a4b66441958a7498dc9f7fa47
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Mar 12 16:24:58 2007 -0700

    perf/README: Add notes on using cairo-perf-diff

 perf/README |  105 ++++++++++++++++++++++++++++++++++++++++++++++++++++-------
 1 files changed, 93 insertions(+), 12 deletions(-)

commit 14cab8b020f429d346561d8ab70b154b2e3f0668
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Mar 11 21:55:19 2007 +0000

    Correct an off-by-one in the reflection of the convolution index.
    
    Currently the convolution code uses the formula 2*(N-1)-n to reflect the index
    n when n is greater than or equal to N.
    This is wrong as n=N -> 2*(N-1)-N = N-2 instead of N-1.
    
    Furthermore when the image is small, e.g. at the highest levels of the
    pyramid, this causes the code to index before the start of the array and
    causes valgrind to issue a warning.

 test/pdiff/lpyramid.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 789aada06b52e068662f0ac0f7a424c51bcba510
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Mar 11 20:55:26 2007 +0000

    Avoid the struct copy when source and destination are the same.
    
    On some architectures, gcc will emit a memcpy for structure copies which will
    produce a valgrind warning when the source and destination pointers are the
    same. Workaround this issue by explicitly checking the source and destination
    for inequality before doing the structure assignment.

 src/cairo-surface.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit ef284a2d6bbeae8711226f1f1f2cf4936f6937eb
Author: Carl Worth <cworth@cworth.org>
Date:   Fri Mar 9 13:36:03 2007 -0800

    Fix a LOCK vs. UNLOCK typo, (yes, I'm that stupid).
    
    Thanks to M.Drochner@fz-juelich.de for noticing the bug.
    
    This fixes bug #10235:
    
    	locking bug in cairo_ft_scaled_font_unlock_face()
    	http://bugs.freedesktop.org/show_bug.cgi?id=10235

 src/cairo-ft-font.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 772edc9133d41dfd667ae5915dfa6ace0bcbfd0d
Author: Emmanuel Pacaud <emmanuel.pacaud@free.fr>
Date:   Thu Mar 8 21:32:59 2007 +0100

    SVG: fix a radial gradient failure when using CAIRO_EXTEND_REFLECT.
    
    Assume from the beginning we're using a circle with a radius equal to
    2 * ( r1 - r0 ) when emulating CAIRO_EXTEND_REFLECT.

 src/cairo-svg-surface.c |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit c07867c545d7ab7c4a104944768f8a5b69ef9596
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Mar 7 15:55:02 2007 -0500

    [glitz] Mark some constant static structures as const

 src/cairo-glitz-surface.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 88632575bfae348a63e3e6228d5ceaa64715ae5f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Mar 7 15:54:20 2007 -0500

    [PS/PDF/SVG] Rename internal symbols to have _cairo_*_surface prefix

 src/cairo-pdf-surface.c |   74 +++++++++++++-------------
 src/cairo-ps-surface.c  |   52 +++++++++---------
 src/cairo-svg-surface.c |  136 +++++++++++++++++++++++-----------------------
 3 files changed, 131 insertions(+), 131 deletions(-)

commit 2cc1c73705d70f834b43996f70080860ac66e57d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Mar 7 15:53:27 2007 -0500

    [cairoint] Move endian-conversion routines into cairoint.h

 src/cairo-cff-subset.c      |   28 ----------------------------
 src/cairo-truetype-subset.c |   37 -------------------------------------
 src/cairoint.h              |   35 +++++++++++++++++++++++++++++++++++
 3 files changed, 35 insertions(+), 65 deletions(-)

commit 62e864e73cd1136b3c0e889dca43a1c0cc648b21
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Mar 7 15:51:35 2007 -0500

    [Type1] Add cairo-type1-private.h that Type1 fallback and subset code share

 doc/public/Headers.mk      |    1 +
 src/Makefile.am            |    1 +
 src/cairo-type1-fallback.c |   14 ++++--------
 src/cairo-type1-private.h  |   45 ++++++++++++++++++++++++++++++++++++++++++++
 src/cairo-type1-subset.c   |   18 ++++++----------
 5 files changed, 59 insertions(+), 20 deletions(-)

commit ef9799d596600aea334707d2ff00fcca82280d83
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Mar 7 15:49:51 2007 -0500

    [cosmetic] Remove static var from testing code in bentley-ottman.

 src/cairo-bentley-ottmann.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 92d331a23407c79d83bf0b2a7d003ba3525641d4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 7 13:31:54 2007 +0000

    Fix up the trivial leaks found by valgrind.

 perf/cairo-perf.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 7d972086d6ea6a6bfa47b5fb47f7a21be61e10e8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 7 12:19:44 2007 +0000

    Add valgrind/callgrind targets to Makefile.

 perf/Makefile.am |   20 ++++++++++++++++++++
 1 files changed, 20 insertions(+), 0 deletions(-)

commit 734d32ed7a50284fcc8984af67734bb306735691
Author: Emmanuel Pacaud <emmanuel.pacaud@lapp.in2p3.fr>
Date:   Tue Mar 6 15:49:53 2007 -0800

    SVG: Fix CAIRO_EXTEND_REFLECT for radial gradients.
    
    This patch also handles cases where r0 > r1, (one circle must still
    be wholly contained within the other as that's all SVG supports).
    
    This patch should also prevent a crash when r0 == r1.

 src/cairo-svg-surface.c |  337 ++++++++++++++++++++++++++++++++++++++---------
 1 files changed, 277 insertions(+), 60 deletions(-)

commit 32536a7b794c38ff1944b8af5e56e8962e76c311
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Tue Mar 6 23:45:23 2007 +0000

    [atsui] clean up warnings
    
    Just tidying up  warnings left behind by previous fixes.

 src/cairo-atsui-font.c |   13 ++++++-------
 1 files changed, 6 insertions(+), 7 deletions(-)

commit 9032bf4e2d3bffe84d11a771ba4072cdd8926b77
Author: Brian Ewins <Brian.Ewins@gmail.com>
Date:   Tue Mar 6 23:24:33 2007 +0000

    [quartz] rename remaining nquartz symbols to quartz.
    
    Renaming any nquartz symbols and files left to quartz.

 doc/public/Makefile.am     |    1 -
 src/Makefile.am            |    2 -
 src/cairo-quartz-private.h |    6 +-
 src/cairo-quartz-surface.c |  238 ++++++++++++++++++++++----------------------
 4 files changed, 122 insertions(+), 125 deletions(-)

commit b0d05f7421c457120b9d86a83c4935c67b217fab
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 6 14:26:51 2007 -0500

    [configure.in] Remove AM_MAINTAINER_MODE
    
    Maintainer-mode is known broken behavior and discouraged.  It has
    created headaches before when you run configure and all in a sudden
    editing Makefile.am's does not trigger a Makefile update...

 configure.in |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit f7beb220df74fef60c102fb5cc827fb2d3962296
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Mar 6 10:33:09 2007 -0500

    Remove extra word in docs

 src/cairo.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 81b98c93b68839d20d3033170eeb5026257d52b8
Author: Adrian Johnson <ajohnson@redneon.com>
Date:   Tue Mar 6 23:11:38 2007 +1030

    PDF: Set page group color space to DeviceRGB
    
    See http://lists.freedesktop.org/archives/cairo/2006-November/008551.html

 src/cairo-pdf-surface.c |    9 ++++++---
 1 files changed, 6 insertions(+), 3 deletions(-)

commit 8f0ff52cf74fe4b18c46f9a62689b991645295d0
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Mar 6 01:39:37 2007 -0800

    Increment version to 1.4.1 after making the 1.4.0 release

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)
